define("DS/DELPPWServices/LoggerService/LogManager",["UWA/Core","DS/Logger/Logger","DS/DELPPWLoggerModel/LoggerUtils"],function(d,a,c){var b=function b(i){var r={className:"LogPanel-Main-Container"},j="ShowLogPanel",m,l,s={},h=null,o=-1,p,n,g,f,q;p=function p(){var u=l.getComponent("WUXFrameWindowsManager"),v=u.getFrameWindow(i.getConfig().appContext),t=l.getComponent("Panel");h=new t({title:m.getNLSValue("LogPanel.Header"),position:{my:"top-right",at:"top-right"},immersiveFrame:v.getImmersiveFrame(),resizableFlag:true});h.close=function(){if(d.is(j)){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:j,cmdState:false})}n()}};n=function n(){if(d.is(h)&&h.visibleFlag){g()}if(d.is(h)){h.destroy();h=void 0}o=-1};g=function g(){if(d.is(h)){h.visibleFlag===true?h.hide():h.show()}},q=function q(){var u,A,y,w,t,x,z,v=null;if(d.is(l)&&d.is(h)&&h.visibleFlag){s={started:m.getNLSValue("LogPanel.Started"),completed:m.getNLSValue("LogPanel.Completed"),failed:m.getNLSValue("LogPanel.Failed"),timedout:m.getNLSValue("LogPanel.TimedOut")};v=l.getComponent("Element");y=c.getSize();if(y!==o){o=y;w=Math.min(y,1000);A="";for(u=y-1;u>=y-w;u--){x=c.getModel(u);z=x.get("action");t=m.getNLSValue("LogPanel.LineFormat",{index:x.get("index"),name:x.get("name"),action:s[z],time:x.get("time")});if(x.get("isRunning")){t="<b>"+t+"</b>"}A+="<div>"+t+"</div>"}h.content=new v("div",{html:A,"class":r.className})}}},f=function f(){l=i.getPlugins("UXComponentsPlugin").instance;m=i.getPlugins("ResourcePlugin").instance;if(d.is(h)){n()}else{p();q()}};c.setAddCallback(function(u,v,t){i.getMediator().notify("addLog",[u,v,t])});return{addLog:function k(){q()},onShowLogPanel:function e(){f()}}};return b});define("DS/DELPPWServices/Services",["UWA/Class"],function(b){var a="DS/DELPPWServices/",d={EventsService:a+"EventsService",ModelService:a+"ModelService",ConfigService:a+"ConfigService/ConfigService",ExternalService:a+"ExternalService/ExternalService",FilterService:a+"ExternalService/FilterService",LifecycleService:a+"ExternalService/LifecycleService",LoggerService:a+"LoggerService/LoggerService",LayoutService:a+"LayoutService/LayoutService"};var c=b.singleton({getMap:function e(){return d}});return c});define("DS/DELPPWServices/ConfigService/SecurityContext",["UWA/Core"],function(b){var a=function a(q,m,k){var o,l,j,f,d=[],g={};o=function o(){var u,t,r,s;u=widget.getValue("role");t=widget.getValue("organization");r=widget.getValue("collaborativeSpace");if(b.is(u)&&b.is(t)&&b.is(r)){s=u+"."+t+"."+r}return s};l=function l(s){var t,r;s.forEach(function(u){for(r=0;r<u.couples.length;r++){t=u.couples[r].role.name;t+="."+u.couples[r].organization.name;t+="."+u.name;d.push(t)}})};j=function j(){var r,s;r=o();if(b.is(r,"string")&&d.indexOf(r)!==-1){f(r)}else{if(b.is(g.preferredcredentials)&&Object.keys(g.preferredcredentials).length>0&&d.indexOf(r)!==-1){s=g.preferredcredentials.role.name;s+="."+g.preferredcredentials.organization.name;s+="."+g.preferredcredentials.collabspace.name;f(s)}else{f(d[0]);q.info("ConfigService",k.getNLSValue("SecurityContext.NoPreferredCredentials")+" "+d[0])}}};f=function f(t){var v,s,u,r=o();if(b.is(t,"string")&&t!==r){v=t.split(".")[1];widget.setValue("organization",v);s=t.split(".")[2];widget.setValue("collaborativeSpace",s);u=t.split(".")[0];widget.setValue("role",u);r=t}if(b.is(r,"string")){m.setSecurityContext(r)}};return{loadSecurityContexts:function c(t,s){var r=function r(u){if(b.is(u)&&u.collabspaces.length>0){g=u;l(g.collabspaces);j();t()}else{s()}};m.webServiceRequest({url:"modeler/pno/person?current=true&select=preferredcredentials&select=collabspaces",method:"GET",headers:{Accept:"application/json,text/javascript,*/*","Content-Type":"application/ds-json"},onComplete:r,onFailure:s,onTimeout:s})},getOrganization:function n(){var r=this,s=[];r.organizations=[];g.collabspaces.forEach(function(t){t.couples.forEach(function(u){if(s.indexOf(u.organization.name)===-1){s.push(u.organization.name);r.organizations.push({value:u.organization.name,label:u.organization.name})}})});return r.organizations},getCollabSpace:function i(u){var r=this,s=[],t;r.collabSpaces=[];g.collabspaces.forEach(function(v){for(t=0;t<v.couples.length;t++){if(u===v.couples[t].organization.name){if(s.indexOf(v.name)===-1){s.push(v.name);r.collabSpaces.push({value:v.name,label:v.name})}}}});return r.collabSpaces},getRole:function h(u,t){var r=this,s;r.roles=[];g.collabspaces.forEach(function(v){if(t===v.name){for(s=0;s<v.couples.length;s++){if(u===v.couples[s].organization.name){r.roles.push({value:v.couples[s].role.name,label:v.couples[s].role.nls})}}}});return r.roles},updateSecurityContext:function e(r){f(r)},isChanged:function p(){var s=false,r=m.getSecurityContext();if(b.is(r,"string")&&r.indexOf(o())===-1){s=true}return s}}};return a});define("DS/DELPPWServices/EventsService",["UWA/Core","UWA/Json",],function(c,a){var b=function(f){var j="EventsService",i=["addReference","addInstance","addConnection","addProductOrPart","addRootNode","removeRoot","addLog","LoadRecentContent","removeReference","removeInstance","removeConnection","changeReference","changeInstance","changeConnection","changeSortIndex","select","updateCrossHighlight","activeViewChange","startProgress","stopProgress","widgetLayoutChanged","startModule","stopModule","reset","refreshAll","RefreshCmd","refreshImpacted","endEdit","addToAuxiliaryView","toggleAuxPanel","dockingZoneToggle","SearchAndAddCommand","toggleCmdCheckHeaderState","ActionRemove","blocLayoutResizeEnd","AlternateBL","CapableResourceBL","refreshView","EditAttribute","reparentInstances","Hide","HideAll","Relations","CreateLink","CreateMultipleLinks","CreateLinkOrInstance","CreateScope","CreateInstance","InsertCmd","ManageInconsistentLinks","BIEssentialsCmd","DuplicateAdvCmd","Delete","DetachInstance","ToggleGraphView","ManageGraphViewCmdAvailablity","ShowGraphView","ProductFlowCmd","EGraphNodeSelect","Reframe","ReframeOn","ToggleOrientation","ToggleOverview","updateBIStatus","addBIModel","changeBIModel","resetBIModel","CreateScopeLink","DeleteScopeLink","ReconnectScope","ReviseAndReconnectScope","ExploreInWebApp","AssignProduct","UnassignProduct","expandAll","ShowLogPanel","CreateMfgItemStructure","UpdateMfgItemStructure","AttachDocumentCmd","SearchDocumentCmd","ManageDocumentsCmd","addDocumentConnections","changeDocument","manageDocCmdAvailability","ExportCSVCmd","EditViewPreferencesCmd","searchAndAddInstance","TreeViewPrefModified","CreateMfgItemAndScope","ReplaceByLatestRevision","ReplaceByExistingRevision","ReplaceByNewRevision","updateEffectivityColumns"],d=f.getMediator(),k=null,e=f.getConfig().resource.eventsMappingPath,g;g=function g(o,s){var n,r,p,q=c.is(s)?s.sourceModuleId:null,t=[];if(!c.is(k)){return t}r=k[o];if(c.is(r)&&c.is(q)){p=r[q];if(c.is(p)){p.forEach(function(u){n=f.getInstance(u);if(c.is(n)){t.push(n)}})}}else{t=f.getInstance()}return t};d.notifyModuleAndBehaviors=function l(p,r,s){var u,o,n=r instanceof Array?r:[r],t=g(p,s);try{if(i.indexOf(p)===-1){f.getLogger().debug(j,"Event: "+p+", is not in the authorized event list");return false}for(u in t){if(t.hasOwnProperty(u)){o=t[u];if(o.isStarted){if(o.behaviors instanceof Array){o.behaviors.forEach(function(v){d.callHandlers(v.instance,p,n)})}d.callHandlers(o.instance,p,n)}}}}catch(q){f.getLogger().debug(j,q.message)}};return{onStart:function m(n){require(["text!"+e],function(o){if(!c.is(o)){f.getLogger().debug("Events mapping is not defined.")}else{k=c.is(o,"string")?a.decode(o):o}n()})},onStop:function h(){k=null}}};return b});define("DS/DELPPWServices/CommandsService/CommandsService",["UWA/Core","DS/ApplicationFrame/CommandsManager"],function(c,b){var a=function a(x){var u="CommandsService",h=x.getConfig().resource.commandsAvailabilityPath,r,A=[],g,i=function i(){var G=x.getConfig().appContext,F=b.getCommands(G),D=null,E,H,C,J,I=[];for(E in F){if(c.is(E)){H=b.getCommand(E,G);if(c.is(H)&&H.name==="InsertCmd"){C=H.getArguments();I.push(E);if(c.typeOf(C)==="array"){if(C.length>0){J=C[0];if(c.is(J)){if(c.is(J.ID)){if(J.ID==="ReferenceType"){if(c.is(J.Value)){D=J.Value}}}}}}if(c.is(D)){if(c.is(A[D.split("/")[1]],"array")){A[D.split("/")[1]].push(E)}else{A[D.split("/")[1]]=[E]}D=null}}}}return I},q=function q(C,E){var D;D=b.getCommandCheckHeader(C,x.getConfig().appContext);if(c.is(D)){if(c.is(E,"boolean")){D.setState(E)}else{D.toggleState()}}else{x.getLogger().debug(u,"toggleCmdCheckHeaderState, unknown command: "+C)}};return{onStart:function w(C){if(!c.is(h)){x.getLogger().debug("Commands availability file path have not being provided.");throw new Error("Commands availability file path have not being provided.")}require(["text!"+h],function(D){if(!c.is(D)){x.getLogger().debug("Commands Availability json is not defined.");throw new Error("Commands Availability json is not defined.")}else{g=c.is(D,"string")?c.Json.decode(D):D;r=g.managedCommands}C()})},onStop:function p(){},notifyApp:function m(D,C){x.getMediator().notify(D,C,{sourceModuleId:u})},toggleModule:function k(E,C){var D;if(c.is(C)&&c.is(C.state)){D=C.state?"startModule":"stopModule";x.getMediator().notify(D,{moduleId:E,moduleData:C})}},setCommandState:function d(C,F){var E,D=x.getConfig().appContext;if(c.is(C)){E=b.getCommand(C,D);if(!c.is(E)){E=b.getCommandCheckHeader(C,D)}if(c.is(E)){if(F){E.enable()}else{E.disable()}}else{x.getLogger().debug(u,"disableCommand, unknown command: "+C)}}else{x.getLogger().debug(u,"disableCommand, no command in input !!!")}},setEffectivityCmdState:function B(C,E){var D=E;if(D===true){if(c.is(window)&&c.is(window.cfgCmdWidgetData)&&c.is(window.cfgCmdWidgetData._isDecouplingActivated,"boolean")){if(window.cfgCmdWidgetData._isDecouplingActivated===false){D=false}}else{D=false}}this.setCommandState(C,D)},setCommandStates:function f(E){var C=this,D;if(c.is(E,"string")){E=this.getCommandsAvailabilty(E)}E=E||{};D=E.enabled;r.forEach(function F(G){C.setCommandState(G,false)});if(!c.is(D,"array")){x.getLogger().debug(u,"enabled param should be an array")}else{D.forEach(function(G){C.setCommandState(G,true)})}},initState:function y(){var C;if(!c.is(g)){x.getLogger().debug("Commands Availability json is not defined.");return}C=i();r=r.concat(C);g.initial.enabled=g.initial.enabled.concat(C);g.none.enabled=g.none.enabled.concat(C);this.setCommandStates(g.initial)},getSelectedRoots:function e(F){var G=x.getPlugins("RootsPlugin"),C=[],E,D;if(!c.is(G)){x.getLogger().debug("Roots Plugin is not available.");return}if(c.is(F,"array")){for(E=0;E<F.length;E++){if(c.is(F[E],"array")){for(D=0;D<F[E].length;D++){if(G.instance.isRoot(F[E][D])){C.push(F[E][D])}}}}}return C},getCommandsAvailabilty:function l(C){if(!C){return c.clone(g)}function D(G,H,E){var F;if(typeof E==="undefined"){E=null}H=H.split(".");for(F=0;F<H.length;F++){if(typeof G[H[F]]==="undefined"){return E}G=G[H[F]]}return c.clone(G)}return D(g,C)},getValidChildTypeCommands:function o(E){var H,D=[],G,C,I,F=x.getPlugins("DicoPlugin");if(!c.is(F)){x.getLogger().debug("Dico Plugin is not available to get valid child types.");return}G=F.instance.getValidChildTypes(E);if(c.is(G)){for(H in A){if(G.indexOf(H)>=0){C=A[H];for(I=0;I<C.length;I++){D.push(C[I])}}}}return D},manageCommandsAvailability:function n(K,L,J,F,S){var Q=this,D,O=0,M=0,P=0,R=0,U=0,E,W,X,T,C,I,N,H,G=x.getPlugins("DatabasePlugin"),V=x.getPlugins("DicoPlugin");if(!G||!V){x.getLogger().debug(u,"Database or Dico  Plugin is not available.");return}G=G.instance;V=V.instance;K=K||[];L=L||[];J=J||[];F=F||[];S=S||[];O=K.length;P=L.length;R=F.length;M=S.length;if(c.is(J,"array")){J.forEach(function(Y){D=G.getReferenceModel(Y);if(c.is(D)){H=D.get("PPRTYPE");if(H==="PART"||H==="PRODUCT"){P++}else{if(H==="PROCESS"){O++}else{if(H==="SYSTEM"){R++}else{if(H==="RESOURCE"){M++}else{if(H==="OPERATION"){U++}}}}}}})}E=O+P+R+M+U;C=Q.getSelectedRoots([K,L,F,S,J]);if(1>E){Q.setCommandStates("none")}else{if(1===E){if(1===R||1===U){N=Q.getCommandsAvailabilty("one.system")}if(1===M){N=Q.getCommandsAvailabilty("one.resource")}if(1===O){N=Q.getCommandsAvailabilty("one.process")}if(1===P){N=Q.getCommandsAvailabilty("one.product")}if(c.is(N)){X=K[0]||F[0]||S[0]||J[0];W=G.getReferenceModel(X);if(c.is(W)){I=Q.getValidChildTypeCommands(W.get("type"));N.enabled=N.enabled.concat(I)}Q.setCommandStates(N)}}else{if(1<E){if(E===P){Q.setCommandStates("multiple.product")}else{if(E===O){Q.setCommandStates("multiple.process")}else{if(E===R||E===U){Q.setCommandStates("multiple.system")}else{if(E===M){Q.setCommandStates("multiple.resource")}else{Q.setCommandStates("multiple.mixed")}}}}if(!(C.length===E||C.length===0)){Q.setCommandState("Delete",false)}}}}Q.setCommandState("CreateLink",true);Q.setCommandState("CreateInstance",true);T=C.length>0?true:false;Q.setCommandState("Hide",T);Q.setCommandState("DetachInstance",(!T&&(P<1)&&(E>0)));Q.manageReplaceCommandsAvailablity(T,J.length,(K.length+F.length));Q.manageDocCmdAvailability();if(E===1){Q.manageConfigurationCommands(T,J.length,K.length,F.length)}},manageConfigurationCommands:function s(C,F,E,D){x.getLogger().debug(u,'"manageConfigurationCommands" is not overridden')},manageReplaceCommandsAvailablity:function j(C,E,D){this.setCommandState("ReplaceByLatestRevision",(!C&&(E<1)&&(D>0)));this.setCommandState("ReplaceByNewRevision",(!C&&(E<1)&&(D>0)));this.setCommandState("ReplaceByExistingRevision",(!C&&(E<1)&&(D===1)))},manageDocCmdAvailability:function z(){var C=[],F=x.getPlugins("SelectionPlugin"),E=x.getPlugins("DocumentPlugin"),D;if(!E||!F){x.getLogger().debug("Selection or Document Plugin is not available.");return}D=F.instance.getSelections("CMDS");D.forEach(function(G){C=C.concat(G)});if(C.length!==1){this.setCommandState("ManageDocuments",false);return}if(E.instance.hasDocuments(C[0])){this.setCommandState("ManageDocuments",true)}else{this.setCommandState("ManageDocuments",false)}},manageGraphViewCmdAvailablity:function v(){var D=this,F=x.getPlugins("TreeViewPlugin"),G={},C=false,I,E,H=["ToggleOrientation","ToggleOverview","Reframe","ReframeOn"];if(!c.is(F)){x.getLogger().debug("treeView Plugin is not available.");return}G=F.instance.getCurrentView();Object.keys(G).forEach(function(J){E=G[J];if(c.is(E.currentView)){I=E.currentView;if(I==="graphView"){C=true;return}}});H.forEach(function(J){D.setCommandState(J,C)})},toggleCmdCheckHeaderState:function t(C){C=C||{};if(!c.is(C.cmdName)){x.getLogger().debug("Failed to toggle state : check command name has not been provided");return}q(C.cmdName,C.cmdState)}}};return a});define("DS/DELPPWServices/ConfigService/CustoParametersSet",["UWA/Core"],function(b){var a=function a(c,n,k,h){var o,g,i,j,f="OOTBValue";o=function o(p){this._parent(p)};i=function i(p){var q;j=b.is(p)?p:{};if(b.is(widget.getValue)){g=widget.getValue("custoParametersSet");q=Object.keys(j);if(q.indexOf(g)===-1){g=f;widget.setValue("custoParametersSet",g)}}};return{retrieveCustoParametersSetsInfo:function l(s,r){var q=b.is(c)?("?custoParameterRegExp="+c):"";k.webServiceRequest({url:"modeler/ppr/getCustoParametersSetsInfo"+q,method:"GET",onComplete:function p(t){i(t);s()},onFailure:r,onTimeout:r})},isChanged:function m(){var p=false;if(b.is(widget.getValue)){if(g!==widget.getValue("custoParametersSet")){g=widget.getValue("custoParametersSet");p=true}}return p},getNames:function d(){var q={value:f,label:h.getNLSValue("Preferences.CustoParametersSetDefault")},r=[q],p=Object.keys(j);p.forEach(function s(t){r.push({value:t,label:h.getNLSValue(t)})});return r},getSelectedPID:function e(){var p="",q;if(b.is(widget)&&b.is(widget.getValue,"function")){q=widget.getValue("custoParametersSet");if(b.is(q,"string")&&j.hasOwnProperty(q)){p=j[q]}}return p}}};return a});define("DS/DELPPWServices/ExternalService/PadCommandProxyUtil",["UWA/Core"],function(b){var a=function(e){var c="PadCommandProxyUtil",h=e.getLogger(),f,o,n,l,j;o=function o(t,r){var q,s=r||{},p=e.getPlugins("DatabasePlugin");s.forceDBMode=b.is(s.forceDBMode)?s.forceDBMode:true;if(!b.is(p)){e.getLogger().debug(c,"Database plugin not available.");return}if(!b.is(t)){e.getLogger().debug(c,"_refreshElement: Input PID is not defined.");return}p=p.instance;q=function q(u){h.debug(c,"Failed to refresh model PID: "+t);if(b.is(u)){h.debug(c,JSON.stringify(u))}};if(b.is(p.getInstance(t))){p.fetchInstance({PID:t},{forceDBMode:true,onFailure:q,onComplete:function(u){h.debug(c,"Successfully refreshed instance model : "+u.id)}})}else{if(b.is(p.getReference(t))){p.fetchRoot(t,{forceDBMode:true,onFailure:q,queriedForChildren:false,onComplete:function(u){h.debug(c,"Successfully refreshed reference model : "+u.id);p.getDescendantsFromServer(u.id,null,s)}})}}};f=function f(t,r){var p,s=r||{},q=e.getPlugins("DatabasePlugin");if(!b.is(q)){e.getLogger().debug(c,"Database plugin not available.");return}if(!b.is(t)){e.getLogger().debug(c,"_addReference: Input PID is not defined.");return}q=q.instance;p={forceDBMode:true,silent:b.is(s.silent)?s.silent:true,onComplete:function(u){h.debug(c,"Successfully fetched reference: "+u.id);e.getMediator().notify("addReference",[u,null,{withLinksResolved:true,forceDBMode:true}])},onFailure:function(u){h.debug(c,"_addReference: Failed to fetch Reference for PID: "+t);if(b.is(u)){h.debug(c,JSON.stringify(u))}}};q.fetchRoot(t,p)},n=function n(q,t){var s,r,p;t=t||{};h.debug(c,"Refresh Created: %o",q);if(b.is(q,"array")){for(s=0,p=q.length;s<p;++s){r=q[s].physicalid;f(r,t)}}};l=function l(s){var u,r,p,t,q,w,v=e.getPlugins("DatabasePlugin");if(!b.is(v)){e.getLogger().debug(c,"Database plugin not available.");return}v=v.instance;w=function w(x){if(b.is(x,"array")){for(u=0,p=x.length;u<p;u++){v.removeConnection(x[u].id)}}};t={onComplete:function(x){h.debug(c,"Successfully deleted model : "+x.id)},onFailure:function(x){h.debug(c,"Failed to delete model PID: "+x.id)}};if(b.is(s,"array")){h.debug(c,"Refresh Deleted: "+s);for(u=0,p=s.length;u<p;++u){r=s[u].physicalid;if(b.is(r)){q=v.getInstance(r);if(b.is(q)){v.getConnectionsByModel(null,q,{relationTypes:null,isRefRefOnly:false,onComplete:w});v.deleteInstance(r,t)}q=v.getReference(r);if(b.is(q)){v.getConnectionsByModel(q,null,{relationTypes:null,isRefRefOnly:false,onComplete:w});v.deleteReference(r,t)}}}}};j=function j(s,r){var q,p;if(b.is(s,"array")){h.debug(c,"Refresh Modified: "+s);for(q=0;q<s.length;++q){p=b.is(s[q].physicalid)?s[q].physicalid:s[q];o(p,r)}}};return{refreshElementFromEvent:function i(p){var q=function q(r){if(b.is(r)&&b.is(r.id)){o(r.id,{forceDBMode:false})}};if(b.is(p,"array")){p.forEach(q)}},addReferenceFromEvent:function g(q){var p=function p(r){if(b.is(r)&&b.is(r.id)){f(r.id)}};if(b.is(q,"array")){q.forEach(p)}},refreshCreated:function m(p,q){n(p,q)},refreshDeleted:function k(p,q){l(p,q)},refreshModified:function d(q,p){j(q,p)},}};return a});define("DS/DELPPWServices/LoggerService/AlertManager",["UWA/Core","DS/UIKIT/Alert"],function(c,a){var b=function b(e){var d="Alert Manager",i=null,j,h;i=a.extend({defaultOptions:{closable:true,visible:true,closeOnClick:true,autoHide:false,hideDelay:2000,hideDelaySuccess:3000,hideDelayError:6000,className:"",messageClassName:"alert-primary",animate:true,icon:true,maximumVisibleMessages:5},init:function(k){this._parent(k)},onShowMessage:function f(k){var m=this,l,n=k.className.split(" ")[1].substring(6);switch(n){case"success":l=this.options.hideDelaySuccess;break;case"error":l=this.options.hideDelayError;break;default:l=this.options.hideDelay}setTimeout(function(){m.remove(k)},l)}});j=function j(l){var k=widget.getElements(".app-messages")[0]?widget.getElements(".app-messages")[0]:widget.body;if(!c.is(l,"string")){l="top"}if(c.is(k)){h.inject(k,l)}else{e.getLogger().debug(d,"Alert Container is not defined.")}};h=new i();j();return{displayAlert:function g(k){j();h.add(k)}}};return b});define("DS/DELPPWServices/LayoutService/DOMNaming",[],function(){var a={construction:{appContainer:"app-container",appMessages:"app-messages",appProgressInd:"app-ProgressInd",moduleContainer:"module-container",moduleMessages:"module-messages",dropZoneContainer:"drop-zone-container",treeListContainer:"tree-list-container",toolbarContainer:"toolbar-container",graphContainer:"graph-container",grapViewContainer:"graphView-container",progessBarContainer:"progressBar-container",auxiliaryViewContainer:"auxiliaryView-container",actionViewContainer:"actionView-Container"},classes:{hideBodyView:"hideEBOM",showGraphView:"showGraphView",},selectors:{main:"main.main",mainDrop:"div.dropZone",mbomDrop:"div.mbomDrop",mbomTreeListToolBar:"div.mbomTreeListView.ToolBar",mbomTreeList:"div.mbomTreeListView",mbomGraphToolBar:"div.mbomGraphView.ToolBar",mbomGraph:"div.mbomGraphView",mbomContainer:"div.mbomContainer",bodyContainer:"div.bodyContainer",bodyDrop:"div.bodyDrop",bodyTreeListToolBar:"div.bodyTreeListView.ToolBar",bodyTreeList:"div.bodyTreeListView",bodyGraphToolBar:"div.bodyGraphView.ToolBar",bodyGraph:"div.bodyGraphView",},};return a});define("DS/DELPPWServices/ConfigService/Preferences",["UWA/Core"],function(b){var a=function a(n,i,k,g,e){var o,l,j,c,h;o=function o(){widget.addPreference({name:"organization",type:"list",label:e.getNLSValue("Preferences.Org"),options:k.getOrganization(),onchange:"OrganizationUpdated"})};l=function l(r){var q=k.getCollabSpace(r),p=(b.is(q,"array")&&(q.length>0))?q[0].value:null;widget.addPreference({name:"collaborativeSpace",type:"list",label:e.getNLSValue("Preferences.CollabSpace"),options:q,defaultValue:p,onchange:"CollabSpaceUpdated"});if(b.is(n)){n.debug("Preferences::updateCollabSpace, (newCollabSpaceArray, defaultCollabSpace): "+b.Json.encode(q)+", "+b.Json.encode(p))}};j=function j(s,p){var r=k.getRole(s,p),q=(b.is(r,"array")&&(r.length>0))?r[0].value:null;widget.addPreference({name:"role",type:"list",label:e.getNLSValue("Preferences.Role"),options:r,defaultValue:q,onchange:"RoleUpdated"});if(b.is(n)){n.debug("Preferences::updateRole, (newRoleArray, defaultRole): "+b.Json.encode(r)+", "+b.Json.encode(q))}};c=function c(){var q=[],p,r=widget.getValue("organization");if(b.is(n)){n.debug("Preferences::updateCollabSpace, (newOrga): "+r)}l(r);q=k.getCollabSpace(r);p=b.is(q,"array")?((q.length>0)?q[0].value:null):null;j(r,p);widget.dispatchEvent("onEdit")};h=function h(){var q=widget.getValue("organization"),p=widget.getValue("collaborativeSpace");if(b.is(n)){n.debug("Preferences::updateRole, (newOrga, newCollabSpace): "+q+", "+p)}j(q,p);widget.dispatchEvent("onEdit")};return{buildView:function m(y){var s,t,u,p,w,x,z,v,q,r;if(!y){throw new Error("App config is not defined")}s=y.preferences;if(!s){throw new Error("preferences is not defined in app config")}for(t=0,u=s.length;t<u;t++){r=s[t];if(!r){continue}p=b.result(r,"name");w=b.result(r,"type");x=e.getNLSValue(b.result(r,"label"));z=b.result(r,"options");v=b.result(r,"defaultValue");q=b.result(r,"onchange");widget.addPreference({name:p,type:w,label:x,options:z,defaultValue:v,onchange:q})}widget.addEvent("OrganizationUpdated",c);widget.addEvent("CollabSpaceUpdated",h);if(b.is(n)){n.debug("Preferences::buildView: Preferences has been built.")}},populateSecurityContext:function f(){var q,r,p=i.getSecurityContext();p=p.slice(5);q=p.split(".")[1];r=p.split(".")[2];o(q);l(q);j(q,r)},populateCustomParameters:function d(){widget.addPreference({name:"custoParametersSet",type:"list",label:e.getNLSValue("Preferences.CustoParametersSet"),options:g.getNames(),defaultValue:widget.getValue("custoParametersSet")})}}};return a});define("DS/DELPPWServices/LayoutService/BlocLayout",["UWA/Core","UWA/Controls/Abstract"],function(b,L){var y=L.extend({_logger:null,defaultOptions:{className:"blocLayout",minSize:"5px"},init:function F(M){this._parent(M);this._rowMap={};this._columnMap={};this._rowColumnMap={};this._hiddenColumnsMap={};this._rowIds=[];this._fixedColumnIds=[];this._fixedRowIds=[];M=this.options;if(!M.logger||!M.mediator){throw new Error("logger or mediator option not defined")}this._logger=M.logger;this._mediator=M.mediator;if(!M.rows){M.rows=[{columns:2},{columns:1}]}M.minSize=M.minSize.indexOf("px")!==-1?parseInt(M.minSize.replace("px","")):5;this._buildSkeleton(M.rows)},_buildSkeleton:function G(N){var V=this,R,P,Q,O,M,U=-1,S=-1,T=function T(W){if(V.hasOwnProperty("_resizingInfo")){if(W.type==="touchend"){V.getContent().removeEvent("touchmove");W.preventDefault()}else{V.getContent().removeEvent("mousemove")}delete V._resizingInfo;b.Event.dispatchEvent(V.getContent(),"onBlocLayoutResizeEnd");V._resizeBottomBloc()}};this.elements.container=b.createElement("div",{"class":"bl-container"});N.forEach(function(W,X){U++;P=b.createElement("div",{"class":"bl-row"}).inject(V.getContent());Q=b.createElement("div",{"class":"bl-row-content no-drag-row"}).inject(P);V._rowMap[U]=P;V._rowIds.push(U);if(X>0){V._createHandle(U,null,"bl-drag-row").inject(P,"top");Q.removeClassName("no-drag-row")}if(W.hasOwnProperty("columns")){for(R=0;R<W.columns;R++){S++;O=b.createElement("div",{"class":"bl-column"}).inject(Q);M=b.createElement("div",{"class":"bl-column-content no-drag-column"}).inject(O);V._columnMap[S]=O;if(!V._rowColumnMap[U]){V._rowColumnMap[U]=[S]}else{V._rowColumnMap[U].push(S)}if(R<W.columns-1){V._createHandle(U,S,"bl-drag-column").inject(O,"top");M.removeClassName("no-drag-column")}}}});this._initSize();this.getContent().addEvent("touchend",T);this.getContent().addEvent("mouseup",T);this.onContainerResized(function(){var W=this,X=this.getContent().getSize();this.setRowsHeight(this._rowIds,X.height,{minSize:0});this._rowIds.forEach(function(Z){var Y=W._getColumnIdsInRow(Z);W.setColumnsWidthById(Y,X.width,{minSize:0})});W._resizeBottomBloc();W._mediator.notify("blocLayoutResizeEnd",{data:W.getContent()})})},_resizeBottomBloc:function v(){if(b.is(this._columnMap[2])&&this._columnMap[2].clientHeight){this._mediator.notify("resizeBottomDock",{data:{height:this._columnMap[2].clientHeight}})}},_createHandle:function f(R,O,P){var N=this,M=b.createElement("div",{"class":P}),Q=function Q(S){N._resizingInfo={rowId:R,columnId:O};if(S.type==="touchstart"){N.getContent().addEvent("touchmove",N._onMouseMove.bind(N));S.preventDefault()}else{N.getContent().addEvent("mousemove",N._onMouseMove.bind(N))}};M.addEvent("touchstart",Q);M.addEvent("mousedown",Q);return M},_onMouseMove:function e(R){var T=this._resizingInfo,Q,M,N,P,O,S;if(T){try{if(b.is(T.columnId)){O=this._getRowElem(T.rowId);M=this._getColumnIdsInRow(T.rowId).filter(function(U){return U<=T.columnId});if(R.type==="touchmove"){S=R.touches[0];Q=S.pageX-O.getOffsets().x}else{Q=R.clientX-O.getOffsets().x}this.setColumnsWidthById(M,Q,{minSize:this.options.minSize})}else{P=this._getRowIds().filter(function(U){return U<T.rowId});if(R.type==="touchmove"){S=R.touches[0];N=S.pageY-this.getContent().getOffsets().y}else{N=R.clientY-this.getContent().getOffsets().y}this.setRowsHeight(P,N,{minSize:this.options.minSize})}}catch(R){delete this._resizingInfo}}},_initSize:function n(){var N=this,M=this._getRowIds();this._setEqualRowsHeight();M.forEach(function(O){N._setEqualColumnsWidthInRow(O)})},_setEqualRowsHeight:function z(){var N=this,M=this._getRowIds();M.forEach(function(P){var O=100/M.length;N._getRowElem(P).setStyle("height",N._toPercent(O))})},_setEqualColumnsWidthInRow:function m(O){var N=this,M=this._getColumnIdsInRow(O);M.forEach(function(Q){var P=100/M.length;N._getColumnElem(Q).setStyle("width",N._toPercent(P))})},_getRowIds:function h(){return this._rowIds},_getRowIdFromColumnId:function w(N){var M,O;for(O in this._rowColumnMap){if(this._rowColumnMap[O].indexOf(N)!==-1){M=parseInt(O);break}}return M},_getColumnId:function K(O,M){var N;if(this._rowColumnMap.hasOwnProperty(O)){N=this._rowColumnMap[O][M]}return N},_getColumnIdsInRow:function A(M){return this._rowColumnMap[M]},_getFixedColumnIds:function I(){return this._fixedColumnIds},_getFixedRowIds:function u(){return this._fixedRowIds},_getRowElem:function r(M){return this._rowMap[M]},_getColumnElem:function j(M){return this._columnMap[M]},getColumnSize:function l(P,N){var M={},O=this._getColumnId(P,N);if(!isNaN(O)){M=this._getColumnElem(O).getSize()}else{throw"Column number: "+N.toString()+" does not exist"}return M},getRowSize:function o(O){var M={},N=this._getRowElem(O);if(N){M=N.getSize()}else{throw"Row number: "+O.toString()+" does not exist"}return M},_toPx:function k(N){var M;if(!isNaN(N)){M=Math.floor(N).toString()+"px"}return M},_toPercent:function E(N){var M;if(!isNaN(N)){M=Math.floor(N).toString()+"%"}return M},_setElemsSize:function t(aj,Y,ah,ad,Q){var X=this,W,ac,P=[],O,T,ab=[],N,ag,ai,Z,M=0,V,R,U,S;var aa=(function(){var al={},ak=function(ap,aq){var an=0,ao=!isNaN(aq)?aq:1;ap.forEach(function(ar){if(al.hasOwnProperty(ar)){an=an+al[ar]*ao}});return an},am=function(){var aq=ah.length,an=ak(ah),ao=Math.floor(an/aq),ap;for(ap in al){if(al.hasOwnProperty(ap)){al[ap]=ao}}};ah.forEach(function(an){al[an]=X.getSize(an)});return{get:ak,setEqualSize:am}})();var af=(function(){var ak={},an=function(ap,ao){ak[ap]=ao},al=function(ap){var ao=0;ap.forEach(function(aq){if(ak.hasOwnProperty(aq)){ao=ao+ak[aq]}});return ao},am=function(){var aq,ao,ap=0;for(aq in ak){if(Math.max(ap,ak[aq])===ak[aq]){ao=aq;ap=ak[aq]}}return{id:ao,value:ap}};return{set:an,get:al,getMax:am}})();try{if(Q){if(Q.hasOwnProperty("fixedIds")){P=Q.fixedIds}if(Q.hasOwnProperty("minSize")){M=Q.minSize}}if(Y<0){throw"Input error: size"}if(ad<=0){throw"Input error: container size"}T=aj.filter(function(ak){if(P.indexOf(ak)!==-1){return true}ab.push(ak);return false});if(T.length>0){W=Y-aa.get(T);ac=ab}else{W=Y;ac=aj}if(ac.length<1){throw"No element available for resize"}if(W<ac.length*M){throw"Cannot set size inferior to minSize"}O=ah.filter(function(ak){return -1===ac.indexOf(ak)&&-1===P.indexOf(ak)});ai=aa.get(P);Z=aa.get(O);ag=aa.get(ac);if(W+ai+O.length*M>ad){throw"Cannot set size superior to container size"}if(ag===0){aa.setEqualSize();ag=aa.get(ac);Z=aa.get(O)}V=ag!==0?W/ag:0;R=Z!==0?(ad-ai-W)/Z:0;N=ac.concat(O);N.forEach(function(an,ak){var am=ak<ac.length?V:R,al=Math.round(aa.get([an],am));al=al>M?al:M;af.set(an,al)});U=af.get(ah)+ai-ad+1;if(U>0){S=af.getMax();if(S.value-U<M){throw"Cannot set size inferior to minSize"}af.set(S.id,S.value-U)}}catch(ae){X._logger.debug(ae);return}N.forEach(function(ak){X.setSize(ak,af.get([ak]))})},maximizeRow:function s(N){var M=this.getContent().getSize().height;this.setRowsHeight([N],M)},maximizeColumnInRow:function C(O,N){var M=this._getRowElem(O).getSize().width;this.setColumnsWidth(O,[N],M)},unmaximizeRows:function a(){this._setEqualRowsHeight()},unmaximizeColumnsInRow:function g(M){this._setEqualColumnsWidthInRow(M)},setColumnContent:function i(Q,N,P){var O,M;if(P){O=this._getColumnId(Q,N);M=this._getColumnElem(O).getElement(".bl-column-content");M.setContent(P)}},getColumnContent:function D(P,N){var O,M;O=this._getColumnId(P,N);M=this._getColumnElem(O).getElement(".bl-column-content");return M},setColumnsWidth:function c(T,S,Q,O){var M=this,P=[],R=this._getFixedColumnIds();try{S.forEach(function(U){var V=M._getColumnId(T,U);if(!isNaN(V)){P.push(V)}else{throw"Column number: "+U.toString()+" does not exist"}})}catch(N){this._logger.debug(N);return}this.setColumnsWidthById(P,Q,b.extend(O,{fixedIds:R}))},hideShowColumnById:function x(R,N){var P=this._getColumnId(R,N),Q={},M,O=this._hiddenColumnsMap[R];if(b.is(O)&&O.hasOwnProperty(P)){Q=O[P];this.setColumnsWidth(R,[N],Q.prevWidth,{});this._hiddenColumnsMap[R].pop(N)}else{M=this._getColumnElem(P).getSize().width;Q={prevWidth:M};if(b.is(O,"array")){this._hiddenColumnsMap[R][P]=Q}else{this._hiddenColumnsMap[R]=[];this._hiddenColumnsMap[R][P]=Q}this.setColumnsWidth(R,[P],0,{})}},setColumnsWidthById:function H(S,O,U){var V=this,R=this._getFixedColumnIds(),M,P,Q,N;try{if(S.length<1){throw"Input array of ids is empty"}Q=this._getRowIdFromColumnId(S[0]);if(isNaN(Q)){throw"Invalid column id"}}catch(T){this._logger.debug(T);return}M=this._getRowElem(Q).getSize().width;P=this._getColumnIdsInRow(Q);N={_logger:V._logger,getSize:function(W){return V._getColumnElem(W).getSize().width},setSize:function(X,W){V._getColumnElem(X).setStyle("width",V._toPx(W))}};this._setElemsSize.call(N,S,O,P,M,b.extend(U,{fixedIds:R}))},setRowsHeight:function d(T,S,Q){var M=this,O=this._getFixedRowIds(),R,P;try{if(T.length<1){throw"Input array of ids is empty"}}catch(N){this._logger.debug(N);return}R=this.getContent().getSize().height;P={_logger:M._logger,getSize:function(U){return M._getRowElem(U).getSize().height},setSize:function(V,U){M._getRowElem(V).setStyle("height",M._toPx(U))}};this._setElemsSize.call(P,T,S,this._getRowIds(),R,b.extend(Q,{fixedIds:O}))},addFixedColumns:function J(O){var M=this,P,N;O.forEach(function(Q){var R=M._getColumnId(Q.row,Q.column);if(!isNaN(R)){M._fixedColumnIds.push(R);P=M._getColumnIdsInRow(Q.row);if(Math.max.apply(null,P)===R&&P.length>1){N=M._getColumnElem(R-1).getElement(".bl-drag-column")}else{N=M._getColumnElem(R).getElement(".bl-drag-column")}if(N){N.destroy()}}else{M._logger.debug("{"+Q.row.toString()+", "+Q.column.toString()+"}: Invalid column")}})},removeFixedColumns:function q(N){var M=this,Q,O,P;N.forEach(function(R){var S=M._getColumnId(R.row,R.column);if(!isNaN(S)){O=M._fixedColumnIds.indexOf(S);if(-1!==O){M._fixedColumnIds.splice(O,1);Q=M._getColumnIdsInRow(R.row);if(Math.max.apply(null,Q)===S&&Q.length>1){P=S-1}else{P=S}M._createHandle(R.row,P,"bl-drag-column").inject(M._getColumnElem(P),"top")}else{M._logger.debug("{"+R.row.toString()+", "+R.column.toString()+"}: Column was not fixed")}}else{M._logger.debug("{"+R.row.toString()+", "+R.column.toString()+"}: Invalid column")}})},onContainerResized:function(N){var M=this;this.getContent().addEvent("resize",function(){N.call(M)})},getRowIds:function p(){return this._rowIds},getRowColumnMap:function B(){return this._rowColumnMap}});return y});define("DS/DELPPWServices/ExternalService/ExternalServiceUtil",["UWA/Core"],function(c){var a=function a(f){var e="ExternalServiceUtil",h="ExternalService";return{getAllSelections:function d(j){var i=[],k=this.getSelectedNodeInfos(j);if(c.is(k,"array")){i=k.reduce(function(l,m){return l.concat(m)},[])}return i},getSelectedNodeInfos:function g(r){var l,t=[],o=r||h,p,u=f.getPlugins("SelectionPlugin"),m=f.getPlugins("DatabasePlugin"),w=f.getPlugins("TreeViewPlugin"),q=f.getPlugins("AttributePlugin"),s,n,j,k,v;if(!c.is(m)||!c.is(u)||!c.is(w)||!c.is(q)){f.getLogger().debug(e,"DatabasePlugin or SelectionPlugin or TreeViewPlugin or AttributePlugin not available.");return t}m=m.instance;u=u.instance;w=w.instance;q=q.instance;k=function k(z,x,A){var i,y="V_Name";if(c.is(A)){if(c.is(A.attributeName,"string")){y=A.attributeName}if(c.is(x)&&!A.labelIsOnRef){i=x.get(y)}else{i=z.get(y)}}return i};v=function v(C,z){var B,A,D=C.id,y=C.path,x,i=null;x=m.getReference(D);if(!c.is(x)){i=m.getInstance(D);if(c.is(i)){x=m.getReferenceModelFromInstance(i)}}B={reference:{id:x.id,type:x.get("type"),pprType:x.get("PPRTYPE"),revision:x.get("revision")},instance:{id:c.is(i)?i.id:null,absolutePath:y},label:k(x,i,z),parent:null};A=c.is(i)?m.getAggregatingReferenceModelFromInstance(i):null;if(c.is(A)){B.parent={reference:{id:A.id},label:k(A,null,z)}}return B};l=u.getSelectionsWithPaths(o);s=u.getSelectionMapping(o);for(n=0,j=l.length;n<j;n++){p=w.getLabelInfo(s[n]);t[n]=l[n].map(function(i){return v(i,p)})}return t}}};var b=(function b(){var d;return{getInstance:function e(f){if(!c.is(d)){d=new a(f)}return d}}})();return b});define("DS/DELPPWServices/ModelService",["UWA/Core","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWDicoServices/DicoUtils"],function(f,a,c,e,b){var d=function(h){var l="ModelService",k=h.getLogger();e.init({collectionUtils:c,indexMappingXML:h.getConfig().resource.indexMappingXML,});b.init({modelAttrsPath:h.getConfig().resource.modelAttrsPath,modelTypesPath:h.getConfig().resource.modelTypesPath,modelRelationsXML:h.getConfig().resource.modelRelationsXML,modelCustomRelationsXML:h.getConfig().resource.modelCustomRelationsXML});return{onStart:function j(m){var p;a.setWidgetTrigram(h.getConfig().widgetTrigram);p=new f.Promise.all([new Promise(function(r,q){e.setup(r,q)}),new Promise(function(r,q){b.setup(r,q)})]);p.then(function o(){k.debug(l,"Utils initialized!");m()},function n(q){k.debug(l,"Failed to initialize. Error desc:"+q);m()})},onStop:function i(){},updateAggregationRules:function g(){var n=new Promise(function(p,o){b.setup(p,o)});n.then(function m(){k.debug(l,"Utils initialized!")})}}};return d});define("DS/DELPPWServices/ExternalService/LifecycleService",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWServices/ExternalService/PadCommandProxyUtil","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(f,a,c,e,b){var d=function d(n){var t="LifecycleService",v=b.getInstance(n),k=[],j,o=n.getLogger(),l="DS/PADUtils/PADCommandProxy/",m;var r,s,q,i,g,h;s=function s(w){o.debug(t,"context.RefreshView: ");o.debug(t,w);if(f.is(w)){if(f.is(w.created,"array")&&w.created.length>0){m.refreshCreated(w.created)}if(f.is(w.deleted,"array")&&w.deleted.length>0){m.refreshDeleted(w.deleted)}if(f.is(w.modified,"array")&&w.modified.length>0){m.refreshModified(w.modified)}}};r=function r(D){var B,x,A,G,E={},C,y=l+"select",F={data:{paths:[],pathsInst:[]}},z=n.getPlugins("DatabasePlugin"),w={selectedObjectsPID:[],selectedObjectsInstPID:{},modifiedObjectPID:null,modifiedObjectInstPID:null,modifiedObjectSelectionState:false,widgetId:widget.id?widget.id:"defaultId"};if(!f.is(z)){n.getLogger().debug(t,"Database plugin not available.");return}z=z.instance;if(f.is(D)){w.modifiedObjectSelectionState=D.changed.isSelected;A=z.getInstance(D.changed.nodeId);if(f.is(A)){w.modifiedObjectPID=A.get("isInstanceOf");w.modifiedObjectInstPID=A.get("PID")}else{A=z.getReference(D.changed.nodeId);if(f.is(A)){w.modifiedObjectPID=A.get("PID")}}G=D.selectedNodeIds;if(f.is(G,"array")){G.forEach(function(H){A=z.getReference(H);if(f.is(A)&&!f.is(E[H])){E[H]=[]}A=z.getInstance(H);if(f.is(A)){x=A.get("isInstanceOf");if(f.is(E[x])){E[x].push(H)}else{E[x]=[H]}}})}for(B in E){if(E.hasOwnProperty(B)){w.selectedObjectsPID.push(B);if(f.is(w.selectedObjectsInstPID[B])){w.selectedObjectsInstPID[B].push(E[B])}else{w.selectedObjectsInstPID[B]=E[B]||[]}}}o.debug(t,"DS."+j+".Selection.SelectionModified event broadcast: ",w);a.publish("DS."+j+".Selection.SelectionModified",w);if(w.modifiedObjectSelectionState){if(w.selectedObjectsPID.length>=1){F.data.paths.push([w.modifiedObjectPID]);C=w.selectedObjectsInstPID[w.modifiedObjectPID];if(1===C.length){F.data.pathsInst.push(C)}a.publish(y,F)}}}};q=function q(w){o.debug("_padRefresh: ");if(f.is(w)&&f.is(w.data)&&f.is(w.data.authored)&&f.is(w.data.authored.modified)){m.refreshModified(w.data.authored.modified)}};i=function i(){o.debug("_padAttach: ")};h=function h(){var A,x=[],z={},y=n.getPlugins("DatabasePlugin"),w=n.getPlugins("ResourcePlugin"),B;if(!f.is(y)||!f.is(w)){n.getLogger().debug(t,"Database plugin or resource Plugin not available.");return x}y=y.instance;w=w.instance;B=function B(F,C){var E;if(!f.is(F)){n.getLogger().debug(t,"No model to create node from");return}E={options:{grid:{"ds6wg:type":F.reference.type,"ds6wg:revision":F.reference.revision,icon:w.getIconURLFromKey(F.reference.type)}},getID:function D(){return F.reference.id},getInstID:function H(){return C},getLabel:function G(){return F.label}};return E};A=v.getAllSelections();if(f.is(A,"array")){A.forEach(function(C){if(f.is(C.instance.id)){if(f.is(z[C.reference.id])){z[C.reference.id].push(C.instance.id)}else{z[C.reference.id]=[C.instance.id]}}else{if(!f.is(z[C.reference.id])){z[C.reference.id]=[]}}});A.forEach(function(C){x.push(B(C,z[C.reference.id]))})}return x};g=function g(){f.extend(n.getConfig().appContext,{displayNotification:function w(z){if(z.eventID==="primary"||z.eventID==="success"){o.info(t,z.msg)}else{o.warn(t,z.msg)}},getSelectedNodes:function y(){return h()},refreshView:s,getSecurityContext:function x(){return{SecurityContext:c.getSecurityContext(),tenant:c.getTenant()}}})};return{onStart:function u(x){var z,w,A,y;m=new e(n);k.push(n.addExternalListener("select",r));g();j=n.getConfig().widgetTrigram;if(f.is(j)){z="DS."+j+".Object.AddReference";y="DS."+j+".Object.Refresh";w=l+"refresh";A=l+"attach";a.subscribe(z,m.addReferenceFromEvent);a.subscribe(y,m.refreshElementFromEvent);a.subscribe(w,q);a.subscribe(A,i)}else{n.getLogger().debug(t,"LifecycleService: widget trigram is not defined.")}x()},onStop:function p(){var x,w;for(x=0,w=k.length;x<w;x++){n.removeExternalListener(k[x])}k=[];m=void 0}}};return d});define("DS/DELPPWServices/ExternalService/FilterService",["UWA/Core","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(c,b){var a=function a(h){var l="FilterService",i=h.getLogger(),n=b.getInstance(h),f=[],e;var d,k,g;k=function k(o){if(c.is(g,"function")){g.call(null,o)}};d=function d(){c.extend(h.getConfig().appContext,{getSelectedNodesInfo:function p(u){var t=n.getAllSelections(l),s;u=u||false;if(u===true){s=h.getPlugins("DatabasePlugin");if(c.is(s)){s=s.instance;t.forEach(function(w){var v=w.instance.absolutePath,x;x=s.transformToOccPathWithRefDetail(v.length>0?v:w.reference.id);w.occPathWithRefDetail=x})}else{i.debug(l,'DatabasePlugin is not available. Hence "occPathWithRefDetail" property could not be added')}}return t},subscribeSelectionChange:function r(s){g=s},updateEffectivityColumns:function o(u,s){var t=h.getPlugins("CfgColumnsPlugin");if(c.is(t)){t=t.instance;e=s;t.updateAttributes(u,this.updateEffectivityCallback)}},updateEffectivityCallback:function q(s){h.getMediator().notify("updateEffectivityColumns",[s,e],null)}})};return{onStart:function m(){d();f.push(h.addExternalListener("select",k))},onStop:function j(){var p,o;for(p=0,o=f.length;p<o;p++){h.removeExternalListener(f[p])}f=[]}}};return a});define("DS/DELPPWServices/ConfigService/ConfigService",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWServices/ConfigService/SecurityContext","DS/DELPPWServices/ConfigService/Preferences","DS/DELPPWServices/ConfigService/CustoParametersSet"],function(g,b,e,f,c,d){var a=function a(w){var k,x=[],l,s,u,z=w.getLogger(),m,j,o,p,i;j=w.getConfig().resource;if(!j||!j.appConfigPath){throw new Error("App config path is not defined")}b.init();e.init({logger:z,iconCatalogPath:j.iconCatalogPath,nlsFilePath:j.nlsFilePath});l=new f(z,b,e);u=new d(j.custoParameterRegExp,z,b,e);s=new c(z,b,l,u,e);p=function p(){var J,L,M,E,I,H,C,B,A,K=[],G=widget.getBool("showCollaborativeSpace"),D=widget.getBool("showRole"),F=widget.getBool("showOrg");C=widget.getValue("organization");J=widget.getValue("collaborativeSpace");E=widget.getValue("role");if(true===F){l.getOrganization().forEach(function(N){if(C===N.value){A=N.label}});B=e.getNLSValue("Preferences.Org");K.push(B+A)}if(true===G){l.getCollabSpace(C).forEach(function(N){if(J===N.value){M=N.label}});L=e.getNLSValue("Preferences.CollabSpace");K.push(L+M)}if(true===D){l.getRole(C,J).forEach(function(N){if(E===N.value){H=N.label}});I=e.getNLSValue("Preferences.Role");K.push(I+H)}widget.setTitle(K.join(", "))};i=function i(){var A=e.getIconURLFromKey("AppIcon");widget.setIcon(A)};o=function o(){p();if(l.isChanged()){l.updateSecurityContext()}};k=function k(A,H,E){var B,G,D=[];b.setXMLConfiguration(A,u.getSelectedPID());for(B in A){if(A.hasOwnProperty(B)){G=new Promise(function(J,I){b.fetchXMLValues(B,J,I)});D.push(G)}}new g.Promise.allSettled(D).then(function F(){H()},function C(){E("XML PreFetching FAILED !!!")})};return{onStart:function v(A){var D,E;x.push(w.addExternalListener("endEdit",o));D=new g.Promise.all([new Promise(function(G,F){b.setup(G,F)}),new Promise(function(G,F){e.setup(G,F)})]);D.then(function C(){require([j.appConfigPath],function(H){m=H;if(!g.is(m.xmlConfiguration)){throw new Error("xmlConfiguration is not defined in app config")}s.buildView(m);E=new Promise(function(J,I){l.loadSecurityContexts(J,I)});E.then(function G(){s.populateSecurityContext();i();p();new Promise(u.retrieveCustoParametersSetsInfo).then(function J(){s.populateCustomParameters();new Promise(function K(O,N){k(m.xmlConfiguration,O,N)}).then(function M(){A()},function L(N){z.debug(N);A()})},function I(K){z.debug(K);A()})},function F(){widget.body.empty();g.createElement("div",{type:"text","class":"widget-Loading-Error-Message",html:e.getNLSValue("SecurityContext.NoSecurityContext")}).inject(widget.body);throw new Error("No Security Context available for the user!")})})},function B(F){z.debug("ConfigService.getWebSeriviceUtilsPromise","WebServiceUtils init FAILED. \nMessage: %s",F);A()})},onStop:function r(){var B,A;for(B=0,A=x.length;B<A;B++){w.removeExternalListener(x[B])}x=[]},getPreference:function q(A){return g.clone(widget.getValue(A))},setPreference:function t(A,B){return widget.setValue(A,B)},hasConfigurationChanged:function n(){return u.isChanged()},isSecurityContextChanged:function h(){return l.isChanged()},getConfigurationPID:function y(){return u.getSelectedPID()}}};return a});define("DS/DELPPWServices/LoggerService/LoggerService",["UWA/Core","DS/Logger/Logger","DS/DELPPWLoggerModel/LoggerUtils","DS/DELPPWServices/LoggerService/LogManager","DS/DELPPWServices/LoggerService/AlertManager"],function(f,a,e,b,d){var c=function(k){var q="LoggerService",s=k.getLogger(),i=[],g=null,o,m=function m(t){return a.getLogger(t)};s.debug=function h(u,v){var t=m(u);t.info.apply(t,Array.prototype.slice.call(arguments,1))},s.log=function l(w,y,t,x){var u,v;w=f.is(w)?w:"",v=m(w);y=f.is(y)?y:"";if(f.is(x)||f.is(t)){if(arguments[arguments.length-1]==="completed"){Array.prototype.splice.call(arguments,-1)}v.info.apply(v,Array.prototype.slice.call(arguments,1));e.log(y,t,x)}else{if(!f.is(t)){Array.prototype.push.call(arguments,"started");v.info.apply(v,Array.prototype.slice.call(arguments,1));u=e.log(y);return u}}},s.warn=function p(v,w,t){var u;u=m(v);u.error.apply(u,Array.prototype.slice.call(arguments,1));e.logFailed(w,t);w=f.is(w)?{className:"error",message:w}:v;if(f.is(w)){o.displayAlert(w)}},s.info=function j(v,w,t){var u;u=m(v);u.info.apply(u,Array.prototype.slice.call(arguments,1));e.logCompleted(w,t);w=f.is(w)?{className:"success",message:w}:v;if(f.is(w)){o.displayAlert(w)}};g=new b(k);o=new d(k);return{onStart:function r(t){if(!f.is(g)||!f.is(o)){s.debug(q,"initialization Failed")}i.push(k.addExternalListener("addLog",g.addLog));i.push(k.addExternalListener("ShowLogPanel",g.onShowLogPanel));t()},onStop:function n(){var u,t;for(u=0,t=i.length;u<t;u++){k.removeExternalListener(i[u])}i=[]}}};return c});define("DS/DELPPWServices/LayoutService/LayoutService",["UWA/Core","DS/ApplicationFrame/FrameWindow","DS/DELPPWServices/LayoutService/DOMNaming","DS/DELPPWServices/LayoutService/BlocLayout"],function(e,d,c,b){var a=function(A){var y,h,F,i,j;var B,p,l,G;B=function B(O,N,M){var J={},L,K=false;if(N===2){J.ROW=(O+1)%N;L=(y.getRowSize(J.ROW).height!==0);if(L){if(M){y.unmaximizeRows()}else{y.maximizeRow(J.ROW)}K=true}}if(K){y._resizeBottomBloc()}return K};p=function p(M,K){var J,L;J=y.getColumnSize(M,K);L=((J.width!==0)&&(J.height!==0));return L};l=function l(P,M,J,L){var O,K,N;if(e.is(L,"function")){for(O in P){if(P.hasOwnProperty(O)){if(e.is(M[O])){K=(J)?true:p(P[O].row,P[O].col);N=(M[O]==="")?false:true;if(K===N){continue}L(O,N)}}}}};G=function G(J){J=J||{};if(!e.is(J.rows)){J.rows=[{columns:1}]}return new b({rows:J.rows,logger:A.getLogger(),mediator:A.getMediator()})};return{name:"LayoutService",createBlocLayout:function C(J){return G(J)},buildView:function I(K){var J=this,N=A.getConfig().resource,L,M;if(!e.is(K.rows)||!e.is(K.actionBarReady)){A.getLogger().debug(this.name,'FATAL ERROR: "options.rows" and/or "options.actionBarReady" are not specified on calling buildView');return}F=e.createElement("div",{"class":c.construction.appContainer});F.addClassName("invisible");F.addClassName("notransition");i=e.createElement("div",{"class":c.construction.appMessages}).inject(F);j=e.createElement("div",{"class":c.construction.appProgressInd}).inject(F);L={viewer:"none",width:"100%",height:"100%",language:widget.lang,workbench:N.afrWorkbenchName,workbenchModule:N.afrWorkbenchModule,context:A.getConfig().appContext};h=new d(L);h.onActionBarReady(function(){if(e.is(K.actionBarReady,"function")){K.actionBarReady()}A.getMediator().notify("actionBarReady",J)});h.inject(F);y=G(K);M=h.getImmersiveFrame().getDockingElement(WUXDockAreaEnum.RightDockArea);M.freeZoneContent=y;F.inject(widget.body)},showLayout:function t(){F.removeClassName("invisible");F.removeClassName("notransition")},setDockingElement:function g(M,J){var L=h.getImmersiveFrame(),K;J=J||{};if(e.is(L)){K=L.getDockingElement(M);K.elements.collapser.addEventListener("click",function(){A.getMediator().notify("dockingZoneToggle",{collapseState:K.collapseDockingZoneFlag,dockingArea:K.side})});e.extend(K,J)}},setPreferredLayoutOnStartup:function r(P){var R=this,L=A.getService("ConfigService"),N,Q,M=[],O,K=null;if(e.is(L)){Q=L.getPreference("widgetLayoutValues");if(e.is(Q)){N=e.Json.decode(Q);K=[];O=true;l(P,N,O,function J(T,S){if(S===false){M.push({row:P[T].row,col:P[T].col,state:S});K.push({commandName:P[T].command,state:S})}});M.forEach(function(S){R.toggleView(S.row,S.col,S.state)})}}return K},setPreferredLayout:function w(O,R){var N=200,S=this,P=e.Promise.deferred(),K=[],L=[],T,Q,M=function M(W){var V=0,X=W.length,U=function U(){S.toggleView(W[V].row,W[V].col,W[V].state);V++;if(V<X){setTimeout(U,N)}else{if(V===X){setTimeout(function(){P.resolve()},N)}}};if(W.length>0){U()}else{P.resolve()}};Q=false;l(R,O,Q,function J(V,U){if(U===true){K.push({row:R[V].row,col:R[V].col,commandName:R[V].command,state:U})}else{L.push({row:R[V].row,col:R[V].col,commandName:R[V].command,state:U})}});T=K.concat(L);M(T);return{deferredPromise:P,columns:T}},removeDockingElement:function o(L){var K=h.getImmersiveFrame(),J;if(e.is(K)){J=K.getDockingElement(L);J.remove()}},buildAuxiliaryViewDom:function s(){var J=e.createElement("div",{"class":c.construction.moduleContainer,html:[{tag:"div","class":c.construction.dropZoneContainer},{tag:"div","class":c.construction.treeListContainer}]});return J},buildTreeListAuthoringDom:function v(K){var J,L;J=[{tag:"div","class":c.construction.moduleMessages},{tag:"div","class":c.construction.treeListContainer,},{tag:"div","class":c.construction.graphContainer,html:[{tag:"div","class":c.construction.grapViewContainer}]}];if(e.is(K)){if(K){L={tag:"div","class":c.construction.dropZoneContainer};J.unshift(L)}}return e.createElement("div",{"class":c.construction.moduleContainer,html:J})},getUIContainer:function f(){return F},getAlertContainer:function u(){return i},getProgressIndContainer:function E(){return j},getActionModuleContainer:function n(){return e.createElement("div",{"class":c.construction.actionViewContainer})},toggleView:function D(P,M,Q){var L=y.getRowColumnMap(),J=L[P].length,N=y.getRowIds().length,O={},K,S,R;if(J===2){O.COL=(M+1)%J;O.ROW=P;S=y.getColumnSize(O.ROW,O.COL);K=((S.width!==0)&&(S.height!==0));if(K){if(Q){y.unmaximizeColumnsInRow(O.ROW)}else{y.maximizeColumnInRow(O.ROW,O.COL)}}else{R=B(P,N,Q);if(Q&&R){y.maximizeColumnInRow(P,M)}}}else{if(J===1){R=B(P,N,Q)}}},isViewShown:function q(K,J){return p(K,J)},isLayoutBuilt:function x(){return e.is(h)},setBlocLayoutContent:function m(L,J,K){y.setColumnContent(L,J,K)},getBlocLayout:function k(){return y},onStart:function z(J){J()},dispose:function H(){y=void 0;if(e.is(h)){h.dispose()}h=void 0}}};return a});define("DS/DELPPWServices/ExternalService/ExternalService",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWServices/ExternalService/ExternalServiceUtil"],function(d,b,a){var c=function c(h){var k="ExternalService",i=h.getLogger(),g=[],l=a.getInstance(h);var f,e;e=function e(p){var o=h.getPlugins("DatabasePlugin"),n=b.get3DSpaceUrl();if(!d.is(o)){h.getLogger().debug(k,"Database plugin not available.");return}o=o.instance;if(p instanceof Array){p.forEach(function(r){var s,q;if(d.is(r.documentPID)){s=n+"common/emxNavigator.jsp?appName=ENOBUPS_AP&objectId="+r.documentPID}else{if(d.is(r.referencePID)){q=o.getReferenceModel(r.referencePID);if(d.is(q)&&q.isPart()){s=n+"common/emxNavigator.jsp?appName=ENOENBO_AP&objectId="+q.id}else{s=n+"common/emxNavigator.jsp?appName=DELCPV_AP&objectId="+r.referencePID}}}if(d.is(s)){window.open(s)}})}else{i.debug(k,"ExploreInWebApp: Invalid Input passed(Not a Valid Array)")}};f=function f(){d.extend(h.getConfig().appContext,{getLogger:function o(){h.getLogger()},getSelections:function n(){return l.getSelectedNodeInfos(k)},notify:function p(q,r){if(q){h.getMediator().notify(q,r)}}})};return{onStart:function m(){f();g.push(h.addExternalListener("ExploreInWebApp",e))},onStop:function j(){var o,n;for(o=0,n=g.length;o<n;o++){h.removeExternalListener(g[o])}g=[]}}};return c});