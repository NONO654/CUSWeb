/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/ADHandlerFactory",["UWA/Promise","DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-app/selectors"],function(e,k,b,f,s,l,h,i){var r={},d=25000,g=[],n=new k();var c=window.Promise||e;function p(t,u){if(("upload"===t.type)||(t.title&&(t.title.indexOf(l.DATA_TRANSFER_KEY)===0)&&(t.description.indexOf("Upload")===0))){u.kind=l.JobKind.UPLOAD}else{if(("download"===t.type)||(t.title&&(t.title.indexOf(l.DATA_TRANSFER_KEY)===0)&&(t.description.indexOf("Download")===0))){u.kind=l.JobKind.DOWNLOAD}else{if(t.title&&(t.title.indexOf(l.DATA_TRANSFER_KEY)===0)){u.kind=l.JobKind.GENERATE_RESULT}else{u.kind=l.JobKind.TOOL}}}}function q(t,u){return new c(function(w,v){n.waitFor({store:u,timeout:d,select:function(x){return l.jobWithID(x,t)},isResolved:function(x){return((x!==null)&&(x.jobType!==null))}}).then(w,v)})}function o(u){var t=h.jobTypeWithID(u.store.getState(),u.jobTypeId),v=null;if(t&&t.handler){v=t.handler}else{v=(i.hasLicense(u.store.getState(),i.AppLicenses.SIMULATION_COMPANION))?"DS/SMAPoweredByHandler/default/ADDefaultHandler":"DS/SMAPoweredByHandler/abaqus/ADAbaqusHandler"}return new c(function(w){if(g[v]){if(g[v].store!==u.store){g[v].store=u.store}w(g[v])}else{require([v],function(x){g[v]=new x(u.store);w(g[v])})}})}function a(u,v){var t=v.attributes.definition.flowItem.ActivityConfig.properties.jobType;return h.jobTypeWithTitleRevision(u,t.title,t.revision).id}function j(u,t){return new c(function(v){q(t,u).then(function(){v(l.jobWithID(u.getState(),t).jobType)})})}function m(t){return new c(function(u){if(t.jobTypeId){u(t)}else{if(t.plmActivity){t.jobTypeId=a(t.store.getState(),t.plmActivity);u(t)}else{if(t.jobId){j(t.store,t.jobId).then(function(v){t.jobTypeId=v;u(t)})}else{u(t)}}}})}r.createTempJobFromPLMJob=function(t){var u={persistenceStatus:f.PersistenceStatus.CLEAN,id:(t.physicalId&&(t.physicalId.length>0))?t.physicalId:null,eedJobID:(t.eedJobId&&(t.eedJobId.length>0))?t.eedJobId:null,owner:t.owner,kind:l.JobKind.TOOL,jobType:null,title:(t.title&&(t.title.length>0))?t.title:"",description:(t.description&&(t.description.length>0))?t.description:"",ready:true,started:t.startTimeMillis?parseInt(t.startTimeMillis):0,ended:t.endTimeMillis?parseInt(t.endTimeMillis):0,status:t.status,inputs:[],mainInputFile:null,outputs:[],configuration:{},resultsOptions:{},executionOptions:{}};p(t,u);if(t.eedServerName&&(t.eedServerName.length>0)){u.executionOptions.server=t.eedServerName}u._plmJob=t;return u};r.getHandler=function(t){return n.waitFor({store:t.store,select:h.jobTypesPersistenceOperation,isResolved:function(u){return(u===null)}}).then(function(){return m(t)}).then(o)};r.createProgressFromCOSJobSummary=function(v){var u={},t;if(v&&v["@nFinished"]){u.totalSteps=5;t=parseInt(v["@nFinished"],10);u.stepsCompleted=!isNaN(t)?t:0;u.currentStepProgress=0;u.overallProgress=Math.round((u.stepsCompleted/u.totalSteps)*100)}return u};r.createProgressFromMCSJobSummary=function(){var t={totalSteps:5,currentStepProgress:0,overallProgress:100};return t};r.clearCache=function(){g=[]};return r});define("DS/SMAPoweredByHandler/generateResults/JobTile",["i18n!DS/SMAPoweredByHandler/assets/nls/common","i18n!DS/SMAPoweredByHandler/assets/nls/abaqus"],function(b,c){var a={iconClass:"file-type-skeleton job-type-3dximport",stepsMapping:[b.Initializing,b.Initializing,c.Importing,c.Importing]};return a});define("DS/SMAPoweredByHandler/common/Actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-app-alerts/actions","DS/SMAPoweredByState/ad-state-app-alerts/selectors","DS/SMAPoweredByState/ad-state-app/selectors","i18n!DS/SMAPoweredByHandler/assets/nls/common"],function(k,l,g,n,e,i,c){var r={};var p={NO_RESULTS_AVAILABLE:"SMAPoweredByViews.Skeleton.ADJobRenderer.NO_RESULTS_AVAILABLE"};function m(s){var t=l.isJobSuccessful(k.getStore().getState(),s),w=l.isJobInitialized(k.getStore().getState(),s),u=l.isBatchJob(k.getStore().getState(),s),v=i.isTransientWidget(k.getStore().getState());return !(t&&w&&!v&&!u)}function a(s){var u="DS/TransientWidget/TransientWidget",t=s.model.getResultDataFor3DPlay();if(t!==null){require([u],function(z){z.showWidget("SIMWPSR_AP",t.data.items[0].displayName,{X3DContentId:JSON.stringify(t)})})}else{var w="previewResults",y=e.Level.ERROR,v=p.NO_RESULTS_AVAILABLE,x=null;k.getStore().dispatch(n.addAlert(w,y,x,v))}}function q(s){var t=l.isJobRunning(k.getStore().getState(),s),u=g.isReadOnly(k.getStore().getState());return !t||u}function f(s){var t=l.isJobRunning(k.getStore().getState(),s),u=g.isReadOnly(k.getStore().getState());return t||u}function h(s){var w=l.isJobInitialized(k.getStore().getState(),s),u=l.jobWithID(k.getStore().getState(),s),v=l.isBatchJob(k.getStore().getState(),s),t=g.isReadOnly(k.getStore().getState());return !((w&&u.jobType&&u.jobType!==l.OLD_COMPANION_JOB_TYPE&&!v))||t}function o(s){var t=new CustomEvent("clonejob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function b(s){var t=new CustomEvent("abortjob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function j(s){var t=new CustomEvent("deletejob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function d(s){s.container.children[0].click()}r.viewDetails=function(){return{id:"viewDetails",text:c.viewDetails,fonticon:"window",handler:d}};r.cloneJob=function(s){return{id:"cloneJob",text:c.cloneJob,fonticon:"reload",disabled:h(s.get("id")),handler:o}};r.abortJob=function(s){return{id:"abortJob",text:c.abortJob,fonticon:"stop",disabled:q(s.get("id")),handler:b}};r.deleteJob=function(s){return{id:"deleteJob",text:c.deleteJob,fonticon:"trash",disabled:f(s.get("id")),handler:j}};r.previewResults=function(s){return{id:"previewResults",text:c.previewResults,fonticon:"eye",handler:a,disabled:m(s.get("id"))}};r.divider=function(){return{className:"divider"}};return r});define("DS/SMAPoweredByHandler/default/JobTile",["i18n!DS/SMAPoweredByHandler/assets/nls/common"],function(b){var a={iconClass:"file-type-skeleton job-type-default",stepsMapping:[b.Initializing,b.Initializing,b.Running,b.Saving]};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/common/rules",["DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-app-alerts/actions","DS/SMAPoweredByState/ad-state-app-alerts/selectors","DS/SMAPoweredByState/ad-state-cos/actions","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-app-credentials/selectors"],function(c,f,d,l,b,h,j,i,a){var g={store:null,jobIds:[],stateRedux:new c()},k="common-rules",e={MORE_THAN_ONE_CLOUD_COS_NO_DEFAULT:"SMAPoweredByHandler.common-rules.MORE_THAN_ONE_CLOUD_COS_NO_DEFAULT",NO_CLOUD_COS_FOUND:"SMAPoweredByHandler.common-rules.NO_CLOUD_COS_FOUND"};g.startListening=function(n,m){var s=this.store;if(this.jobIds.indexOf(n)===-1){this.jobIds.push(n);this.stateRedux.observeStore({store:s,select:f.currentWhereUsedTenantID,onChange:function(u){if(!u){var t=i.jobExecutionOptions(s.getState(),n);if(t&&t.drmMode===h.DRMMode.CLOUD){s.dispatch(j.setJobExecutionDRMMode(n,h.DRMMode.FIPER))}}}});var p=false;this.stateRedux.observeStore({store:s,select:i.isTransientStation,selectArguments:[n],onChange:function(t){if(t){p=true;s.dispatch(j.setJobExecutionRemoveWorkDirectory(n,true))}else{if(p){s.dispatch(j.setJobExecutionRemoveWorkDirectory(n,false))}}}});this.stateRedux.observeStore({store:s,select:i.jobKind,selectArguments:[n],onChange:function(t){if(t&&t!==i.JobKind.TOOL){var u=i.jobExecutionOptions(s.getState(),n);if(u&&u.licenseOptions){s.dispatch(j.setJobExecutionLicenseOptions(n,null))}}}});this.stateRedux.observeStore({store:s,select:i.jobDRMMode,selectArguments:[n],onChange:function(x){if(x===h.DRMMode.CLOUD){var y=i.jobExecutionOptions(s.getState(),n);if(y&&y.server){var v=h.drmModeSupported(s.getState(),y.server,h.DRMMode.CLOUD);if(!v){var z=h.drmModeEnabledServers(s.getState(),h.DRMMode.CLOUD);if(z.length===1){s.dispatch(j.setJobExecutionServer(n,z[0].id))}else{if(z.length>1){var w=null,t=null;for(var u=0;u<z.length;u++){if(z[u].isDefault===true){w=z[u];break}}if(w){t=w.id}else{t=z[0].id;s.dispatch(d.addAlert(k,l.Level.WARNING,null,e.MORE_THAN_ONE_CLOUD_COS_NO_DEFAULT))}s.dispatch(j.setJobExecutionServer(n,t))}else{s.dispatch(d.addAlert(k,l.Level.ERROR,null,e.NO_CLOUD_COS_FOUND))}}}}if(y&&y.station){s.dispatch(j.setJobExecutionStation(n,null))}}}});var r=function(u){var t=i.jobExecutionOptions(u,n);return t?t.server:null};this.stateRedux.observeStore({store:s,select:r,onChange:function(t){if(t){s.dispatch(b.refreshStations({id:t}))}}});this.stateRedux.observeStore({store:s,select:h.allServers,onChange:function(w){var u=i.jobExecutionOptions(s.getState(),n);if(u){var t=w.map(function(x){return x.id});var v=t.indexOf(u.server)!==-1;if(!v){w.forEach(function(x){if(x.isDefault){s.dispatch(j.setJobExecutionServer(n,x.id))}})}}},arrayCompare:true});var q=function(v){var t=[],w=m.getPremiseStations(v),u=i.jobExecutionOptions(v,n);if(u&&u.drmMode===h.DRMMode.FIPER){t=w.filter(function(x){return x.server===u.server})}return t};this.stateRedux.observeStore({store:s,select:q,onChange:function(y){var v=i.jobExecutionOptions(s.getState(),n);if(v){if(v.drmMode&&(v.drmMode===h.DRMMode.FIPER)){var t=y.map(function(z){return z.id});if(t.length>0){var w=t.indexOf(v.station)!==-1;if(!w){var x=t.indexOf(h.LOCALSTATIONNAME)!==-1,u=null;if(x){u=h.LOCALSTATIONNAME}else{u=t[0]}s.dispatch(j.setJobExecutionStation(n,u))}}}}},arrayCompare:true});var o=function(w){var v=i.jobExecutionOptions(w,n),x=v&&v.station?v.station:null,u=i.jobDRMMode(w,n),t=null;if(x||u){t=x+u}return t};this.stateRedux.observeStore({store:s,select:o,onChange:function(){var z=i.jobWithID(this.store.getState(),n),u=h.isRunAsJob(this.store.getState(),z),t=null;if(u){var x=i.jobDRMMode(this.store.getState(),n);if(x===h.DRMMode.FIPER){var y=i.jobExecutionOptions(this.store.getState(),n),A=y?y.station:null,v=h.firstStationWithID(this.store.getState(),A),w=a.getCredentialsByDomain(this.store.getState(),v.domains[0]);t=w?w.id:null}else{if(x!==h.DRMMode.FIPER&&x!==h.DRMMode.CLOUD){t="drmMode"}}}this.store.dispatch(j.setCredentialsID(n,t))}})}};g.setStore=function(m){this.store=m;this.jobIds=[]};g.unsubscribeAll=function(){this.stateRedux.unsubscribeAll()};return g});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/ad-handler-defs",[],function(){var a={};a.rules={};a.rules.JOB_ARG_SIZE_LIMIT=89;a.rules.SIM_FILE_EXTENSION=".sim";a.rules.ERROR_CODES={SPACE_IN_JOB:"SMAPoweredByHandler.abaqus-rules.SPACE_IN_JOB",LONG_JOB_NAME:"SMAPoweredByHandler.abaqus-rules.LONG_JOB_NAME",ILLEGAL_CHARACTER_IN_JOB:"SMAPoweredByHandler.abaqus-rules.ILLEGAL_CHARACTER_IN_JOB",SCALED_SVM:"SMAPoweredByHandler.abaqus-rules.SCALED_SVM",SCALED_PVM:"SMAPoweredByHandler.abaqus-rules.SCALED_PVM"};a.rules.ALERT_CATEGORY="abaqus-rules";a.rules.ARGUMENT_TYPE={JOB_ARG_NAME:"job",INPUT_ARG_NAME:"input"};a.rules.RULE_TYPE={ITERATION_SPECIFIC:"rules.itetationSpecific",ITERATION_WHEN_BATCH:"rules.iterationWhenBatch",NON_BATCH:"rules.notForBatch",GLOBAL:"rules.global"};a.rules.REPLACE_KEYS={JOB_ID_KEY:"{JOBID}",ITERATION_KEY:"{ITERATION}"};a.activity={};a.activity.EXTENSION_TYPES={osCommand:"com.dassault_systemes.sma.adapter.OSCommand",script:"com.dassault_systemes.sma.adapter.Script",calculator:"com.dassault_systemes.sma.adapter.Calculator",v6Utility:"com.dassault_systemes.sma.adapter.V6Utility",v6UtilityPISimImport:"com.dassault_systemes.sma.plugin.V6UtilPIsimImport",v6UtilityPIResultsGen:"com.dassault_systemes.sma.plugin.V6UtilPIPhyResGenerate",download:"com.dassault_systemes.sma.adapter.Download",upload:"com.dassault_systemes.sma.adapter.Upload",cae3dx:"com.dassault_systemes.smampa.adapter.cae3dx"};a.activity.JOB_OBJECT_KEYS={OSCommandEnvironmentVariable:"oscmd_env_vars",NewSimulationResults:"NewSimulation_Results",SimulationTitle:"Simulation_Title"};a.activity.RULE_PREFIX="__AdHoc__rule__";a.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE={REFERENCEID:"REFERENCEIDFORDOWNLOADRULE",TYPE:"TYPEFORDOWNLOADRULE",TITLE:"TITLEFORDOWNLOADRULE",SOURCE_FILE_NAME:"SOURCEFILENAMEFODOWNLOADRRULE",SOURCE_FILE_VERSION:"SOURCEFILEVERSIONFORDOWNLOADRULE"};a.activity.CONFIG_PARAMETER={PREFIX:"${PARAMETER[",SUFFIX:"]}"};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/abaqus/licensing-selectors",["DS/SMAPoweredByState/ad-state-cos/selectors"],function(e){var b={};b.LicenseType={CREDITS:"credits",TOKENS:"tokens",TOKENS_TRADITIONAL:"traditionalTokens"};b.ModelSizeFactor={1:{factor:1,cores:1},2:{factor:1.15,cores:2},3:{factor:1.3,cores:4},4:{factor:1.7,cores:8},5:{factor:1.9,cores:16},6:{factor:2.1,cores:32},7:{factor:2.4,cores:64}};b.FeaturesFactor={1:{factor:1},2:{factor:1.1},3:{factor:1.25},4:{factor:1.5},5:{factor:1.67}};b.PerformanceFactor={1:{factor:1,cores:1},2:{factor:1.93,cores:2},3:{factor:3.43,cores:4},4:{factor:5.91,cores:8},5:{factor:9.67,cores:16},6:{factor:13.85,cores:32},7:{factor:14.86,cores:64}};b.HardwareFactor={};b.HardwareFactor[e.OS.WINDOWS]=0.27;b.HardwareFactor[e.OS.LINUX]=0.12;b.MIN_CORES=4;function a(k,h){var j=null;for(var l=0;l<Object.keys(k).length;l++){if(k[l]&&k[l].cores===h){j=l;break}}return j}function d(m,l,k){var j=null,n=null,i=null,h=b.MIN_CORES;if(l.executionOptions&&l.executionOptions.licenseOptions){j=b.ModelSizeFactor[l.executionOptions.licenseOptions.modelSize];n=b.PerformanceFactor[l.executionOptions.licenseOptions.performance];i=(j&&n)?j.cores*n.cores:null}if(l.executionOptions&&l.executionOptions.drmMode&&l.executionOptions.drmMode!==e.DRMMode.CLOUD&&l.executionOptions.drmMode!==e.DRMMode.FIPER){h=1}if(k&&i>k){i=k}else{if(i<h){i=h}}return i}function g(h,i,l,k){var j=0;if(h===b.LicenseType.CREDITS){j=Math.round(92.01*i*l*k)}else{j=Math.floor(33*i*l*k)}return j}function c(j,k,h){var i=0,l=b.HardwareFactor[k];if(j===e.DRMMode.CLOUD&&l){i=Math.ceil((2.86*l*h)/0.18,1)}return i}function f(m){var h=null,j=null,l=null,n=null,k=null,i=null,o={};if(m.executionOptions&&m.executionOptions.licenseOptions){h=m.executionOptions.licenseOptions.licenseType;j=m.executionOptions.drmMode;l=m.executionOptions.os;n=b.PerformanceFactor[m.executionOptions.licenseOptions.performance];k=b.ModelSizeFactor[m.executionOptions.licenseOptions.modelSize];i=b.FeaturesFactor[m.executionOptions.licenseOptions.features];if(h&&j&&n&&k&&i){o.cpus=n.cores*k.cores;o.softwareRate=g(h,n.factor,k.factor,i.factor);o.hardwareRate=c(j,l,o.cpus)}}return o}b.getCPULimit=function(i,h){return e.cpuLimit(i,h.executionOptions.server,h.executionOptions.drmMode,h.executionOptions.os)};b.getSVMLimit=function(j,i){var h=b.getCPULimit(j,i);return a(b.ModelSizeFactor,h)};b.getPVMLimit=function(m,l){var i=b.getSVMLimit(m,l),h=i?b.ModelSizeFactor[i].cores:null,k=(l.executionOptions&&l.executionOptions.licenseOptions)?b.ModelSizeFactor[l.executionOptions.licenseOptions.modelSize]:null,j=h&&k?h/k.cores:null;return j?a(b.PerformanceFactor,j):null};b.getSmaMaxCpus=function(j,i){var h=b.getCPULimit(j,i);return d(j,i,h)};b.getUVMEstimates=function(h){return f(h)};return b});define("DS/SMAPoweredByHandler/abaqus/BatchJobTile",[],function(){var a={iconClass:"file-type-skeleton job-type-batch-job-abaqus",stepsMapping:[]};return a});define("DS/SMAPoweredByHandler/abaqus/JobTile",["i18n!DS/SMAPoweredByHandler/assets/nls/common","i18n!DS/SMAPoweredByHandler/assets/nls/abaqus"],function(b,c){var a={iconClass:"file-type-skeleton job-type-abaqus",stepsMapping:[b.Initializing,b.Initializing,c.Solving,b.Saving,c.Importing,c.Importing]};return a});define("DS/SMAPoweredByHandler/common/JobFacets",["i18n!DS/SMAPoweredByHandler/assets/nls/common"],function(b){var a=[{title:b.get("Content"),icon:"clipboard",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADContentsView"}},{title:b.get("SystemLog"),icon:"computer-connected",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADCosJobLogView"}},{title:b.get("Properties"),icon:"doc-text",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADJobPropertiesView"}}];return a});define("DS/SMAPoweredByHandler/common/CreateWizardFacets",[],function(){var a=[{required:true,titleKey:"Input",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",validator:"isMainInputValid",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-job-inputs-container/ad-create-job-inputs-container.html",tagName:"ad-create-job-inputs-container"}},{required:true,titleKey:"Options",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",validator:"isMainInputValid",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-job-solver-args-container/ad-create-job-solver-args-container.html",tagName:"ad-create-job-solver-args-container"}},{required:true,titleKey:"Execution",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",validator:"isExecutionValid",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-job-compute-container/ad-create-job-compute-container.html",tagName:"ad-create-job-compute-container"}},{required:true,titleKey:"Output",validator:"isOutputValid",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-job-default-outputs-container/ad-create-job-default-outputs-container.html",tagName:"ad-create-job-default-outputs-container"}}];return a});define("DS/SMAPoweredByHandler/activity/ActivityUtils",["UWA/Class","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByHandler/ad-handler-defs","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors"],function(c,d,b,h,g,k,j,f,i){var e={};function a(){var l=[b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.REFERENCEID,b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.TYPE,b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.TITLE,b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.SOURCE_FILE_NAME,b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.SOURCE_FILE_VERSION];return l}e.getInitialJobState=function(l){return{persistenceStatus:d.PersistenceStatus.CLEAN,id:l.id,eedJobID:null,kind:g.JobKind.TOOL,jobType:null,title:l.attributes.title,description:l.attributes.description?l.attributes.description:"",ready:false,started:0,ended:0,status:g.JobStatus.CONFIGURING,inputs:[],mainInputFile:null,outputs:[],configuration:{},resultsOptions:{},executionOptions:{}}};e.setJobType=function(r,q,p){var l=null,m=e.getSteps(r);for(var o=0;o<m.length;o++){if((m[o].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.osCommand)&&(l===null)){var n=m[o].FlowItem.stepConfig.properties.PredefinedCommandOptions.Application;l=k.latestJobTypeWithTitle(p,n.appName)}}q.jobType=l};e.setInputsState=function(l,p,m){var s=e.getDownloadStep(l),q=null,v,u,n,o,t,r;p.inputs=[];if(s&&s.FlowItem.stepConfig.properties.rules){v=s.FlowItem.stepConfig.properties.rules;Object.keys(v).forEach(function(w){q=null;if(v[w].name.indexOf(b.activity.RULE_PREFIX)>=0){if(v[w].type.toLowerCase()!=="file"){q=v[w].referenceId}else{u=j.managedDataWithID(m,v[w].referenceId);if(u){n=j.managedDataChildren(m,u.id);if(n.length===1){if(v[w].sourceFileVersion){o=j.managedDataChildren(m,n[0].id);for(r=0;r<o.length;r++){if(o[r].version===v[w].sourceFileVersion){q=o[r].id;break}}}else{q=n[0].id}}else{for(t=0;t<n.length;t++){if(n[t].name===v[w].sourceFileName){if(v[w].sourceFileVersion){o=j.managedDataChildren(m,n[t].id);for(r=0;r<o.length;r++){if(o[r].version===v[w].sourceFileVersion){q=o[r].id;break}}}else{q=n[t].id}}if(q){break}}}}}}else{if(!p.activityTemplateRules){p.activityTemplateRules=[]}p.activityTemplateRules.push(v[w])}if(q){p.inputs.push(q)}})}};e.setConfigurationArgumentsState=function(o,l){var n=e.getOSCommandStep(o),m;l.configuration.arguments=[];if(n&&n.FlowItem.stepConfig.properties.PredefinedCommandOptions&&n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application){l.configuration.application={appName:n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.appName,appVersion:n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.appVersion};if(n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.values){m=n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.values;Object.keys(m).forEach(function(p){l.configuration.arguments.push({id:m[p].id,name:m[p].name,optionType:m[p].optionType,separatorValue:m[p].separatorValue?m[p].separatorValue:null,value:m[p].value?m[p].value:null,active:m[p].optionType==="Standalone"?true:null})})}}};e.setJobCommandState=function(n,l){var m=e.getOSCommandStep(n);l.configuration.command=null;if(m&&m.FlowItem.stepConfig.properties.command){l.configuration.command=m.FlowItem.stepConfig.properties.command}};e.setEnvironmentVariablesState=function(p,n){var o=e.getOSCommandStep(p),l,m;n.configuration.environmentVariables=[];if(o&&o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable]&&o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values){o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.forEach(function(q){Object.keys(q).forEach(function(r){l=q[r];if(l){m=l.split("=");if(m.length===2){n.configuration.environmentVariables.push({name:m[0].trim(),value:m[1].trim()})}}})})}};e.setOutputFileSpecsState=function(n,m){var l=e.getUploadStep(n);m.configuration.outputFileSpecsEnabled=false;m.configuration.outputFileSpecs=[];if(l){if(l.FlowItem.ExecutionConfig&&(typeof(l.FlowItem.ExecutionConfig.isExecutable)==="undefined"||l.FlowItem.ExecutionConfig.isExecutable.toLowerCase()!=="false")){m.configuration.outputFileSpecsEnabled=true}if(l.FlowItem.stepConfig.properties.rules){l.FlowItem.stepConfig.properties.rules.forEach(function(o){if(o.sourceFileName&&(o.sourceFileName.length>0)&&o.enabled&&(o.enabled.toLowerCase()==="true")){m.configuration.outputFileSpecs.push(o.sourceFileName)}})}}};e.setExecutionOptionsState=function(r,q,p){var m=e.getExecutionConfig(r),n,l,o;q.executionOptions={drmMode:h.DRMMode.FIPER,os:h.OS.WINDOWS};if(m.drmMode){if(m.drmMode.toLowerCase()==="cloud"){q.executionOptions.drmMode=h.DRMMode.CLOUD;if(m.CloudConfig){if(m.CloudConfig.os&&(m.CloudConfig.os.toLowerCase()==="linux")){q.executionOptions.os=h.OS.LINUX}if(m.CloudConfig.numprocs){q.executionOptions.numProcs=m.CloudConfig.numprocs}}}else{if(m.drmMode.toLowerCase()==="fiper"){if(m.affinities&&m.affinities.Host){q.executionOptions.station=m.affinities.Host}}else{q.executionOptions.drmMode=m.drmMode;l=m[m.drmMode+"Config"];if(l){q.executionOptions.drmOptions={};for(o=0;o<l.length;o++){q.executionOptions.drmOptions[l[o].name]=l[o].value}}}}}q.executionOptions.removeWorkDir=(m.keepdirtype!=="2");if(m.workingdir){n=f.workDataExecDirByLocation(p,q.executionOptions.station,m.workingdir);if(n){q.executionOptions.workDirectory=n.id}}};e.setOutputFileSpecsPLM=function(n,p){var m=e.getUploadStep(p),o,l=0;if(m){m.FlowItem.ExecutionConfig.isExecutable=n.configuration.outputFileSpecsEnabled?"true":"false";m.FlowItem.stepConfig.properties.rules=[];if(n.configuration.outputFileSpecs){n.configuration.outputFileSpecs.forEach(function(q){l++;o={enabled:"true",id:String(l),name:b.activity.RULE_PREFIX+l,referenceId:null,sourceFileName:q,title:null,type:"Simulation Document - Versioned",docDescription:""};m.FlowItem.stepConfig.properties.rules.push(o)})}}};e.setResultsOptionsState=function(m,l){l.resultsOptions={generateResults:false,generateResultsUnitsDefault:null,generateResultsUnits:null,generateResultsUnitsEnabled:false}};e.setV6UtilityLanguagePLM=function(m){var l=e.getV6UtilitySteps(m);l.forEach(function(n){n.FlowItem.stepConfig["3DX_LANG"]=window.navigator.userLanguage||window.navigator.language})};e.getDownloadStep=function(o){var l=e.getSteps(o),n=null,m;for(m=0;m<l.length;m++){if(l[m].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.download){n=l[m];break}}return n};e.getUploadStep=function(o){var l=e.getSteps(o),n=null,m;for(m=l.length-1;m>=0;m--){if(l[m].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.upload){n=l[m];break}}return n};e.getOSCommandStep=function(o){var l=e.getSteps(o),n=null,m;for(m=0;m<l.length;m++){if(l[m].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.osCommand){n=l[m];break}}return n};e.getV6UtilitySteps=function(o){var m=e.getSteps(o),l=[],n;for(n=0;n<m.length;n++){if(m[n].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.v6Utility){l.push(m[n])}}return l};e.getSteps=function(m){var l=[];if(m.attributes&&m.attributes.definition&&m.attributes.definition.flowItem&&m.attributes.definition.flowItem.implementations&&(m.attributes.definition.flowItem.implementations.length>0)&&m.attributes.definition.flowItem.implementations[0].children){l=m.attributes.definition.flowItem.implementations[0].children}return l};e.getSimImportUtilityStep=function(p){var l=e.getSteps(p),o=null,n,m;for(n=0;n<l.length;n++){if(l[n].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.v6Utility){if(l[n].FlowItem.stepConfig.childConfigs){for(m=0;m<l[n].FlowItem.stepConfig.childConfigs.length;m++){if(l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig&&l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig.extensionName&&l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig.extensionName===b.activity.EXTENSION_TYPES.v6UtilityPISimImport){o=l[n];break}}}}}return o};e.getResultsGenUtilityStep=function(p){var l=e.getSteps(p),o=null,n,m;for(n=0;n<l.length;n++){if(l[n].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.v6Utility){if(l[n].FlowItem.stepConfig.childConfigs){for(m=0;m<l[n].FlowItem.stepConfig.childConfigs.length;m++){if(l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig&&l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig.extensionName&&l[n].FlowItem.stepConfig.childConfigs[m].pluginConfig.extensionName===b.activity.EXTENSION_TYPES.v6UtilityPIResultsGen){o=l[n];break}}}}}return o};e.buildResultsOptionsUnitsState=function(p){var n={},l,o,m;if(p){l=p.split(":");for(o=0;o<l.length;o++){m=l[o].split("=");if(m.length===2){n[m[0]]=m[1]}}}return n};e.getExecutionConfig=function(m){var l=null;if(m.attributes&&m.attributes.definition&&m.attributes.definition.flowItem&&m.attributes.definition.flowItem.ExecutionConfig&&m.attributes.definition.flowItem.ExecutionConfig.properties){l=m.attributes.definition.flowItem.ExecutionConfig.properties}return l};e.getActivityConfig=function(m){var l=null;if(m.attributes&&m.attributes.definition&&m.attributes.definition.flowItem&&m.attributes.definition.flowItem.ActivityConfig&&m.attributes.definition.flowItem.ActivityConfig.properties){l=m.attributes.definition.flowItem.ActivityConfig.properties}return l};e.setInputsPLM=function(q,s,p){var m=e.getDownloadStep(s),o=0,l,r,n;if(m&&typeof(m.FlowItem.ExecutionConfig.isExecutable)==="undefined"){m.FlowItem.ExecutionConfig={isExecutable:true}}if(m){m.FlowItem.stepConfig.properties.rules=[];if(q.activityTemplateRules){q.activityTemplateRules.forEach(function(t){o++;m.FlowItem.stepConfig.properties.rules.push(t)})}q.inputs.forEach(function(t){o++;l=j.managedDataWithID(p,t);if(l){n=j.managedDataParent(p,l.id,false);r={id:String(o),values:[],name:b.activity.RULE_PREFIX+o};if(l.type==="file"){r.referenceId=n.id;r.type="file";r.title=l.name;r.sourceFileName=l.name}else{if(l.type==="fileversion"){r.referenceId=j.managedDataParent(p,n.id,false).id;r.type="file";r.title=l.name;r.sourceFileName=n.name;r.sourceFileVersion=l.version}else{if(l.type==="Document"){r.referenceId=l.id;r.type="file";r.title=l.title;r.sourceFileName="*"}else{r.referenceId=l.id;r.type=l.type;r.title=l.title;r.sourceFileName="*"}}}m.FlowItem.stepConfig.properties.rules.push(r)}})}};e.setConfigurationArgumentsPLM=function(m,o){var n=e.getOSCommandStep(o),l;if(n&&typeof(n.FlowItem.ExecutionConfig.isExecutable)==="undefined"){n.FlowItem.ExecutionConfig={isExecutable:true}}if(n&&n.FlowItem.stepConfig.properties.PredefinedCommandOptions&&n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application){n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.values=[];if(m.configuration.arguments){m.configuration.arguments.forEach(function(p){l={optionType:p.optionType,name:p.name,id:p.id};if(p.separatorValue){l.separatorValue=p.separatorValue}if(p.value){l.value=p.value}if((p.displayed!==false)&&(((p.optionType!=="Option-Value")&&(p.optionType!=="Standalone"))||(p.value)||(p.active))){n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.values.push(l)}})}}};e.setJobCommandPLM=function(l,n){var m=e.getOSCommandStep(n);if(l.configuration.command){m.FlowItem.stepConfig.properties.command=l.configuration.command}};e.setEnvironmentVariablesPLM=function(m,p){var o=e.getOSCommandStep(p),n,l=0;if(o&&o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable]){o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values=[{0:null}];if(m.configuration.environmentVariables&&(m.configuration.environmentVariables.length>0)){o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values=[];m.configuration.environmentVariables.forEach(function(q){n={};n[String(l)]=q.name+"="+q.value;o.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(n);l++})}}};e.setResultsOptionsPLM=function(o,q){var m=e.getSimImportUtilityStep(q),l=e.getResultsGenUtilityStep(q),p,n=b.activity.JOB_OBJECT_KEYS.NewSimulationResults;if(m&&l){m.FlowItem.ExecutionConfig.isExecutable=o.resultsOptions.generateResults?"true":"false";l.FlowItem.ExecutionConfig.isExecutable=o.resultsOptions.generateResults?"true":"false";m.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.ImportUnits=e.buildResultsOptionsUnitsPLM(o.resultsOptions);m.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[n]=o.resultsOptions.generateResultsSourceFilename;p=(o.resultsOptions.generateResultsTitle&&(o.resultsOptions.generateResultsTitle.length>0))?o.resultsOptions.generateResultsTitle:o.resultsOptions.generateResultsSourceFilename;if(p){m.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[b.activity.JOB_OBJECT_KEYS.SimulationTitle]=p.replace(/\.[^/.]+$/,"")}}};e.buildResultsOptionsUnitsPLM=function(n){var l="",m,o,q,p;if(n){m=n.generateResultsUnitsEnabled?n.generateResultsUnits:n.generateResultsUnitsDefault;if(m){q=Object.keys(m);for(o=0;o<q.length;o++){p=m[q[o]];if(p){l+=(q[o]+"="+p);if(o<(q.length-1)){l+=":"}}}}}return l};e.setExecutionOptionsPLM=function(o,l,m){var p=e.getExecutionConfig(l),t=e.getActivityConfig(l),r,q=null,s,n;p.jobTitle=o.title;p.keepdirtype=((o.executionOptions===h.DRMMode.CLOUD)||o.executionOptions.removeWorkDir)?"0":"2";delete p.affinities;Object.keys(p).forEach(function(u){if(u.indexOf("Config")===(u.length-6)){delete p[u]}});if(o.executionOptions.drmMode){if(o.executionOptions.drmMode===h.DRMMode.FIPER){p.drmMode="fiper";p.affinities={Host:o.executionOptions.station}}else{if(o.executionOptions.drmMode===h.DRMMode.CLOUD){p.drmMode="Cloud";p.CloudConfig={numprocs:o.executionOptions.numProcs};p.CloudConfig.os="windows";if(o.executionOptions.os===h.OS.LINUX){p.CloudConfig.os="linux"}p.monitorFiles=true}else{p.monitorFiles=true;p.drmMode=o.executionOptions.drmMode;p[o.executionOptions.drmMode+"Config"]=[];Object.keys(o.executionOptions.drmOptions).forEach(function(u){n=h.customDRMPropertyDef(m,o.executionOptions.server,o.executionOptions.drmMode,u);if(n&&(n.required||(n.defaultValue!==o.executionOptions.drmOptions[u]))){p[o.executionOptions.drmMode+"Config"].push({title_display:n.displayName,name:u,datatype:n.type,value:o.executionOptions.drmOptions[u],drm:o.executionOptions.drmMode})}})}}}if(o.executionOptions.workDirectory){r=f.workDataWithID(m,o.executionOptions.workDirectory);if(r){q=r.path}}p.workingdir=q;s=e.getSteps(l);s.forEach(function(u){if(!u.FlowItem.ExecutionConfig){u.FlowItem.ExecutionConfig={}}u.FlowItem.ExecutionConfig.workingdir=q});if(o.executionOptions.licenseOptions){t.SXALicenseOptions=o.executionOptions.licenseOptions}};e.setJobTypeConfig=function(n,o,m){var l=k.jobTypeWithID(m,n.jobType);o.attributes.definition.flowItem.ActivityConfig.properties.jobType={title:l.title,revision:l.revision}};e.isApplicationDefined=function(m){var l=m.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application;return l&&typeof l.appName!=="undefined"};e.getCalculatorStep=function(o){var l=e.getSteps(o),n=null,m;for(m=0;m<l.length;m++){if(l[m].FlowItem.stepConfig.extensionName===b.activity.EXTENSION_TYPES.calculator){n=l[m];break}}return n};e.isBatchPLMActivity=function(m){var l=e.getCalculatorStep(m);return(l!==null)};e.getPLMParametersFromJob=function(l){var t=a(l),r=[],s=null,u=null,n=l.batchConfiguration.iterations,m=null;if(n){for(var q=0;q<n.length;q++){m=n[q];if(m.configuration&&m.configuration.arguments){for(var p=0;p<m.configuration.arguments.length;p++){if(t.indexOf(m.configuration.arguments[p].name)===-1){t.push(m.configuration.arguments[p].name)}}}}}for(var o=0;o<t.length;o++){r.push({name:t[o],value:""})}if(l.configuration.arguments){l.configuration.arguments.forEach(function(v){s=r.filter(function(w){return w.name===v.name});u={optionType:v.optionType,name:v.name,id:v.id};if(v.separatorValue){u.separatorValue=v.separatorValue}if(v.value){u.value=v.value}if((s.length===1)&&(v.displayed!==false)&&(((v.optionType!=="Option-Value")&&(v.optionType!=="Standalone"))||(v.value)||(v.active))){s[0].value=v.value}})}return r};e.setCalculatorForBatch=function(o,q){var m=e.getCalculatorStep(q),l=e.getPLMParametersFromJob(o),p="",r=null;for(var n=0;n<l.length;n++){r=l[n];p+=r.name+"= "+d.BATCH_JOB_DATA_PARAMETER_NAME+"["+d.BATCH_JOB_ITERATION_PARAMETER_NAME+"]["+(n+1)+"]\n"}m.FlowItem.stepConfig.properties.expression=p;if(!m.FlowItem.ExecutionConfig){m.FlowItem.ExecutionConfig={}}m.FlowItem.ExecutionConfig.isExecutable="true"};e.setSolverArgumentsforBatch=function(p,l,m){var t=e.getOSCommandStep(l),r=e.getPLMParametersFromJob(p),u=null,n=null,q=null,s=null,o=false;if(t&&t.FlowItem.stepConfig.properties.PredefinedCommandOptions&&t.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application&&t.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.values){s=t.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application;q=i.connectorDefinitionForApp(m,s.appName,s.appVersion);r.forEach(function(w){o=false;n=i.connectorOption(q,w.name);if(n){u={optionType:n.optionType,name:w.name,id:n.id};if(n.separatorValue){u.separatorValue=n.separatorValue}u.value=b.activity.CONFIG_PARAMETER.PREFIX+w.name+b.activity.CONFIG_PARAMETER.SUFFIX;for(var v=0;v<s.values.length;v++){if(s.values[v].name===u.name){s.values[v].value=u.value;o=true;break}}if(!o){s.values.push(u)}}})}};e.setDownloadRulesForBatchArguments=function(n,p){var l=e.getDownloadStep(p),o={},m=(n.inputs?(n.inputs.length+1):1);o.id=String(m);o.name=b.activity.RULE_PREFIX+m;o.referenceId=b.activity.CONFIG_PARAMETER.PREFIX+b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.REFERENCEID+b.activity.CONFIG_PARAMETER.SUFFIX;o.type="file";o.title=b.activity.CONFIG_PARAMETER.PREFIX+b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.TITLE+b.activity.CONFIG_PARAMETER.SUFFIX;o.sourceFileName=b.activity.CONFIG_PARAMETER.PREFIX+b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.SOURCE_FILE_NAME+b.activity.CONFIG_PARAMETER.SUFFIX;o.sourceFileVersion=b.activity.CONFIG_PARAMETER.PREFIX+b.activity.PLMPARAMETERS_FOR_DOWNLOAD_RULE.SOURCE_FILE_VERSION+b.activity.CONFIG_PARAMETER.SUFFIX;o.values=[];l.FlowItem.stepConfig.properties.rules.push(o)};e.setBatchInformationOnPLMActivity=function(m,n,l){e.setCalculatorForBatch(m,n);e.setSolverArgumentsforBatch(m,n,l);e.setDownloadRulesForBatchArguments(m,n)};e.addJobDataInformationForDownload=function(o,n,p,q){var l=j.managedDataWithID(q,n),m=null;if(l){m=j.managedDataParent(q,l.id,false);o.push(n);o.push(p);if(l.type==="file"){o.push("file");o.push(l.name);o.push("");o.push("")}else{if(l.type==="fileversion"){o.push("file");o.push(l.name);o.push(m.name);o.push(l.version)}else{if(l.type==="Document"){o.push("file");o.push(l.title);o.push("*");o.push("")}else{o.push(l.type);o.push(l.title);o.push("*");o.push("")}}}}};e.getStateInputsFromIteration=function(m){var l=[];l.push({inputID:m[0],relID:m[1]});return l};e.getStateArgumentsFromIteration=function(r,l,p){var n=[],q=null;for(var o=5;o<l.length;o++){q=null;for(var m=0;m<p.length;m++){if((p[m].name===l[o].name)&&(r[o+1]!==l[o].value)){q={id:p[m].id,name:p[m].name,optionType:p[m].optionType,separatorValue:p[m].separatorValue?p[m].separatorValue:null,value:r[o+1]};break}}if(q!==null){n.push(q)}}return n};e.setIterationDataFromParameters=function(l,m,q){var p=null,o=null;for(var n=0;n<m.value.length;n++){p=m.value[n];o={};o.inputs=e.getStateInputsFromIteration(p);o.configuration={};o.configuration.arguments=e.getStateArgumentsFromIteration(p,l,q.configuration.arguments);o.mainInputFile=o.inputs[0];q.batchConfiguration.iterations.push(o)}};e.prepareBatchPLMActivity=function(m){var l=e.getDownloadStep(m);if(l&&l.FlowItem&&l.FlowItem.stepConfig&&l.FlowItem.stepConfig.properties&&l.FlowItem.stepConfig.properties.rules&&l.FlowItem.stepConfig.properties.rules.length>=1){l.FlowItem.stepConfig.properties.rules.pop()}};return e});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/common/selectors",["DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByHandler/activity/ActivityUtils","i18n!DS/SMAPoweredByViews/assets/nls/ADCreateJobCompute"],function(h,g,e,d,c){var a={},b={DOWNLOAD:"getDownloadStep",UPLOAD:"getUploadStep",OS_COMMAND:"getOSCommandStep"},f={PROCESS:"process",ACTIVITY:"activity"};a.isExecutionValid=function(){return true};a.isOutputValid=function(){return true};a.isJobValid=function(){return true};a.getSimulationObject=function(k,j){var i=g.jobOutputObjects(k,j).filter(function(l){return l.type==="DesignSight"});return i.length===1?i[0]:null};a.getPremiseStations=e.runningStations;a.getCloudStations=function(j,i){return{items:[{label:c.get("OperatingSystemWindows"),value:"windows",selected:(g.jobExecutionOptions(j,i).os==="windows")},{label:c.get("OperatingSystemLinux"),value:"linux",selected:(g.jobExecutionOptions(j,i).os==="linux")}]}};a.isValidString=function(i,j){var k=/^[^@,*?[\]#${}\\"<>|%]*$/g;if(j===f.PROCESS||j===f.ACTIVITY){k=/^[^@,*?[\]#${}\\"<>|%]*$/g}return k.test(i)};a.isCloudEnabled=function(){return false};a.hasStep=function(l,i,m){var k=g.jobWithID(l,i),j=k&&k._plmActivity?d[m](k._plmActivity):null;return(j!==null)};a.OBJECTTYPES=f;a.Steps=b;return a});define("DS/SMAPoweredByHandler/abaqus/CreateWizardFacets",["DS/SMAPoweredByHandler/common/CreateWizardFacets"],function(c){var a=[c[0]],b=JSON.parse(JSON.stringify(c[1]));b.titleKey="Solver";b.nlsPath="DS/SMAPoweredByHandler/assets/nls/abaqus";a.push(b);a.push(c[2]);a.push({required:true,titleKey:"Output",validator:"isOutputValid",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-job-outputs-container/ad-create-job-outputs-container.html",tagName:"ad-create-job-outputs-container"}});return a});
/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/ADAbstractHandler",["UWA/Class","DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByHandler/common/selectors","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByHandler/common/rules"],function(c,k,a,b,d,g,i){var j={};function f(n){var l=JSON.parse(JSON.stringify(n));if(this.isBatchPLMActivity(l)){this.prepareBatchPLMActivity(l)}var m=this.getInitialJobState(l);this.setInputsState(l,m,this.store.getState());this.setConfigurationArgumentsState(l,m);this.setJobCommandState(l,m);this.setEnvironmentVariablesState(l,m);this.setOutputFileSpecsState(l,m);this.setResultsOptionsState(l,m);this.setExecutionOptionsState(l,m,this.store.getState());this.setJobType(l,m,this.store.getState());m._plmActivity=n;if(this.isBatchPLMActivity(l)){m.batchConfiguration={maxBatchSize:4,isSequential:false,iterations:[]}}return m}function h(m,l){var n=m._plmActivity;n.attributes.title=m.title;n.attributes.description=m.description;this.setInputsPLM(m,n,l);this.setConfigurationArgumentsPLM(m,n,l);this.setJobCommandPLM(m,n,l);this.setEnvironmentVariablesPLM(m,n,l);this.setOutputFileSpecsPLM(m,n,l);this.setResultsOptionsPLM(m,n,l);this.setExecutionOptionsPLM(m,n,l);this.setV6UtilityLanguagePLM(n,l);this.setJobTypeConfig(m,n,l);if(g.isBatchJob(l,m)){this.setBatchInformationOnPLMActivity(m,n,l)}return n}function e(){this.getInitialJobState=k.getInitialJobState.bind(k);this.setInputsState=k.setInputsState.bind(k);this.setConfigurationArgumentsState=k.setConfigurationArgumentsState.bind(k);this.setJobCommandState=k.setJobCommandState.bind(k);this.setEnvironmentVariablesState=k.setEnvironmentVariablesState.bind(k);this.setOutputFileSpecsState=k.setOutputFileSpecsState.bind(k);this.setResultsOptionsState=k.setResultsOptionsState.bind(k);this.setExecutionOptionsState=k.setExecutionOptionsState.bind(k);this.setJobType=k.setJobType.bind(k);this.setInputsPLM=k.setInputsPLM.bind(k);this.setConfigurationArgumentsPLM=k.setConfigurationArgumentsPLM.bind(k);this.setJobCommandPLM=k.setJobCommandPLM.bind(k);this.setEnvironmentVariablesPLM=k.setEnvironmentVariablesPLM.bind(k);this.setOutputFileSpecsPLM=k.setOutputFileSpecsPLM.bind(k);this.setResultsOptionsPLM=k.setResultsOptionsPLM.bind(k);this.setExecutionOptionsPLM=k.setExecutionOptionsPLM.bind(k);this.setV6UtilityLanguagePLM=k.setV6UtilityLanguagePLM.bind(k);this.setJobTypeConfig=k.setJobTypeConfig.bind(k);this.prepareBatchPLMActivity=k.prepareBatchPLMActivity;this.getDownloadsPerIteration=k.getDownloadsPerIteration;this.setIterationDataFromParameters=k.setIterationDataFromParameters;this.getPLMParametersFromJob=k.getPLMParametersFromJob;this.isBatchPLMActivity=k.isBatchPLMActivity;this.setBatchInformationOnPLMActivity=k.setBatchInformationOnPLMActivity;this.addJobDataInformationForDownload=k.addJobDataInformationForDownload}j.init=function(l){this.store=l;this.stateRedux=new a();e.apply(this)};j.addJobId=function(l){i.setStore(this.store);i.startListening(l,this.Selectors)};j.getJobFacets=function(m,l){if(this.batchJobFacets&&g.isBatchJob(l,m)){return this.batchJobFacets}return this.jobFacets};j.getJobTile=function(m,l){if(this.batchJobTile&&g.isBatchJob(l,m)){return this.batchJobTile}return this.jobTile};j.unsubscribeAll=function(){this.stateRedux.unsubscribeAll();i.unsubscribeAll()};j.createJobFromPLMActivity=function(){return f.apply(this,arguments)};j.createPLMActivityFromJob=function(){return h.apply(this,arguments)};j.updateJobConfigurationFromPLMParameters=function(l,n){var m=l.pop();this.setIterationDataFromParameters(l,m,n);return n};j.getPLMParametersFromJobConfiguration=function(x,s){var o=this.getPLMParametersFromJob(g.jobWithID(this.store.getState(),x)),q=g.batchJobIterations(this.store.getState(),x),p=null,w=null,y,z=[],n=null,m=null;for(var v=0;v<q.length;v++){p=q[v];n=[];for(var u=0;u<p.inputs.length;u++){w=p.inputs[u].inputID;if(p.inputs[u].relID){y=p.inputs[0].relID}else{if(s&&w){y=s[w]}}if(w&&y){this.addJobDataInformationForDownload(n,w,y,this.store.getState())}}for(var t=5;t<o.length;t++){m=o[t].value;if(p.configuration&&p.configuration.arguments&&p.configuration.arguments.length){for(var r=0;r<p.configuration.arguments.length;r++){if(o[t].name===p.configuration.arguments[r].name){m=p.configuration.arguments[r].value;break}}}n.push(m)}z.push(n)}o.push({name:d.BATCH_JOB_DATA_PARAMETER_NAME,value:z});return o};j.Selectors=null;return c.extend(j)});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/abaqus/selectors",["UWA/Core","DS/SMAPoweredByHandler/common/selectors","DS/SMAPoweredByHandler/abaqus/licensing-selectors","DS/SMAPoweredByHandler/ad-handler-defs","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors","i18n!DS/SMAPoweredByHandler/assets/nls/abaqus"],function(f,i,a,m,d,g,h,j,l){var e=f.merge(a,i);function b(q,n,s,r,o,p){if((typeof(s)==="undefined")||!s||(s.length===0)){s=" "}if(r.length>0||(q[p].required&&(q[p].required.toLowerCase()==="true"))){n=o+s+r}return n}function k(r){var n,s,u,p,t,o="";for(var q=0;q<r.length;q++){n=null;s=r[q].optionType;u=r[q].separatorValue;p=r[q].name;t=r[q].value?r[q].value.trim():"";if(s===e.OPTION_TYPES.standalone){if(r[q].required&&(r[q].required.toLowerCase()==="true")){n=p}else{if(r[q].active){n=p}}}else{if(s===e.OPTION_TYPES.standaloneValue){n=t}else{if(s===e.OPTION_TYPES.optionValue){n=b(r,n,u,t,p,q)}}}if(n){if(o.length>0){o+=" "}o+=n}}return o}function c(q,r,p){var o=[];var n=h.isBatchJob(q,r);if(n){o=h.batchJobIterations(q,r).filter(function(s){return p(q,s)})}return o}e.OPTION_TYPES={standalone:"Standalone",optionValue:"Option-Value",standaloneValue:"Standalone-Value"};e.ARGNAME={analysisType:"Analysis Type"};e.isGenerateResultsAllowed=function(r,u){var t=h.jobArgumentValue(r,u,"resultsformat"),q=h.jobWithID(r,u),p=(h.jobDRMMode(r,q)===g.DRMMode.CLOUD),o=g.isCustomDRMJob(r,q),n=(h.jobOS(r,q)===g.OS.WINDOWS),s=h.isBatchJob(r,u);return(!s)&&(p||o||n)&&(t==="both"||t==="sim")};e.isMainInputValid=function(o,n){return(h.jobMainInput(o,n)!==null)};e.isCloudEnabled=function(p){var o=d.isCloudEnabled(p),q=g.drmModeEnabledServers(p,g.DRMMode.CLOUD),n=q&&q.length>0;return o&&n};e.selectLicensingOptionsAndLimits=function(q,s){var p=h.jobExecutionOptions(q,s),r=p?p.licenseOptions:null,n=e.getSVMLimit(q,{executionOptions:p}),o=e.getPVMLimit(q,{executionOptions:p});return{licenseOptions:r,svmLimit:n,pvmLimit:o}};e.iterationDisplayName=function(o,p,n){return h.jobArgumentValue(o,p,m.rules.ARGUMENT_TYPE.INPUT_ARG_NAME,n)};e.jobProgress=function(){return"100%"};e.stepsCompleted=function(){return"2/5"};e.commandPreview=function(n,y,q){var A=[],o=null,B=null,v=null,s=h.getApplication(n,y),r=f.clone(j.connectorDefinitionForApp(n,s.appName,s.appVersion)),z=function(D,C){return C.name===D.name},u="";if(parseInt(q)===q){o=JSON.parse(JSON.stringify(h.jobArguments(n,y,q,true)));for(var w=0;w<o.length;w++){if(o[w].optionType){A.push(o[w])}else{B=j.connectorOption(r,o[w].name);B.value=o[w].value;B.displayed=true;A.push(B)}}}else{A=JSON.parse(JSON.stringify(h.jobArguments(n,y)));for(var x=0;x<h.batchJobIterationCount(n,y);x++){o=h.jobArguments(n,y,x,false);for(var t=0;t<o.length;t++){v=A.filter(z.bind(null,o[t]));if(v.length===0){B=j.connectorOption(r,o[t].name);B.value=l.get("iterationSpecific");B.displayed=true;A.push(B)}else{if(!v[0].displayed){v[0].displayed=true;v[0].value=l.get("iterationSpecific")}}}}}var p=h.jobCommand(n,y);if(p!==null&&p!==""){u=p}else{u=k(A)}return u};e.jobFailedIteration=function(n,o){return c(n,o,function(q,p){return h.isJobDone(q,p)&&!h.isJobSuccessful(q,p)}).length};e.jobCompletedIteration=function(n,o){return c(n,o,function(q,p){return h.isJobDone(q,p)&&h.isJobSuccessful(q,p)}).length};e.jobRunningIteration=function(n,o){return c(n,o,h.isJobRunning).length};return e});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/generateResults/GenerateResultsActivityUtils",["DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByHandler/ad-handler-defs"],function(c,b){var a={};a.setResultsOptionsState=function(j,h){var f=c.getSimImportUtilityStep(j),d=c.getResultsGenUtilityStep(j),e="",i=b.activity.JOB_OBJECT_KEYS.SimulationTitle;h.resultsOptions={generateResults:false,generateResultsUnitsDefault:null,generateResultsUnits:null,generateResultsUnitsEnabled:false};if(f&&f.FlowItem.ExecutionConfig.isExecutable&&(f.FlowItem.ExecutionConfig.isExecutable.toLowerCase()==="true")&&d&&d.FlowItem.ExecutionConfig.isExecutable&&(d.FlowItem.ExecutionConfig.isExecutable.toLowerCase()==="true")){h.resultsOptions.generateResults=true;if(f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties&&f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.ImportUnits){e=c.buildResultsOptionsUnitsState(f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.ImportUnits)}h.resultsOptions.generateResultsUnitsDefault=e;h.resultsOptions.generateResultsUnits=e;if(f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties&&f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments&&f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[b.activity.JOB_OBJECT_KEYS.NewSimulationResults]){var g=f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[b.activity.JOB_OBJECT_KEYS.NewSimulationResults];h.resultsOptions.generateResultsSourceFilename=g}else{h.resultsOptions.generateResultsSourceFilename=""}if(f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties&&f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments&&f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[b.activity.JOB_OBJECT_KEYS.SimulationTitle]){h.resultsOptions.generateResultsTitle=f.FlowItem.stepConfig.childConfigs[0].pluginConfig.properties.PLMBatchArguments[i]}else{h.resultsOptions.generateResultsTitle=""}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/generateResults/selectors",["UWA/Core","DS/SMAPoweredByHandler/common/selectors","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-cos/selectors"],function(f,d,e,c,b){var a=f.clone(d);a.isCloudEnabled=function(i){var g=e.isCloudEnabled(i),j=b.drmModeEnabledServers(i,b.DRMMode.CLOUD),h=j&&j.length>0;return g&&h};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/default/rules",["DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByHandler/common/selectors","DS/SMAPoweredByState/ad-state-app-alerts/actions","DS/SMAPoweredByState/ad-state-app-alerts/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","i18n!DS/SMAPoweredByHandler/assets/nls/default"],function(a,f,b,j,g,e,h){var d={store:null,jobIds:[],stateRedux:new a()},i="default-rules",c={MISSING_STEP:"SMAPoweredByHandler.default-rules.MISSING_STEP"};d.startListening=function(k){if(this.jobIds.indexOf(k)===-1){this.jobIds.push(k);var l=this.store;this.stateRedux.observeStore({store:l,select:f.isCloudEnabled,onChange:function(m){if(!m){var n=e.jobExecutionOptions(l.getState(),k);if(n&&n.drmMode==="Cloud"){l.dispatch(g.setJobExecutionDRMMode(k,"fiper"))}}}});this.stateRedux.observeStore({store:l,select:f.hasStep,selectArguments:[k,f.Steps.DOWNLOAD],onChange:function(m){if(!m){l.dispatch(b.addAlert(i,j.Level.WARNING,h.Download,c.MISSING_STEP))}}});this.stateRedux.observeStore({store:l,select:f.hasStep,selectArguments:[k,f.Steps.UPLOAD],onChange:function(m){if(!m){l.dispatch(b.addAlert(i,j.Level.WARNING,h.Upload,c.MISSING_STEP))}}})}};d.setStore=function(k){this.store=k;this.jobIds=[]};d.unsubscribeAll=function(){this.stateRedux.unsubscribeAll()};return d});
/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/default/ADDefaultHandler",["UWA/Core","DS/SMAPoweredByHandler/ADAbstractHandler","DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByHandler/default/rules","DS/SMAPoweredByHandler/default/JobTile","DS/SMAPoweredByHandler/common/CreateWizardFacets","DS/SMAPoweredByHandler/common/JobFacets","DS/SMAPoweredByHandler/common/Actions","DS/SMAPoweredByHandler/common/selectors","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions"],function(d,r,l,p,s,o,b,g,j,f,c,n,h,k,t,m){var a={};function q(v,u){return v.name===u.name}function e(u,v){var w;w=t.connectorOption(v,u.name);if(!w&&u.Choices){w=t.connectorOption(v,u.value||u.defaultValues);if(w.optionType==="Standalone"){w.active=true}}else{if(!w){w=u}else{if(u.value){w.value=u.value.toString()}else{if(u.optionType==="Standalone"){w.active=u.active}else{if(u.defaultValues){w.value=u.defaultValues}else{if(u.Choices&&(Array.isArray(u.Choices))&&u.Choices.length>0){w.value=u.Choices[0]}}}}}}return w}function i(w,y,u){if(u){for(var x=0;x<w.length;x++){if(w[x].defaultValue){w[x].value=w[x].defaultValue}var z=n.jobArguments(y,u).filter(q.bind(null,w[x]));if(z.length===1){var v=z[0];if(v.value){w[x].value=v.value}if(v.optionType==="Standalone"){w[x].active=v.active}w[x].displayed=true}}}}a.init=function(u){this._parent(u);if(u){this.boundActionsJob=this.stateRedux.getBoundActions(m,this.store.dispatch)}};a.hasPredefinedApp=function(w,u){var v=n.jobWithID(w,u),y,x;if(v&&v._plmActivity){y=l.getOSCommandStep(v._plmActivity);x=l.isApplicationDefined(y)}return x};a.getArgs=function(u){var v,w=n.getApplication(this.store.getState(),u);return new Promise(function(y,x){this.stateRedux.waitFor({store:this.store,select:t.connectorDefinitionsPersistenceOperation,isResolved:function(z){return((z===null)&&(t.connectorDefinitionForApp(this.store.getState(),w.appName,w.appVersion)!==null))}.bind(this)}).then(function(){v=d.clone(t.connectorDefinitionForApp(this.store.getState(),w.appName,w.appVersion));i(v.options,this.store.getState(),u);this.setArgs(v.options,u);y(v.options)}.bind(this),x)}.bind(this))};a.setArgs=function(B,x){var z,D,A,u,w,v=n.getApplication(this.store.getState(),x);z=d.clone(t.connectorDefinitionForApp(this.store.getState(),v.appName,v.appVersion));u=[];w=false;for(var y=0;y<B.length;y++){D=B[y];if(D.displayed){A=e(D,z);u.push(A);if(A.optionType==="Option-Value"||A.optionType==="Standalone-Value"){w=w||(n.jobArgumentValue(this.store.getState(),x,D.name)!==A.value)}else{var C=n.jobArguments(this.store.getState(),x).filter(q.bind(null,A));w=w||(C.length!==1)||(C[0].active!==A.active)}}else{if(typeof(D.displayed)!=="undefined"&&!D.displayed){this.boundActionsJob.removeJobArgument(x,D.name)}}}if(w){this.boundActionsJob.setJobArguments(x,u)}return u};a.jobFacets=b;a.wizardFacets=o;a.jobTile=s;a.actions=[g.viewDetails,g.cloneJob,g.divider,g.abortJob,g.divider,g.deleteJob];a.Selectors=j;a.Rules=p;a.outputJobTypeTitle="Import Simulation Results";a.addJobId=function(u){this._parent(u);p.setStore(this.store);p.startListening(u)};a.unsubscribeAll=function(){this._parent();this.stateRedux.unsubscribeAll();p.unsubscribeAll()};return r.extend(a)});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/abaqus/AbaqusActivityUtils",["DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByHandler/generateResults/GenerateResultsActivityUtils","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByHandler/abaqus/licensing-selectors","DS/SMAPoweredByHandler/ad-handler-defs"],function(c,e,g,f,d,b){var a={};a.setEnvironmentVariablesState=function(l,k){var j,h;c.setEnvironmentVariablesState(l,k);for(j=k.configuration.environmentVariables.length-1;j>=0;j--){h=k.configuration.environmentVariables[j].name;if((h==="SMA_ABQSTUDY")||(h==="ABQLMIMPL")||(h==="ABQCUSTID")||(h==="SMA_MAXCPUS")||(h==="ABQ_USERUVM_PVM")||(h==="ABQ_USERUVM_SVM")||(h==="ABQDSLSSERVER")||(h==="SMA_VM_CPUS")||(h==="SMA_VM_OS")){k.configuration.environmentVariables.splice(j,1)}}};a.setExecutionOptionsPLM=function(j,k,i){var h=c.getActivityConfig(k);c.setExecutionOptionsPLM(j,k,i);if(j.executionOptions.licenseOptions){h.SXALicenseOptions=j.executionOptions.licenseOptions}};a.setExecutionOptionsState=function(k,j,i){var h=c.getActivityConfig(k);c.setExecutionOptionsState(k,j,i);if(h&&h.SXALicenseOptions){j.executionOptions.licenseOptions={licenseType:((h.SXALicenseOptions.licenseType)?h.SXALicenseOptions.licenseType:(g.isCloudEnabled(i)?"credits":"traditionalTokens")),features:((h.SXALicenseOptions.features)?h.SXALicenseOptions.features:"1"),modelSize:((h.SXALicenseOptions.modelSize)?h.SXALicenseOptions.modelSize:"1"),performance:((h.SXALicenseOptions.performance)?h.SXALicenseOptions.performance:"1"),queue:((h.SXALicenseOptions.queue)?h.SXALicenseOptions.queue:false)}}else{j.executionOptions.licenseOptions={licenseType:"traditionalTokens",features:"1",modelSize:"1",performance:"1",queue:false}}};a.setEnvironmentVariablesPLM=function(k,n,j){var m=c.getOSCommandStep(n),l,h=0;c.setEnvironmentVariablesPLM(k,n);if(k.executionOptions.licenseOptions&&k.executionOptions.licenseOptions.licenseType&&(k.executionOptions.licenseOptions.licenseType!=="traditionalTokens")){if(!m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable]||!m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values||((m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.length===1)&&(m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values[0]["0"]===null))){m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable]={values:[]}}h=m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.length;l={};l[String(h++)]="SMA_ABQSTUDY=1";m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="ABQLMIMPL="+((k.executionOptions.licenseOptions.licenseType==="tokens")?"DSLS":"CREDIT");m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="ABQCUSTID="+g.currentWhereUsedTenantID(j);m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="SMA_MAXCPUS="+((k.executionOptions.numProcs&&(!isNaN(k.executionOptions.numProcs)))?k.executionOptions.numProcs:4);m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="ABQ_USERUVM_PVM="+((k.executionOptions.licenseOptions.performance&&!isNaN(k.executionOptions.licenseOptions.performance))?k.executionOptions.licenseOptions.performance:"1");m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="ABQ_USERUVM_SVM="+((k.executionOptions.licenseOptions.modelSize&&!isNaN(k.executionOptions.licenseOptions.modelSize))?k.executionOptions.licenseOptions.modelSize:"1");m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="ABQDSLSSERVER="+g.dslsURL(j);m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);if(k.executionOptions.licenseOptions.licenseType===d.LicenseType.TOKENS&&k.executionOptions.licenseOptions.queue){l={};l[String(h++)]='SMA_UVM_ALLOW_QUEUING="1"';m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l)}if(k.executionOptions.drmMode==="Cloud"){l={};l[String(h++)]="SMA_VM_CPUS=uvm";m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l);l={};l[String(h++)]="SMA_VM_OS=self";m.FlowItem.stepConfig.properties[b.activity.JOB_OBJECT_KEYS.OSCommandEnvironmentVariable].values.push(l)}}};a.setResultsOptionsState=e.setResultsOptionsState;return a});define("DS/SMAPoweredByHandler/abaqus/CreateWizardFacetsBatch",["DS/SMAPoweredByHandler/abaqus/CreateWizardFacets"],function(b){var a=[{required:true,titleKey:"BatchInput",validator:"isMainInputValid",nlsPath:"DS/SMAPoweredByHandler/assets/nls/common",custom:{},webcomponent:{url:"SMAPoweredByViews/ad-create-batch-job-inputs-container/ad-create-batch-job-inputs-container.html",tagName:"ad-create-batch-job-inputs-container"}},b[1],b[2],b[3]];return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/abaqus/AbaqusRules",["DS/SMAPoweredByHandler/ad-handler-defs","DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-app-alerts/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByHandler/abaqus/selectors"],function(o,a,d,p,i,l,j,e){var f={},c={SPACE_IN_JOB:"SMAPoweredByHandler.abaqus-rules.SPACE_IN_JOB",LONG_JOB_NAME:"SMAPoweredByHandler.abaqus-rules.LONG_JOB_NAME",ILLEGAL_CHARACTER_IN_JOB:"SMAPoweredByHandler.abaqus-rules.ILLEGAL_CHARACTER_IN_JOB",SCALED_SVM:"SMAPoweredByHandler.abaqus-rules.SCALED_SVM",SCALED_PVM:"SMAPoweredByHandler.abaqus-rules.SCALED_PVM"},n="abaqus-rules",b="job",h="input",m=89,k=".sim";f={"rules.abaqus.setJobGenerationResult":{select:i.jobArgumentValue,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY,b],type:o.rules.RULE_TYPE.NON_BATCH,onChange:function(r,t,w,u,q){if(q){var s=i.jobResultsOptions(r.getState(),w),v=s?s.generateResultsTitle:null;if(v!==q){t.boundJobActions.setJobGenerateResultsSourceFilename(w,q+k);t.boundJobActions.setJobGenerateResultsTitle(w,q)}}}},"rules.abaqus.setJobArgumentSize":{select:i.jobArgumentValue,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY,b],type:o.rules.RULE_TYPE.ITERATION_WHEN_BATCH,onChange:function(r,s,u,t,q){if(q&&q.length>m){s.boundJobActions.addJobArgument(u,b,q.substr(0,89));s.boundAlertActions.addAlert(n,p.Level.WARNING,null,c.LONG_JOB_NAME)}}},"rules.abaqus.validateJobName":{select:i.jobArgumentValue,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY,b,o.rules.REPLACE_KEYS.ITERATION_KEY],type:o.rules.RULE_TYPE.ITERATION_WHEN_BATCH,onChange:function(r,s,u,t,q){if(q&&(!e.isValidString(q,e.OBJECTTYPES.ACTIVITY)||q.indexOf("'")!==-1||q.indexOf(" ")!==-1)){s.boundJobActions.addJobArgument(u,b,q.replace(/["#$@%*,?\\<>[\]|:'\s]/g,"_"));s.boundAlertActions.addAlert(n,p.Level.WARNING,null,c.ILLEGAL_CHARACTER_IN_JOB)}}},"rules.abaqus.setJobNameForInput":{select:i.jobArgumentValue,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY,h,o.rules.REPLACE_KEYS.ITERATION_KEY],type:o.rules.RULE_TYPE.ITERATION_WHEN_BATCH,onChange:function(y,t,x,r,w){if(w){var u=i.jobArgumentValue(y.getState(),x,b,r),q=w.split("\\"),v=q[q.length-1].split(".");v.pop();var s=v.join(".").split(" ").join("_");if(s!==u){t.boundJobActions.addJobArgument(x,b,s,r)}}}},"rules.abaqus.setInputNameForMainInput":{select:i.jobMainInput,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY,o.rules.REPLACE_KEYS.ITERATION_KEY],type:o.rules.RULE_TYPE.ITERATION_WHEN_BATCH,onChange:function(s,u,x,v,t){if(t){var w=l.managedDataWithID(s.getState(),t),q=w.type===l.Types.RDOCUMENT?w.title:w.name,r=i.jobArgumentValue(s.getState(),x,h,v);if(q!==r){u.boundJobActions.addJobArgument(x,h,q,v)}}}},"rules.abaqus.disableLicenseForCloudOnPremise":{select:e.isCloudEnabled,onChange:function(r,s,v,u,q){if(!q){var t=i.jobExecutionOptions(r.getState(),v);if(t&&t.drmMode==="Cloud"){s.boundJobActions.setJobExecutionDRMMode(v,"fiper")}if(t&&t.licenseOptions&&t.licenseOptions.licenseType!=="traditionalTokens"){s.boundJobActions.setJobExecutionSXALicenseType(v,"traditionalTokens")}}}},"rules.abaqus.disableLicenseForNoTenant":{select:d.currentWhereUsedTenantID,onChange:function(q,r,v,t,u){if(!u){var s=i.jobExecutionOptions(q.getState(),v);if(s&&s.licenseOptions&&s.licenseOptions.licenseType!=="traditionalTokens"){r.boundJobActions.setJobExecutionSXALicenseType(v,"traditionalTokens")}}}},"rules.abaqus.disableLicenseForCloudCompute":{select:i.jobExecutionOptions,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY],onChange:function(q,r,u,t,s){if(s&&s.licenseOptions){if(s.drmMode==="Cloud"&&s.licenseOptions.licenseType==="traditionalTokens"){r.boundJobActions.setJobExecutionSXALicenseType(u,"credits")}}}},"rules.abaqus.addNumProcs":{select:i.jobExecutionOptions,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY],onChange:function(r,s,w,u,t){if(t){var v=e.getSmaMaxCpus(r.getState(),{executionOptions:t}),q=v?String(v):"";if(t.numProcs!==q){s.boundJobActions.setJobExecutionNumProcs(w,q);if((t.licenseOptions&&(t.licenseOptions.licenseType!==i.LicenseType.TOKENS_TRADITIONAL))&&(t.drmMode!==j.DRMMode.CLOUD)&&(t.drmMode!==j.DRMMode.FIPER)){s.boundJobActions.setJobExecutionCustomDRMCores(w,q,j.customDRMCoresProperty(r.getState(),t.server,t.drmMode))}}}}},"rules.abaqus.restoreLicenseStateToValidState":{selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY],select:e.selectLicensingOptionsAndLimits,onChange:function(q,s,u,t,r){if(r&&r.licenseOptions){if(r.licenseOptions.modelSize&&r.svmLimit&&parseInt(r.licenseOptions.modelSize)>r.svmLimit){s.boundJobActions.setJobExecutionSXALicenseModelSize(u,String(r.svmLimit));s.boundAlertActions.addAlert(n,p.Level.ERROR,null,c.SCALED_SVM)}if(r.licenseOptions.performance&&r.pvmLimit&&parseInt(r.licenseOptions.performance)>r.pvmLimit){s.boundJobActions.setJobExecutionSXALicensePerformance(u,String(r.pvmLimit));s.boundAlertActions.addAlert(n,p.Level.WARNING,null,c.SCALED_PVM)}}}},"rules.abaqus.handleGenerateResultsNotAllowed":{select:e.isGenerateResultsAllowed,selectArguments:[o.rules.REPLACE_KEYS.JOB_ID_KEY],onChange:function g(r,t,v,u,s){var q=i.jobGenerateResults(r.getState(),v);if(!g.hasAlreadyRun){g.hasAlreadyRun=true;g._wasForcedOff=false}if(q&&!s){g._wasForcedOff=true;t.boundJobActions.setJobGenerateResults(v,false)}else{if(!q&&s&&g._wasForcedOff){g._wasForcedOff=false;t.boundJobActions.setJobGenerateResults(v,true)}}}}};return f});define("DS/SMAPoweredByHandler/abaqus/JobFacets",["DS/SMAPoweredByHandler/common/JobFacets","i18n!DS/SMAPoweredByHandler/assets/nls/abaqus"],function(b,c){var a=[b[0],{title:c.get("STA"),icon:"progress-2",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADStatusView"}},{title:c.get("MSG"),icon:"progress-2",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADMessageView"}},{title:c.get("DAT"),icon:"attention",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADWarningView"}},{title:c.get("LOG"),icon:"list-ordered",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADLogView"}},b[1],b[2]];return a});define("DS/SMAPoweredByHandler/abaqus/BatchJobFacets",["DS/SMAPoweredByHandler/common/JobFacets","i18n!DS/SMAPoweredByHandler/assets/nls/abaqus"],function(b,c){var a=[{title:c.get("RUNSTATUS"),icon:"clipboard",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADRunStatusView"}},b[0],{title:c.get("STA"),icon:"progress-2",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADStatusView"}},{title:c.get("MSG"),icon:"progress-2",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADMessageView"}},{title:c.get("DAT"),icon:"attention",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADWarningView"}},{title:c.get("LOG"),icon:"list-ordered",amd:{url:"DS/SMAPoweredByViews/Skeleton/Views/ADLogView"}},b[1],b[2]];return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByHandler/abaqus/rules",["DS/SMAPoweredByHandler/ad-handler-defs","DS/SMAPoweredByHandler/abaqus/AbaqusRules","DS/SMAPoweredByState/ad-state-redux-observer","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-app-alerts/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors"],function(e,c,d,h,a,g){var b={store:null,jobIDs:{},stateRedux:new d()};b.rulesObject=c;function f(s,j,n,o,q,k,l){var u=null,p=null,t=[];for(var r in o){p=b.rulesObject[r];if((!l&&p.type!==e.rules.RULE_TYPE.ITERATION_SPECIFIC)||(l&&((k!==null&&([e.rules.RULE_TYPE.ITERATION_SPECIFIC,e.rules.RULE_TYPE.ITERATION_WHEN_BATCH].indexOf(p.type)!==-1))||(k===null&&[e.rules.RULE_TYPE.ITERATION_SPECIFIC,e.rules.RULE_TYPE.ITERATION_WHEN_BATCH,e.rules.RULE_TYPE.NON_BATCH].indexOf(p.type)===-1)))){if(p.selectArguments){u=[];for(var m=0;m<p.selectArguments.length;m++){if(p.selectArguments[m]===e.rules.REPLACE_KEYS.JOB_ID_KEY){u.push(q)}else{if(p.selectArguments[m]===e.rules.REPLACE_KEYS.ITERATION_KEY){if(l&&k!==null){u.push(k)}}else{u.push(p.selectArguments[m])}}}}t.push(j.observeStore({store:s,select:p.select,selectArguments:u,onChange:p.onChange.bind(p,s,n,q,k)}))}}return t}b.startListening=function(k){if(!this.jobIDs[k]){this.jobIDs[k]=[];var j=g.isBatchJob(this.store.getState(),k),i={boundJobActions:this.stateRedux.getBoundActions(h,this.store.dispatch),boundAlertActions:this.stateRedux.getBoundActions(a,this.store.dispatch)};f(this.store,this.stateRedux,i,b.rulesObject,k,null,j);if(j){this.stateRedux.observeStore({store:this.store,selectArguments:[k],select:g.batchJobIterationCount,onChange:function(m){var o=null,p=null,n=null,l=null;if(this.jobIDs[k].length>m){for(n=this.jobIDs[k].length;n>m;n--){o=this.jobIDs[k][n];if(o){for(l=0;l<o[l];l++){p=o[l];p()}}this.jobIDs[k].pop()}}else{if(this.jobIDs[k].length<m){for(n=this.jobIDs[k].length;n<m;n++){o=f(this.store,this.stateRedux,i,b.rulesObject,k,n,j);this.jobIDs[k].push(o)}}}}.bind(this)})}}};b.setStore=function(i){this.store=i;this.jobIDs={}};b.unsubscribeAll=function(){this.stateRedux.unsubscribeAll()};return b});define("DS/SMAPoweredByHandler/abaqus/ADAbaqusHandler",["UWA/Core","UWA/Promise","DS/SMAPoweredByHandler/ADAbstractHandler","DS/SMAPoweredByHandler/abaqus/AbaqusActivityUtils","DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByHandler/abaqus/CreateWizardFacets","DS/SMAPoweredByHandler/abaqus/CreateWizardFacetsBatch","DS/SMAPoweredByHandler/abaqus/JobTile","DS/SMAPoweredByHandler/abaqus/BatchJobTile","DS/SMAPoweredByHandler/abaqus/JobFacets","DS/SMAPoweredByHandler/abaqus/BatchJobFacets","DS/SMAPoweredByHandler/common/Actions","text!DS/SMAPoweredByHandler/assets/config/abaqus/custom.json","DS/SMAPoweredByHandler/abaqus/selectors","DS/SMAPoweredByHandler/abaqus/rules","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-defs"],function(h,g,p,f,s,e,b,C,k,c,z,l,a,o,x,w,r,B,m,v){var A={};var j=JSON.parse(a);var d=window.Promise||g;function y(E,D){return E.name===D.name}function n(F,I,D,H){if(D){for(var G=0;G<F.length;G++){var J=w.jobArguments(I,D,H).filter(y.bind(null,F[G]));if(J.length===1){var E=J[0];if(E.value){F[G].value=E.value}if(E.optionType==="Standalone"){F[G].active=E.active}F[G].displayed=true}}}}function u(H,F){var E,D;for(var G=0;G<H.Choices.length;G++){E=B.connectorOption(F,H.Choices[G]);if(typeof H.optionType==="string"){D=H.optionType}if(E){if(((D==="Option-Value")&&E.value)||((D==="Standalone")&&E.active)){H.value=H.Choices[G];H.displayed=true}if(G!==0){F.options.splice(F.options.indexOf(E),1)}}}}function q(E,D){var F=null;if(E.name==="job"){F=-1}else{if(D.name==="job"){F=1}else{F=E.name<D.name?-1:1}}return F}function i(D,E){var F;F=B.connectorOption(E,D.name);if(!F&&D.Choices){F=B.connectorOption(E,D.value||D.defaultValues);if(F.optionType==="Standalone"){F.active=true}}else{if(D.value){F.value=D.value.toString()}else{if(D.optionType==="Standalone"){F.active=D.active}else{if(D.defaultValues){F.value=D.defaultValues}else{if(D.Choices&&(Array.isArray(D.Choices))&&D.Choices.length>0){F.value=D.Choices[0]}}}}}return F}function t(M,N,D,J,F){var K,P,L,E,H,G=w.getApplication(D,N);if(G){K=h.clone(B.connectorDefinitionForApp(D,G.appName,G.appVersion));E=[];H=false;for(var I=0;I<M.length;I++){P=M[I];if(P.displayed){L=i(P,K);E.push(L);if(L.optionType==="Option-Value"||L.optionType==="Standalone-Value"){H=H||(w.jobArgumentValue(D,N,P.name,F)!==L.value)}else{var O=w.jobArguments(D,N,F).filter(y.bind(null,L));H=H||(O.length!==1)||(O[0].active!==L.active)}}else{if(typeof(P.displayed)!=="undefined"&&!P.displayed){J.removeJobArgument(N,P.name,F)}}}if(H){J.setJobArguments(N,E,F)}return E}else{return false}}A.init=function(D){this._parent(D);this.setEnvironmentVariablesState=f.setEnvironmentVariablesState.bind(f);this.setExecutionOptionsPLM=f.setExecutionOptionsPLM.bind(f);this.setExecutionOptionsState=f.setExecutionOptionsState.bind(f);this.setEnvironmentVariablesPLM=f.setEnvironmentVariablesPLM.bind(f);this.setResultsOptionsState=f.setResultsOptionsState.bind(f);if(D){this.boundActionsJob=this.stateRedux.getBoundActions(v,this.store.dispatch)}};A.createJobFromPLMActivity=function(G){var F=this._parent(G);this.setResultsOptionsState(G,F);if(F.configuration.arguments){var E,D=null,H;for(E=0;E<F.configuration.arguments.length;E++){if(F.configuration.arguments[E].name==="input"){D=F.configuration.arguments[E].value;break}}if(D){for(E=0;E<F.inputs.length;E++){H=m.managedDataWithID(this.store.getState(),F.inputs[E]);if(H&&(H.name===D)){F.mainInputFile=F.inputs[E];break}}}}return F};A.boundActionsJob=null;A.getArgs=function(D,H){var G,E,F,I=w.getApplication(this.store.getState(),D);return new d(function(K,J){this.stateRedux.waitFor({store:this.store,select:B.connectorDefinitionsPersistenceOperation,isResolved:function(L){return((L===null)&&(B.connectorDefinitionForApp(this.store.getState(),I.appName,I.appVersion)!==null))}.bind(this)}).then(function(){E=h.clone(B.connectorDefinitionForApp(this.store.getState(),I.appName,I.appVersion));n(E.options,this.store.getState(),D,H);j=JSON.parse(a);for(var L=0;L<j.length;L++){G=j[L];F=B.connectorOption(E,G.name);if(F!==null){G=h.merge(G,F)}else{if(G.Choices){F=B.connectorOption(E,G.Choices[0]);G=h.merge(G,F);u(G,E)}}if(F){E.options[E.options.indexOf(F)]=G}}E.options.sort(q);this.setArgs(E.options,D,H);K(E.options)}.bind(this),J)}.bind(this))};A.setArgs=function(F,E,D){return t(F,E,this.store.getState(),this.boundActionsJob,D)};A.addJobId=function(D){this._parent(D);x.setStore(this.store);x.startListening(D)};A.unsubscribeAll=function(){this._parent();x.unsubscribeAll()};A.outputJobTypeTitle="Import Simulation Results";A.jobFacets=c;A.batchJobFacets=z;A.wizardFacets=e;A.wizardBatchFacets=b;A.jobTile=C;A.batchJobTile=k;A.actions=[l.viewDetails,l.cloneJob,l.divider,l.previewResults,l.abortJob,l.divider,l.deleteJob];A.Selectors=o;A.Rules=x;A.hasPredefinedApp=function(){return true};return p.extend(A)});define("DS/SMAPoweredByHandler/generateResults/CreateWizardFacets",["DS/SMAPoweredByHandler/abaqus/CreateWizardFacets"],function(b){var a=[b[2]],c=JSON.parse(JSON.stringify(b[3]));c.custom={fileSavingDisplayed:false,generateResultsDisabled:true};a.push(c);return a});define("DS/SMAPoweredByHandler/generateResults/ADGenerateResultsHandler",["UWA/Core","UWA/Promise","DS/SMAPoweredByHandler/ADAbstractHandler","DS/SMAPoweredByHandler/activity/ActivityUtils","DS/SMAPoweredByHandler/generateResults/GenerateResultsActivityUtils","DS/SMAPoweredByHandler/common/Actions","DS/SMAPoweredByHandler/generateResults/CreateWizardFacets","DS/SMAPoweredByHandler/generateResults/JobTile","DS/SMAPoweredByHandler/generateResults/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors"],function(e,j,n,m,i,f,b,k,a,h,l,g){var d={},c={onDisk:"onDisk"};d.wizardFacets=b;d.jobTile=k;d.actions=[f.viewDetails,f.cloneJob,f.divider,f.previewResults,f.abortJob,f.divider,f.deleteJob];d.init=function(o){this._parent(o);this.setResultsOptionsState=i.setResultsOptionsState};d.createJobFromPLMActivity=function(t){var s=this._parent(t);this.setResultsOptionsState(t,s);if(t.attributes.definition.flowItem.ActivityConfig.properties.configuration){s.configuration=t.attributes.definition.flowItem.ActivityConfig.properties.configuration}else{if(s.title===h.DATA_TRANSFER_KEY){var r=s.description.split(h.DATA_TRANSFER_DESCRIPTION_SEPARATOR)||[],q=r[0],o=r[1],u=r[2],p;if(r[3]===c.onDisk){p=g.workDataWithID(this.store.getState(),o)}else{p=l.managedDataWithID(this.store.getState(),o)}r.splice(0,4);s.description=r.join(" ");s.configuration={attachToJobID:q};s.inputs=[o];s.resultsOptions={generateResults:true,generateResultsSourceFilename:p.name,generateResultsTitle:u,generateResultsUnitsEnabled:false,generateResultsUnits:{COURANT:"AMPER",LENGTH:"METER",LUMEN:"CANDELA",MASS:"KILOGRAM",MOLE:"MOL",TEMPRTRE:"KELVIN",TIME:"SECOND"}};s.kind=h.JobKind.GENERATE_RESULT}}return s};d.createPLMActivityFromJob=function(p,o){var q=this._parent(p,o);q.attributes.definition.flowItem.ActivityConfig.properties.configuration={attachToJobID:p.configuration.attachToJobID,managedDataProjections:[]};return q};d.Selectors=a;return n.extend(d)});