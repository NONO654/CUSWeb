define(["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-app-alerts/actions","DS/SMAPoweredByState/ad-state-app-alerts/selectors","DS/SMAPoweredByState/ad-state-app/selectors","i18n!DS/SMAPoweredByHandler/assets/nls/common"],function(k,l,g,n,e,i,c){var r={};var p={NO_RESULTS_AVAILABLE:"SMAPoweredByViews.Skeleton.ADJobRenderer.NO_RESULTS_AVAILABLE"};function m(s){var t=l.isJobSuccessful(k.getStore().getState(),s),v=l.isJobInitialized(k.getStore().getState(),s),u=i.isTransientWidget(k.getStore().getState());return !(t&&v&&!u)}function a(s){var u="DS/TransientWidget/TransientWidget",t=s.model.getResultDataFor3DPlay();if(t!==null){require([u],function(z){z.showWidget("SIMWPSR_AP",t.data.items[0].displayName,{X3DContentId:JSON.stringify(t)})})}else{var w="previewResults",y=e.Level.ERROR,v=p.NO_RESULTS_AVAILABLE,x=null;k.getStore().dispatch(n.addAlert(w,y,x,v))}}function q(s){var t=l.isJobRunning(k.getStore().getState(),s),u=g.isReadOnly(k.getStore().getState());return !t||u}function f(s){var t=l.isJobRunning(k.getStore().getState(),s),u=g.isReadOnly(k.getStore().getState());return t||u}function h(s){var v=l.isJobInitialized(k.getStore().getState(),s),u=l.jobWithID(k.getStore().getState(),s),t=g.isReadOnly(k.getStore().getState());return !((v&&u.jobType&&u.jobType!==l.OLD_COMPANION_JOB_TYPE))||t}function o(s){var t=new CustomEvent("clonejob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function b(s){var t=new CustomEvent("abortjob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function j(s){var t=new CustomEvent("deletejob",{detail:{jobId:s.model.id},bubbles:true});s.container.dispatchEvent(t)}function d(s){s.container.children[0].click()}r.viewDetails=function(){return{id:"viewDetails",text:c.viewDetails,fonticon:"window",handler:d}};r.cloneJob=function(s){return{id:"cloneJob",text:c.cloneJob,fonticon:"reload",disabled:h(s.get("id")),handler:o}};r.abortJob=function(s){return{id:"abortJob",text:c.abortJob,fonticon:"stop",disabled:q(s.get("id")),handler:b}};r.deleteJob=function(s){return{id:"deleteJob",text:c.deleteJob,fonticon:"trash",disabled:f(s.get("id")),handler:j}};r.previewResults=function(s){return{id:"previewResults",text:c.previewResults,fonticon:"eye",handler:a,disabled:m(s.get("id"))}};r.divider=function(){return{className:"divider"}};return r});