/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(h){var d=h.Polymer,l=h.DS;var c=null,m=null,j=null,f=null,k=null,i=null,b=null,g=null,a=null,n=null,e=null;m=function(){this.DOM(this.$.wizardModal).toggleClass("in");this.DOM(this.$.wizardModal).addClass("show");this.DOM(this.$.wizardModal).removeClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden");if(this._wizardElements){for(var o=0;o<this._wizardElements.length;o++){if(o!==0){this.DOM(this._wizardElements[o]).addClass("hidden");this.DOM(this.$.header.children[o]).removeClass("active-item")}else{this._currentRendered=0;this.$.backButton.disabled=true;this.$.nextButton.disabled=false;this.DOM(this._wizardElements[o]).removeClass("hidden");this.DOM(this.$.header.children[o]).addClass("active-item");if(this.headersList&&this.headersList.length>0){this.$.wizardContentTitle.textContent=this.headersList[0]}}}}};e=function(){this.DOM(this.$.wizardModal).toggleClass("in");this.DOM(this.$.wizardModal).removeClass("show");this.DOM(this.$.wizardModal).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden");f.apply(this,[false])};b=function(o){o.stopPropagation();o.cancelBubble=true;this.fire("userclose",{});e.call(this)};j=function(){e.call(this)};f=function(o){if(o){this._loadingSpinner.show();this.DOM(this.$.dialogContent).addClass("loading-mask");this.DOM(this.$.modalFooter).addClass("loading-mask")}else{this._loadingSpinner.hide();this.DOM(this.$.dialogContent).removeClass("loading-mask");this.DOM(this.$.modalFooter).removeClass("loading-mask")}};k=function(){this.$.backButton.disabled=false;var p;for(var o=0;o<this._wizardElements.length;o++){if(o===this._currentRendered){p=o+1;this.DOM(this._wizardElements[p]).removeClass("hidden");this.DOM(this.$.header.children[p]).addClass("active-item");this.DOM(this.$.header.children[o]).removeClass("active-item");this.$.wizardContentTitle.textContent=this.headersList[o+1];this.DOM(this._wizardElements[o]).addClass("hidden");this._currentRendered=p;if(p===this._wizardElements.length-1){this.$.nextButton.disabled=true}else{this.$.nextButton.disabled=false}break}}};i=function(p){p.stopPropagation();p.cancelBubble=true;this.$.nextButton.disabled=false;for(var o=0;o<this._wizardElements.length;o++){if(o===this._currentRendered){this.DOM(this._wizardElements[o-1]).removeClass("hidden");this.DOM(this.$.header.children[o-1]).addClass("active-item");this.$.wizardContentTitle.textContent=this.headersList[o-1];this.DOM(this.$.header.children[o]).removeClass("active-item");this.DOM(this._wizardElements[o]).addClass("hidden");this._currentRendered=o-1;if(this._currentRendered===0){this.$.backButton.disabled=true}else{this.$.backButton.disabled=false}break}}};g=function(q){q.stopPropagation();q.cancelBubble=true;var p=Array.prototype.indexOf.call(q.currentTarget.parentNode.children,q.currentTarget);for(var o=0;o<this._wizardElements.length;o++){if(o===p){this.DOM(this._wizardElements[o]).removeClass("hidden");this.DOM(this.$.header.children[o]).addClass("active-item");this.$.wizardContentTitle.textContent=this.headersList[o];this._currentRendered=o}else{this.DOM(this._wizardElements[o]).addClass("hidden");this.DOM(this.$.header.children[o]).removeClass("active-item")}if(this._currentRendered===0){this.$.backButton.disabled=true}else{this.$.backButton.disabled=false}if(this._currentRendered===this._wizardElements.length-1){this.$.nextButton.disabled=true}else{this.$.nextButton.disabled=false}}};c=function(q,p){this._wizardElements=q;this.$.wizardContent.textContent="";for(var o=0;o<this._wizardElements.length;o++){if(o!==0){this.DOM(this._wizardElements[o]).addClass("hidden");this._currentRendered=0;this.$.backButton.disabled=true}this.$.wizardContent.appendChild(this._wizardElements[o])}this.headersList=p;this.$.wizardContentTitle.textContent=this.headersList[0]};a=function(o){this.customButtonHandler(o)};n=function(){var o=this;this.isReady=new Promise(function(p){require(["DS/UIKIT/Spinner"],function(q){o._loadingSpinner=new q({renderTo:o.$.spinnerContainer});p()})})};d({is:"ad-wizard",properties:{headersList:{type:Array,value:function(){return[]}},dialogTitle:{type:String},customButton:{type:String,value:""},customButtonHandler:{type:Object,value:function(){return undefined}},isReady:{type:Promise}},created:function(){},ready:function(){n.apply(this,arguments)},render:function(){return c.apply(this,arguments)},showDialog:function(){return m.apply(this,arguments)},hideDialog:function(){return j.apply(this,arguments)},toggleLoading:function(){return f.apply(this,arguments)},onClickNext:function(){return k.apply(this,arguments)},onClickBack:function(){return i.apply(this,arguments)},onClosewizard:function(){return b.apply(this,arguments)},onWizardHeaderItemClick:function(){return g.apply(this,arguments)},_computeCount:function(o){return this.headersList.indexOf(o)+1},onCustomButtonClick:function(){return a.apply(this,arguments)},_computeIf:function(o){if(o!==""){return true}else{return false}},disableDrag:function(o){o.stopPropagation();o.cancelBubble=true;o.dataTransfer.dropEffect="none";o.returnValue=false;return false},_computeInitClass:function(o){if(this.headersList.indexOf(o)===0){return"active-item wizard-header-item"}else{return"wizard-header-item"}},behaviors:[l.SMAProcSP.SPBase]})}(this));