/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByViews/ad-create-job-server-options/ad-create-job-server-options",["DS/SMAProcSP/PolymerLoader","DS/SMAPoweredByViews/ad-redux-behaviour/ReduxBehaviour","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","text!DS/SMAPoweredByViews/ad-create-job-server-options/ad-create-job-server-options.html","i18n!DS/SMAPoweredByViews/assets/nls/ADCreateJobServerOptions","DS/SMAPoweredByViews/ad-popover/ad-popover","DS/SMAPoweredByViews/ad-select-menu/ad-select-menu","css!DS/UIKIT/UIKIT.css"],function(a,c,h,b,g,f,e,d){a.register(e);return window.Polymer({is:"ad-create-job-server-options",properties:{jobId:{type:String,value:null},drmMode:{type:String,value:null,stateSelector:function(i){return f.jobDRMMode(i,this.jobId)}},os:{type:String,value:null,stateSelector:function(i){return f.jobOS(i,this.jobId)}},supportedOSOptions:{type:Array,value:[],stateSelector:function(j){var i=[];if(this.handler&&this.handler.Selectors&&this.handler.Selectors.isCloudEnabled){i=this.handler.Selectors.getCloudStations(j,this.jobId)}return i&&i.items?i.items:[]}},server:{type:String,value:null,stateSelector:function(j){var i=f.jobExecutionOptions(j,this.jobId);return i?i.server:null}},serversPersistenceOperation:{type:String,value:null,stateSelector:b.serversPersistenceOperation},supportedServerOptions:{type:Array,value:[],stateSelector:function(k){var i=[],j=b.allServers(k);j.forEach(function(l){if(!l.persistenceError){i.push({label:l.isDefault?l.id+" ["+d.Default+"]":l.id,value:l.id})}});return i}},station:{type:String,value:null,stateSelector:function(j){var i=f.jobExecutionOptions(j,this.jobId);return i?i.station:null}},stationsPersistenceOperation:{type:String,value:null,stateSelector:b.stationsPersistenceOperation},isAppInitialized:{type:Boolean,value:false,stateSelector:h.isAppInitialized},supportedStationOptions:{type:Array,value:[],stateSelector:function(j){var i=[],k=[];if(this.handler&&this.handler.Selectors&&this.handler.Selectors.getPremiseStations){k=this.handler.Selectors.getPremiseStations(j,{id:this.server},h.spaceURL(j))}k.sort(function(m,l){return m.name>l.name?1:-1});k.forEach(function(l){i.push({label:l.name===b.LOCALSTATIONNAME?d.PrivateStation:l.name,value:l.id})});return i}}},ready:function(){this.NLS=d},_isCloudCompute:function(i){return i===b.DRMMode.CLOUD},_isOsSelectHidden:function(i){return !(i&&i.length>1)},_isLoading:function(i){return i!==null},_isStationsLoading:function(j,i){return j!==null||!i},_onOSChanged:function(i){i.stopPropagation();i.cancelBubble=true;this.store.dispatch(g.setJobExecutionOS(this.jobId,i.target.value))},_onServerChanged:function(i){i.stopPropagation();i.cancelBubble=true;this.store.dispatch(g.setJobExecutionServer(this.jobId,i.target.value))},_onStationChanged:function(i){i.stopPropagation();i.cancelBubble=true;this.store.dispatch(g.setJobExecutionStation(this.jobId,i.target.value))},behaviors:[c]})});