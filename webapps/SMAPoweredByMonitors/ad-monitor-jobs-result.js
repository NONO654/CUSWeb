/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define(["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions"],function(a,e,c,h,g){var b={};var f="generateresultjobdatamonitor";function d(){var j=e.getStore(),i=a.bindActionCreators(g,e.getStore().dispatch),k=[];k=h.jobsOfKind(j.getState(),h.JobKind.GENERATE_RESULT).filter(function(l){return(h.isJobSuccessful(j.getState(),l)&&!h.isUploadJobProcessed(j.getState(),l))});if(k.length>0){k.forEach(function(l){l.outputs.forEach(function(m){i.addJobOutput(l.configuration.attachToJobID,m)});i.markUploadJobProcessed(l.id)})}}b.startMonitor=function(i){var j=(typeof i!=="undefined")&&(i!==null)?i:60;return c.startMonitor(f,null,{firstTime:true},d,null,j)};b.stopMonitor=function(){c.stopMonitorsOfType(f)};return b});