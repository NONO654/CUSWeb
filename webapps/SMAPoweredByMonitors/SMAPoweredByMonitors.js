/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-monitor-manager",[],function(){var a={};var c={},b="all";a.startMonitor=function(j,f,i,k,d,g,h){var e=f?f:b,m=((typeof g!=="undefined")&&g)?g:60,l=(typeof h!=="undefined")?h:true,n=a.stopMonitor.bind(this,j,e);if(!c[j]||!c[j][e]){if(!c[j]){c[j]={}}c[j][e]={data:i,monitorCB:k,cleanupCB:d?d:null,timer:null};if(l){c[j][e].monitorCB(c[j][e].data)}c[j][e].timer=setInterval(function(){c[j][e].monitorCB(c[j][e].data)},(m*1000))}return n};a.stopMonitor=function(e,g,f){var h=g?g:b,d=(typeof f==="undefined")?true:f;if(c[e]&&c[e][h]){clearInterval(c[e][h].timer);if(d&&c[e][h].cleanupCB){c[e][h].cleanupCB(c[e][h].data)}delete c[e][h]}};a.stopMonitorsOfType=function(e,f){var d=(typeof f==="undefined")?true:f;if(c[e]){Object.keys(c[e]).forEach(function(g){a.stopMonitor(e,g,d)})}};a.stopAllMonitors=function(e){var d=(typeof e==="undefined")?true:e;Object.keys(c).forEach(function(f){a.stopMonitorsOfType(f,d)})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-monitor-jobs-result",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions"],function(a,e,c,h,g){var b={};var f="generateresultjobdatamonitor";function d(){var j=e.getStore(),i=a.bindActionCreators(g,e.getStore().dispatch),l=[],k;l=h.jobsOfKind(j.getState(),h.JobKind.GENERATE_RESULT).filter(function(m){return(h.isJobSuccessful(j.getState(),m)&&!h.isHiddenJobProcessed(j.getState(),m)&&!h.isHiddenJobProcessing(j.getState(),m))});k=h.jobsOfKind(j.getState(),h.JobKind.GENERATE_RESULT).filter(function(m){return(h.isJobSuccessful(j.getState(),m)&&h.isHiddenJobProcessing(j.getState(),m)&&!h.isHiddenJobProcessed(j.getState(),m))});if(l.length>0){l.forEach(function(m){m.outputs.forEach(function(n){i.addJobOutput(m.configuration.attachToJobID,n)});i.markHiddenJobProcessing(m.id)})}if(k.length>0){k.forEach(function(n){var m=true,o=h.jobWithID(j.getState(),n.configuration.attachToJobID).outputs;n.outputs.forEach(function(p){m=m&&(o.indexOf(p)!==-1)});if(m){i.markHiddenJobProcessed(n.id)}})}}b.startMonitor=function(i){var j=(typeof i!=="undefined")&&(i!==null)?i:60;return c.startMonitor(f,null,{firstTime:true},d,null,j)};b.stopMonitor=function(){c.stopMonitorsOfType(f)};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-monitor-work-data",["DS/Redux/Redux","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-work-data/actions","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-redux-observer"],function(a,k,d,j,l,f,r,b,e){var q={};var p="execdir",c="tail",h=null,t=null,g=null,n=null,o=null;function m(y){var v=d.getStore(),x=false,u=new e(),z=function(A){var B;if(A===b.PersistenceOperation.READING){x=true}else{if(x){x=false;y.execDirUnsubscribe();y.execDirUnsubscribe=null;h=null;o=y.execDirID;if(n){B=n;n=null;q.stopExecDirMonitor(B)}}}},w=l.workDataWithID(v.getState(),y.execDirID);if(w){h=y.execDirID;y.execDirUnsubscribe=u.observeStore({store:v,select:function(B){var A=l.workDataWithID(B,y.execDirID);return(A&&A.persistenceOperation)?A.persistenceOperation:null},onChange:z,compareFunc:function(C,A){var B=C?C:null;return B===A}});a.bindActionCreators(j,v.dispatch).refreshWorkData(y.execDirID,y.credentials)["catch"](function(){if(g&&g.execDirID===y.execDirID){g=null}q.stopExecDirMonitor(y.execDirID)})}else{q.stopExecDirMonitor(y.execDirID)}}function i(y){var u=d.getStore(),v=l.workDataWithID(u.getState(),y.execDirID),x=function(){var B;a.bindActionCreators(j,u.dispatch).clearExecDirFileMonitor(y.execDirID);t=null;if(o===y.execDirID){o=null}if(g){B=g;g=null;q.startExecDirMonitor(B.execDirID,B.interval)}},A=function(){a.bindActionCreators(j,u.dispatch).clearExecDirFileMonitor(y.execDirID);t=null;if(o===y.execDirID){o=null}},z=function(){x()},w=function(){A()};if(v){t=y.execDirID;r.callStopFileMonitor({execDir:v,onComplete:z,onFailure:w})}}function s(v){var w=function(x){if(v.credentials&&v.execDir){a.bindActionCreators(j,d.getStore().dispatch).setExecDirCredentials(v.execDir.id,v.credentials)}if(v.onComplete){v.onComplete(x)}},u=function(x){if(v.onFailure){v.onFailure((x===r.ErrorCodes.COS_RUNAS_CREDENTIALS_ERROR)?b.ErrorCodes.RUNAS_CREDENTIALS_ERROR:x)}};r.callTail({execDir:v.execDir,filePath:v.filePath,credentials:v.credentials,start:v.start,numLines:v.numLines,onComplete:w,onFailure:u})}q.startExecDirMonitor=function(z,v,w){var x=null,y=(typeof v!=="undefined")&&(v!==null)?v:60,u=(typeof w!=="undefined")?w:null;if(!g||(g.execDirID!==z)){if(!h){if(!t){if(n===z){n=null}if(o!==z){n=o;g=null;x=k.startMonitor(p,z,{execDirID:z,credentials:u},m,i,y)}}else{g={execDirID:z,credentials:u,interval:y}}}else{if(h!==z){n=h;g={execDirID:z,credentials:u,interval:y}}}}return x};q.stopExecDirMonitor=function(u){if((n!==u)&&o){if(!t){if(!h){n=null;k.stopMonitor(p,u)}else{n=u}}else{if(t!==u){n=u}}}};q.stopAllExecDirMonitors=function(){k.stopMonitorsOfType(p)};q.startTailMonitor=function(y,z,w,x,u,v,A){var B,C;B=l.workDataExecDir(d.getStore().getState(),y.id);C=l.workDataRelPath(d.getStore().getState(),y.id);return k.startMonitor(c,y.id,{execDir:B,credentials:(typeof A!=="undefined")?A:null,filePath:C,start:((typeof v!=="undefined")&&v)?v:0,numLines:((typeof u!=="undefined")&&(u||(u===0)))?u:50,onComplete:z,onFailure:w},s,null,x)};q.stopTailMonitor=function(u){k.stopMonitor(c,u.id)};q.stopAllTailMonitors=function(){k.stopMonitorsOfType(c)};return q});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-poll-work-directory",["DS/Redux/Redux","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-work-data/actions","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors"],function(c,j,h,b,f,g){var d={};var a="polldir";var i=[];function e(){var k=c.bindActionCreators(b,h.getStore().dispatch);f.allExecDirs(h.getStore().getState()).filter(function(m){var l=g.isJobDone(h.getStore().getState(),m.mcsJobID);var n=!l&&(!m.path&&m.path!=="")&&g.isJobClaimed(h.getStore().getState(),m.mcsJobID);return n}).forEach(function(l){if(i.indexOf(l.id)===-1){k.initializeExecDir(l.id)}if((i.indexOf(l.id)===-1)&&g.isJobDone(h.getStore().getState(),l.mcsJobID)){i.push(l.id)}})}d.startPollExecutionDir=function(k){var l=(typeof k!=="undefined")&&(k!==null)?k:60;return j.startMonitor(a,null,{},e,null,l)};d.stopAllPollExecutionDir=function(){j.stopMonitorsOfType(a)};return d});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-monitor-upload-jobs",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-domain/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/actions","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-redux-observer"],function(a,e,l,c,d,i,h,f,g){var b={};var k="uploadjobdata";function j(r){var p=false,o=new g(),n=e.getStore(),q=a.bindActionCreators(c,e.getStore().dispatch),s=[],m=function(t){if(t===f.PersistenceOperation.READING){p=true}else{if(p){r.mdUnsubscribe();r.mdUnsubscribe=null;s.forEach(function(u){q.processUploadJob(u.id)})}}};if(r.mdUnsubscribe){r.mdUnsubscribe()}s=d.uploadJobs(n.getState()).filter(function(t){return(d.isJobSuccessful(n.getState(),t)&&!d.isHiddenJobProcessed(n.getState(),t))});if(s.length>0){r.mdUnsubscribe=o.observeStore({store:n,select:h.managedDataPersistenceOperation,onChange:m,compareFunc:function(v,t){var u=v?v:null;return u===t}});a.bindActionCreators(i,n.dispatch).refreshManagedData()}}b.startUploadJobMonitor=function(m){var n=(typeof m!=="undefined")&&(m!==null)?m:60;return l.startMonitor(k,null,{firstTime:true},j,null,n)};b.stopUploadJobMonitor=function(){l.stopMonitorsOfType(k)};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByMonitors/ad-monitor-jobs",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByMonitors/ad-monitor-manager","DS/SMAPoweredByState/ad-state-domain/actions","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/actions","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-redux-observer"],function(b,i,o,e,h,n,m,d,k,l){var c={};var a="jobdata",g=2;function f(p,r){var q=[];h.allJobs(p.getState()).forEach(function(y){var u=h.isJobConfiguring(p.getState(),y),t=h.isJobRunning(p.getState(),y),x=y.kind===h.JobKind.TOOL,s=y.kind===h.JobKind.UPLOAD,z=y.kind===h.JobKind.GENERATE_RESULT,v,w;v=((x&&((r&&!u)||t))||((s||z)&&t)||(z&&r)||(y.stepsCompletedAtLastRefresh&&y.progress&&y.progress.stepsCompleted&&(y.stepsCompletedAtLastRefresh<y.progress.stepsCompleted)));if(v){if(y.progress&&(typeof y.progress.stepsCompleted!=="undefined")&&(typeof y.stepsCompletedAtLastRefresh!=="undefined")){w=((y.stepsCompletedAtLastRefresh<y.progress.stepsCompleted)||(y.refreshesForCurrentStep<g))}else{w=true}q.push({id:y.id,refreshContent:w})}});return q}function j(s){var t=false,v=new l(),q=false,x=i.getStore(),p=d.studyObject(x.getState()),w=f(x,s.firstTime),y=false,r,u=function(A){if(A===k.PersistenceOperation.READING){t=true}else{if(t){s.mdUnsubscribe();s.mdUnsubscribe=null;f(x,s.firstTime).forEach(function(B){b.bindActionCreators(e,x.dispatch).refreshJob(p.id,B.id,s.firstTime,B.refreshContent)});s.firstTime=false}}},z=function(A){if(A===k.PersistenceOperation.READING){q=true}else{if(q){s.jobsUnsubscribe();s.jobsUnsubscribe=null;f(x,s.firstTime).forEach(function(B){b.bindActionCreators(e,x.dispatch).refreshJob(p.id,B.id,s.firstTime,B.refreshContent)});s.firstTime=false}}};for(r=0;r<w.length;r++){if(w[r].refreshContent){y=true;break}}if(y){if(s.mdUnsubscribe){s.mdUnsubscribe()}s.mdUnsubscribe=v.observeStore({store:x,select:m.managedDataPersistenceOperation,onChange:u,compareFunc:function(C,A){var B=C?C:null;return B===A}});b.bindActionCreators(n,x.dispatch).refreshManagedData()}else{if(w.length>0){w.forEach(function(A){b.bindActionCreators(e,x.dispatch).refreshJob(p.id,A.id,s.firstTime,A.refreshContent)});s.firstTime=false}else{if(s.firstTime){if(s.jobsUnsubscribe){s.jobsUnsubscribe()}s.jobsUnsubscribe=v.observeStore({store:x,select:h.jobsPersistenceOperation,onChange:z,compareFunc:function(C,A){var B=C?C:null;return B===A}})}}}}c.startJobMonitor=function(p){var q=(typeof p!=="undefined")&&(p!==null)?p:60;return o.startMonitor(a,null,{firstTime:true},j,null,q)};c.stopJobMonitor=function(){o.stopMonitorsOfType(a)};return c});