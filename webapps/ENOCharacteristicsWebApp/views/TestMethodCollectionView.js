define("DS/ENOCharacteristicsWebApp/views/TestMethodCollectionView",["UWA/Core","DS/WebappsUtils/WebappsUtils","DS/W3DXComponents/Views/EmptyView","DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/NestedScrollView","DS/W3DXComponents/Views/Item/ThumbnailView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/ContentSet","DS/W3DXComponents/Collections/ActionsCollection","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/Constants","DS/UIKIT/SuperModal","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS"],function(m,d,e,l,f,j,g,n,h,i,b,a,o){var c=l.extend({emptyView:e,setup:function(){this.container.removeClassName("loading");return this._parent.apply(this,arguments)},itemViewOptions:{mapping:{title:function(){var q=this.model.get("latest");if("TRUE"===q||""===q){return this.model.get("name")}else{return this.model.get("name")+'  <span><img title="'+o.LatestRevisionExists+'" style="height:15px;width=15px;" src="../../webapps/ENOCharacteristicsWebApp/assets/icons/32/colorSwatchLightOrange.png" /></span>'}},subtitle:"type",image:function(){return i.get3DSpaceURL()+"/webapps/ENOCharacteristicsWebApp/assets/images/I_Document.png"},description:"description",content:function(){var r=this.model.get("originated");var t=this.model.get("description");var q=this.model.get("owner");var s="";if(q){s+=q+"</br>"}if(r){s+=r+"</br>"}if(t){s+=t+"</br>"}return s},},contextualActions:function(){var r=[];var q=new a({closable:true,animate:true,className:"deleteCharConfirmModal",renderTo:document.body,okButtonText:o.OK});r.push({text:o.RemoveTestMethod,fonticon:"cancel",handler:function(s){q.confirm(o.RemoveTestMethodConfirmAlert,o.RemoveTestMethod,function(t){if(t==true){var u={};u.view=s;u.method="POST";u.data={charObjId:window.characId,testMethodId:s.model._attributes.id};s.model.destroy(u)}})}});return r},onItemViewClick:function(q,r){if(q===this.currentItemView){return}var s=function(){if(this._selectionState.isActive){this.selectItemView(q,{event:r,silent:true})}else{this.selectItemView(q,{event:r,silent:false})}}.bind(this);s()},appendHtml:function(r,t,s){var q=r.container;var u=q.getChildren();if(s>=u.length){q.appendChild(t.container)}else{q.insertBefore(t.container,u[s])}if(this.currentItemView){if(this.currentItemView.model.id===t.model.id){this.selectItemView(t,{silent:true})}}}},});var k=f.extend({nested:c,setup:function(){this.listenTo(this,{onInfiniteScroll:this.onInfiniteScroll.bind(this),onPullToRefresh:this.onPullToRefresh.bind(this)});this.listenTo(this.collection,{onReload:this.onCollectionReload.bind(this),onSync:this.onCollectionSync.bind(this)});return this._parent.apply(this,arguments)},onInfiniteScroll:function(){this._loadCollectionNextPage()},onPullToRefresh:function(){this._reloadCollection()},onCollectionReload:function(){this._reloadCollection()},onCollectionSync:function(){this.container.removeClassName("loading");this.scrollView.useInfiniteScroll(false)},_reloadCollection:function(){if(this.collection.isSyncing()){return}var q=this;var r={onComplete:function(){q.container.removeClassName("loading");q.scrollView.endLoading()}};this.collection.getFirstPage(r)},_loadCollectionNextPage:function(){var q=this;var r={onComplete:function(){q.container.removeClassName("loading");q.scrollView.endLoading()}}},});var p=n.extend({emptyView:e,contextualActions:function(){return{id:"delete",text:"Delete",fonticon:"trash",multisel:true,handler:function(q){Core.log("delete on :"+q.model.get("title"))}}},defaultOptions:{emptyView:e,actions:{},switcher:{},detail:{},contents:{views:[{id:"tile",view:k,"default":true,itemView:g},{id:"thumbnail",view:k},{id:"list",view:k,itemView:g}]}}});return p});