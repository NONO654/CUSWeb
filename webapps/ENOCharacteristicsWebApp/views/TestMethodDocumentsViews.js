define("DS/ENOCharacteristicsWebApp/views/TestMethodDocumentsViews",["UWA/Core","UWA/Class/View","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/Constants"],function(f,e,d,c,b){var a=e.extend({setup:function(){},render:function(){var g=this;this.elements.mContainer=new f.Element("div",{"class":"enosho-properties-container review"});this.container=this.elements.mContainer;this.model.save();g.renderForm();if(this.model.get("documentTitle")){g.renderData()}},renderForm:function(){this.elements.mPropertiesContainer=new f.Element("div",{"class":"enosho-properties-prop-wrap"}).inject(this.container);this.elements.mPropertiesTable=new f.Element("table",{"class":"table table-striped"}).inject(this.elements.mPropertiesContainer);this.elements.mPropertiesTableBody=new f.Element("tbody",{}).inject(this.elements.mPropertiesTable);if(this.model.get("documentTitle")){this.mPropertyFields=[];if(typeof(this.model.get("documentTitle"))==="string"){var g=[{documentId:this.model.get("documentId"),documentTitle:this.model.get("documentTitle"),modelId:this.model.id}];this.mPropertyFields.push(this.renderTableProperty(g))}else{for(var h=0;h<this.model.get("documentTitle").length;h++){var g=[{documentId:this.model.get("documentId")[h],documentTitle:this.model.get("documentTitle")[h],modelId:this.model.id}];this.mPropertyFields.push(this.renderTableProperty(g))}}}else{this.mPropertyFields=[this.renderTableProperty(d.NoDocumentsFound)]}},renderTableProperty:function(i){var k=new f.Element("tr",{}).inject(this.elements.mPropertiesTableBody);var j=new f.Element("td",{"class":"title",}).inject(k);if(i===d.NoDocumentsFound){var h=new f.Element("p",{html:i}).inject(j);return h}else{var g=new f.Element("a",{id:"downloadDoc",href:"javascript:void(0)",events:{click:function(){c.send3DSpaceRequest(c.getGLSWebServiceURL()+b.CHARACTERISTICS_ENDPOINT+b.DOWNLOAD+"?fileId="+i[0].documentId+"&objectId="+i[0].modelId,"GET",{type:"blob",headers:{"Content-type":"application/x-www-form-urlencoded"}},function(l){var m=window.URL.createObjectURL(l);var n=new f.Element("a",{href:m,download:i[0].documentTitle,target:"_blank"}).inject(document.body);n.hide();n.click();setTimeout(function(){n.destroy();window.URL.revokeObjectURL(m)},100)},function(){alert(d.FileDownloadFailureMessage)})}},html:i.documentTitle}).inject(j);return g}},htmlDecode:function(g){var h=document.createElement("div");h.innerHTML=g;return h.childNodes.length===0?"":h.childNodes[0].nodeValue},renderData:function(){var h=this;var j=function(i,k){console.log(k);var l="";if(k){l=h.htmlDecode(k)}h.mPropertyFields[i].setHTML(l)};if(typeof(this.model.get("documentTitle"))==="string"){j(0,this.model.get("documentTitle"))}else{for(var g=0;g<this.model.get("documentTitle").length;g++){j(g,this.model.get("documentTitle")[g])}}}});return a});