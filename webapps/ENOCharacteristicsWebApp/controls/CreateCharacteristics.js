define("DS/ENOCharacteristicsWebApp/controls/CreateCharacteristics",["DS/UIKIT/Input/Text","UWA/Core","DS/UIKIT/Form","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/UIKIT/Modal","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Input/Date","DS/UIKIT/Input/Toggle","DS/UIKIT/Input/Select","DS/ENOFrameworkPlugins/jQuery","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/Constants","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS","DS/ENOCharacteristicsWebApp/controls/SearchConfiguration","DS/ENOCharacteristicsWebApp/utils/AlertManager","DS/UIKIT/Mask","DS/ENOCharacteristicsWebApp/utils/UIUtil"],function(q,a,g,i,h,c,n,p,l,k,e,b,d,f,j,r,s,m){var o=g.extend({urlRoot:b.getGLSWebServiceURL()+d.CHARACTERISTICS_ENDPOINT,mChartcsModalWindow:undefined,severityButtonGroup:null,minimal:null,currentModelObjectForRefresh:undefined,createOrEditFlag:true,mRootModel:null,mFormField:null,mTestMethodType:null,mInputValues:{ObjectID:""},init:function(t,v,u){u.mRootItemModelObserver.listenTo(t,"DS.GLS.UpdateTestMethodField",this.updateTestMethodField.bind(this));this.mTestMethodType=b.getEnableTestMethodSpecificationFlag();this.mTitle="Results - Test Methods in Released state";this.mSearchConfig=new j(this.mTitle);this.mTestMethodIds=[];this.mRootModel=t;this._parent({className:"horizontal",grid:"2 12",fields:[{type:"html",name:"CreateCharBody",id:"CreateCharBody",html:"<div id='CharFormDiv'></div>"}],events:{onInvalid:function(){}}});this.pushFormContent(v,u)},createBody:function(t,x,T){var E=null;var K=null;var L=null;this.dimensionSelect=null;var U=null;var V=null;var I=null;var H=null;var J=null;var Q=null;var v=null;var R=null;var B=null;var y=null;var w=null;var O=null;var N=null;var P=null;var A=null;var Y={};var G=[];var C=null;var W=null;var M;var X=null;this.dimensionPreferenceJson=[];this.displayUnits=[];for(var S=0;S<t.length;S++){C=t[S][S].substring(1,(t[S][S].indexOf(",")));W=t[S][S].substring((t[S][S].indexOf(",")+2),(t[S][S].indexOf("]")));Y={};Y.value=W;Y.label=C;G.push(Y)}for(var S=0;S<G.length;S++){M={};M.value=G[S].value;M.label=G[S].label;this.dimensionPreferenceJson.push(M)}this.dimensionPreferenceJson[0]["selected"]=true;var D=this.mRootModel.mDimensionModel.getDisplayUnitForDiemension(this.dimensionPreferenceJson[0].value);for(var S=0;S<D.length;S++){Y={};var W=D[S][S][1];var C=D[S][S][0];Y.value=W;Y.label=C;this.displayUnits.push(Y)}var z=this;var F=this;var u=UWA.createElement("div",{html:[{tag:"table","class":"form",html:[{tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.Name},{tag:"td","class":"createInputField",html:[E=new q({name:"nameInput",placeholder:"",id:"nameInput",disabled:true})]},{tag:"td","class":"createInputField",html:[new l({type:"checkbox",value:f.AutoName,checked:true,id:"autoNameCheckBox",events:{onClick:function(){if(!(E.isDisabled())){E.disable();e("#nameInput").val("")}else{E.enable()}}}})]},]},{tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.Title},{tag:"td","class":"createInputField",html:[K=new q({name:"titleInput",placeholder:"",id:"titleInput"})]}]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.Description},{tag:"td","class":"createInputField",html:[N=new q({name:"descriptionInput",multiline:true,placeholder:"",resize:"none",id:"descriptionInput"})]}]},T,{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.Priority},{tag:"td","class":"createInputField",html:[H=new q({name:"priorityInput",placeholder:"",id:"priorityInput",value:0})]}]},{tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.Dimension},{html:[this.dimensionSelect=new k({name:"dimensionSelect",id:"dimensionSelect",placeholder:false,options:z.dimensionPreferenceJson,events:{onChange:function(){var aa=this;var ad=aa.getValue("dimensionSelect");ad=ad instanceof Array?ad[0]:ad;var aj;try{aj=F.mRootModel.mDimensionModel.getDisplayUnitForDiemension(ad);var ah=aj.map(function(aq,ap){var ao=aq[ap];Y={};Y.value=ao[1];Y.label=ao[0];return Y});U.remove();U.add(ah);D=ah}catch(ai){var Z=b.getGLSWebServiceURL()+d.CHARACTERISTICS_ENDPOINT;b.send3DSpaceRequest(Z+d.CHARACTERISTICS_GET_DISPLAY_UNIT+"?dimension="+ad,"GET",{type:"json",headers:{"Content-type":"application/x-www-form-urlencoded"}},function(ap){var ao={};var at=[];var ar=null;var au=null;for(var aq=0;aq<ap.length;aq++){ar=ap[aq][aq][0];au=ap[aq][aq][1];ao={};ao.value=au;ao.label=ar;at.push(ao)}if(ap.length>0){at[0].selected=true}U.remove();U.add(at);D=at},function(ao){aa.dataError})}var ak=e("#displayUnitSelect").closest("div");ak.show();V.hide();U.enable();I.enable();y.enable();w.enable();e("#minimalRow").show();e("#maximalRow").show();e("#multipleRow").show();e("#nominalValueSelect").replaceWith('<input type="text" id="NominalText" class="dynamicTextBox">');ae("NominalText");ae("MinimalText");ae("MaximalText");ae("MultipleText");if(ad==="SubjectivityParameter"){e("#nominalValueLabelId").attr("class","createLabelRequired");e("#multiValueLabelId").attr("class","createLabelRequired")}else{e("#nominalValueLabelId").attr("class","createLabel");e("#multiValueLabelId").attr("class","createLabel")}var ag=I.getOptions();var ac=I.getSelection()[0].value;for(var af=0;af<ag.length;af++){if("Simple Value"===ag[af].value&&ac!==ag[af].value){I.setValue(af);break}}if(ad==="BooleanParameter"){U.disable();I.disable();e("#minimalRow").hide();e("#maximalRow").hide();e("#multipleRow").hide();var ab=e("<select ></select>").attr("id","nominalValueSelect").attr("class","select-choices form-control").attr("name","nominalValueSelect");var am="<option value='true'>TRUE</option>";var al="<option value='false'>FALSE</option>";ab.append(am).append(al);e("#NominalText").replaceWith(ab)}else{if(ad==="RealParameter"||ad==="IntegerParameter"){ak.hide();V.show()}else{if(ad==="CMYKFormattedStringParameter"){U.disable();I.disable();y.check(true);w.check(true);y.disable();w.disable();e("#NominalText").attr("placeholder","Ex- [0,0,0,0]")}else{if(ad==="HEXFormattedStringParameter"){U.disable();I.disable();y.check(true);w.check(true);y.disable();w.disable();e("#NominalText").attr("placeholder","Ex- #FFFF00")}else{if(ad==="RGBFormattedStringParameter"){U.disable();I.disable();y.check(true);w.check(true);y.disable();w.disable();e("#NominalText").attr("placeholder","Ex- [125,250,110]")}else{if(ad==="StringParameter"||ad==="SubjectivityParameter"){U.disable();if(ad==="SubjectivityParameter"){I.disable()}e("#minimalRow").hide();e("#maximalRow").hide()}else{if(ad==="COLORParameter"){var an="NominalText";e("#NominalText").replaceWith('<td><input type="text" size="5" id="redNominalText" class="createInputField"></td><td><input type="text" size="5" id="greenNominalText" class="createInputField"></td><td><input type="text" size="5" id="blueNominalText" class="createInputField"></td>');e("#MinimalText").replaceWith('<td><input type="text" size="5" id="redMinimalText" class="createInputField"></td><td><input type="text" size="5" id="greenMinimalText" class="createInputField"></td><td><input type="text" size="5" id="blueMinimalText" class="createInputField"></td>');e("#MaximalText").replaceWith('<td><input type="text" size="5" id="redMaximalText" class="createInputField"></td><td><input type="text" size="5" id="greenMaximalText" class="createInputField"></td><td><input type="text" size="5" id="blueMaximalText" class="createInputField"></td>');e("#MultipleText").replaceWith('<td><input type="text" size="5" id="redMultipleText" class="createInputField"></td><td><input type="text" size="5" id="greenMultipleText" class="createInputField"></td><td><input type="text" size="5" id="blueMultipleText" class="createInputField"></td>')}}}}}}}function ae(ap){var ao=e(document.createElement("input")).attr({type:"text","class":"form-control form-control-root",name:"singleText",id:ap});e("#"+ap).replaceWith("<td>"+e(ao)[0].outerHTML+"</td>");e("#red"+ap).replaceWith("<td>"+e(ao)[0].outerHTML+"</td>");e("#blue"+ap).hide();e("#green"+ap).hide()}}}})]},{tag:"td",html:[new i({name:"dimensionChooser",id:"dimensionChooser",value:"",icon:"fonticon-dot-3",events:{onClick:function(){var Z=F.mRootModel.mDimensionModel.mDimensionSet;z.pushDimensionChooserContent(Z)}}})]}]},{tag:"tr",html:[{tag:"td",id:"displayUnit","class":"createLabel",text:f.DisplayUnit},{html:[U=new k({name:"displayUnitSelect",id:"displayUnitSelect",placeholder:false,options:this.displayUnits,events:{onChange:function(){var ac=z.getValue("displayUnitSelect");var aa=z.getValue("dimensionSelect");if(aa==="COLORParameter"){if(ac===f.HEXA||ac===f.Pantone){Z("NominalText");Z("MinimalText");Z("MaximalText");Z("MultipleText")}else{ab("NominalText");ab("MinimalText");ab("MaximalText");ab("MultipleText")}function Z(ae){var ad=e(document.createElement("input")).attr({type:"text",size:"5",name:ae,id:ae});e("#red"+ae).replaceWith(ad);e("#blue"+ae).hide();e("#green"+ae).hide()}function ab(af){var ae=e(document.createElement("input")).attr({type:"text",size:"5",name:"red"+af,id:"red"+af});var ad=e(document.createElement("input")).attr({type:"text",size:"5",name:"green"+af,id:"green"+af});var ag=e(document.createElement("input")).attr({type:"text",size:"5",name:"blue"+af,id:"blue"+af});e("#"+af).replaceWith("<td>"+e(ae)[0].outerHTML+"</td>","<td>"+e(ad)[0].outerHTML+"</td>","<td>"+e(ag)[0].outerHTML+"</td>")}}}}})]},{html:[V=new q({name:"displayUnitText",id:"displayUnitText",className:"form-control form-control-root",placeholder:""})]}]},{tag:"tr","class":"heading",html:[{tag:"td",colspan:"5","class":"heading1",text:f.Values}]},{tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.ValuationType},{html:[I=new k({name:"valuationType",id:"valuationType",placeholder:false,options:[{value:"None",label:f.None},{value:"Simple Value",label:f.SimpleValue,selected:true}],events:{onChange:function(){var Z=e("#valuationType").val();if(Z==="None"){e("#nominalRow").hide();e("#multipleRow").hide()}else{if(Z==="Multiple Value"){e("#multipleRow").show();e("#nominalRow").hide()}else{e("#nominalRow").show();e("#multipleRow").show()}}}}})]}]},{tag:"tr",id:"nominalRow",html:[{tag:"td",id:"nominalValueLabelId","class":"createLabel",text:f.Value},{tag:"td","class":"createInputField",id:"NominalTexttd",html:[v=new q({name:"nominalValueText",placeholder:"",id:"NominalText"})]}]},{tag:"tr",id:"minimalRow",html:[{tag:"td","class":"createLabel",text:f.MinimalValue},{tag:"td",id:"MinimalTexttd","class":"createInputField",html:[R=new q({name:"minimalValueText",placeholder:"",id:"MinimalText"})]},{tag:"td","class":"createInputField",html:[y=new l({type:"checkbox",value:"",label:"Included",checked:true,name:"minimalValueInclude",id:"minimalValueInclude"})]},],},{tag:"tr",id:"maximalRow",html:[{tag:"td","class":"createLabel",text:f.MaximalValue},{tag:"td",id:"MaximalTexttd","class":"createInputField",html:[B=new q({name:"maximalValueText",placeholder:"",id:"MaximalText"})]},{tag:"td","class":"createInputField",html:[w=new l({type:"checkbox",value:"",label:"Included",checked:true,name:"maximalValueInclude",id:"maximalValueInclude"})]}]},{tag:"tr",id:"multipleRow",html:[{tag:"td",id:"multiValueLabelId","class":"createLabel",text:f.MultipleValues},{tag:"td","class":"createInputField",html:[Q=new k({nativeSelect:true,id:"multipleValuesSelect",name:"multiSelectText",placeholder:"     ",multiple:true,options:[{value:"",selected:true}],events:{onClick:function(){var Z=z.getValue("dimensionSelect");e("#MultipleText").val(e("#multipleValuesSelect").val())}}})]},{tag:"td","class":"createInputField",id:"",html:[new q({placeholder:"",id:"MultipleText"})]},{tag:"td","class":"createInputField",html:[new i({value:"",icon:"fonticon-plus-circled",events:{onClick:function(){var Z=z.getValue("dimensionSelect");var ac=e("#MultipleText").val();var ae=Q.getOptions();var aa=false;for(var ab=0;ab<ae.length;ab++){if(ae[ab].value===ac){aa=true;alert(f.DuplicateValueAlert)}}if(aa===false){var ad=Q.getSelection();if(ad[0].value!==""){Q.remove(ad[0].value)}Q.add(ac);e("#MultipleText").val("")}}}})]},{tag:"td","class":"createInputField",html:[new i({value:"",icon:"fonticon-minus-circled",events:{onClick:function(){var Z=z.getValue("dimensionSelect");var aa=e("#multipleValuesSelect").val();Q.remove(aa);e("#MultipleText").val("")}}})]}]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.CharacteristicsNotes},{tag:"td","class":"createInputField",html:[A=new q({multiline:true,placeholder:"",resize:"none",name:"notesInput",id:"notesInput"})]}]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.MeasurementPrecision},{html:[new k({placeholder:"",name:"precisionInput",options:[{value:"",selected:true},{value:"0.1"},{value:"0.01"},{value:"0.001"},{value:"0.0001"},{value:"0.00001"}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.MissedTargetAction},{html:[new k({placeholder:false,name:"missedTargetAction",options:[{value:"No Action Required",label:f.NoActionRequired,selected:true},{value:"Hold and Retest",label:f.HoldandRetest},{value:"Ship and Monitor",label:f.ShipandMonitor}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.AppliestoInProcess},{html:[new k({placeholder:false,name:"appliesToInProcess",options:[{value:"TRUE",label:f.TRUE},{value:"FALSE",label:f.FALSE,selected:true}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.AppliestoBulk},{html:[new k({placeholder:false,name:"appliesToBulk",options:[{value:"TRUE",label:f.TRUE},{value:"FALSE",label:f.FALSE,selected:true}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.AppliestoFinalPackage},{html:[new k({placeholder:false,name:"appliesToFinalPackage",options:[{value:"TRUE",label:f.TRUE},{value:"FALSE",label:f.FALSE,selected:true}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.OverwriteAllowedOnChild},{html:[new k({placeholder:false,name:"overwriteAllowedOnChild",options:[{value:"TRUE",label:f.TRUE,selected:true},{value:"FALSE",label:f.FALSE}]})]},]},{tag:"tr",html:[{tag:"td","class":"createLabel",text:f.TestMethod},{tag:"td",id:"testMethodTD","class":"createInputField",html:[new q({name:"testMethodText",placeholder:f.AddTestMethod,id:"testMethodText"})]},{tag:"td","class":"createInputField",html:[new i({name:"testMethodsChooser",id:"testMethodsChooser",value:"",icon:"fonticon-dot-3",events:{onClick:function(){if(typeof widget!=="undefined"){var ac="";var Z=z.mTestMethodIds;z.mSearchConfig.activate("",b.getTestMethodsTypesActualValue(),"current==Release",z.addTMtoCharacteristics.bind(z),ac,Z)}else{var aa="/characteristic/CharacteristicMaster3dSearchIntermediate.jsp?field=TYPES="+b.getEnableTestMethodSpecificationFlag()+":POLICY=policy_IPMSpecification,policy_Document,policy_ServiceDefinitionContent,policy_ServiceImplementationContent:CURRENT=policy_IPMSpecification.state_Release,policy_Document.state_RELEASED,policy_ServiceDefinitionContent.state_Exists,policy_ServiceImplementationContent.state_Exists:LATESTREVISION=true&table=AEFGeneralSearchResults&showInitialResults=true&selection=multiple&submitAction=refreshCaller&showRMB=false&txtExcludeOIDs="+z.mTestMethodIds.toString()+"&submitURL=../characteristic/CharacteristicMasterAddExistingOnPart.jsp&mode=AddTestMethodToChar";var ab=document.getElementById("ENOCharSearchFrame");ab.src="../.."+aa}}}}),"&nbsp;&nbsp;",new i({name:"testMethodsClear",id:"testMethodsClear",value:f.ClearAll,events:{onClick:function(){z.mTestMethodIds=[];z.addTMtoCharacteristics(null)}}})]}]}]}]});return u},updateTestMethodField:function(u){var t;if(window.app.testMethods){t=window.app.testMethods.details}else{t=u}this.addTMtoCharacteristics(t)},addTMtoCharacteristics:function(t){var v=this.elements.container.getElement("#testMethodTD");var u="";if(t!==null){u=v.getChildren()[0].value;if(u&&!u.endsWith(", ")){u=u.concat(", ")}for(var x=0;x<t.length;x++){if(this.mTestMethodIds.indexOf(t[x].id)==-1){this.mTestMethodIds.push(t[x].id);u=u+t[x]["name"]+", "}}u=u.substring(0,u.length-2)}v.empty();window.testMethodId=[];var y=[];var w=new q({name:"testMethodText",placeholder:"Add Test Methods",id:"testMethodText",title:u,value:u,disabled:true});w.inject(v);v.setAttribute("title",u)},createDimensionChooserContent:function(w){var t=e(".dimensionChooserModal").children().children().children()[1];e(t).addClass("dimensionChooserBody");for(var u=0;u<w.length;u++){var v=e(document.createElement("input")).attr({type:"radio","class":"dimension",value:w[u].id,checked:false});e(".dimensionChooserBody").append(v).append(e("<label />",{text:w[u].standard})).append(e("<br>"))}e(".dimension").click(function(){var x=e(this).next().text();e(".dimension").each(function(){if(e(this).prop("checked")&&e(this).next().text()!==x){e(this).attr("checked",false)}})})},formFieldContent:function(){var t=new g({className:"horizontal",grid:"2 10",fields:[{type:"html",name:"CreateCharBody",id:"CreateCharBody",html:"<div id='CharFormDiv'></div>"}],events:{onInvalid:function(){}}});return t},dimensionChooserFieldContent:new g({className:"horizontal",grid:"2 10",fields:[{type:"html",name:"dimensionChooserBody",id:"dimensionChooserBody",html:"<div id='dimensionChooserDiv'></div>"}],events:{onInvalid:function(){alert("Form not instantaniated")}}}),doneButton:function(t,u){var v=this;return new i({value:f.Done,className:"info",events:{onClick:function(){v.addCharacteristic(t,u)}}})},checkForBadNamedChar:function(x){var t=true;var z="";var w="";var y="";for(var v=0;v<x.length;v++){y=x[v];if(y==="nameInput"){z=d.NAME_BAD_CHARS.replace(/\s/g,"");w=document.getElementById(y).value}else{if(y==="descriptionInput"||y==="notesInput"){w=document.getElementById(y).value;z=d.BAD_CHARS_FOR_DESC.replace(/\s/g,"")}else{var u=document.getElementById(y);if(u!==null){w=u.value}z=d.BAD_CHARS.replace(/\s/g,"")}}if(w!==""){t=m.checkForBadCharacter(w,z);if(!t){document.getElementById(y).focus();return t}}}return t},checkForValidValue:function(t){for(var u=0;u<t.length;u++){var w=document.getElementById("dimensionSelect").value;if(w!=="StringParameter"&&w!=="BooleanParameter"&&w!=="SubjectivityParameter"&&w!=="CMYKFormattedStringParameter"&&w!=="HEXFormattedStringParameter"&&w!=="RGBFormattedStringParameter"){var v=document.getElementById(t[u]).value;if(isNaN(v)){alert(f.InvalidValueAlert);return false}}}return true},addCharacteristic:function(D,u){var E=["nameInput","titleInput","descriptionInput","notesInput","charCategoryInput"];var w=["NominalText","MinimalText","MaximalText"];this.manager=u;if((e("#nameInput").attr("class")).indexOf("disabled")<0&&e("#nameInput").val().trim()===""){alert(f.NameFieldRequiredMessage);e("#nameInput").focus();return}if(e("#titleInput").val()===""){alert(f.TitleFieldRequiredMessage);e("#titleInput").focus();return}if(e("#charCategoryInput").val()===""){alert(f.CharacteristicCategoryFieldRequiredMessage);e("#charCategoryInput").focus();return}var t=b.getGLSWebServiceURL()+d.CHARACTERISTICS_ENDPOINT;this.mInputValues.ObjectID=D;if(e("#nameInput").prop("disabled")==="true"){this.mInputValues.name=""}else{this.mInputValues.name=this.getValue("nameInput")}this.mInputValues.Title=this.getValue("titleInput");var C=this.getValue("valuationType");if(C==="None"){C="0"}else{if(C==="Simple Value"){C="1"}else{C="2"}}this.mInputValues.valuation=C;this.dimension=this.getValue("dimensionSelect");this.mInputValues.dimension=this.dimension;if(this.dimension==="BooleanParameter"){this.mInputValues.nominal=e("#nominalValueSelect").val();this.mInputValues.minimal="";this.mInputValues.maximal=""}else{if(this.dimension==="COLORParameter"&&this.dimension!==f.HEXA&&this.dimension!==f.Pantone){this.mInputValues.nominal=e("#redNominalText").val()+","+e("#blueNominalText").val()+","+e("#greenNominalText").val();this.mInputValues.minimal=e("#redMinimalText").val()+","+e("#blueMinimalText").val()+","+e("#greenMinimalText").val();this.mInputValues.maximal=e("#redMaximalText").val()+","+e("#blueMaximalText").val()+","+e("#greenMaximalText").val()}else{this.mInputValues.nominal=e("#NominalText").val();this.mInputValues.minimal=e("#MinimalText").val();this.mInputValues.maximal=e("#MaximalText").val()}}if(!this.checkForValidValue(w)){return false}this.mInputValues.displayUnit=this.getValue("displayUnitSelect");if(this.dimension==="IntegerParameter"||this.dimension==="RealParameter"){this.mInputValues.displayUnit=this.getValue("displayUnitText")}this.mInputValues.charCategory=this.getValue("charCategoryInput");this.mInputValues.priority=this.getValue("priorityInput");if(e("#multipleValuesSelect > option").length==1){this.mInputValues.multiple=[]}else{var z=[];var A=e("#multipleValuesSelect").find("option").get();var x=0;for(var y=0;y<A.length;y++){if(A[y].value!==""){z[x]=A[y].value;x++}}this.mInputValues.multiple=z}this.mInputValues.missedTargetAction=this.getValue("missedTargetAction");this.mInputValues.notes=this.getValue("notesInput");this.mInputValues.description=this.getValue("descriptionInput");this.mInputValues.precisionInput=this.getValue("precisionInput");this.mInputValues.overwriteAllowedOnChild=this.getValue("overwriteAllowedOnChild");this.mInputValues.minIncluded=this.getValue("minimalValueInclude");this.mInputValues.maxIncluded=this.getValue("maximalValueInclude");this.mInputValues.appliesToInProcess=this.getValue("appliesToInProcess");this.mInputValues.appliesToBulk=this.getValue("appliesToBulk");this.mInputValues.appliesToFinalPackage=this.getValue("appliesToFinalPackage");var B=[];if(this.checkForBadNamedChar(E)===false){return false}B=this.mInputValues;var v=this;if((window.app||typeof widget)&&v.mTestMethodIds.length>0){this.mInputValues.testMethods=v.mTestMethodIds;v.mTestMethodIds=[]}s.mask(this.mChartcsModalWindow.elements.content);b.send3DSpaceRequest(this.urlRoot+d.CHARACTERISTICS_CREATE,"POST",{type:"text",headers:{"Content-type":"application/json; charset=UTF-8"},data:JSON.stringify(this.mInputValues)},function(F){s.unmask(v.mChartcsModalWindow.elements.content);var G=JSON.parse(F);v.addCharactristicToModel(G[0],u);v.mInputValues.testMethods=[]},function(G,F){s.unmask(v.mChartcsModalWindow.elements.content);alert((JSON.parse(F)).message)})},addCharactristicToModel:function(v,t){var x=this;var w=x.mRootModel.addCharacteristics(v);var u={rootNode:w.Category.mTreeNodeModel.getParent(),reOrderAcrossCategory:false,};t.updateSequenceOrder(u);x.mChartcsModalWindow.hide()},cancelButton:function(){var t=this;return new i({value:f.Cancel,className:"default",events:{onClick:function(){t.mChartcsModalWindow.hide()}}})},dimensionChooserDoneButton:function(){var t=this;return new i({value:f.Done,className:"info",events:{onClick:function(){var w=e("input[class=dimension]:checked").val();var v=e("input[class=dimension]:checked").next().text();if(v==""){alert(f.PleaseSelectADimension);return}var u=[{value:w,label:v,selected:true}];t.dimensionSelect.add(u);t.CharDimensionChooserModal.hide();t.dimensionChooserFieldContent.reset();t.dimensionChooserFieldContent.unvalidate()}}})},dimensionChooserCancelButton:function(){var t=this;return new i({value:f.Cancel,className:"default",events:{onClick:function(){t.CharDimensionChooserModal.hide();t.dimensionChooserFieldContent.reset();t.dimensionChooserFieldContent.unvalidate()}}})},pushFormContent:function(v,u){this.mChartcsModalWindow=null;this.mRootModel=u.mRootItem;var w=this;this.mChartcsModalWindow=new c({closable:true,animate:true,header:"<h4>"+f.CreateCharacteristics+"</h4>",body:this,footer:[this.doneButton(this.mRootModel.mObjectId,u),this.cancelButton()],events:{onHide:function(){w.mTestMethodIds=[];w.reset();w.unvalidate()}}});this.mChartcsModalWindow.inject(document.body).show();var t=a.extendElement(document.body).getElement("#CharFormDiv");t.innerHTML="";var w=this;b.send3DSpaceRequest(this.urlRoot+d.CHARACTERISTICS_GET_ATTRIBUTE_RANGES,"GET",{type:"json",headers:{"Content-type":"application/x-www-form-urlencoded"},data:{attribute:d.ATTRIBUTE_CHARACTERISTIC_CATEGORY}},function(G){var x=G[0].ActualRanges.length;var A=navigator.systemLanguage||navigator.browserLanguage||navigator.userLanguage||navigator.language;if(x==0){var E={tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.Category},{tag:"td","class":"createInputField",html:[new q({name:"charCategoryInput",placeholder:"",id:"charCategoryInput"})]}]}}else{var y=[];for(var B=0;B<x;B++){var z=G[0].ActualRanges[B];var F=G[0].TranslatedRanges[B];y.push({value:z,label:F})}var D;if(A=="ja"){D="createInputField-ja"}var E={tag:"tr",html:[{tag:"td","class":"createLabelRequired",text:f.Category},{"class":A=="ja"?"inputField-ja":"",html:[new k({placeholder:false,name:"charCategoryInput",options:y})]},]}}w.createBody(v,u,E).inject(t);e("#displayUnitText").hide();var C=a.extendElement(document.body).getElement("#EditCharFormElem")},function(y,x){r.displayErrorResponse(u.mAlert,x)})},pushDimensionChooserContent:function(u){this.CharDimensionChooserModal=null;var t=this;this.CharDimensionChooserModal=new c({closable:true,className:"dimensionChooserModal",animate:true,header:"<h4>"+f.Dimension+"</h4>",body:this.dimensionChooserFieldContent,footer:[this.dimensionChooserDoneButton(),this.dimensionChooserCancelButton()],events:{onHide:function(){t.CharDimensionChooserModal.hide();t.CharDimensionChooserModal.destroy()}}});this.CharDimensionChooserModal.inject(document.body).show();var v=a.extendElement(document.body).getElement("#dimensionChooserDiv");this.createDimensionChooserContent(u).inject(v)},});return o});