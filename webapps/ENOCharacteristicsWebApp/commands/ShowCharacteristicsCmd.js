define("DS/ENOCharacteristicsWebApp/commands/ShowCharacteristicsCmd",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ApplicationFrame/CommandCheckHeader","DS/Windows/Dialog","DS/ENOCharacteristicsWebApp/controls/CharacteristicsWindow","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS"],function(h,c,g,e,b,f){var a=g.extend({_myDialog:null,_cmd:null,_characteristicsWindow:null,init:function(j){c.subscribe("DS.MFN.Selection.SelectionModified",this.onSelectionChange.bind(this));c.subscribe("DS.MGA.Selection.SelectionModified",this.onSelectionChange.bind(this));c.subscribe("DS.GLS.UpdateWindowTitle",this.updateTitle.bind(this));this._parent(j,{mode:"exclusive",isAsynchronous:false});var l=this.getFrameWindow().getImmersiveFrame();var i=j.ID+"_WindowTitle";this._cmdWindowTitle=i;this._cmd=j.ID;this._characteristicsWindow=new b(j);var k=this;this._myDialog=new e({title:f[i],content:k._characteristicsWindow,immersiveFrame:l,resizableFlag:true,position:{at:"left top",my:"left top"},width:1190,height:380});if(h.is(this._characteristicsWindow)){this._characteristicsWindow.setDlgWindow(this._myDialog)}if(h.is(this._myDialog)){var k=this;this._myDialog.close=function(){k.toggleState();var m=k._characteristicsWindow.mFrameWindow;if(h.is(m)){var n=m.elements.filterDialog;if(h.is(n)){n.clearAndHide()}}};this._myDialog.hide()}this.onStateChange(this._stateChanged)},_stateChanged:function d(){var j=this.getState(),l,i;if(j){l=h.is(this.options.context)?this.options.context.getSelectedNodes():[];i={selectedObjectsPID:[],modifiedObjectSelectionState:null,modifiedObjectPID:[],widgetId:widget.id?widget.id:"defaultId"};if(h.is(l,"array")){l.forEach(function(m){i.selectedObjectsPID.push(m.getID())})}var k=i.selectedObjectsPID.pop();if(h.is(this._myDialog)){this._myDialog.title=f[this._cmdWindowTitle];this._myDialog.show();c.publish("DS."+this._cmd+".CharWindowShow",{widgetId:widget.id?widget.id:"defaultId",selectedMGAObjectId:k})}}else{if(h.is(this._myDialog)){this._myDialog.hide();c.publish("DS."+this._cmd+".CharWindowHide",{widgetId:widget.id?widget.id:"defaultId"})}}},onSelectionChange:function(){var i=this.options.context?f[this._cmdWindowTitle]:"";this._myDialog.title=i},updateTitle:function(i){console.log(i);if(h.is(this._myDialog)){this._myDialog.title=f[this._cmdWindowTitle]+":  "+i.title}}});return a});