define("DS/ENOCharacteristicsWebApp/utils/RequestUtils",["UWA/Class","UWA/Data","DS/WAFData/WAFData","DS/PlatformAPI/PlatformAPI"],function(d,e,a,c){var b=d.singleton({ReadModesEnum:{SERVER:1,CACHE:2},WriteModesEnum:{SERVER:1,CACHE:2},glsAppPath:"characteristicmodeller",glsAppVersion:"v1",m3DSpaceURL:"../..",mUserLogin:"",m3DSpaceCSRFToken:null,enableTestMethodSpecificationFlag:null,testMethodsTypesActualValue:null,mLanguage:null,init:function(){return this},configure:function(g,f){this.m3DSpaceURL=g;this.mUserLogin=f},getGLSWebServiceURL:function(){return"resources/"+this.glsAppVersion+"/"+this.glsAppPath+"/"},get3DSpaceURL:function(){return this.m3DSpaceURL},getMandatoryIcon:function(){return this.getAppsBaseUrl()+"/webapps/ENOCharacteristicsWebApp/assets/icons/32/MandatoryCharacteristic.png"},getAppsBaseUrl:function(){var f=c.getApplicationConfiguration("app.urls.myapps");if(f==undefined||f==null){f=this.m3DSpaceURL}return f},getUserLogin:function(){return this.mUserLogin},set3DSpaceCSRFToken:function(f){this.m3DSpaceCSRFToken=f},get3DSpaceCSRFToken:function(){return this.m3DSpaceCSRFToken},setTimeout:function(f){this.timeout=f},getTimeout:function(){return this.timeout},setEnableTestMethodSpecificationFlag:function(f){this.enableTestMethodSpecificationFlag=f},getEnableTestMethodSpecificationFlag:function(){return this.enableTestMethodSpecificationFlag},setTestMethodsTypesActualValue:function(f){this.testMethodsTypesActualValue=f},getTestMethodsTypesActualValue:function(){return this.testMethodsTypesActualValue},send3DSpaceRequest:function(f,j,g,i,h){this.sendRequest(this.m3DSpaceURL+"/"+f,j,g,i,h)},send3DSpaceRequestSimple:function(f,g){this.sendRequestSimple(this.m3DSpaceURL+"/"+f,g)},sendRequest:function(h,j,f,i,g){f.method=j;f.onComplete=i;f.onFailure=g;this.sendRequestSimple(h,f)},sendRequestSimple:function(g,f){if(!f.headers){f.headers={};f.headers["Content-type"]="text/html"}if(!f.type){f.type="text"}if(!f.data){f.data=""}if(!f.timeout){f.timeout=this.timeout}if(this.m3DSpaceCSRFToken){f.headers["X-Requested-With"]="csrf protection";f.headers["X-Request"]=this.m3DSpaceCSRFToken}return a.authenticatedRequest(g,f)},getLanguage:function(){if(this.mLanguage){return this.mLanguage}try{if(window.parent&&window.parent.dsLang){return window.parent.dsLang}if(widget){return widget.lang}}catch(f){}var g="en";if(navigator.browserLanguage){g=navigator.browserLanguage}else{g=navigator.language}if(g.indexOf("fr")>-1){return"fr"}else{if(g.indexOf("en")>-1){return"en"}else{if(g.indexOf("es")>-1){return"es"}else{if(g.indexOf("it")>-1){return"it"}else{if(g.indexOf("de")>-1){return"de"}else{if(g.indexOf("ja")>-1){return"ja"}else{if(g.indexOf("zh")>-1){return"zh"}}}}}}}return"en"},initLanguage:function(g){var f=this;this.send3DSpaceRequestSimple(this.getGLSWebServiceURL()+"application/language",{method:"GET",type:"json",headers:{"Content-type":"application/json"},onComplete:function(h){require.config({config:{i18n:{locale:h.language}}});f.mLanguage=h.language;g()}})},sendDataRequest:function(g,f){e.request(g,f)}});return b});