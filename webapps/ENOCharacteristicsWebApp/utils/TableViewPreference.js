define("DS/ENOCharacteristicsWebApp/utils/TableViewPreference",["UWA/Core","UWA/Class","DS/ENOCharacteristicsWebApp/utils/Constants","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/AlertManager","DS/ENOCharacteristicsWebApp/utils/UIUtil"],function(f,a,b,g,c,h){var j=a.singleton({init:function(){return this},getColumnOrder:function e(o,m,l){var p,q,s=false,k,u=[],n,t,r={};if(!UWA.is(m)){m=this.preferences_grid.getManager()}q=this.getStartIndexForPreference(l);for(p=q;p<o.length;++p){t=o[p].dataIndex;r[t]=o[p]}for(p=0;p<m.getNumberOfRows();p++){k=m.getRowModel(p);t=k.dataIndex;n=r[t];if(k.dataIndex!==o[p+q].dataIndex){s=true}if(UWA.typeOf(k.colVisibility)==="string"){k.colVisibility=UWA.Json.decode(k.colVisibility)}if(k.colVisibility.isVisible!==r[t].isVisible){n.isVisible=k.colVisibility.isVisible;s=true}if(k.width!==r[t].width){n.width=k.width;s=true}if(k.minWidth!==r[t].minWidth){n.minWidth=k.minWidth;s=true}u.push(n)}return{isChanged:s,Columns:u}},setWidgetPreferences:function(n,p,o){var k=this;var q,m=[],l,t;for(q=0;q<p.length;q++){t=p[q];l={};l.dataIndex=t.dataIndex;l.isVisible=t.isVisible;l.width=h.getValidColumnWidth(t.width);l.minWidth=h.getValidColumnMinWidth(t.minWidth);m[m.length]=l}if(o){widget.setValue(n,UWA.Json.encode(m))}else{var r={preferenceName:n,preferenceValue:m};var s=JSON.stringify(r);g.send3DSpaceRequest(g.getGLSWebServiceURL()+b.CHARACTERISTICS_ENDPOINT+b.CHARACTERISTICS_SET_COLUMN_PREFERENCES,"POST",{type:"text",headers:{"Content-type":"application/json; charset=UTF-8"},data:s},function(u){},function(v,u){c.displayErrorResponse(null,u)})}},sortViewColumns:function d(o,t,m){var q,k,r,s,l,p,n;r=this.getStartIndexForPreference(m);for(q=0;q<o.length;q++){k=o[q];s=t.getColumnIDFromDataIndex(k.dataIndex);if(UWA.is(s)){if(t._listOfColumnsPreviousWidth[s]===0){t._listOfColumnsPreviousWidth[s]=100}l=h.getValidColumnWidth(k.width);p=h.getValidColumnMinWidth(k.minWidth);n=k.isVisible;if(n===true){t.showColumn(s)}else{t.hideColumn(s)}t.setColumnOptions(s,{width:l,minWidth:p,isVisible:n});if(s!=r){t.moveColumn(s,r)}r++}}},getStartIndexForPreference:function i(k){return k?2:3}});return j});