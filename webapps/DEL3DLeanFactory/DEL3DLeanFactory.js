define("DS/DEL3DLeanFactory/ModelFactory",["UWA/Core","DS/Logger/Logger","UWA/Class/Promise","DS/DEL3DLeanResources/ResourcesManager","DS/DEL3DLeanModels/Model.manager"],function(g,b,d,c,a){var e;e={name:"ModelFactory",_logger:b.getLogger(e),createModel:function(k,j,i){var h=k;i=i||{};if(!a.isModel(h)){h=new h.modelConstructor(j)}h.save(null,{success:i.success,error:function(){i.error("Database access failed")},context:i.context});return h},fetchOrCreate:function f(k,j){var i=d.deferred();var h=k;j=j||{};if(!a.isModel(h)){h=new h.modelConstructor(j)}h.fetch({success:function(l){i.resolve(l)},error:function(){h.save(null,{success:function(l){i.resolve(l)},error:function(){i.reject(c.getTranslation("ERR0x00000511"))}})}});return i.promise}};return e});