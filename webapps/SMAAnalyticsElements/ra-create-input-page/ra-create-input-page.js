require(["UWA/Class/Promise","SMAAnalyticsWidget/SMAAnalyticsDragNDrop","i18n!DS/SMAAnalyticsNLS/assets/nls/SMAAnalyticsWidgetNLSfile","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(c,g,e,b,d){var f=new g();var a=function(h){this.fire("onDataUploadCompleteEvent",h)};Polymer({is:"ra-create-input-page",ready:f.initializeDropUtil.bind(f),properties:{fileTypes:{type:String,value:f.getAllowedFileTypes.bind(f),observer:"_setFileTypes"},plmTypes:{type:String,value:f.getAllowedPLMTypes.bind(f),observer:"_setPLMTypes"},objectId:{type:String,value:"",observer:"_setObjectId"},raTitle:{type:Object},isExportReq:{type:Boolean,observer:"_setExportReq"},hideUpload:{type:Boolean,observer:"_setHideUpload"},flushOnComplete:{type:Boolean,value:false,observer:"_flushDbxOnComplete"}},onLocalFileClick:function(h){h.stopPropagation();h.cancelBubble=true;this.$.localFileChooser.click()},onLocalFileSelect:function(h){h.stopPropagation();h.cancelBubble=true;if(this.objectId){f.setObjectId.call(f,this.objectId)}else{f.setObjectId.call(f,"")}f.setExportReq.call(f,this.isExportReq);f.setAllowedPLMTypes.call(f,this.plmTypes);f.setAllowedFileTypes.call(f,this.fileTypes);f.handleLocalFileSelect.call(f,h,a.bind(this));this.$.localFileChooser.value=null},onInputFileDragOver:function(h){h.stopPropagation();h.cancelBubble=true;h.preventDefault();this.DOM(this.$.uploadContainer).addClass("drag-over")},onInputFileDragLeave:function(){event.stopPropagation();event.cancelBubble=true;event.preventDefault();this.DOM(this.$.uploadContainer).removeClass("drag-over")},onInputFileDrop:function(h){h.stopPropagation();h.cancelBubble=true;h.preventDefault();this.DOM(this.$.uploadContainer).removeClass("drag-over");if(this.objectId){f.setObjectId.call(f,this.objectId)}else{f.setObjectId.call(f,"")}f.setExportReq.call(f,this.isExportReq);f.setAllowedPLMTypes.call(f,this.plmTypes);f.setAllowedFileTypes.call(f,this.fileTypes);f.handleDrop.call(f,h,a.bind(this))},onSearch:function(){this.$.spSearch.search()},onChange:function(h){if(this.objectId){f.setObjectId.call(f,this.objectId)}else{f.setObjectId.call(f,"")}f.setExportReq.call(f,this.isExportReq);f.setAllowedPLMTypes.call(f,this.plmTypes);f.setAllowedFileTypes.call(f,this.fileTypes);f.handleSPSearch.call(f,h.detail.getSelectedObjects(),a.bind(this))},onSpError:function(){var i=e.get("TRANSIENT_MODE_WARNING");var h=b;d.setNotificationManager(h);d.setFadeOutPolicy(0);var j={level:"warning",sticky:false,title:"",message:i};h.addNotif(j)},_setFileTypes:function(h){f.setAllowedFileTypes.call(f,h)},_setPLMTypes:function(h){f.setAllowedPLMTypes.call(f,h)},_setObjectId:function(h){if(h&&h.length>0){f.setObjectId.call(f,h)}else{f.setObjectId.call(f,"")}},_setExportReq:function(h){f.setExportReq.call(f,h)},_setHideUpload:function(h){if(h){this.DOM(this.$.inputDataset).addClass("input-hidden");this.DOM(this.$.inputReqDec).removeClass("input-hidden")}else{this.DOM(this.$.inputReqDec).addClass("input-hidden");this.DOM(this.$.inputDataset).removeClass("input-hidden")}},_flushDbxOnComplete:function(h){f.setFlushFlag.call(f,h)},behaviors:[window.DS.SMAProcSP.SPBase]})});