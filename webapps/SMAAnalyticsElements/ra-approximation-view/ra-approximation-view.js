require(["UWA/Class/Promise","i18n!DS/SMAAnalyticsNLS/assets/nls/SMAAnalyticsWidgetNLSfile","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/SMAAnalyticsWidget/dialogs/SMAAnalyticsHistoryDialog","DS/WAFData/WAFData","DS/SMAAnalyticsWidget/dialogs/SMAAnalyticsConfirmDialog"],function(d,f,e,a,b,c,l){var k=null,n="/resources/slmservices/advise/",p=function(){var s=arguments[0].approximation;b.showDialog(s.data.title,s.history,s.immersiveFrame)},i=function(){var s=arguments[0].approximation;return new d(function(w,v){var u={immersiveFrame:s.immersiveFrame,label:f.RA_APPROX_DEMOTE,header:f.ARE_YOU_SURE,};var t=event;l.showDialog(u).then(function(){var x={url:k+n+"demote",data:{objectid:t.target.id}};o(x).then(function(y){y=UWA.is(y,"string")?JSON.parse(y):y;if(y.status==="failed"){var z={message:f.APPROX_DEMOTE_FAILED,level:"error"};h(z);v()}else{s.data.state=y.current;w(y.current)}},function(y){v()})},function(){v()})})},j=function(){var s=arguments[0].approximation;return new d(function(w,v){var u={immersiveFrame:s.immersiveFrame,label:f.RA_APPROX_PROMOTE,header:f.ARE_YOU_SURE,};var t=event;l.showDialog(u).then(function(){var x={url:k+n+"promote",data:{objectid:t.target.id}};o(x).then(function(y){y=UWA.is(y,"string")?JSON.parse(y):y;if(y.status==="failed"){var z={message:f.APPROX_PROMOTE_FAILED,level:"error"};h(z);v()}else{s.data.state=y.current;w(y.current)}},function(y){v()})},function(){v()})})},r=function(){return new d(function(u,t){var s={url:k+"/resources/slmservices/token/CSRF"};q(s).then(function(v){u(v)})})},o=function(s){return new d(function(w,v){var u=s.url,t={method:"POST",allowCrossOriginRequest:true,headers:{SecurityContext:widget.getValue("collabspaces"),"Content-Type":"json"},data:JSON.stringify(s.data),onComplete:w,onFailure:v,onError:v};r().then(function(x){c.authenticatedRequest(u,t)})})},q=function(s){return new d(function(w,v){var u=s.url,t={method:"GET",cache:-1,headers:{SecurityContext:widget.getValue("collabspaces")},onComplete:w,onFailure:v,onError:v};c.authenticatedRequest(u,t)})},h=function(s){var u=s.message;var t=e;a.setNotificationManager(t);a.setFadeOutPolicy(0);var v={level:s.level,sticky:false,title:"",message:u};t.addNotif(v)},g=function(s){switch(s){case"Private":return"In Process";case"In Process":return"Complete";case"Complete":return"Released";case"Released":return"Obsolete"}},m=function(s){switch(s){case"In Process":return"Private";case"Complete":return"In Process";case"Released":return"Complete";case"Obsolete":return"Released"}};Polymer({is:"ra-approximation-view",properties:{title:{type:Object,value:{title:f.get("TITLE"),name:f.get("NAME"),revision:f.get("REVISION"),owner:f.get("OWNER"),author:f.get("AUTHOR"),description:f.get("DESCRIPTION"),collab:f.get("COLLAB_SPACE"),maturity:f.get("MATURITY"),originated:f.get("ORIGINATED"),modified:f.get("LAST_MOD"),demote:f.get("DEMOTE"),promote:f.get("PROMOTE")}},approximation:{type:Object,observer:"_approxChanged"}},ready:function(){var s=document.querySelector("#spDashboard");if(!UWA.is(s)){s=UWA.createElement("sp-dashboard")}k=s.getMcsUri()},onModifiedClick:function(s){s.stopPropagation();s.cancelBubble=true;p.call(s,this)},onDemoteClick:function(s){s.stopPropagation();s.cancelBubble=true;i.call(s,this).then(function(t){this.$.raApproxState.innerText=t}.bind(this))},onPromoteClick:function(s){s.stopPropagation();s.cancelBubble=true;j.call(s,this).then(function(t){this.$.raApproxState.innerText=t}.bind(this))},_approxChanged:function(s){console.log("Observer Change")},behaviors:[window.DS.SMAProcSP.SPBase]})});