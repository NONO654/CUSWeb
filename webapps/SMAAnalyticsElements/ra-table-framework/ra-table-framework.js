(function(){var a={behaviors:[SPBase],properties:{columnsetupComplete:{type:Boolean,value:false},rowsetupComplete:{type:Boolean,value:false},visibleColumns:{type:Array,notify:true,value:function(){return[]}},visibleRows:{type:Array,notify:true},fixedLeftColumns:{type:Array,notify:true,value:function(){return[]}},fixedRightColumns:{type:Array,notify:true,value:function(){return[]}},rowHierarchyFlat:{type:Array,value:function(){return[]}},visibleCustomRows:{type:Array,value:function(){return[]}},sizeData:{type:Object,value:function(){return{mainWidth:0,mainHeight:0,topHeight:0,rightWidth:0,bottomHeight:0,leftWidth:0,contentWidth:0,contentHeight:0,leftContentWidth:0,leftContentHeight:0,defaultColumnWidth:160,scrollBarWidth:0}}},rowHeights:{type:Object,value:function(){return{defaultHeight:31}}},scrollData:{type:Object,value:function(){return{top:0,right:0,bottom:0,left:0,farLeft:0}}},columnBoxData:{type:Object,value:function(){return{}},notify:true},rowBoxData:{type:Object,value:function(){return{}},notify:true},headerHeightChanged:{type:Boolean,value:false,notify:true,observer:"_headerHeightChanged"},columnCount:{type:Number,value:0},rowCount:{type:Number,value:0},columnOrder:{type:Array,value:function(){return[]}},leftColumnOrder:{type:Array,value:function(){return[]}},rightColumnOrder:{type:Array,value:function(){return[]}},rowOrder:{type:Array,value:function(){return[]}},regions:{type:String,value:"",notify:true},displayFunctions:{type:Object,value:function(){return{}}},customDisplayFunctions:{type:Object,value:function(){return{GROUP:{rowDisplay:function(f,e){var d=document.createDocumentFragment();if(typeof e!=="undefined"&&typeof e.name!=="undefined"){d.textContent=e.name}this.classList.add("ra-table-group");this.$.cellcontainer.appendChild(this._getExpander(this.rowData));var c=document.createElement("span");c.appendChild(d);d=c;var b=this.rowBoxData.groupdepth;if(typeof b!=="undefined"){this.style.paddingLeft=b+"em"}this.$.cellcontainer.appendChild(d);return d}}}}},dataAccessor:{type:Object,value:function(){return{}},notify:true},placeholderColumnId:{type:String,value:"___placeholder___",notify:true},placeholderIndex:{type:Number,notify:true},groupExpansionData:{type:Array,value:function(){return[]}},colResizeFlag:{type:Boolean,value:true,notify:true},expandFlag:{type:Boolean,value:true,notify:true,observer:"_groupExpansionChanged"},refreshCellBoxData:{type:Boolean,value:false,notify:true},groupStack:{type:Array,value:function(){return[]},notify:true},currentGroup:{type:Object,value:function(){return{}},notify:true},dataProgress:{type:Number,value:100,notify:true},loadingMessage:{type:String,value:"Loading",notify:true},lastUpdate:{type:Number,value:0},updateInterval:{type:Number,value:100},syncColumnWidths:{type:Boolean,value:false},minColumnWidth:{type:Number,value:110},minMainWidth:{type:Number,value:0}},observers:["_scrollDataChanged(scrollData.*)","_regionSizeChanged(sizeData.*)","_rightScrollFlag(sizeData.showVerticalScroll)","_leftScrollFlag(sizeData.showHorizontalScroll)","_dataFunctionChanged(dataAccessor)","_columnBoxDataChanged(columnBoxData.*)","_groupExpansionDataChanged(groupExpansionData.*)"],_dataFunctionChanged:function(){this._initializeTable()},_scrollDataChanged:function(){this.customStyle["--ra-table-offset"]=-this.scrollData.top+"px";this.updateStyles();this._loadCall()},_loadCall:function(){var b=Date.now();if(this.lastUpdate+this.updateInterval<b){this.lastUpdate=b;this.debounce("loadVisibleData",this._loadVisibleData)}else{this.debounce("waitForLoad",this._loadVisibleData,100)}},_regionSizeChanged:function(){this._resetSizing()},_rightScrollFlag:function(){},_leftScrollFlag:function(){},_columnBoxDataChanged:function(){},_groupExpansionDataChanged:function(){},_headerHeightChanged:function(){var b=0;var c=function(e){var g=e.id;g=typeof g==="undefined"?e:g;var f=this.columnBoxData[g];var d=f.headerHeight;if(b<d){b=d}};this.visibleColumns.forEach(c,this);this.fixedLeftColumns.forEach(c,this);this.fixedRightColumns.forEach(c,this);this.set("sizeData.topHeight",b)},_groupExpansionChanged:function(){var b=this;if(this.isDebouncerActive("mainHeightCalculation")){this.cancelDebouncer("mainHeightCalculation")}this.debounce("mainHeightCalculation",function(){b._updateRowBoxData(true);b._loadCall()},30)},ready:function(){this._initializeTable()},attached:function(){var f=this;this._addCustomColumns();this._addCustomRows();this.async(this._resetSizing,10);var d=this.querySelector('ra-table-region[region-id="top"] .ra-region-content');var b=this.querySelector('ra-table-region[region-id="top-left"] .ra-region-content');var e=this.querySelector('ra-table-region[region-id="top-right"] .ra-region-content');if(d!==null){this._setupColumnResize();this._setupColumnDragAndDrop()}else{if(b||e){this._setupColumnResize()}else{var c=new MutationObserver(function(g){[].some.call(g,function(h){if(this.setupComplete){return true}if(h.addedNodes.length>0){this.setupComplete=[].some.call(h.addedNodes,function(i){if(typeof i.getAttribute==="function"){var j=i.getAttribute("region-id");if(j==="top"){this._setupColumnResize();this._setupColumnDragAndDrop();c.disconnect();return true}else{if(j==="top-left"||j==="top-right"){this._setupColumnResize();return false}}}return false},this);if(this.setupComplete){return true}}return false},f)});c.observe(this,{childList:true,subtree:true})}}},_moveBetter:function(b){require(["UWA/Core"],function(c){this.moveBetter=c.Controls.Drag.Move.extend({placePlaceholder:function(){var z,u,s,n,q=-1,p,v,k,o,g=this.context.handles,r=this.context.limited,w=this.zone||this.root,y=this.target,t=this.context.root.getParent("ra-table-framework"),m=t.columnOrder;while(y&&y.parentNode!==w){y=y.parentNode}z=this.context.root.getOffsets.call(g);var e=this.context.root.getOffsets();z.x=z.x-e.x;o=r.left?-Infinity:r.right?Infinity:z.x+g.offsetWidth/2;for(u=0,s=m.length;u<s;u+=1){n=m[u];z=t.columnBoxData[n];if(z.left<=o){q=u}}var f=0;if(q!==undefined){n=m[q];z=t.columnBoxData[n];if(z&&z.left+z.width/2>o){f=q}else{f=q+1}}var h=f-1,x=f-2;p=m[f];v=m[h];k=m[x];if(y===g||!y||(k!==y&&p!==y)){if((p&&(p!==t.placeholderColumnId&&v!==t.placeholderColumnId))||(k&&(k!==t.placeholderColumnId&&v!==t.placeholderColumnId))||t.columnOrder[t.columnOrder.length-1]!==t.placeholderColumnId){if(p||k){var d=p||k;if(d!==t.placeholderColumnId){var j=p?f:x+1;if(t.isDebouncerActive("moveplaceholder")){t.cancelDebouncer("moveplaceholder")}t.debounce("moveplaceholder",function(){t._movePlaceholderColumn(j)},10)}}}}}});this.moveHandler=new this.moveBetter(b)}.bind(this))},_setupColumnDragAndDrop:function(){var b=this;b._moveBetter({container:b.querySelector('ra-table-region[region-id="top"] .ra-region-content'),delegate:"ra-table-column-header:not(#draghandle)",centerHandles:true,handles:function(c){c.draggedId=c.target.columnData.id;b.placeholderColumnId=c.draggedId;b.startIndex=b.columnOrder.indexOf(c.draggedId);b.draggedColumn=c.target.columnData;var d=b.columnOrder.indexOf(c.draggedId);b.dragHandle=c.root.getElement("#draghandle");b.dragHandle.style.display="inline-block";c.placeholder=b.dragHandle;return b.dragHandle},enter:function(d){d.placeholder=b.dragHandle;var c=b.columnOrder.indexOf(d.draggedId);b._movePlaceholderColumn(c);return b.dragHandle},stop:function(c){b.dragHandle.setStyles({left:null,top:null});b.dragHandle.style.display="none";b._insertIntoPlaceholderColumn(c.draggedId)}})},_setupColumnResize:function(){var c=this;var b="";[].forEach.call(this.parentNode.classList,function(d){b+="."+d});this.resizeColumnHandler=new UWA.Controls.Drag.Move({container:null,delegate:b+" .ra-resize-handle",handles:function(d){var e=d.target.getClosest(".ra-resize-handle");c.resizingColumnId=e.parentNode.columnData.id;return e},start:function(){if(document.activeElement&&typeof document.activeElement.blur==="function"){document.activeElement.blur()}},move:function(d){c.callColumnResizeFunc(d,false)},stop:function(d){c.cancelDebouncer("resizingcolumn");c.callColumnResizeFunc(d,true)}})},callColumnResizeFunc:function(c,b){var d=this;this.debounce("resizingcolumn",function(){d.resizeColumn(c,b)},5)},resizeColumn:function(d,c){var g=this,e=null,b=0;if(!this.columnBoxData){return}var e=this.columnBoxData[this.resizingColumnId];if(this.resizingColumnId!=="___ra_flex_left___"&&d&&d.currentDelta){var f=this._lastDelta?d.currentDelta.x-this._lastDelta:d.currentDelta.x;this._lastDelta=d.currentDelta.x;b=e.width+f;if(b<this.minColumnWidth){b=this.minColumnWidth}this._resizeColumn(this.resizingColumnId,b)}if(c){delete this.resizingColumnId;delete this._lastDelta;d.handles.style.left="";d.handles.style.top="";this._loadCall()}},_resizeColumn:function(f,e){var g=this,d=this.columnBoxData[f];if(typeof e!=="undefined"){d.width=e}var c=this.columnOrder.indexOf(f),b=this.columnOrder;if(c===-1){c=this.leftColumnOrder.indexOf(f);b=this.leftColumnOrder;if(c===-1){c=this.rightColumnOrder.indexOf(f);b=this.rightColumnOrder}}this._adjustColumnRange(c,b.length-1,b,true)},_setPlaceholderColumn:function(b){this.placeholderColumnId=this.columnOrder[b]},_movePlaceholderColumn:function(c){var f=this.columnOrder.indexOf(this.placeholderColumnId);var b=f;var d=c;this.columnOrder.splice(f,1);this.columnOrder.splice(c,0,this.placeholderColumnId);this.set("placeholderIndex",d);var e=this;this._adjustColumnRange(b,d,this.columnOrder,true);this._loadCall()},setColumnOrder:function(b){if(b instanceof Array){this.set("columnOrder",b);this._adjustColumnRange(0,this.columnOrder.length,this.columnOrder,true);this._updateColumnBoxData(function(){this._loadCall()}.bind(this))}},setRowHierarchy:function(b){if(rowIDObject instanceof Object){var c=Object.keys(rowIDObject)}},_insertIntoPlaceholderColumn:function(b){var c=this;if(this.placeholderIndex>-1&&this.columnOrder[this.placeholderIndex]===this.placeholderColumnId){this.set("placeholderIndex",-1);this._updateColumnBoxData(function(){c._loadCall()})}},_resizeAllMainColumns:function(b,d){var c={right:0,rightWithPlaceHolder:b};this.columnOrder.forEach(function(f){if(typeof f!=="undefined"){var e=this._getColumnBoxData(f);c=this.columnBoxData[f]={left:c.right,width:b,right:c.right+b,leftWithPlaceHolder:c.rightWithPlaceHolder,rightWithPlaceHolder:c.rightWithPlaceHolder+b,headerHeight:e.headerHeight}}},this);if(typeof d==="function"){d()}},_adjustColumnRange:function(s,q,h,r){var d=s,k=q;if(s>q){d=q;k=s}var l;if(d>0){l=this._getColumnBoxData(h[d-1])}else{l={right:0,rightWithPlaceHolder:160}}for(var m=d;m<=k;m++){var c=h[m];if(typeof c!=="undefined"){var j=this._getColumnBoxData(c);var b=l.right,f=l.rightWithPlaceHolder;if(typeof j.isHidden!=="boolean"||!j.isHidden){b+=j.width;f+=j.width}l=this.columnBoxData[c]={left:l.right,width:j.width,right:b,leftWithPlaceHolder:l.rightWithPlaceHolder,rightWithPlaceHolder:f,headerHeight:j.headerHeight,isHidden:j.isHidden}}}if(h===this.columnOrder){var g=this._getColumnBoxData(h[h.length-1]);this.set("sizeData.contentWidth",g.right);this.set("colResizeFlag",!this.colResizeFlag)}else{if(h===this.leftColumnOrder){var p=this.sizeData.leftWidth;var e=l.right-p;var o=this.sizeData.mainWidth-e;var n=o-this.minMainWidth;if(n<0){this.sizeData.mainWidth=this.minMainWidth;this.sizeData.leftWidth=l.right+n}else{this.sizeData.mainWidth=o;this.sizeData.leftWidth=l.right}this.set("sizeData.leftContentWidth",l.right);if(typeof r==="boolean"&&r){this.set("sizeData.mainWidth",this.sizeData.mainWidth);this.set("sizeData.leftWidth",this.sizeData.leftWidth);this.set("colResizeFlag",!this.colResizeFlag)}}else{if(h===this.rightColumnOrder){}}}},_resetSizing:function(){var d=this.sizeData;if(!this.scrollWidthSet){this.scrollWidthSet=this._setScrollBarWidth()}this.customStyle["--ra-table-leftbar-width"]=d.leftWidth+"px";this.customStyle["--ra-table-rightbar-width"]=d.rightWidth+"px";this.customStyle["--ra-table-rightbar-width-adj"]=d.rightWidth-d.scrollBarWidth+"px";this.customStyle["--ra-table-header-height"]=d.topHeight+"px";this.customStyle["--ra-table-footer-height"]=d.bottomHeight+"px";this.customStyle["--ra-table-footer-height-adj"]=d.bottomHeight-d.scrollBarWidth+"px";this.notifyPath("sizeData.contentWidth",d.contentWidth);this.notifyPath("sizeData.contentHeight",d.contentHeight);var c=this.clientWidth-d.leftWidth-d.rightWidth;if(c>=0){this.set("sizeData.mainWidth",c)}var b=this.clientHeight-d.topHeight-d.bottomHeight;if(b>=0){this.set("sizeData.mainHeight",b)}this.customStyle["--ra-table-main-width"]=c+"px";this.customStyle["--ra-table-main-height"]=b+"px";this.updateStyles();this._loadCall()},_getColumnBoxData:function(b){return this.columnBoxData[b]},_getSizeData:function(){return this.sizeData},_getRowBoxData:function(b){return this.rowBoxData[b]},_initializeTable:function(){var b=this;this.visibleColumns=[];this.visibleRows=[];this.set("dataProgress",0);this.set("loadingMessage","Initializing Table");this.debounce("initialize",function(){if(typeof b.dataAccessor.getData==="function"){b.dataAccessor.getData({},function(c){b._setupDataTableDisplayProperties.call(b,c)})}},10)},refreshRowData:function(){this.visibleRows=[];this.debounce("initialize",function(){if(typeof this.dataAccessor.getData==="function"){this.dataAccessor.getData({},function(b){this._resetRowDisplayProperties.call(this,b)}.bind(this))}}.bind(this),10)},_setupDataTableDisplayProperties:function(b){if(typeof b.metaData!=="undefined"){this.totalRowsColumns=b.metaData.numRows+b.metaData.numAlternatives;this.totalProcessed=0;this._prepColumnsForDisplay(b.columnData);this._prepRowHierarchyForDisplay(b.rowHierarchy)}},_resetRowDisplayProperties:function(b){if(typeof b.metaData!=="undefined"){this.totalRowsColumns=b.metaData.numRows+b.metaData.numAlternatives;this.totalProcessed=0;this._prepRowHierarchyForDisplay(b.rowHierarchy)}},_prepColumnsForDisplay:function(c){var e=this.sizeData.defaultColumnWidth;var b=0;this.columnOrder=[];this.set("loadingMessage","Preparing Column Display");c.forEach(function(h,g){var f=e*g;b=f+e;this.columnBoxData[h.id]={left:f,width:e,right:f+e,leftWithPlaceHolder:f+e,rightWithPlaceHolder:f+e+e,headerHeight:0};this.columnCount+=1;this.columnOrder.push(h.id);this.totalProcessed+=1;this.set("dataProgress",this.totalProcessed/this.totalRowsColumns)},this);this.set("sizeData.contentWidth",b);this.columnsetupComplete=true;var d=this;d._updateColumnBoxData(function(){d._loadCall()})},_prepRowHierarchyForDisplay:function(c){var d=0;var b=0;this.rowOrder=[];this.set("loadingMessage","Preparing Row Display");c.forEach(function(e){b+=this._prepRowForDisplay(e,b,d)},this);this.set("expandFlag",!this.expandFlag);this.set("loadingMessage","Initialization Complete");this.set("dataProgress",1);this.set("sizeData.contentHeight",b);this.rowsetupComplete=true;this._loadCall()},_prepRowForDisplay:function(k,g,e){var j=this.rowHeights.defaultHeight;if(typeof this.rowHeights[k.type]!=="undefined"){j=this.rowHeights[k.type]}var c=0;var b=g;var f=b+j;var d=j;this.rowOrder.push(k.id);if(k.type==="GROUP"){if(k.children){k.children.forEach(function(l){c+=this._prepRowForDisplay(l,f+c,e+1)},this)}}else{this.totalProcessed+=1;this.set("dataProgress",this.totalProcessed/this.totalRowsColumns)}var i=d+c;var h=true;if(typeof this._groupExpansionFunction==="function"&&k.type==="GROUP"){h=this._groupExpansionFunction(k)}this.rowBoxData[k.id]={top:b,fixedTop:b,bottom:f,height:d,groupHeight:i,groupdepth:e,expanded:k.type==="GROUP"?h:undefined};this.rowCount+=1;return i},_updateRowBoxData:function(d){var c=0,b=-1;if(!this.rowOrder){return}this.rowOrder.forEach(function(g,h){var e=this.rowBoxData[g];if(b>-1&&e.groupdepth<=b){b=-1}if(b<0){if(typeof e.expanded==="boolean"&&!e.expanded){b=e.groupdepth}e.hidden=false}else{e.hidden=true}if(!e.hidden&&(!e.rendered||d)){e.rendered=true;e.top=c;e.fixedTop=c;e.bottom=c+e.height;e.isEven=h%2===0;c=e.bottom;var f="row_"+g;if(this.$[f]){this.$[f].notifyPath("rowBoxData")}}},this);this.set("sizeData.contentHeight",c)},_findLeftMostColumn:function(){var d=this.fixedLeftColumns[0];if(typeof d==="undefined"){d=this.columnOrder[0]}if(typeof d==="undefined"){d=this.fixedLeftColumns[0]}if(typeof d!=="undefined"){var c=d;if(typeof d==="object"){c=d.id}var b=this.columnBoxData[c];if(b){return b}}return null},_updateColumnBoxData:function(d){var b=this._findLeftMostColumn();var c=false;if(this.leftMostColumnBox){this.leftMostColumnBox.isRowHeader=false}if(b){b.isRowHeader=true;this.leftMostColumnBox=b;c=true}if(c&&typeof d==="function"){d()}},_addCustomRow:function(d){var e=d.getAttribute("row-id"),b=d.displayFunctions,c=d.getAttribute("row-height");if(typeof e!=="undefined"){if(typeof b!=="undefined"&&Object.keys(b).length>0){this.customDisplayFunctions[e]=b}if(c!==null&&c!==""){c=parseInt(c,0);this.rowHeights[e]=c}}},_addCustomColumn:function(d){var b=d.getAttribute("column-id"),c=d.getAttribute("column-name"),g=d.getAttribute("column-width"),j=d.region||"left",h=d.values,e=d.displayFunctions,i={width:g?parseInt(g,10):this.sizeData.defaultColumnWidth,left:0};if(typeof b!=="undefined"&&typeof e!=="undefined"){if(typeof this.columnBoxData[b]!=="undefined"){console.error("Error Adding Column to table - Column already exists",b,this.columnBoxData[b]);return false}var f={id:b,name:c,values:h};if(j==="left"){if(this.fixedLeftColumns.length>=2){this.leftColumnOrder.splice(this.leftColumnOrder.length-1,0,b);this.fixedLeftColumns.splice(this.fixedLeftColumns.length-1,0,f)}else{this.leftColumnOrder.push(b);this.fixedLeftColumns.push(f);this.leftColumnOrder.push("___ra_flex_left___");this.fixedLeftColumns.push({id:"___ra_flex_left___",name:""});this.columnBoxData.___ra_flex_left___={width:0,region:"left"}}}else{if(j==="right"){this.fixedRightColumns.push(f);if(this.fixedRightColumns.length>=2){this.rightColumnOrder.splice(this.rightColumnOrder.length-2,0,b);this.fixedRightColumns.splice(this.fixedRightColumns.length-2,0,f)}else{this.rightColumnOrder.push(b);this.fixedRightColumns.push(f);this.rightColumnOrder.push("___ra_flex_right___");this.fixedRightColumns.push({id:"___ra_flex_right___",name:""});this.columnBoxData.___ra_flex_right___={width:0,region:"right"}}}}i.region=j;if(d.rowHeader){f.rowHeader=true}this.customDisplayFunctions[b]=e;this.columnBoxData[b]=i;if(j==="left"){this.sizeData.leftWidth+=i.width||0}else{if(j==="right"){this.sizeData.rightWidth+=i.width||0}}}},_removeCustomColumn:function(e){if(typeof e!=="undefined"&&typeof this.columnBoxData[e]!=="undefined"){var b=this.columnBoxData[e];var f=b.region,c=[],d=[];if(f==="left"){c=this.leftColumnOrder;d=this.fixedLeftColumns}else{if(f==="right"){c=this.rightColumnOrder;d=this.fixedRightColumns}}d.some(function(h,g,j){if(h.id!==e){return false}j.splice(g,1);return true},this);if(f==="left"){this.sizeData.leftWidth-=b.width||0}else{if(f==="right"){this.sizeData.rightWidth-=b.width||0}}delete this.columnBoxData[e]}},externAddCustomColumn:function(b){this._addCustomColumn(b);if(b.region==="right"&&this.rightColumnOrder.length>0){this._adjustColumnRange(0,this.rightColumnOrder.length-1,this.rightColumnOrder,true)}else{this._adjustColumnRange(0,this.leftColumnOrder.length-1,this.leftColumnOrder,true)}this._resetCustomColumnsData();this.notifyPath("sizeData",this.sizeData);this._resetSizing();var c=this;this._updateColumnBoxData(function(){c._loadCall()})},externRemoveCustomColumn:function(b){this._removeCustomColumn(b);this._resetCustomColumnsData();this.notifyPath("sizeData",this.sizeData);this._resetSizing();var c=this;this._updateColumnBoxData(function(){c._loadCall()})},_addCustomColumns:function(b){var c=this;var b=Polymer.dom(this).querySelectorAll("ra-table-column");b.forEach(this._addCustomColumn,this);if(this.leftColumnOrder.length>0){this._adjustColumnRange(0,this.leftColumnOrder.length-1,this.leftColumnOrder)}if(this.rightColumnOrder.length>0){this._adjustColumnRange(0,this.rightColumnOrder.length-1,this.rightColumnOrder)}this._updateColumnBoxData()},_addCustomRows:function(){var b=Polymer.dom(this).querySelectorAll("ra-table-row");b.forEach(this._addCustomRow,this)},_getDisplayFunctions:function(b){var c=this.customDisplayFunctions[b];if(typeof c==="undefined"){return this.displayFunctions}else{return c}},_resetCustomColumnsData:function(){this.fixedLeftColumns=this.fixedLeftColumns.slice();this.fixedRightColumns=this.fixedRightColumns.slice()},_placeholderDisplayFunction:function(){var b=document.createDocumentFragment();b.textContent="placeholder ...";return b},_loadVisibleData:function(){if(!this.rowsetupComplete||!this.columnsetupComplete){return}var j=this.scrollData;var d=this.sizeData;var n=d.mainWidth+j.left;var l=d.mainHeight+j.top;var s=[];var r=[];var q=-1;var e=-1;for(var f=0,b=0,p=this.columnCount,m=this.columnCount>0,k=0,h=this.rowCount,i=this.rowCount>0;m||i;f++){var o;if(m){var c=this.columnOrder[f];o=this.columnBoxData[c];if(typeof o!=="undefined"){if(o.right>j.left&&o.left<n){s.push(c)}b=o.right}m=b<n&&f+1<p}if(i){var g=this.rowOrder[f];o=this.rowBoxData[g];if(typeof o!=="undefined"){if(typeof o.hidden!=="boolean"||!o.hidden){if(o.bottom>j.top&&o.top<l){if(q===-1){q=f}e=f;r.push(g)}k=o.bottom}}i=k<l&&f+1<h}}this._getDataRange(r,s,[q,e])},_getDataRange:function(b,e,d){var f=this;var c=Date.now();this.lastDataUpdate=this.lastDataUpdate||-1000;if(this.lastDataUpdate+this.updateInterval<c&&!this.isDebouncerActive("dataRequest")){this.lastDataUpdate=c;this.debounce("dataRequest",function(){if(typeof f.dataAccessor.getData==="function"){f.dataAccessor.getData({rows:b,columns:e},function(g){f._displayDataRange.call(f,g,b,d)})}})}else{this.debounce("waitForDataRequest",function(){if(typeof f.dataAccessor.getData==="function"){f.dataAccessor.getData({rows:b,columns:e},function(g){f._displayDataRange.call(f,g,b,d)})}},100)}},_displayDataRange:function(f,i,j){this.rowHierarchyFlat=[];this.visibleCustomRows=[];var c=f.rowHierarchy;c.forEach(this._flattenRowHierarchy,this);var d=[];var k=f.columnData;var b=[],h=-1,m=false;if(this.rowHierarchyFlat.length===1){var n=this.rowHierarchyFlat[0];if(n.type==="GROUP"){this.rowHierarchyFlat.splice(0,1);b.push(n)}}else{this.rowHierarchyFlat.some(function(q,r){var o=this.rowBoxData[q.id]?this.rowBoxData[q.id].groupDepth:0;if(q.type!=="GROUP"||h===o){if(b.length>0){var p=b.pop();this.set("currentGroup",p)}else{this.set("currentGroup",null)}this.rowHierarchyFlat.splice(0,r);return true}else{h=o;b.push(q)}},this)}var l=this.rowHierarchyFlat.slice(),e=0;this.rowHierarchyFlat.forEach(function(o,p){if(typeof this.customDisplayFunctions[o.type]!=="undefined"){l.splice(p-e,1);e+=1;d.push(o)}},this);this.rowHierarchyFlat=l;this.set("groupStack",b);var g=this.querySelector("ra-table-top-row");if(g!==null){if(this.groupStack.length===0&&(this.currentGroup===null||Object.keys(this.currentGroup).length===0)){g.classList.add("hidden")}else{g.classList.remove("hidden")}}this.visibleColumns=f.columnData;this.visibleRows=this.rowHierarchyFlat;this.visibleCustomRows=d;this._resetCustomColumnsData();this.set("refreshCellBoxData",!this.refreshCellBoxData)},_getCurrentGroupBox:function(c){var b={};if(c&&typeof c.id!=="undefined"){b=this.rowBoxData[c.id]}return b},_flattenRowHierarchy:function(c){var d={};for(var b in c){if(c.hasOwnProperty(b)&&b!=="children"){d[b]=c[b]}}this.rowHierarchyFlat.push(d);if(c.type==="GROUP"&&c.children){c.children.forEach(this._flattenRowHierarchy,this)}},_leftRegionCheck:function(b){return(b.trim()===""||b.split(" ").indexOf("left")>-1)},_middleRegionCheck:function(b){return(b.trim()===""||b.split(" ").indexOf("middle")>-1)},_rightRegionCheck:function(b){return(b.trim()===""||b.split(" ").indexOf("right")>-1)},_topLeftRegionCheck:function(b){return(b.trim()===""||(this._leftRegionCheck(b)&&b.split(" ").indexOf("top")>-1))},_topRegionCheck:function(b){return(b.trim()===""||(this._middleRegionCheck(b)&&b.split(" ").indexOf("top")>-1))},_topRightRegionCheck:function(b){return(b.trim()===""||(this._rightRegionCheck(b)&&b.split(" ").indexOf("top")>-1))},_bottomLeftRegionCheck:function(b){return(b.trim()===""||(this._leftRegionCheck(b)&&b.split(" ").indexOf("bottom")>-1))},_bottomRegionCheck:function(b){return(b.trim()===""||(this._middleRegionCheck(b)&&b.split(" ").indexOf("bottom")>-1))},_bottomRightRegionCheck:function(b){return(b.trim()===""||(this._rightRegionCheck(b)&&b.split(" ").indexOf("bottom")>-1))},_getColumnIndex:function(b){return this.columnOrder.indexOf(b)},_setScrollBarWidth:function(){var e=this.querySelector('ra-table-region[region-id="left"]'),d=this.querySelector('ra-table-region[region-id="main"]'),g=this.querySelector('ra-table-region[region-id="right"]'),f=0,b=0,c=0;if(d!==null&&d.clientWidth>0){b=d.scrollWidth-d.clientWidth;if(b>0){this.sizeData.scrollBarWidth=b;this.customStyle["--ra-table-scrollbar-width"]=b+"px";return true}}if(e!==null&&e.clientWidth>0){f=e.scrollWidth-e.clientWidth;if(f>0){this.sizeData.scrollBarWidth=f;this.customStyle["--ra-table-scrollbar-width"]=f+"px";return true}}if(g!==null&&g.clientWidth>0){c=g.scrollWidth-g.clientWidth;if(c>0){this.sizeData.scrollBarWidth=c;this.customStyle["--ra-table-scrollbar-width"]=c+"px";return true}}return false},resetHeaders:function(){var b=this.querySelectorAll("ra-table-column-header");[].forEach.call(b,function(c){c._insertHTML()},this)},getColumnIdAtIndex:function(b){if(b>-1&&b<this.columnOrder.length){return this.columnOrder[b]}return null},setDefaultGroupExpansion:function(b){if(typeof b==="function"){this._groupExpansionFunction=b}},hideColumn:function(c){var b=this.columnBoxData[c];if(b){b.isHidden=true}this._resizeColumn(c)},showColumn:function(c){var b=this.columnBoxData[c];if(b){b.isHidden=false}this._resizeColumn(c)}};window.Polymer(a)})();