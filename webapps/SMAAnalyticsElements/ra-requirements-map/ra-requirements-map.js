require(["DS/UIKIT/Input/Select"],function(b){var a;a={is:"ra-requirements-map",behaviors:[SPBase],properties:{requirementsData:{type:Object,notify:true,value:function(){return{}},observer:"_requirementsChanged"},tableData:{type:Object,notify:true,value:function(){return{}},observer:"_tabledataChanged"},commonDisplayFunctions:{type:Object,value:function(){return{tableRef:this}},notify:true},active:{type:Boolean,value:false},parameterList:{type:Array,value:function(){return[]},notify:true}},listeners:{scroll:"_onScroll"},ready:function(){},attached:function(){var c=this.children[0];c._resetSizing()},resize:function(){var c=this.children[0];c.resetHeaders();c._resetSizing()},displayRowHeaderTitle:function(d){var c=document.createDocumentFragment();var e=document.createElement("span");e.textContent="Requirements";c.appendChild(e);return c},displayRowHeader:function(c,e){var d=document.createDocumentFragment();d.textContent=e.name;return d},_getRowHeaderFunctions:function(){return{headerDisplay:this.displayRowHeaderTitle,rowDisplay:this.displayRowHeader,tableRef:this}},displayThresholdHeader:function(d){var c=document.createDocumentFragment();var e=document.createElement("span");e.textContent="Thresholds";c.appendChild(e);return c},displayThresholdRow:function(d,h){var f=document.createDocumentFragment();var c=typeof h.min!=="undefined"&&h.min.length>0,e=typeof h.max!=="undefined"&&h.max.length>0;if(c||e){var g=document.createElement("div");var i;if(c){i=document.createElement("span");i.textContent="> "+h.min;g.appendChild(i)}if(c&&e){i=document.createElement("span");i.textContent=" and ";g.appendChild(i)}if(e){i=document.createElement("span");i.textContent="< "+h.max;g.appendChild(i)}f.appendChild(g)}return f},_getThresholdFunctions:function(){return{headerDisplay:this.displayThresholdHeader,rowDisplay:this.displayThresholdRow,tableRef:this}},displayObjectiveHeader:function(d){var c=document.createDocumentFragment();var e=document.createElement("span");e.textContent="Objectives";c.appendChild(e);return c},displayObjectiveRow:function(c,f){var d=document.createDocumentFragment();if(f.objective){var e=document.createElement("div");if(f.objective){var g=document.createElement("span");g.classList.add("ra-objective-label");g.textContent=f.objective;e.appendChild(g)}d.appendChild(e)}return d},_getObjectiveFunctions:function(){return{headerDisplay:this.displayObjectiveHeader,rowDisplay:this.displayObjectiveRow,tableRef:this}},displayParamHeader:function(d){var c=document.createDocumentFragment();var e=document.createElement("span");e.textContent="Parameters";c.appendChild(e);return c},displayParamRow:function(d,f){var e=document.createDocumentFragment();if(f.type!=="GROUP"){var g=this;if(this.tableRef&&this.tableRef.parameterList&&this.tableRef.parameterList.length>0){var c=document.createElement("select");c.appendChild(document.createElement("option"));this.tableRef.parameterList.forEach(function(i){var h=document.createElement("option");h.value=i.id;h.textContent=i.name;if(f.id===i.plmParameterId){h.selected="selected"}c.appendChild(h)});e.appendChild(c);c.onchange=function(){if(worker){worker.evaluate("mergeRequirementParameterById",[{requirement:f,id:this.options[this.selectedIndex].value}],function(){if(widget){widget.dispatchEvent("onRequirementsUpdate")}})}}}}return e},_getParameterFunctions:function(){return{headerDisplay:this.displayParamHeader,rowDisplay:this.displayParamRow,tableRef:this}},refreshTableData:function(c){this._refreshRequirementsData(c)},_tabledataChanged:function(){},_requirementsChanged:function(){this.set("active",true);this.set("tableData",{getData:this._getRequirementsData,timestamp:Date.now(),reqTable:this})},_refreshRequirementsData:function(c){var e=this;var d={rowHierarchy:[],columnData:[],metaData:{numRows:0,numAlternatives:0}};window.WidgetProxy.getConnectedRequirementsList(this.modelID).then(function(h){var g=h.requirementsList||h["analytics-requirement"];if(typeof g!=="undefined"){var f="";g.forEach(function(j){var i=j.id||"";if(f.length>0){f+=";"}if(i.length>0){f+=i}});window.WidgetProxy.getParametersList(f).done(function(i){e.requirements=i;var j=i.requirementsList||i["analytics-requirement"]||[];j.forEach(function(l){var m={};m.type="GROUP";m.id=l.id;m.name=l.name;m.title=l.title;m.children=[];var k=typeof l.parametersList!=="undefined"?l.parametersList.parameterList||l.parametersList["analytics-parameter"]||[]:[];d.metaData.numRows+=k.length;k.forEach(function(o){var n=o;m.children.push(n)});d.rowHierarchy.push(m)});e.set("requirementsData",d);if(typeof c==="function"){c()}})}},function(f){console.error("Problem updating requirements on Compare Page",f)})},_getRequirementsData:function(c,h){if(this.reqTable&&this.reqTable.active&&this.reqTable.requirementsData&&typeof h==="function"){var f=c.rows,d;var g={metaData:{numRows:this.reqTable.requirementsData.numRows,numAlternatives:0},columnData:this.reqTable.requirementsData.columnData||[]};var e=function(i){var j=[];i.forEach(function(n,l){var o=d.indexOf(n.id);var k=false;var m={id:n.id,name:n.title,type:n.type};if(n.type==="GROUP"){m.children=e(n.children);k=m.children.length>0}else{m.min=n.min;m.max=n.max;m.objective=n.objective;temprowparameterValue=n.parameterValue;m.physicalId=n.physicalId;m.priority=n.priority;m.unit=n.unit}if(o>-1||k){o=d.indexOf(n.id);j.push(m)}if(o>-1){d.splice(o,1)}});return j};if(typeof f==="undefined"){g.rowHierarchy=this.reqTable.requirementsData.rowHierarchy||[]}else{d=f.slice();g.rowHierarchy=e(this.reqTable.requirementsData.rowHierarchy||[])}h(g)}}};window.Polymer(a)});