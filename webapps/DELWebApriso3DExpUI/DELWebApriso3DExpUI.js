define("DS/DELWebApriso3DExpUI/Events",["UWA/Class/Model","UWA/Core"],function(b,a){return b.extend({defaults:{flexPartLoad:function(){}},validate:function(c,d){if(!a.is(c)){return"values undefined"}if(!a.is(c.flexPartLoad,"function")){return"expecting a function for flexPartLoad"}}})});define("DS/DELWebApriso3DExpUI/FlexPartRenderer",["UWA/Class","UWA/Core"],function(a,b){return a.extend({_flexPart:null,init:function(c){this._flexPart=c},render:function(){var d=new b.Element("div",{"class":"card card-thumbnail-selectable",data:{alias:this._flexPart.get("alias")}});var e=new b.Element("img",{"class":"card-img",src:this._flexPart.get("icon")});var c=new b.Element("div",{"class":"card-block"});c.appendChild(new b.Element("h4",{"class":"card-title",text:this._flexPart.get("name")}));c.appendChild(new b.Element("h5",{"class":"card-subtitle",text:this._flexPart.get("description")}));d.appendChild(e);d.appendChild(c);return d}})});define("DS/DELWebApriso3DExpUI/Content",["UWA/Class/Model","UWA/Core"],function(b,a){return b.extend({defaults:{alias:null,server:null,hideSfmHeader:false},validate:function(c,d){if(!a.is(c.server,"string")||c.server===""){return"server cannot be empty"}if(!a.is(c.hideSfmHeader,"boolean")){return"hide sfm header must be true or false"}}})});define("DS/DELWebApriso3DExpUI/ContentRenderer",["UWA/Class","UWA/Core","UWA/String","DS/UIKIT/Mask","i18n!DS/DELWebApriso3DExpUI/assets/nls/ApplicationStrings"],function(a,e,c,d,b){return a.extend({_content:null,_serverOriginTemplate:"https://{0}",_serverUrlTemplate:"https://{0}/Apriso/Portal/UIService.aspx?Alias={1}",_maskTimeout:5000,_container:null,_frame:null,_postMessage:"hideSfmHeader",_responseMessage:"doneHideSfmHeader",init:function(f){this._content=f},render:function(){return this.renderValidation()?this.createFrame():this.createPlaceholder()},renderValidation:function(){return e.is(this._content)&&e.is(this._content.get("server"),"string")&&e.is(this._content.get("alias"),"string")&&this._content.get("server").trim().length>0&&this._content.get("alias").trim().length>0},createFrame:function(){this._container=new e.Element("div",{"class":"apr-content-frame-container"});d.mask(this._container);this._frame=new e.Element("iframe",{"class":"apr-content-frame",src:c.format(this._serverUrlTemplate,this._content.get("server"),this._content.get("alias"))});this._frame.addEvent("load",this.loadFrame.bind(this,this._container,this._frame));this._container.appendChild(this._frame);return this._container},loadFrame:function(f,g){var h=this;if(h._content.get("hideSfmHeader")){f.getWindow().addEventListener("message",h.messageResponseHandler.bind(h));if(e.is(g.contentWindow)===true){g.contentWindow.postMessage(h._postMessage,"*")}setTimeout(function(){d.unmask(f)},h._maskTimeout)}else{d.unmask(f)}},createPlaceholder:function(){return new e.Element("div",{"class":"apr-content-placeholder",text:b.get("noContent")})},messageResponseHandler:function(f){if(f.origin!==c.format(this._serverOriginTemplate,this._content.get("server"))){return}if(f.data!==this._responseMessage){return}d.unmask(this._container);this._container.getWindow().removeEventListener("message",arguments.callee)}})});define("DS/DELWebApriso3DExpUI/FlexPart",["UWA/Class/Model","UWA/Core"],function(b,a){return b.extend({defaults:{alias:null,name:null,description:null,icon:null},validate:function(c,d){if(!a.is(c.alias,"string")||c.alias===""){return"alias cannot be empty"}}})});define("DS/DELWebApriso3DExpUI/Employee",["UWA/Class","UWA/Core","UWA/Promise","DS/WAFData/WAFData","UWA/String","DS/PlatformAPI/PlatformAPI"],function(c,f,e,a,d,b){return c.extend({isValid:false,defaultFlexPartAlias:null,_serverEmployeeTemplate:"https://{0}/WebApi/3/FlexParts/GetEmployeeInformation",_server:null,init:function(g){this._server=g},get:function(){var h=this,g=h.createUri();return new e(function(j,i){a.proxifiedRequest(g,h.createRequest.call(h,j,i))})},createUri:function(){return d.format(this._serverEmployeeTemplate,this._server)},createRequest:function(i,h){var j=this,g=b.getUser();return{type:"json",header:{Accept:"application/json","Content-Type":"application/json"},data:{externalLogin:f.is(g)===true?g.login:""},onComplete:function(k,l){return j.parse.call(j,k)===true?i():h()},onFailure:h,onTimeout:h}},parse:function(g){if(!f.is(g,"object")){return false}if(!f.is(g.IsSuccess,"boolean")||g.IsSuccess===false){return false}this.isValid=g.IsValid.toString().trim().toLowerCase()==="true";this.defaultFlexPartAlias=g.DefaultFlexPartAlias.trim();return true}})});define("DS/DELWebApriso3DExpUI/FlexPartCollection",["UWA/Class/Collection","DS/DELWebApriso3DExpUI/FlexPart","UWA/Core","DS/WAFData/WAFData","DS/PlatformAPI/PlatformAPI","UWA/String"],function(c,e,f,a,b,d){return c.extend({model:e,comparator:"name",_serverFlexPartApiTemplate:"https://{0}/WebApi/{1}/FlexParts/GetFlexParts",_serverImageRepositoryUrlTemplate:"https://{0}/Apriso/Portal/Images/",_server:null,_apiVersion:"3",setup:function(h,g){if(f.is(g.server,"string")){this._server=g.server.trim()}if(f.is(g.apiVersion)){this._apiVersion=g.apiVersion.toString().trim()}},sync:function(j,i,g){if(j!=="read"){return}var h=a.proxifiedRequest(this.createUri(),this.createRequest(g));return{cancel:h.cancel}},createUri:function(){return d.format(this._serverFlexPartApiTemplate,this._server,this._apiVersion)},createRequest:function(i){var h=b.getUser(),g=f.is(h)===true?h.login:"";return{type:"json",header:{Accept:"application/json","Content-Type":"application/json"},data:{employeeNo:g,externalLogin:g},onComplete:i.onComplete,onFailure:i.onFailure,onTimeout:i.onTimeout}},parse:function(g,i){if(!UWA.is(g,"object")){return[]}if(!UWA.is(g.IsSuccess,"boolean")||g.IsSuccess===false){return[]}if(!UWA.is(g.Values,"array")){return[]}var j=d.format(this._serverImageRepositoryUrlTemplate,this._server);var h=this.model;return g.Values.map(function(l){var k=l.ImageUrl.startsWith("http")?l.ImageUrl:j+l.ImageUrl;return new h({alias:l.Alias,name:l.Name,description:l.Description,icon:k})})}})});define("DS/DELWebApriso3DExpUI/FlexPartView",["UWA/Class/View","DS/DELWebApriso3DExpUI/FlexPartRenderer","UWA/Core","DS/UIKIT/Scroller"],function(d,b,c,a){return d.extend({_scroller:null,_content:null,_scrollerContent:null,setup:function(e){this.listenTo(this.model,{onReset:this.onReset})},render:function(){if(this._scroller===null){this.buildViewComponents()}var e=this._scrollerContent;this.model.forEach(function(f){var g=new b(f);e.appendChild(g.render())});return this},buildViewComponents:function(){this.container.empty(true);this._scroller=new c.Element("div",{"class":"apr-flexpart-scroller"});this._content=new c.Element("div",{"class":"apr-flexpart-content"});this.container.appendChild(this._scroller);this.container.appendChild(this._content);new a({element:this._content}).inject(this._scroller);this._scrollerContent=this._content.getElement(".scroller-content")},onReset:function(){if(this._scrollerContent!==null){this._scrollerContent.empty(true)}this.render()},destroy:function(){if(c.is(this._childView)){this.stopListening(this._childView);this._childView.destroy();this._childView=null}this.stopListening(this.model);this.model=null;this._parent()},setActive:function(e){var g=this._scrollerContent.getChildren();g.forEach(function(h){h.removeClassName("card-thumbnail-selected")});var f=g.filter(function(h){return h.getData("alias")===e});if(!c.is(f,"array")||f.length===0){return}f[0].addClassName("card-thumbnail-selected")}})});define("DS/DELWebApriso3DExpUI/Preferences",["UWA/Class","UWA/Core","i18n!DS/DELWebApriso3DExpUI/assets/nls/ApplicationStrings","UWA/Promise","DS/WAFData/WAFData","UWA/String","DS/PlatformAPI/PlatformAPI","DS/DELWebApriso3DExpUI/FlexPartCollection"],function(d,h,g,f,b,e,c,a){return d.extend({server:null,defaultFlexPart:null,hideSfmHeader:true,apiVersion:"2",isAprisoServer:false,isPassportEnabled:false,_widget:null,_keys:{server:"server",defaultFlexPart:"defaultFlexPart",hideSfmHeader:"hideSfmHeader"},_serverInfoUriTemplate:"https://{0}/WebApi/99/ServerInfo",init:function(i){this._widget=i;this.createConfiguration();this.read()},get:function(){this.read();var i=this;return this.getServerInfo().then(i.success.bind(i),i.fail.bind(i))},success:function(){this.isAprisoServer=true},fail:function(){this.isAprisoServer=false},read:function(){var i=this._widget.getValue(this._keys.server);if(h.is(i,"string")){this.server=i.trim()}i=this._widget.getValue(this._keys.defaultFlexPart);if(h.is(i,"string")){this.defaultFlexPart=i.trim()}i=this._widget.getValue(this._keys.hideSfmHeader);if(h.is(i,"string")){this.hideSfmHeader=i.trim().toLowerCase()==="true"}},createConfiguration:function(){this._widget.addPreference({name:this._keys.server,label:g.get("preference_server"),type:"text",defaultValue:""});this._widget.addPreference({name:this._keys.defaultFlexPart,label:g.get("preference_defaultFlexPart"),type:"text",defaultValue:""});this._widget.addPreference({name:this._keys.hideSfmHeader,label:g.get("preference_hideSfmHeader"),type:"boolean",defaultValue:"true"})},validate:function(){if(!h.is(this.server,"string")||this.server.trim().length===0){return g.get("error_noAprisoServer")}if(!h.is(this.defaultFlexPart,"string")||this.defaultFlexPart.trim().length===0){this.defaultFlexPart=null}if(!h.is(this.hideSfmHeader,"boolean")){this.hideSfmHeader=false}return true},getServerInfo:function(){var j=this,i=e.format(this._serverInfoUriTemplate,this.server);return new f(function(l,k){b.proxifiedRequest(i,j.createRequest.call(j,l,k))})},createRequest:function(k,j){var l=this,i=c.getUser();return{type:"json",header:{Accept:"application/json","Content-Type":"application/json"},data:{externalLogin:h.is(i)===true?i.login:""},onComplete:function(m,n){return l.parse.call(l,m)===true?k():j()},onFailure:j,onTimeout:j}},parse:function(i){if(!h.is(i,"object")){return false}if(!h.is(i.IsSuccess,"boolean")||i.IsSuccess===false){return false}if(!h.is(i.ApiVersion)){return false}this.apiVersion=i.ApiVersion.toString();this.isPassportEnabled=i.ThreeDPassportEnabled===true;return true}})});define("DS/DELWebApriso3DExpUI/ContentView",["UWA/Class/View","DS/DELWebApriso3DExpUI/ContentRenderer"],function(b,a){return b.extend({_renderer:null,setup:function(c){this.listenTo(this.model,"onChange",this.update)},render:function(){if(this._renderer===null){this._renderer=new a(this.model)}this.container.empty();this.container.appendChild(this._renderer.render())},update:function(){this.render()}})});define("DS/DELWebApriso3DExpUI/DELWebApriso3DExpUI",["UWA/Core","DS/Windows/DockingElement","DS/DELWebApriso3DExpUI/FlexPartCollection","DS/UIKIT/Alert","DS/DELWebApriso3DExpUI/FlexPartView","DS/DELWebApriso3DExpUI/ContentView","DS/DELWebApriso3DExpUI/Content","DS/UIKIT/Mask","i18n!DS/DELWebApriso3DExpUI/assets/nls/ApplicationStrings","DS/DELWebApriso3DExpUI/Employee","DS/DELWebApriso3DExpUI/Preferences","DS/DELWebApriso3DExpUI/Events"],function(i,m,j,f,g,d,b,e,c,h,k,l){var a=(function(){var H;var D;var F;var s="3";var A;var E;var N;var L;var I;var x={one:171,two:330,three:491};var T;var G;var u;var J;var M=function(V,U){if(!y(V,U)){return}J=new h(D.server);UWA.Promise.all([D.get(),J.get()]).then(C)};var y=function(W,V){H=W.body;D=new k(W);var U=D.validate();if(U!==true){t(U);return false}F=new l();F.set(V);return true};var C=function(){v();S();w()};var v=function(){H.empty();E=new i.Element("div",{"class":"apr-flexpart-panel"});N=new i.Element("div",{"class":"apr-content-panel"});A=new m({collapseDockingZoneFlag:i.is(K(),"string"),dockingZoneContent:E,dockingZoneSize:p(H.clientWidth),freeZoneContent:N,minSize:x.one,maxSize:x.three,side:WUXDockAreaEnum.LeftDockArea,useBordersFlag:false});A.addEventListener("dockResize",function(U){U.dsModel.dockingZoneSize=n(U.dsModel.dockingZoneSize)});A.inject(H)};var S=function(){G=new j([],{server:D.server,apiVersion:s});u=new b({server:D.server,hideSfmHeader:D.hideSfmHeader});I=new g({model:G,container:E,domEvents:{"click .card":o}});T=new d({model:u,container:N})};var w=function(){e.mask(H);if(D.isPassportEnabled===false){var U=c.get("error_aprisoServerPassport");r(U);return}G.fetch({reset:true,onComplete:z,onFailure:R,onTimeout:O});u.set("alias","")};var z=function(){e.unmask(H);var U=K();if(!i.is(U,"string")){return}P(U)};var R=function(V,U,X){var W=c.get("error_loadFlexPartsError",{errorMessage:U});r(W)};var O=function(){var U=c.get("error_loadFlexPartsTimeout");r(U)};var r=function(U){H.empty();e.unmask(H);t(U)};var P=function(V){if(!i.is(V,"string")||V.trim().length===0){t(c.get("error_loadFlexPartWithoutAlias"));return}var U=G.findWhere({alias:V});if(i.is(F.get("flexPartLoad"),"function")&&i.is(U)){F.get("flexPartLoad").call(this,JSON.parse(JSON.stringify(U)))}A.collapseDockingZoneFlag=true;u.set("alias",V);I.setActive(V)};var o=function(V){var U=B(V);if(!i.is(U,"element")){return}P(U.getData("alias"))};var B=function(V){var W=q(V);if(!i.is(W,"array")){return undefined}var X=function(Y){return Y.classList.length>0&&Y.classList.contains("card")};if(i.is(Array.prototype.find,"function")){return W.find(X)}var U=W.filter(X);return i.is(U,"array")&&U.length>0?U[0]:undefined};var q=function(V){var W=V.path||(V.composedPath&&V.composedPath());if(i.is(W)){return W}if(!i.is(V.target)){return undefined}W=[];for(var U=V.target;i.is(U)&&U.tagName!=="HTML";U=U.parentElement){W.push(U)}return W};var t=function(U){if(!i.is(L)||L.elements.container.parentElement===null){L=new f({closable:true,visible:true}).inject(H)}L.add({className:"error",message:U})};var K=function(){if(i.is(D.defaultFlexPart,"string")&&D.defaultFlexPart.trim().length>0){return D.defaultFlexPart.trim()}if(i.is(J)&&i.is(J.defaultFlexPartAlias,"string")&&J.defaultFlexPartAlias.trim().length>0){return J.defaultFlexPartAlias.trim()}return null};var p=function(U){var V=parseInt(U/3);if(V>=x.three){return x.three}if(V>=x.two){return x.two}return x.one};var n=function(U){if(U>=x.two+(x.three-x.two)/2){return x.three}if(U>=x.one+(x.two-x.one)/2){return x.two}return x.one};var Q=function(){H=null;D=null;F=null;s="3";A=null;E=null;N=null;L=null;I=null;T=null;G=null;u=null;J=null};return{init:M,__test:{_this:{_rootElement:function(){return H},_preferences:function(){return D},_events:function(){return F},_apiVersion:function(){return s},_dock:function(){return A},_flexPartPanel:function(){return E},_contentPanel:function(){return N},_alert:function(){return L},_flexPartView:function(){return I},_flexPartViewWidth:function(){return x},_contentView:function(){return T},_flexParts:function(){return G},_content:function(){return u},_employee:function(){return J},},load:C,initFrame:v,initMvc:S,start:w,flexPartFetchComplete:z,flexPartFetchFailure:R,flexPartFetchTimeout:O,flexPartFetchError:r,loadFlexPart:P,flexPartClickCallback:o,getCardElement:B,getPath:q,showError:t,getDefaultFlexPartAlias:K,getInitialDockWidth:p,getRoundedDockWidth:n,reset:Q}}})();return a});