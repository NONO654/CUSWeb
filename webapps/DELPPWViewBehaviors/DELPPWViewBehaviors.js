define("DS/DELPPWViewBehaviors/SearchBehavior",["UWA/Core"],function(b){var a=function(d,p,q,j,c){var g,o,h,l,i;g=function g(A,D){var v=c.getComponent("Button"),t=c.getComponent("LineEditor"),r=c.getComponent("Element"),z=b.is(D.title)?D.title:j.getNLSValue("Dialog.InsertInstanceCmd.Title"),y=b.is(D.placeholder)?D.placeholder:j.getNLSValue("Search.InsertInstanceCmd.Placeholder"),C=b.is(D.searchTitle)?D.searchTitle:j.getNLSValue("Search.InsertInstanceCmd.Title"),s,w,u;s=new r("div",{"class":"search-dialog-container"});w=new r("div",{"class":"search-tree-container"}).inject(s);if(b.is(l)){o=l.create("Dialog",{domId:"search-dialog-container",identifier:"search-dialog-container",title:z,modalFlag:true,resizableFlag:true,visibleFlag:false,closable:true,content:s,height:200,width:300,buttons:{Cancel:new v({onClick:function(){i()}}),Ok:new v({label:"Search",icon:"search",visibleFlag:true,disabled:true,emphasize:"primary",onClick:function(){x();i()}}),}});o.close=function B(){i()}}else{p.debug("uxFactoryBehavior is not available.")}x=function x(){q.activate(C,A,b.is(D.types)?D.types:null,[u.value])};u=new t({placeholder:y,autoCommitFlag:true,}).inject(w);u.addEventListener("change",function(){if(u.value.length>0){o.buttons.Ok.disabled=false}else{o.buttons.Ok.disabled=true}})};i=function i(){if(b.is(o)){o.destroy();o=void 0}};return{onStart:function n(){l=p.getBehavior("UXFactoryBehavior")},onStop:function f(){},activate:function e(t,u,s,r){q.activate(t,u,s,r)},showSearchDialoguAndActivate:function m(t,s){var r=(b.is(s))?s:{};g(t,r);o.show()},onClose:function k(){i()},}};return{plugins:["SearchPlugin","ResourcePlugin","UXComponentsPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightHelper",["UWA/Core"],function(b){var a=function(m,d,f){var e=d.getImplementLinkType(),j="CrossHighlightHelper",k,i,h;k=function k(r,n){var o,s,p,q;s=f.getInstance(r).get("isInstanceOf");p=f.getInstancesFromCollection(s).map(function(t){return t.id});if(p.length===0){return[]}q=p.filter(function(t){return n.indexOf(t)!==-1});if(q.length>0){return q}for(o=0;o<p.length;o++){q=k(p[o],n);if(q.length>0){break}}return q};i=function i(q){var p,o,v,u,s,n,r=[],t=[];t.push(q[0]);for(p=0;p<q.length-1;p++){r=[];v=q[p];for(o=0;o<v.length;o++){if(t[p].indexOf(v[o])!==-1){s=q[p+1];u=k(v[o],s);r=r.concat(u)}}t.push(r)}n=(t.length>0)?t[t.length-1]:[];return n};h=function h(p){var o;o=f.findSomeConnection(function(r){var q=e===r.get("type"),s=b.equals(p,r.get("to"));return q&&s}).map(function n(q){return q.get("from")});return o};return{getParentScoped:function l(o){var q,p,n=null,r;if(b.is(o,"array")){if(o.length>0){r=d.findInstanceWhoseParentIsScoped(o);if(b.is(r)){if(r.absPathIndex===0){p=r.instanceModel.get("isAggregatedBy")}else{q=o.slice(0,r.absPathIndex)}}}}if(b.is(q)){n=q}else{if(b.is(p)){n=p}}return n},getScopedNodeAbsolutePath:function c(t){var p,s,n,r,o,q=function q(x){var w,v,u=false;w=f.getReferenceModel(x);if(b.is(w)){v=w.get("PPRTYPE");if(v==="PROCESS"){u=true}}return u};if(b.is(t,"array")){p=t;if(p.length===0){m.debug(j,"Error: getScopedNodeAbsolutePath: expected reference id for root node");return null}if(!q(p[p.length-1])){m.debug(j,"Error: getScopedNodeAbsolutePath: expected a Manufacturing Item");return null}if(!d.isScoped(p)){return null}if(!d.isUnderScope(p)){r=d.getImplLinksOfImplementing(p);if(b.is(r)){if(r.length===1){o=r[0].to}else{o=[]}}else{o=[]}}else{o=[];n=p.slice(0);do{if(!d.isUnderScope(n)){break}r=d.getImplLinksOfImplementing(n);if(!b.is(r)||r.length>1||r.length===0){o=null;break}o=r[0].get("to").concat(o);n=this.getParentScoped(n)}while(b.is(n,"array"))}}else{s=t;if(!q(s)){o=null}else{if(d.isScoped(s)){o=[]}else{o=null}}}return o},getImplementingItemInstIDs:function g(p){var q,x,s=[],w,v,n,r,t,o;if(b.is(p,"array")){q=p;if(q.length===0){return null}x=q.slice(0);do{w=d.getPathToScope(x);v=f.findSomeConnection(function(z){var y=e===z.get("type"),A=b.equals(w,z.get("to"));return y&&A}).map(function u(y){return y.get("from")});s.unshift(v);x=this.getParentScoped(x)}while(b.is(x,"array"));n=(!b.equals(d.getPathToScope(q),q))?true:false;if(n){if(s[s.length-1].length>0){r=i(s)}else{r=s[s.length-1]}t=h(q);o=r.concat(t)}else{o=(s.length>0)?s[s.length-1]:[]}}else{o=null}return o}}};return a});define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel",["UWA/Core","DS/Tree/TreeNodeModel"],function(i,o){var x={BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight",TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",};var a=function a(z){z=z||{};this._logger=this.facade;this._referencePID=null;this._instancePID=null;this._type=null;this.options={label:"",badges:{},icons:[],grid:{},thumbnail:null,useAsyncPreExpand:true};this.setReferencePID(z.referencePID);this.setReferenceType(z.referenceType);this.options=i.extend(this.options,z);if(z.instancePID){this.setInstancePID(z.instancePID)}o.call(this,this.options)};function j(z){if(!z._getFilterInfo){z._getFilterInfo=a.prototype._getFilterInfo.bind(z);z._getChildrenFilterInfo=a.prototype._getChildrenFilterInfo.bind(z);z._removeChildrenFilterInfo=a.prototype._removeChildrenFilterInfo.bind(z);z.filterInChild=a.prototype.filterInChild.bind(z);z.filterOutChild=a.prototype.filterOutChild.bind(z)}}a.prototype=Object.create(o.prototype);a.prototype.constructor=a;a.prototype.name="AbstractTreeNodeModel";a.prototype.getID=function e(){return this.getReferencePID()};a.prototype.unhighlight=function c(){if(!this._isSelected){this._isHighlighted=false;this._modelEvents.publish({event:"unhighlight",data:this._getNodeInfos(),context:this})}};a.prototype.setReferencePID=function f(z){if(!i.is(z,"string")){return null}this._referencePID=z;return this.getReferencePID()};a.prototype.setInstancePID=function s(z){if(!i.is(z,"string")){return null}this._instancePID=z;return this.getInstancePID()};a.prototype.setReferenceType=function h(z){if(!i.is(z,"string")){return null}this._type=z;return this.getReferenceType()};a.prototype.getReferencePID=function n(){return this._referencePID};a.prototype.getInstancePID=function b(){return this._instancePID};a.prototype.getReferenceType=function y(){return this._type};a.prototype.getRootPID=function w(){var A=this.getRoot(),z=i.is(A)?A.getReferencePID():null;return z};a.prototype.getAbsolutePath=function v(){var z=this.getParents().reverse(),A=z.map(function B(C){return C.getInstancePID()}).concat([this.getInstancePID()]).slice(1);return A};a.prototype.getChildrenPID=function d(){var z=this.getChildren(),B=[];if(Array.isArray(z)){B=z.map(function A(C){return C.getInstancePID()})}return B},a.prototype.getSiblingsPID=function u(){var z=this.getParent(),A=[];if(i.is(z)){if(!i.is(z.getChildrenPID)){z.getChildrenPID=a.prototype.getChildrenPID.bind(z)}A=z.getChildrenPID()}return A};a.prototype._removeFilterInfo=function g(){delete this.options._filterInfo};a.prototype._removeChildrenFilterInfo=function k(){delete this.options._childrenFilterInfo};a.prototype.filterInChild=function t(A){var I=this._getChildrenFilterInfo(),G,B,F,J,C,z,E,D,H;if(I){G=I.childrenBeforeFiltering;if(G){B=G.indexOf(A);if(B>=0){F=A._getFilterInfo();if(F&&F.parentBeforeFiltering===this){J=this.getChildren();if(J){for(D=0;D<J.length;D++){C=J[D];z=G.indexOf(C);if(z>B){E=C;break}}}delete F.parentBeforeFiltering;if(i.is(A.options.isRootAttached)){if(A.options.isRootAttached===true){this.insertBefore(A,E)}}else{this.insertBefore(A,E)}if(i.is(this.setState,"function")){this.setState({state:I.expandStateBeforeFiltering})}A._removeFilterInfo();H=I.filteredOutChildren.indexOf(A);I.filteredOutChildren.splice(H,1);if(I.filteredOutChildren.length===0){this._removeChildrenFilterInfo()}}}}}};a.prototype.filterIn=function q(z){var D=this._getFilterInfo(),B,A,C;if(D&&D.parentBeforeFiltering){B=D.parentBeforeFiltering;j(B);B.filterInChild(this)}if(z){C=this._getChildrenFilterInfo();if(C&&C.childrenBeforeFiltering){A=C.childrenBeforeFiltering}else{A=this.getChildren()}if(A){A.forEach(function(E){E.filterIn(z)})}}};a.prototype._getFilterInfo=function l(z){if(!this.options._filterInfo&&Boolean(z)){this.options._filterInfo={}}return this.options._filterInfo};a.prototype._getChildrenFilterInfo=function p(z){if(!this.options._childrenFilterInfo&&Boolean(z)){this.options._childrenFilterInfo={}}return this.options._childrenFilterInfo};a.prototype.filterOutChild=function m(D){var z=this.getChildren(),C,A,B;if(z.indexOf(D)<0){throw"Not a child"}C=this._getChildrenFilterInfo(true);if(!C.childrenBeforeFiltering){C.childrenBeforeFiltering=z&&z.length>0?z.slice(0):[];B={noExpandState:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"};if(i.is(this._expandState)){C.expandStateBeforeFiltering=B[this._expandState]}}A=D._getFilterInfo(true);A.parentBeforeFiltering=this;if(i.is(this.removeChild,"function")){this.removeChild(D)}else{this.removeRoot(D,true,true)}if(i.is(this.setState,"function")){this.setState({state:C.expandStateBeforeFiltering})}if(!C.filteredOutChildren){C.filteredOutChildren=[]}C.filteredOutChildren.push(D)};a.prototype.filterOut=function r(){var z=this.isRoot()?this.getTreeDocument():this.getParent();if(z!==null){j(z);z.filterOutChild(this)}};return a});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI",["UWA/Core",],function(b){var a=function(v,I,A,C,u,N){var k=A.getComponent("Element"),y=A.getComponent("ComboBox"),f=A.getComponent("LineEditor"),r=A.getComponent("Editor"),O=A.getComponent("Toggle"),B=A.getComponent("DatePicker"),e=A.getComponent("Accordeon"),c=A.getComponent("UnitsEditor"),F=A.getComponent("TooltipModel"),z,n=false,D=null,H=null,M={},K=function K(P){var R=I.getPreferenceValue("separator"),Q=new f({requiredFlag:P.mandatory,value:b.is(P.value)?P.value:"",disabled:P.disabled,placeholder:C.getNLSValue("FormUI.Placeholder.EnterAText")});if(P.multiValue==="Yes"){Q.placeholder=C.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:R});Q.autoCorrectFlag=false}Q.fieldType=P.fieldType;M[P.name]=Q;return Q},g=function g(T,R,S){var P,Q;if(u.hasMagnitude(S)){T.type="unitsEditor";T.value=u.getMagnitudeValue(R,S)}else{if(u.isMultiValuated(S)){T.type="text";if(u.isDate(S)){Q=u.getValueAsDateArray(R);R=Q.map(function(U){return u.getFormattedDate(U)})}T.value=u.getValueAsString(R,u.getType(S))}else{if(u.isBoolean(S)){T.type="checkbox";T.value=(R==="TRUE")}else{if(u.isDate(S)){T.type="date";R=(R==="NULL"||!b.is(R))?"":R;T.value=u.getDate(R);if(T.displayType==="datetime"){T.timePickerFlag=true}}else{if(u.isMultiLine(S)){T.type="textarea";T.value=R==="NULL"?"":R;T.pattern=u.getPattern(S);T.rows="6"}else{if(u.hasRangeDefined(S)){T.type="select";T.value=R;T.options=[];for(P=0;P<S.AuthorizedValues.length;P++){T.options.push({label:u.getAuthorizedValueNLS(S,P),value:u.getAuthorizedValueNLS(S,P)})}}else{T.type="text";if(u.isDouble(S)||u.isInteger(S)){T.value=u.getValueAsString(R,u.getType(S))}else{T.value=R==="NULL"?"":R}T.pattern=u.getPattern(S)}}}}}}return T},i=function i(Q,S){var R=Q,P=function P(V){var T,U=new Date(V);if(!isNaN(U.getTime())){T=Math.floor(U.getTime()/1000)}return T};if(u.isMultiValuated(S)){R=u.getValueAsArray(Q);if(u.isDate(S)){R=R.map(function(T){return P(T)})}}else{if(u.isBoolean(S)){R=Q==="true"?"TRUE":"FALSE"}else{if(u.isDate(S)){Q=Q==="NULL"||!b.is(Q)?"":Q;R=P(Q)}else{if(u.hasRangeDefined(S)){R=u.getAuthorizedValue(S,null,Q)}}}}return R},h=function h(P){var Q=new r({requiredFlag:P.mandatory,value:b.is(P.value)?P.value:"",disabled:P.disabled,placeholder:C.getNLSValue("FormUI.Placeholder.EnterAText")});Q.fieldType=P.fieldType;M[P.name]=Q;return Q},L=function L(P){var Q=new O({type:"switch",checkFlag:P.value,value:P.value,disabled:P.disabled});Q.fieldType=P.fieldType;M[P.name]=Q;return Q},t=function t(P){var Q=(b.is(P))?new B(P):new B();Q.fieldType=P.fieldType;M[P.name]=Q;return Q},m=function m(R,P){var T,S=[],Q;for(Q=0;Q<R.elementsList.length;Q++){S[Q]={labelItem:R.elementsList[Q].label,valueItem:R.elementsList[Q].value}}T=new y({elementsList:S,actionOnClickFlag:false,enableSearchFlag:false,value:R.value,disabled:R.disabled});T.fieldType=R.fieldType;M[R.name]=T;if(b.is(P,"function")){T.addEventListener("change",P)}return T},o=function o(P){var Q,S,R=I.getPreferenceValue("separator");if(P.value!=="null"){Q=P.value}else{Q=""}S=new c({value:Q,requiredFlag:P.mandatory,disabled:P.disabled,placeholder:C.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:false});if(b.is(P.magnitudeText,"string")){S.setUnit(P.magnitudeText)}if(P.multiValue==="Yes"){S.placeholder=C.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:R});S.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$";S.autoCorrectFlag=false}S.fieldType=P.fieldType;M[P.name]=S;return S},q=function q(P,U){var S,R,T,X,Q,V,W;if(!b.is(P,"array")){P=[P]}for(T=0;T<P.length;T++){X=P[T];Q=new b.Element("div",{"class":"wux-dialog-inline-container"});R=new b.Element("h6",{"class":"wux-textElement",text:X.label}).inject(Q);R.tooltipInfos=new F({shortHelp:X.label});V={name:X.name,value:X.value,mandatory:X.mandatory,disabled:X.disabled,fieldType:X.type,multiValue:X.multiValue};switch(X.type){case"text":S=K(V);break;case"textarea":S=h(V);break;case"checkbox":S=L(V);break;case"date":W={timePickerFlag:X.timePickerFlag||false};b.extend(V,W);S=t(V);break;case"select":W={elementsList:X.options};b.extend(V,W);S=m(V);break;case"unitsEditor":W={magnitudeText:X.magnitudeText,multiValue:X.multiValue};b.extend(V,W);S=o(V);break;default:S=K(V);break}S.inject(Q);Q.inject(U)}},E=function E(){if(n===true){n=false;I.debug(C.getNLSValue("InsertCmd.WarningConfiguration"))}return},l=function l(Q,S){var T,R=C.getNLSValue(Q),P=new b.Element("div",{"class":"accordeon-section-container"}).inject(D);if(R!=="Wrong NLS key"){T=R}else{T=Q}new e({items:[{header:T,content:S,expandedFlag:true}],style:"filled-separate"}).inject(P)},j=function j(T){var Q,U,V,X,Y,R,P=[],W,S=C.getNLSValue(H,null,"Type");if(!b.is(T,"array")){T=[T]}for(U=0;U<T.length;U++){Q=T[U];if(!b.is(Q.attributeName)){V=Q.dicoType+"."+Q.name}else{V=Q.attributeName}if(!b.is(Q.attributeInfo)){X=N.getAttributeInfo(V)}else{X=Q.attributeInfo}if(!b.is(X)){n=true;return}R=u.getFullName(X);if(b.is(z&&z[R])){Y=z[R]}else{if(R==="PLMEntity.V_Name"&&(H)){Y=S}else{Y=u.getDefaultValue(X)}}W={name:u.getFullName(X),mandatory:Q.mandatory,label:u.getNLS(X),attributeInfo:X,magnitudeText:u.getNLSForUnit(X),multiValue:X.MultiValuated,disabled:Q.readOnly||u.isReadOnly(X),defaultValue:Y};if(b.is(Q.objectToBeModified)){Y=Q.objectToBeModified.get(Q.dataIndex)}if(u.isReadOnly(X,null,true)){continue}if(u.isDate(X)){W.displayType=(Q.displayType==="DateTime")?"datetime":"date"}W=g(W,Y,X);P.push(W)}return P},s=function s(T,Q){var S,R,P=new k("div",{"class":"section-container"});if(Q.headerAccordean===false){P.inject(D)}else{if(!T.name){T.name=""}}for(S in T){if(b.is(S)){switch(S.toLowerCase()){case"name":l(T[S],P);break;case"attribute":R=j(T[S]);if(b.is(R)){q(R,P)}else{I.debug("attributeInfo is not available");return}break;default:break}}}},w=function w(R){var P,Q=R.sections;for(P in Q){if(b.is(P)){switch(P.toLowerCase()){case"section":if(b.is(Q[P])){if(Array.isArray(Q[P])){Q[P].forEach(s)}else{s(Q[P],R)}}break;default:break}}}E()};return{createUI:function d(P){P=P||{};D=new k("div",{"class":"data-collection-form-UI"});if(b.is(P.renderTo)){if(b.is(P.type)){H=P.type.split("/")[1]||""}if(b.is(P.defaultValues)){z=P.defaultValues}w(P);D.inject(P.renderTo)}else{I.debug("no parent container is present to inject the mainContainer")}},destroy:function J(){if(b.is(D)){D.destroy()}M={}},getValues:function x(){var P={},R,Q,S;for(Q in M){if(M.hasOwnProperty(Q)){S=N.getAttributeInfo(Q);if(b.is(Q)){if(M[Q].fieldType==="select"){R=i(M[Q].currentValue,S)}else{if(M[Q].fieldType==="checkbox"){R=M[Q].checkFlag;R=R.toString();R=i(R,S)}else{if(M[Q].fieldType==="date"){R=i(M[Q].value,S)}else{R=i(M[Q].valueToCommit,S)}}}if(b.is(R)){P[Q]=R}}}}return P},validate:function p(){var Q,S,T,R=C.getNLSValue("FormUI.Error"),P={result:true,message:null};for(Q in M){if(b.is(M[Q])){if(M[Q].requiredFlag===true&&M[Q].value===""){P.result=false;P.message=R}if(b.is(M[Q].pattern)){S=new RegExp(M[Q].pattern);T=b.is(M[Q].value)?M[Q].value:"";if(T!==""&&!(T.test(S))){P.result=false;P.message=R}}}}return P},updateToDefaultValues:function G(Q){var P;for(P in M){if(b.is(M[P])){if(b.is(Q[P])){M[P].value=Q[P]}}}}}};return a});define("DS/DELPPWViewBehaviors/Viewer3DBehavior",["UWA/Core"],function(b){var a=function a(r,m,s,t,p){var f,d;var i,n,c,l,j,k,g;i=function i(){return d.indexOf("PART")>-1||d.indexOf("PRODUCT")>-1};n=function n(x){var u,w,v;if(b.is(f,"boolean")&&f===true){u=t.getScopeLinksOfImplementing(x);if(u.length>0){w=u[0].get("to");v=[w];k(v)}}};c=function c(u,z){var v,C,w,A,x;if(b.is(f,"boolean")&&f===true){if(Array.isArray(u)){v=u}else{v=[u]}C=t.getScopeLinkType();A=m.getBehavior("WUXNodeModelBehavior");if(b.is(A)){w=A.getRoots();x=v.filter(function B(E){var G=(C===E.get("type")),F,D=false;if(G){F=E.get("from");D=(w.indexOf(F)>-1)}return G&&D}).map(function y(E){var D=E.get("to");return D});if(x.length>0){if(z){s.drop3D(x)}else{k(x)}}}}};l=function l(u){var v=true;c(u,v)};j=function j(u){var v=false;c(u,v)};k=function k(z){var u,y,v;if(b.is(f,"boolean")&&f===true){u=p.getRoots(m.getId())[0]}else{u=p.getRoots(m.getId())[1]}y=z.reduce(function w(D,C){var B=t.getScopeLinksOfImplemented(C),A;if(B.length>0){A=B.map(function(E){return E.get("from")});D=D.concat(A)}return D},[]);v=y.filter(function x(A){return(u.indexOf(A)>-1)});if(v.length===0){s.remove3D(z)}};g=function g(u,v){var w={};s.remove3D(u);if(b.is(v)){w.filterQuery3d=v}s.drop3D(u,w)};return{listenTo:function h(){return{removeRoot:n,addConnection:l,removeConnection:j,}},onStart:function q(u){f=b.is(u.implementing)?u.implementing:null;d=u.pprTypes},dropScopedProduct:function e(v){var u;if(b.is(f,"boolean")&&f===true){u=[v];s.drop3D(u)}},apply3DFilter:function o(u,v,z){var w=z||{},A=b.is(w.removeFilter,"boolean")?w.removeFilter:false,y,x;if(i()){x=p.getRoots(m.getId())[1];y=u.filter(function B(H){var I=false,E=false,D,C,F;if(x.length>0){D=t.getScopeLinksOfImplemented(H);if(D.length>0){I=true;C=D.map(function G(K){return K.get("from")});F=C.filter(function J(K){return(x.indexOf(K)>-1)});E=F.length>0}}return I&&E});if(y.length>0){if(A===false){g(y,v)}else{g(y)}}}}}};return{plugins:["Viewer3DPlugin","ImplementPlugin","RootsPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl",["UWA/Core"],function(b){var a=function(p,n,o,i){var g=null,c=null,s=false,d,e,t=o.getComponent("TooltipModel"),l=o.getComponent("Accordeon"),m=function m(w,y,u){var v=new b.Element("div",{"class":"accordeon-section-container"}).inject(u),x=new l({items:[{header:i.getNLSValue(w),content:y,expandedFlag:true}],style:"filled-separate"}).inject(v);return x},k=function k(x){var v=x.get("type"),u=new b.Element("div",{"class":"TNRInfo"}),w=new b.Element("div",{"class":"iconType-container"}).inject(u);i.getIconElem(v).inject(w);new b.Element("div",{"class":"SubLabelDiv",html:x.get("V_Name")}).inject(u);new b.Element("div",{"class":"SubRevisionDiv",html:x.get("revision")}).inject(u);return u},r=function r(x,w){var v,u;u=new b.Element("div",{"class":"selectionUIitems-container"});u.inject(w);v=new b.Element("div",{"class":"SubLabelDiv",styles:{padding:"0px"}});v.setHTML(i.getNLSValue(x)).inject(u);return w};return{createUI:function q(v){var x,w,u=new b.Element("div",{"class":"accordeon-section-container"});d=new b.Element("div",{"class":"inside-accordeon-errorMessage"});if(b.is(v)){x=b.is(v.title)?v.title:"";w=b.is(v.message)?v.message:"";s=b.is(v.multiSelection)?v.multiSelection:false}c=new b.Element("div",{"class":"Data-selection-UI"}).inject(v.renderTo);e=m(x,u,c);g=r(w,u)},updateLabel:function f(B){var v,w,z,u,A,x=[],C=false,y=new b.Element("i",{"class":"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator"});if(b.is(B,"string")){if(g){g.empty();A=new b.Element("div",{}).inject(g);A.setHTML(B).inject(g);if(b.is(g.tooltipInfos)){g.tooltipInfos=null}}}else{if(!b.is(B,"array")){B=[B]}if(B&&g){x=[];if(s===false&&B.length>1){u=i.getNLSValue("Error.MultipleObjectsSelected");this.showWarningMessage(u);C=false}else{if(B.length>0){g.empty();for(w=0;w<B.length;w++){v=k(B[w]);if(w===0){v.inject(g)}z=new b.Element("div",{"class":"TNRInfo"});z.addContent(v.innerHTML);x.push(z)}if(s===true&&B.length>1){y.inject(g)}g.tooltipInfos=new t({shortHelp:x});C=true}}}return C}},showWarningMessage:function h(v){var u;g.empty();u=new b.Element("div",{"class":"TNRInfo"}).inject(g);new b.Element("span",{"class":"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(u);d.setHTML(v).inject(u);if(b.is(g.tooltipInfos)){g.tooltipInfos=null}},updateAccordeon:function j(u,v){e.updateItem(u,v)},}};return a});define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI",["UWA/Core"],function(b){var a=function(o){var m,h,c=[],d,k=o.getBehavior("UXFactoryBehavior"),g=o.getBehavior("EGraphViewBehaviour"),j=o.getBehavior("ResourceBehavior");return{init:function n(q){m=b.extend(m,q)},destroy:function i(){h.destroy();h=void 0},isActive:function l(){},getDisplayLabel:function e(r){var q="";switch(r){case"implement":q=j.getNLSValue("GraphViewLinksFilter.Implement");break;case"origin":q=j.getNLSValue("GraphViewLinksFilter.Origin");break;case"alternate":q=j.getNLSValue("GraphViewLinksFilter.Alternate");break;case"output":q=j.getNLSValue("GraphViewLinksFilter.Output");break;case"productFlow":q=j.getNLSValue("GraphViewLinksFilter.ProductFlow");break;case"capableResources":q=j.getNLSValue("GraphViewLinksFilter.CapableResources");break;default:break}return q},loadLinkGraphUI:function f(){var x,H,w,D,F,r,v,u,E,G,t,z=this,C=j.getNLSValue("InsertCmd.OK"),q=k.getComponent("Modal"),A=k.getComponent("Toggle"),B=k.getComponent("ButtonGroup"),y=k.getComponent("Button");o.notify("startProgress");E=b.createElement("div");d=new q({header:j.getNLSValue("GraphViewLinksFilter.Header"),closable:false,className:"linksFilter_dialog_modal",footer:E});G=new y({label:C,className:"ok primary",emphasize:"primary",onClick:function s(){g.removeGenericEGraphView();g.createGenericEGraphView();d.destroy();d=null}});G.inject(E);d.inject(widget.body);x=new B({type:"checkbox"});t=new A({type:"switch",label:j.getNLSValue("GraphViewLinksFilter.SelectUnselectAll")+"</br>",checkFlag:true});x.addChild(t);t.addEventListener("buttonclick",function(I){if(I.dsModel._properties.checkFlag.value===false){z.setStateOfAllLinks(false)}else{z.setStateOfAllLinks(true)}});r=g.getSupportedTypesOfLink();for(F=0;F<r.length;F++){v=r._models[F]._attributes;H=v.linkType;D=j.getIconURLFromKey(v.img);w="<img src='"+D+"'/>   "+z.getDisplayLabel(v.linkType);u=v.displayed;c[F]=new A({type:"checkbox",value:H,label:w,isMultiSelection:true,checkFlag:u});x.addChild(c[F]);c[F].addEventListener("buttonclick",function(I){g.setLinkDisplayStatus(I.dsModel._properties.value.value,I.dsModel._properties.checkFlag.value)})}d.setBody(x);d.show();o.notify("stopProgress")},setStateOfAllLinks:function p(q){c.forEach(function(r){r.checkFlag=q;g.setLinkDisplayStatus(r._properties.value.value,q)})}}};return a});define("DS/DELPPWViewBehaviors/RefreshBehavior",["UWA/Core"],function(b){var a=function(f,n,g,k,j){var h,l=function l(q){var p=[];q.forEach(function o(s){var u=g.getReferenceModel(s),t,r;r=function r(w){var v=g.getInstancesFromCollection(w);if(p.indexOf(w)===-1){p.unshift(w)}v.forEach(function(y){var z=y.get("PID"),x=g.getReferenceModel(z);g.removeInstance(y.get("PID"));r(x.get("PID"));x.setAdditionalInfo({queriedForChildren:false})})};r(s);t=g.getImpacted(s);t.forEach(function(v){g.removeConnection(v.get("PID"))});if(b.is(j)){j.removeDocumentConnections(s)}u.setAdditionalInfo({queriedForDocuments:false,queriedForChildren:false,queriedForConnections:false,})});return p},c=function c(){var u=k.getNLSValue("View."+n.getId()+".Title"),r=h.getRoots(),p=n.getBehavior("TreeListViewBehavior"),t={action:[],parameters:[]},s=function s(){n.info(k.getNLSValue("RefreshAll.Success",{view:u}))},o=function o(){n.warn(k.getNLSValue("RefreshAll.Failure",{view:u}))};h.emptyNodeModel();if(b.is(r,"array")&&r.length>0){r.forEach(function q(v,w){t.action[w]="addRoot";t.parameters[w]={rootReferencePID:v}});p.processDropEffect(t).then(s).fail(o)}},d=function d(u){var s,o,t,r=b.is(u.impactedChildren)?true:false,p=function p(x){var w=b.clone(x.impactedChildren),v=b.clone(x.impactedObjects);h.withTransactionUpdate(function(){w.forEach(function(y){h.updateNode(y,{loadChildren:true})});v.forEach(function(y){h.updateNode(y)})})};if(r){t=b.clone(u)}else{o=h.getSelectedNodesInfo();s=o.map(function(v){return v.id});if(s.length<1){return}}n.notify("startProgress",{noTimeout:true});if(r){p(t);n.notify("stopProgress")}else{t={impactedChildren:[],impactedObjects:[]};t.impactedChildren=l(s);g.getDescendantsFromServer(s,function q(v){var w=new Set();v.connections.forEach(function(x){w.add(x.getAttribute("from"));w.add(x.getAttribute("to"))});t.impactedChildren.forEach(function(x){w["delete"](x)});w.forEach(function(x){t.impactedObjects.push(x)});p(t);if(!r){n.notify("refreshImpacted",[t])}n.info(k.getNLSValue("RefreshSelected.Success",{view:k.getNLSValue("View."+n.getId()+".Title")}));n.notify("stopProgress")},{forceDBMode:true,silentMode:true})}};return{listenTo:function e(){return{refreshAll:c,RefreshCmd:d,refreshImpacted:d}},onStart:function m(){h=n.getBehavior("WUXNodeModelBehavior")},onStop:function i(){},}};return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/ExportToCSVBehaviour",["UWA/Core",],function(b){var a=function(v,p,e,s,h){var o=s.getComponent("Toggle"),l=s.getComponent("Button"),z=s.getComponent("Element"),q,c,x,r,n,m,y,w,t=function t(C){if(b.is(c)){e.getXMLValues(c,function B(D){r=D.convert("Config.Preferences.ExportCSV.Type","name");n=D.Config.Preferences.ExportCSV.showOptionPanel;m=D.Config.Preferences.ExportCSV.defaultValue;y=D.Config.Preferences.ExportCSV.columnSeparator||",";C()},function A(D){p.warn(h.getNLSValue("ExportCSVCmd.ConfigXMLFetchFailed"));p.debug("Cannot export as ExportCSVPreferences XML fetch failed ,"+D)})}else{p.debug("Cannot export as _exportCSVPreferencesXML path is not provided")}},f=function f(B){var A;if(B){A=x.getConfiguredAttributesAsCSV(r,y)}else{A=x.getVisibleTableContentAsCSV(y)}g(A,q+"_"+(new Date()).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv");p.info(h.getNLSValue("ExportCSVCmd.SuccessMsg"))},g=function g(D,C,B){var A=new z("a");if(!b.is(D)){return}if(!b.is(C)){return}if(!b.is(B)){return}B=B||"application/octet-stream";if(navigator.msSaveBlob&&!self.odtMode){return navigator.msSaveBlob(new Blob([D],{type:B}),C)}A.href="data:"+B+","+encodeURIComponent(D);("download" in A)?(A.download=C):(A.target="_blank");A.style.cssText="visibility: hidden";document.body.appendChild(A);A.click();document.body.removeChild(A)},j=function j(){var B,A;A=new o({label:h.getNLSValue("ExportCSVCmd.ExportAllQuestion"),checkFlag:m});if(b.is(w)){B=w.create("Dialog",{domId:"ExportCSV-Dialog",modalFlag:true,visibleFlag:false,snappableFlag:false,title:h.getNLSValue("ExportCSVCmd.Header"),content:A,buttons:{Ok:new l({className:"ok primary",label:h.getNLSValue("ExportCSVCmd.OK"),emphasize:"primary",onClick:function C(){B.destroy();f(A.checkFlag)}}),Cancel:new l({className:"cancel",label:h.getNLSValue("ExportCSVCmd.CANCEL"),onClick:function C(){B.destroy()}})}});B.show()}else{p.debug("uxFactoryBehavior is not available.")}},d=function d(){t(function A(){if(n){j()}else{f(false)}})};return{listenTo:function k(){return{ExportCSVCmd:d}},onStart:function u(A){A=A||{};c=A.exportCSVPreferencesXML;q=A.exportCSVFileName;x=p.getBehavior("TreeListViewBehavior");w=p.getBehavior("UXFactoryBehavior");if(!b.is(x)){p.debug("ExportToCSVBehaviour initialization failed as TreeListViewBehavior is not available")}},onStop:function i(){c=null;x=null},}};return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin"],creator:a}});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu",["UWA/Core"],function(b){var a=function a(i,g,c,e){var f=g.getComponent("WUXCommandsManager");var h;h=function h(o,m,s,q,l){var k,n,p,r,u,t;p="enabled";if(!b.is(o,"string")){if(typeof o==="object"){if(b.is(o.text)&&b.is(o.command)){t=o.text;o=o.command}}else{i.debug("Nodes should be an array of string or objects");return}}else{t=o}r=c.getNLSValue(t,null,q,l);if(b.is(o)){if(o==="EditAttribute"){if(e.isReadOnly(s.infos.attributeInfo,s.infos.attributeDef)||!e.doesAttributeExist(s.infos.objectToBeModified,s.infos.dataIndex)){p="disabled"}}else{n=f.getCommand(o,m);if(!b.is(n)){n=f.getCommandCheckHeader(o,m)}if(b.is(n)){if(n.isEnabled()){p="enabled"}else{p="disabled"}}}}u=function u(){var v,w=[];switch(o){case"SizeColumnToFit":s.handlers.onSizeColumnToFit(s.virtualColumnID);break;case"SortAToZ":s.handlers.onSortColumnContentAsc(s.virtualColumnID);break;case"SortZToA":s.handlers.onSortColumnContentDesc(s.virtualColumnID);break;case"HideColumn":s.handlers.onHideColumn(s.virtualColumnID);break;default:v=f.getCommand(o,m);if(b.is(v)){v.beginExecute(s);v.execute({sourceModuleId:i.getId()});v.endExecute()}else{v=f.getCommandCheckHeader(o,m);if(b.is(v)&&false===v.getState()){v.options.node={referencePID:s.node.getReferencePID(),instancePID:s.node.getInstancePID(),absPath:s.node.getAbsolutePath()};v.toggleState()}else{s.selectedNodes.forEach(function(x){w.push({referencePID:x.getReferencePID(),instancePID:x.getInstancePID(),absPath:x.getAbsolutePath()})});i.notify(o,[w,s.infos])}}}};k={icon:"url("+c.getIconURLFromKey(o)+")",type:"PushItem",title:r,label:r,sensitivity:p,state:p,callback:u,action:{callback:u}};return k};return{getDefaultContextualMenu:function d(){return["showAuxiliaryView","BottomBlock","LeftBlock","RightBlock"]},buildContextualMenu:function j(k,n,p,m,o){var l=[];m=m||"Cmd";o=o||"Title";if(!b.is(k,"array")){i.debug("Nodes should be an array");return null}k.forEach(function(t){var s,r,q;if(b.is(t,"object")&&b.is(t.groupName)){if(b.is(t.commands,"array")){q=[];t.commands.forEach(function(u){q.push(h(u,n,p,m,o))});r=c.getNLSValue(t.groupName);s={icon:"url("+c.getIconURLFromKey(t.groupName)+")",type:"PushItem",title:r,label:r,state:"enabled",submenu:q};l.push(s)}else{i.debug('"commands" in a group should be an array');return null}}else{if(b.is(t,"string")&&t==="SEPARATOR"){s={type:"SeparatorItem"};l.push(s)}else{l.push(h(t,n,p,m,o))}}},this);return l}}};return a});define("DS/DELPPWViewBehaviors/DropZoneViewBehavior/DropZoneViewBehavior",["UWA/Core"],function(b){var a=function a(q,k,h,o){var c=null,l={},g="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",n="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-plus",r={DROPHERE:1,PLUS:2},f=function f(x){var v,w,u=o.getComponent("Element");c=new u("div",{"class":"dropLayer",});if(!c){k.debug("Could not create droplayer");return}v=new u("div",{"class":"mfndnd_invite_container",}).inject(c);if(!v){k.debug("Could not create droplayer");return}w=new u("div",{"class":"mfndnd_invite_display",draggable:false}).inject(v);new u("i",{"class":"mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",draggable:"false"}).inject(w);new u("h5",{"class":"font-3dsregular",text:h.getNLSValue("DragDrop.DropHere.Title")}).inject(w);c.inject(x)};return{onStart:function p(){var u=k.getElement(),v=u.getElementsByClassName("drop-zone-container")[0];if(b.is(v)){f(v)}},onStop:function i(){if(b.is(c)){c.remove();c=void 0}},createDropZoneView:function e(u){l=u;f()},getContent:function t(){if(c){return c}return void 0},hide:function j(){if(!c){k.debug("No container");return}c.hide()},show:function s(){if(!c){k.debug("No container");return}c.show()},isVisible:function m(){var u=false;if(c){u="none"!==c.getStyle("display")}return u},setIcon:function d(y){var v,x,w,u;u=function u(B,A,z){x.removeClassName(B);x.addClassName(A);w.setHTML(h.getNLSValue(z))};v=this.getContent();if(b.is(v)){x=v.getElement(".mfndnd_invite_img");w=v.getElement(".font-3dsregular");if(b.is(x)){if(b.is(w)){switch(y){case r.DROPHERE:u(n,g,"DragDrop.DropHere.Title");break;case r.PLUS:u(g,n,"DragDrop.AddObjectInContext.Title");break;default:k.log("wrong option")}}}}this.show()},iconEnum:r}};return{plugins:["ResourcePlugin","UXComponentsPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/ViewBehavior",["UWA/Core"],function(b){var a=function(e,o,m){var k;k=function k(){var p=o.getElement();if(m.getActiveView()!==o.getId()){p.removeClassName("focus")}else{p.addClassName("focus")}};return{listenTo:function d(){return{activeViewChange:k}},onStart:function n(r){var q=this,p=o.getElement();if(b.is(p)){p.onclick=function s(){q.setActiveView(o.getId())}}},onStop:function j(){},registerViewforWidgetLayout:function h(p){m.registerViewforWidgetLayout(p)},unregisterViewforWidgetLayout:function f(q,p){m.unregisterViewforWidgetLayout(q,p)},setCurrentView:function g(p){m.setCurrentView(o.getId(),p)},setActiveView:function c(){m.setActiveView(o.getId());o.notify("activeViewChange")},getActiveView:function l(){return m.getActiveView()},setFocus:function i(){var q=this,p=o.getElement();if(b.is(p)){if(q.getActiveView()!==o.getId()){p.removeClassName("focus")}else{p.addClassName("focus")}}}}};return{plugins:["TreeViewPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop",["UWA/Core","UWA/Class/Promise"],function(c,b){var a=function(B,u,p,l,D,m,L,q){var g,y,n,d=function d(M){var N="",O=g.acceptedTypes;if(c.is(M)){if(c.is(M.get)){N=M.get("PPRTYPE")}else{if(c.is(M["ds6w:type_value"])){N=D.getPPRType(M["ds6w:type_value"])}else{if(c.is(M,"string")){N=D.getPPRType(M)}else{M=l.getReference(M.referenceID);N=M.get("PPRTYPE")}}}}return c.is(O)?(O.indexOf(N)!==-1):true},F=function F(M){return l.getLastElementInstanceInfoPID(M,"isAggregatedBy")},w=function w(M){return l.getLastElementInstanceInfoPID(M,"isInstanceOf")},v=function z(M){var N=null;if(c.is(M)){if(c.is(M.instancePIDsArray,"array")&&(M.instancePIDsArray.length>0)){N=w(M.instancePIDsArray)}else{N=l.isValidPID(M.rootReferencePID)?M.rootReferencePID:null}}return N},C=function C(M){var N=null;if(c.is(M)){if(c.is(M.targetInstancePIDsArray,"array")&&(M.targetInstancePIDsArray.length>0)){N=w(M.targetInstancePIDsArray)}else{N=l.isValidPID(M.targetRootReferencePID)?M.targetRootReferencePID:null}}return N},K=function K(O,N){var P=u.getBehavior("DropZoneViewBehavior"),M=u.getBehavior("WUXNodeModelBehavior");if(c.is(P)){P.setIcon(O);if(c.is(M)){if(N===true&&!M.isDocumentEmpty()){P.hide()}}}},j=function j(Z){var T={action:new Array(Z.draggedItems.length),parameters:new Array(Z.draggedItems.length),message:new Array(Z.draggedItems.length),dragNDropInfo:Z},Q=u.getBehavior("DropZoneViewBehavior"),V={parameters:null,message:null},ab={createLink:null,createLinkOrInstance:null,addCA:null,addRoot:null,reOrderRoot:null,reOrder:null,reParent:null},R=function R(af,ad){var ac=true,ae=Array.isArray(B.getConfig().unAuthorizedTypes)?B.getConfig().unAuthorizedTypes:[];ac=!(ae.indexOf(D.getPPRType(af))>-1&&ae.indexOf(D.getPPRType(ad))>-1);return ac},U=function U(ad){var ac=false;if(l.isValidPID(Z.draggedItems[ad].rootReferencePID)&&(!c.is(l.getLastElement(Z.draggedItems[ad].instancePIDsArray)))){ac=true}return ac},N=function N(af){var ac=false,ae=null,ad=null;if(!U(af)){ae=F(Z.draggedItems[af].instancePIDsArray);ad=F(Z.targetInstancePIDsArray);if(l.isValidPID(ae)&&l.isValidPID(ad)&&(ae===ad)){ac=true}}return ac},O=function O(ae){var ad=false,ac=null;if("middle"===Z.info.dropPosition){if((Z.targetRootReferencePID!==Z.draggedItems[ae].rootReferencePID)||(!l.arrayCompare(Z.draggedItems[ae].instancePIDsArray,Z.targetInstancePIDsArray))){if(R(Z.targetType,Z.draggedItems[ae].type)){if(q.isNewDragNDrop()&&("MFN"===B.getConfig().widgetTrigram)){ac="createLink"}else{ac="createLinkOrInstance"}V.parameters={rootReferencePID:Z.draggedItems[ae].rootReferencePID,referencePID:v(Z.draggedItems[ae]),targetReferencePID:C(Z),instancePID:l.getLastElement(Z.draggedItems[ae].instancePIDsArray),targetRootReferencePID:Z.targetRootReferencePID,targetInstancePID:l.getLastElement(Z.targetInstancePIDsArray),allowMove:Z.info.fromSameSource&&("middle"===Z.info.dropPosition),instancePIDsArray:Z.draggedItems[ae].instancePIDsArray,targetInstancePIDsArray:Z.targetInstancePIDsArray};if(c.is(ab[ac],"number")){T.action[ae]="aggregatedAction";T.parameters[ae]=ab[ac];T.message[ae]=null;T.parameters[ab[ac]].push(V.parameters)}else{T.action[ae]=ac;T.parameters[ae]=[V.parameters];T.message[ae]=null;ab[ac]=ae}ad=true}else{T.action[ae]="error";T.parameters[ae]=null;T.message[ae]=p.getNLSValue("AbstractDragAndDropManager.NotAllowed")}}else{T.action[ae]="error";T.parameters[ae]=null;T.message[ae]=p.getNLSValue("AbstractDragAndDropManager.SameObject")}}return ad},aa=function aa(ad){var ac=false;if(!l.isValidPID(Z.targetRootReferencePID)){if("Change Action"===Z.draggedItems[ad].type){T.action[ad]="addChangeAction";T.parameters[ad]={rootReferencePID:Z.draggedItems[ad].rootReferencePID};T.message[ad]=null;ac=true}}return ac},M=function X(ad){var ac=false;if(!l.isValidPID(Z.targetRootReferencePID)){if(d(Z.draggedItems[ad].type)){T.action[ad]="addRoot";T.parameters[ad]={rootReferencePID:v(Z.draggedItems[ad])};T.message[ad]=null;ac=true}else{if(c.is(g.addToAuxIfNotAcceptedType)){T.action[ad]="addRoot";T.parameters[ad]={addToAuxIfNotAcceptedType:true,rootReferencePID:v(Z.draggedItems[ad])};T.message[ad]=null;ac=true}else{K(Q.iconEnum.DROPHERE,true);T.action[ad]="error";T.parameters[ad]=null;T.message[ad]=p.getNLSValue("AbstractDragAndDropManager.NotAuthorized")}}}return ac},S=function S(ad){var ac=false;if(U(ad)&&Z.info.fromSameSource&&d(Z.draggedItems[ad].type)){T.action[ad]="reorderRoots";T.parameters[ad]={rootReferencePID:v(Z.draggedItems[ad]),targetRootReferencePID:Z.targetRootReferencePID,position:Z.info.dropPosition};T.message[ad]=null;ac=true}return ac},P=function P(ah){var af=false,ae=Z.info.wuxLocalID,ac=c.is(Z.targetInstanceSiblingPID,"array")?Z.targetInstanceSiblingPID.slice(0):[],ad=Z.draggedItems[ah],ag=l.getLastElement(ad.instancePIDsArray);if(Z.info.fromSameSource&&N(ah)&&d(Z.draggedItems[ah].type)){if(R(Z.targetType,Z.draggedItems[ah].type)){T.action[ah]="reorder";if(("top"===Z.info.dropPosition)&&(ae>ad.wuxLocalID)){ae--}else{if(("bottom"===Z.info.dropPosition)&&(ae<ad.wuxLocalID)){ae++}}ac.splice(ae,0,ac.splice(ad.wuxLocalID,1)[0]);T.parameters[ah]={movedInstancePID:ag,newChildrenPID:ac};T.message[ah]=null;af=true}else{T.action[ah]="error";T.parameters[ah]=null;T.message[ah]=p.getNLSValue("AbstractDragAndDropManager.NotAllowed")}}return af},W=function W(ai){var ad=false,ac=Z.info.wuxLocalID,ah=Z.draggedItems[ai].instancePIDsArray,ae=l.getLastElement(ah),af=F(Z.targetInstancePIDsArray),ag=c.is(Z.targetInstanceSiblingPID,"array")?Z.targetInstanceSiblingPID.slice(0):[];if(Z.info.fromSameSource&&("middle"!==Z.info.dropPosition)&&!N(ai)&&l.isValidPID(af)&&d(Z.draggedItems[ai].type)&&l.areInstancesReparentable(af,ah)){if(R(Z.targetType,Z.draggedItems[ai].type)){if("bottom"===Z.info.dropPosition){ac++}ag.splice(ac,0,null);V.parameters={instancesPIDsToReparent:[ae],formerInstancesParentPIDs:[F(ah)],newParentPID:af,newParentInstancesOrder:ag};if(c.is(ab.reParent,"number")){T.action[ai]="aggregatedAction";T.parameters[ai]=ab.reParent;T.message[ai]=null;if(c.is(T.parameters[ab.reParent])){T.parameters[ab.reParent].instancesPIDsToReparent.push(ae);T.parameters[ab.reParent].formerInstancesParentPIDs.push(V.parameters.formerInstancesParentPIDs[0]);T.parameters[ab.reParent].newParentInstancesOrder.splice(ac,0,null)}}else{T.action[ai]="reparent";T.parameters[ai]=V.parameters;T.message[ai]=null;ab.reParent=ai}ad=true}else{T.action[ai]="error";T.parameters[ai]=null;T.message[ai]=p.getNLSValue("AbstractDragAndDropManager.NotAllowed")}}return ad};Z.draggedItems.forEach(function Y(ac,ad){T.action[ad]="error";T.parameters[ad]=null;T.message[ad]=null;if(!O(ad)){if(!aa(ad)){if(!M(ad)){if(!S(ad)){if(!P(ad)){if(!W(ad)){u.debug("AbstractDragAndDropManager.InternalError")}}}}}}},this);return T};return{init:function A(N){var M=this;g=N||{};if(c.is(g.dropZone)){g.dropZone.addEventListener("drop",function(O){O.preventDefault();M.onTreeListViewDrop(O)});g.dropZone.addEventListener("dragover",function(O){O.preventDefault()})}},isAcceptedType:function t(M){return d(M)},getDDBehavior:function o(){var M=this;return{onDragStartCell:M.onDragStartCell,onDragEndCell:M.onDragEndCell,onDragEnterRowHeader:M.onDragEnterRowHeader,onDragLeaveRowHeader:M.onDragLeaveRowHeader,onDragEnterColumnHeader:M.onDragEnterColumnHeader,onDragLeaveColumnHeader:M.onDragLeaveColumnHeader.bind(this),onDragEnterCell:M.onDragEnterCell,onDragLeaveCell:M.onDragLeaveCell,onDragOverCell:M.onDragOverCell,onDropCell:M.onDropCell.bind(this),onDragEnterBlank:M.onDragEnterBlank,onDragLeaveBlank:M.onDragLeaveBlank,onDropBlank:M.onDropBlank.bind(this),onDropColumnHeader:M.onDropColumnHeader.bind(this)}},processRootDrop:function E(aa,Q,M,ag,X,Y,Z,ad){var W=this,af,R,ab=u.getBehavior("WUXNodeModelBehavior"),P=p.getNLSValue(u.getId()),S=p.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:P}),U=p.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{view:P}),ac=p.getNLSValue("AbstractDragAndDropManager.AddRoot.Error",{view:P}),V=function V(ai){var ah=c.is(ab)?ab.validate(ai):null;return ah},T=u.getBehavior("DropZoneViewBehavior"),N=function N(am,an){var aj={},ap,ao=an||{},al,ak=function ak(){u.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:true});u.warn(ac,R,"failed");ad()},ai=function ai(){u.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:true});u.log(U,R,"completed");Z()},ah=c.is(ao.forceDBMode,"boolean")?ao.forceDBMode:false;al=V(am);if(c.is(al)){if(c.is(T)){K(T.iconEnum.DROPHERE,true)}aj[al.param]=al.paramValue;ap=p.getNLSValue(al.key,aj,"ValidationError");u.warn(ap,R,"failed");ad()}else{if(c.is(Q)){u.notify("addToAuxiliaryView",[am]);u.info(p.getNLSValue("AbstractDragAndDropManager.RepositionAuxView"));Z()}else{if(c.is(ab)){u.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:false});ab.addNode(am,{onAddToTreeListFail:ak,onAddToTreeListComplete:ai,forceDBMode:ah})}}}},O=function O(ah,ai){if(c.is(ai)){if(c.is(ai.forceDBMode)&&ai.forceDBMode){X.push(ah);ad()}else{N(ah,ai)}}else{N(ah,ai)}if(X.length>0&&ag-1===M){new b(Y).then(function(){X.forEach(function(aj){N(aj,ai)})},ad())}},ae=function ae(){u.warn(p.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),R);u.debug("Failed to fetch refernce for PID: "+aa);ad()};R=u.log(S);af=l.getReference(aa);if(!c.is(af)){af=l.fetchRoot(aa,{onComplete:O,onFailure:ae,context:W,silent:true})}else{O(af)}},retrieveItems:function J(P){var Q=[],M,N,O,S="",T=["text/searchitems","text/plain","Text"],V,U;if(!c.is(P)){u.debug("ERROR: No dropped item found");return Q}O=c.is(P.dataTransfer.types.indexOf,"function")?"indexOf":"contains";for(V=0;V<T.length&&S==="";V++){U=P.dataTransfer.types[O](T[V]);if((c.is(U,"number")&&U>=0)||(c.is(U,"boolean")&&U===true)){S=T[V]}}if(""===S){u.debug("ERROR: No data retrieved");return Q}M=P.dataTransfer.getData(S);try{N=c.Json.decode(M)}catch(R){return Q}if(!c.is(N)){u.debug("ERROR: Parsing returned null");return Q}if(!c.is(N.data)){u.debug("ERROR: No data retrieved");return Q}if(!c.is(N.data.items,"array")){u.debug("ERROR: Items is not an array");return Q}return N.data.items},onDragStartCell:function e(R,Q){var M=[],T=Q.nodeModel,S=widget.data,P=m.get3DSpaceServiceName(),O={protocol:"3DXContent",version:"1.1",source:B.getConfig().appId,widgetId:widget.id,data:{items:[]}},N={properties:[function(){return{property:"referencePID",value:this.getReferencePID()}},function(){return{property:"instancePID",value:this.getInstancePID()}},function(){return{property:"absolutePath",value:this.getAbsolutePath()}},function(){return{property:"parentReferencePID",value:c.is(this.getParent().getReferencePID)?this.getParent().getReferencePID():null}},function(){return{property:"referenceType",value:this.getReferenceType()}},function(){return{property:"wuxID",value:this._getID()}},function(){return{property:"wuxlocalID",value:this._localID}},function(){return{property:"envId",value:m.getPlatformID({serviceId:P})}},function(){return{property:"serviceId",value:P}},function(){return{property:"contextId",value:[S.role,S.organization,S.collaborativeSpace].join(".")}},function(){return{property:"objectId",value:this.getReferencePID()}},function(){return{property:"objectType",value:this.getReferenceType()}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:p.getNLSValue(this.getReferenceType(),null,"Type"),}}]};if(!T.isSelected()){T.select()}Q.manager.getDocument().getXSO().get().forEach(function(U){M.push(U.dump(N))});O.data.items=M;this.serializeDragAndDropEvent(R,O);R.dataTransfer.effectAllowed="move"},getDragNDropInfo:function r(Q,P){var S,R,M,O={draggedItems:[],info:{fromWUX:false,dropPosition:null,fromSameSource:false,wuxLocalID:null,wuxID:null},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};if(c.is(Q)&&c.is(Q.dataTransfer)&&c.is(Q.dataTransfer.getData,"function")){R=Q.dataTransfer.getData("Text");if(c.is(R,"string")&&(R.length>0)){M=JSON.parse(R);if(c.is(M)&&c.is(M.widgetId,"string")){O.info.fromSameSource=(M.widgetId===widget.id)}}}if(c.is(P)&&c.is(P.nodeModel,"object")&&c.is(P.dropPosition)){O.info.fromWUX=true;O.info.dropPosition=P.dropPosition;O.targetTreeNodeModel=P.nodeModel}S=this.retrieveItems(Q);if(c.is(S,"array")){S.forEach(function N(U){var T={},V;if(c.is(U)){T.rootReferencePID=null;T.instancePIDsArray=c.is(U.absolutePath,"array")?U.absolutePath:null;T.name=c.is(U.displayName,"string")?U.displayName:null;T.type=c.is(U.referenceType,"string")?U.referenceType:(c.is(U.objectType)?U.objectType:null);T.typeNLS=c.is(U.displayType,"string")?U.displayType:(c.is(U.displayType)?U.displayType:null);T.securityContext=c.is(U.contextId,"string")?U.contextId:null;T.tenant=c.is(U.envId,"string")?U.envId:null;T.service=c.is(U.serviceId,"string")?U.serviceId:null;T.wuxID=c.is(U.wuxID,"number")?U.wuxID:null;T.wuxLocalID=c.is(U.wuxlocalID,"number")?U.wuxlocalID:null;if(c.is(T.instancePIDsArray,"array")&&(T.instancePIDsArray.length>0)){V=l.getInstance(T.instancePIDsArray[0]);if(c.is(V)){T.rootReferencePID=V.get("isAggregatedBy")}}else{T.rootReferencePID=c.is(U.referencePID,"string")?U.referencePID:(c.is(U.objectId)?U.objectId:null)}}O.draggedItems.push(T)});if(c.is(O.targetTreeNodeModel)){if(c.is(O.targetTreeNodeModel.getRootPID,"function")){O.targetRootReferencePID=O.targetTreeNodeModel.getRootPID();O.targetInstancePIDsArray=O.targetTreeNodeModel.getAbsolutePath();O.targetInstanceSiblingPID=O.targetTreeNodeModel.getSiblingsPID();O.targetType=O.targetTreeNodeModel.getReferenceType();O.info.wuxLocalID=O.targetTreeNodeModel._localID;O.info.wuxID=c.is(O.targetTreeNodeModel._getID,"function")?O.targetTreeNodeModel._getID():null}delete O.targetTreeNodeModel}}return O},processDropEffect:function f(M){var O=this,N=[],R=function R(V){var U=u.getBehavior("UXFactoryBehavior"),W=p.getNLSValue("AbstractDragAndDropManager.indexOrDBDialog"),T=p.getNLSValue("AbstractDragAndDropManager.RootsNotInIndex");U.showConfirmation(W,T,{attributes:["V_Name"],models:N},function S(X){if(c.is(X,"boolean")&&X){V()}})},Q=new b(function P(ad){var Y=false,W=u.getBehavior("ModelBehavior"),af=null,Z=u.getBehavior("WUXNodeModelBehavior"),ac=function ac(ai){var ak=new b(function aj(am,al){O.processRootDrop(M.parameters[ai].rootReferencePID,M.parameters[ai].addToAuxIfNotAcceptedType,ai,M.action.length,N,R,am,al)});return ak},ag=function ag(ai){var aj=new b(function ak(ao,am){var an=null,aq=null,ap=function ap(av){var aw=[];if(c.is(av,"array")){av.forEach(function at(ax){if(c.is(ax.PID,"string")&&(ax.PID>0)&&c.is(ax.V_TreeOrder)){l.getInstance(ax.PID).set("V_TreeOrder",ax.V_TreeOrder)}})}Z.prepareUpdate();M.parameters[ai].newChildrenPID.forEach(function au(ax){aw.push(l.getInstance(ax));l.removeInstance(ax)});aw.forEach(function ar(ax){l.addInstance(ax)});Z.pushUpdate();u.notify("stopProgress");ao()},al=function al(ar){u.warn(p.getNLSValue("AbstractDragAndDropManager.ReorderFailure"));u.debug("AbstractDragAndDropManager.ReorderFailure. Error Details: "+ar);u.notify("stopProgress");am()};u.notify("startProgress");an={listOrdered:M.parameters[ai].newChildrenPID,listModifiable:[M.parameters[ai].movedInstancePID]};aq={url:"modeler/ppr/persistChildrenOrder",method:"POST",onComplete:ap,onFailure:al,onTimeout:al,data:c.Json.encode(an)};m.webServiceRequest(aq)});return aj},ab=function ab(ak){var ai=b.reject(),aj=c.is(ak,"string")?ak:p.getNLSValue("AbstractDragAndDropManager.InternalError");u.warn(aj);return ai},V=function V(ai){var aj=c.is(M.parameters[ai],"array")?M.parameters[ai]:[M.parameters[ai]],al=[];aj.forEach(function ak(ap){var ao=l.getReference(ap.referencePID),an=new b(function am(av,ar){var at={onComplete:function au(aw){av({rootReferenceMdl:aw,actionIndex:ai})},onFailure:function aq(){ar(p.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))},};if(c.is(ao)){av({rootReferenceMdl:ao,actionIndex:ai})}else{l.fetchRoot(ap.rootReferencePID,at)}});al.push(an)});return b.all(al)},X=function X(ak){var al=ak||[],aj=[];al.forEach(function ai(ao){var an=new b(function am(ar,aq){if(c.is(ao.rootReferenceMdl)){if(l.needToQueryForChildren(ao.rootReferenceMdl.id)){l.getDescendantsFromServer(ao.rootReferenceMdl.id,function ap(){ar(ao)})}else{ar(ao)}}else{aq(p.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))}});aj.push(an)});return b.all(aj)},U=function U(aj){var ai=new b(function ai(am,al){if(c.is(aj,"array")){aj.forEach(function ak(ap){var ao=l.getReference(ap),an=function an(aq){var ar={};if(d(aq)){ar.action=["addRoot"];ar.parameters=[{rootReferencePID:aq.id}];ar.message=[null]}else{ar.action=["error"];ar.parameters=[null];ar.message=[p.getNLSValue("Drop.NotValidType.Title")]}f.call(O,ar).then(am,al)};if(c.is(ao)){an(ao)}else{l.fetchRoot(ap,{context:O,onComplete:an,onFailure:al,silent:true})}},O)}});return ai},aa=function aa(ak){var aj=new b(function ai(ap,am){var an=ak||[{actionIndex:null}],al=an[0].actionIndex,ao=c.is(al,"number")?M.parameters[al]:null;if(c.is(ao,"array")&&ao.length>0){u.notify("CreateMultipleLinks",[ao]);ap()}else{am("AbstractDragAndDropManager.DropEffectError")}});return aj},ae=function ae(ai){var ak=new b(function aj(ap,am){var an=ai||[{actionIndex:null}],al=an[0].actionIndex,ao=c.is(al,"number")?M.parameters[al]:null;u.notify("CreateLinkOrInstance",[ao]);ap()});return ak},S=function S(ai){var aj=new b(function ak(an,al){var am=c.merge({onComplete:an,onFailure:al},M.parameters[ai]);if(c.is(W)){W.moveInstance(am)}else{u.debug("Model behavior is not available to reparent");al()}});return aj},ah=function ah(ak,ai){var aj=null;switch(ak){case"addRoot":aj=ac(ai);break;case"addChangeAction":aj=L.setCAAndGetDetails(M.parameters[ai].rootReferencePID).then(U,ab);break;case"createLink":aj=V(ai).then(X).then(aa).then(b.resolve,ab);break;case"createLinkOrInstance":aj=V(ai).then(X).then(ae).fail(ab);break;case"reorderRoots":aj=ac(ai);break;case"reorder":aj=ag(ai);break;case"reparent":aj=S(ai);break;case"aggregatedAction":aj=b.resolve();break;case"error":aj=ab(M.message[ai]);break;default:aj=ab("AbstractDragAndDropManager.DropEffectError");break}return aj};if(c.is(M)){if(c.is(M.action,"array")){M.action.forEach(function T(ak,ai){var aj=function aj(){return ah(ak,ai)};if(c.is(af)){af=af.then(aj,aj)}else{af=ah(ak,ai)}},this);af.then(ad,ad)}}return Y});return Q},onTreeListViewDrop:function i(Q,P){var M=true,N=this.getDragNDropInfo(Q,P),O;if(c.is(N)){O=j(N);if(c.is(O)){this.processDropEffect(O)}}return M},onDragEnterColumnHeader:function s(){var O=u.getBehavior("DropZoneViewBehavior");if(c.is(O)){if(c.is(n)){n.promise.then(function N(){y=c.Promise.deferred();K(O.iconEnum.PLUS,false);n=null},function M(){u.log("failed")})}else{y=c.Promise.deferred();K(O.iconEnum.PLUS,false)}}return true},onDragLeaveColumnHeader:function h(){var M=u.getBehavior("DropZoneViewBehavior");if(c.is(M)){K(M.iconEnum.DROPHERE,true);if(c.is(y)){y.resolve()}}return true},onDragEnterBlank:function H(){var O=u.getBehavior("DropZoneViewBehavior");if(c.is(O)){if(c.is(y)){y.promise.then(function N(){K(O.iconEnum.PLUS,false);y=null},function M(){u.log("failed")})}else{K(O.iconEnum.PLUS,false)}n=c.Promise.deferred()}return true},onDragLeaveBlank:function k(){var M=u.getBehavior("DropZoneViewBehavior");if(c.is(M)){K(M.iconEnum.DROPHERE,true)}if(c.is(n)){n.resolve()}return true},onDropCell:function G(O,N){var P=u.getBehavior("DropZoneViewBehavior");try{return this.onTreeListViewDrop(O,N)}catch(M){if(c.is(P)){K(P.iconEnum.DROPHERE,true)}return true}},onDropBlank:function x(O,N){var P=u.getBehavior("DropZoneViewBehavior");try{return this.onTreeListViewDrop(O,N)}catch(M){if(c.is(P)){K(P.iconEnum.DROPHERE,true)}return true}},onDropColumnHeader:function I(O,N){var P=u.getBehavior("DropZoneViewBehavior");try{c.Json.decode(O.dataTransfer.getData("Text"));return this.onTreeListViewDrop(O,N)}catch(M){if(c.is(P)){K(P.iconEnum.DROPHERE,true)}return true}}}};return a});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI",["UWA/Core",],function(b){var a=function a(z,s,D,m,j){var h,n,c,f,l,q,e,p,E=D.getComponent("TooltipModel"),y=null,k=null,d,C,o,t,B,w;d=function d(){c=D.createElement("div",{"class":"implementedRevChooser-dlg-container"});t();B();w()};C=function C(G){var F={disabled:true,defaultWidth:"350",defaultHeight:"350",modalFlag:false,resizableFlag:true};n=b.merge(G,F);d();h=D.create("Dialog",{title:m.getNLSValue(n.cmdTitle),domId:n.cmdId,content:c,identifier:n.cmdId,width:n.defaultWidth,height:n.defaultHeight,modalFlag:n.modalFlag,resizableFlag:n.resizableFlag,buttons:{Cancel:D.create("Button",{onClick:function(){h.close()}}),Ok:D.create("Button",{disabled:b.is(n.disabled)?n.disabled:true,emphasize:"primary",onClick:function(){var I=s.getBehavior("WUXNodeModelBehavior"),J=I.getSelectedNodes(),H={};if(b.is(J)&&J.length>0){k=J[0].getReferencePID()}H.implementingId=y;H.implementedId=k;if(n.optionsSection===true){if(n.scopeOption==="ComboBox"){H.scopeCreation=l.value}if(b.is(n.mfgItemPrefix)&&n.mfgItemPrefix){H.mfgItemPrefix=q.value}}n.onOKCallBack(H)}}),}});h.close=function(){o()}};o=function o(){var F=s.getBehavior("WUXNodeModelBehavior");if(b.is(h)){if(b.is(e)){F.removeEventListener(e)}if(b.is(p)){F.removeEventListener(p)}F.emptyNodeModel();h.destroy();f=void 0;c=void 0;h=void 0}if(n.onCancelCallback){n.onCancelCallback()}};t=function t(){var F=D.createElement("div",{}).inject(c),G=m.getNLSValue("ImplementUI.Implementing"),H=m.getNLSValue("ImplementUI.SelectImplementing");f=D.create("SelectionControl",{title:G,message:H,renderTo:F})};B=function B(){var J=m.getNLSValue("ImplementUI.SelectImplementedRevision"),G=D.createElement("div",{"class":"implementedSection-header",html:"<h5>"+J+"</h5>"}),F=D.createElement("div",{"class":n.implementedRevTreeListCSSStyle}),I=s.getBehavior("WUXNodeModelBehavior"),H=s.getBehavior("TreeListViewBehavior");G.inject(c);F.inject(c);H.createTreeListView(n.moduleOptions);H.loadDocument(I.getWUXNodeModel());H.getContent().inject(F)};w=function v(){var I,F,H,G;if(n.optionsSection===true){G=D.createElement("div",{"class":"accordeon-section-container, optionsSection"}).inject(c);I=D.createElement("div",{"class":"options-container"});D.create("Accordeon",{items:[{header:m.getNLSValue("Expander.Options"),content:I,expandedFlag:true}],style:"filled-separate"}).inject(G);if(b.is(n.scopeOption)){F=D.createElement("div",{"class":"scope-option-container"}).inject(I);D.createElement("div",{"class":"wux-title-textElement",text:(m.getNLSValue("ImplementUI.CreateScopeForChildren"))}).inject(F);if(n.scopeOption==="ComboBox"){l=D.create("ComboBox",{enableSearchFlag:false,elementsList:[{labelItem:m.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},]}).inject(F)}}if(b.is(n.mfgItemPrefix)&&n.mfgItemPrefix){H=D.createElement("div",{"class":"mfgItemPrefix-option-container"}).inject(I);D.createElement("div",{"class":"wux-title-textElement",text:(m.getNLSValue("ImplementUI.PrefixForMfgItems"))}).inject(H);H.tooltipInfos=new E({shortHelp:m.getNLSValue("ImplementUI.PrefixForMfgItems")});q=D.create("LineEditor",{placeholder:m.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder"),}).inject(H)}}};return{createUI:function A(F){C(F)},isVisible:function u(){return b.is(h)?h.visibleFlag:false},destroyUI:function r(){if(b.is(h)){h.close()}},updateImplementingLabel:function x(G){var F=s.getBehavior("WUXNodeModelBehavior");y=G;f.updateLabel([j.getReferenceModel(G)]);F.emptyNodeModel();h.clearMessages()},updateImplementedRevnList:function g(N,F,P){var I,M=false,O=false,L,K,H={},J={},G=s.getBehavior("WUXNodeModelBehavior");for(I=0;I<F.length;I++){L=F[I];K=L.PID;if(!M){if(N===K){M=true}else{continue}}if(P===true){P=false;continue}J={};J["V_Name.reference"]=L.V_Name;J["revision.reference"]=L.revision;H={id:K,referencePID:K,referenceType:L.type,grid:J,label:L.V_Name,icons:[m.getIconURLFromKey(L.PPRTYPE)]};G.addNodeModel(H);O=true}if(O){e=G.addEventListener("select",function(Q){if(b.is(h)){h.buttons.Ok.disabled=Q.data.nodeModel.getTreeDocument().getSelectedNodes().length<1}});p=G.addEventListener("unselect",function(Q){if(b.is(h)){h.buttons.Ok.disabled=Q.data.nodeModel.getTreeDocument().getSelectedNodes().length<1}})}else{h.error(m.getNLSValue("ImplementBehavior.Validation.NoHigherRevision"))}},showMessages:function i(G,F){if(F==="info"){h.info(G)}else{if(F==="warning"){h.warning(G)}else{if(F==="error"){h.error(G)}else{s.debug("type of message is invalid")}}}}}};return a});define("DS/DELPPWViewBehaviors/ExpandFilterBehavior",["UWA/Core","UWA/Promise"],function(c,a){var b=function(h,t,i,o,g){var q,s;var e,j,d,n,f,k;e=function e(u){var v;v=t.getBehavior(u);if(!c.is(v)){t.debug(u+"is not available")}return v};j=function j(u){var v=e("WUXNodeModelBehavior"),w=false;if(c.is(v)){w=v.getRoots().some(function(x){return(u.indexOf(x)!==-1)})}return w};d=function d(x){var z=x||null,A={},w=null,v=[],y,u=false;z=c.is(z,"string")?JSON.parse(z):z;A=c.is(z)?z.CVQuery:{};v=c.is(z.filterRootIds)?z.filterRootIds:[];u=c.is(z.empty)?z.empty:false;y=v.reduce(function(C,D){var B;B=c.is(D,"array")&&D.length>0?D[0]:D;if(c.is(B,"string")){C.push(B)}return C},[]);if(j(y)){w=c.is(z.CVQuery3D)?z.CVQuery3D:null;if(u){f(y,A,w)}else{n(y,A,w)}}};n=function n(u,y,v){t.notify("startProgress");new a(function(D,C){var z,B=function B(E){D(E)},A=function A(){C(o.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))};if(c.is(y)&&c.is(u)){z={ordered:false,context:this,doNotExpand:true,expandLevel:-1,filterQuery:y,filterQuery3d:v,onFailure:A,onTimeout:A,onCancel:A};i.getDescendantsFromServer(u,B,z)}}).then(function x(A){var B,z=c.is(A.instancesAndReferences)?A.instancesAndReferences:[];if(z.length===0){t.warn(o.getNLSValue("ExpandFilter.EmptyResult.Message"))}else{B=t.getBehavior("Viewer3DBehavior");if(c.is(B)){B.apply3DFilter(u,v)}}k(u,y);t.notify("stopProgress");t.notify("ExpandFilterApplied")},function w(z){t.warn(z);t.notify("stopProgress")})};f=function f(u,A,v){var y;if(0<u.length&&c.is(A)){y=u.every(function z(B){return(B!=="")});if(y){t.notify("startProgress");u.forEach(function(B){i.removeFilterFromCollection(B,A)});new a(function(F,E){var B,C=function C(G){F(G)},D=function D(){E(o.getNLSValue("ExpandFilter.RemoveFilter.ExpandFailed"))};B={ordered:false,context:this,doNotExpand:true,expandLevel:-1,onFailure:D,onTimeout:D,onCancel:D};i.getDescendantsFromServer(u,C,B)}).then(function x(B){var C=t.getBehavior("Viewer3DBehavior");if(c.is(C)){C.apply3DFilter(u,v,{removeFilter:true})}k(u);t.notify("stopProgress");t.notify("ExpandFilterRemoved")},function w(B){t.warn(B);t.notify("stopProgress")})}}};k=function k(v,w){var u=e("WUXNodeModelBehavior"),y;y=c.is(w)?w:null;if(c.is(u)){v.forEach(function x(z){u.filterChildren(z,y)})}};return{onStart:function r(u){var v;s=h.getConfig();v=c.is(u.disableExpandFilter)?u.disableExpandFilter:false;if(!v){q=g.create(g.PROXY.FilterProxy,{tenant:"OnPremise",processingMode:"appProcessing"});if(c.is(q.setNGFilterOptions,"function")){q.setNGFilterOptions({expandServices:"expand",appID:s.appContext.widget.data.appId})}q.addEvent("ApplyNGFilter",d)}},onStop:function l(){if(c.is(q)){q.removeEvent("ApplyNGFilter",d);this.resetFilterUI();q.cleanProxy();q=null}},resetFilterUI:function p(){q.resetNGFilterUI({widgetId:s.appContext.widget.getId()})},getFilterProxy:function m(){return q}}};return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin"],creator:b}});define("DS/DELPPWViewBehaviors/LoadRecentBehavior",["UWA/Core"],function(b){var a=function a(d,g,h){var j=false;return{listenTo:function i(){return{LoadRecentContent:this.loadRoots}},onStart:function f(k){j=b.is(k.disableLoadRecent)?k.disableLoadRecent:false},onStop:function e(){},loadRoots:function c(o){var n={action:[],parameters:[]},m,k=[],l=g.getBehavior("TreeListViewBehavior");if(b.is(o)&&b.is(o.store)){k=h.getStoreRoots(o.store,g.getId())}else{k=h.getRoots(g.getId())[0]}if(b.is(l)&&b.is(k,"array")&&k.length>0){m=k.reduce(function(q,p){return q.concat(p)},[]);if(b.is(m,"array")&&m.length>0){m.forEach(function(p,q){n.action[q]="addRoot";n.parameters[q]={rootReferencePID:p}});l.processDropEffect(n)}}}}};return{plugins:["RootsPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/RootsBehavior",["UWA/Core"],function(b){var a=function a(c,f,h){return{onStart:function e(){},onStop:function d(){},getRoots:function g(){return h.getRoots(f.getId())},getRootsFromPreferences:function i(){return h.getRootsFromPreferences(f.getId())},}};return{plugins:["RootsPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/SelectionBehavior",["UWA/Core"],function(b){var a=function a(d,m,k,f){return{onStart:function l(){},onStop:function h(){},getSelections:function j(){return k.getSelections(m.getId())},getSelectedNodesCount:function i(){return k.getSelectedNodesCount(m.getId())},getSelectionsWithPaths:function c(){return k.getSelectionsWithPaths(m.getId())},getSelectedRefs:function g(){var n=[],p,o;o=k.getSelections(m.getId());o.forEach(function(q){q.forEach(function(r){p=f.getReference(r);if(b.is(p)){n.push(p)}})});return n},getSelectedInsts:function e(){var p=[],o,n;n=k.getSelections(m.getId());n.forEach(function(q){q.forEach(function(r){o=f.getInstance(r);if(b.is(o)){p.push(o)}})});return p}}};return{plugins:["SelectionPlugin","DatabasePlugin"],creator:a}});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI",["UWA/Core"],function(b){var a=function(y,U,j,F,l,A,x){var k=null,O,aa=[],L=null,v=[],X=[],Q=null,n,Y,T=j.getComponent("TooltipModel"),ab=null,J=null,W,D,h,K=null,u=null,z=null,f=null,H=null,I,r=[],E=[],ac=[],t,o,M,g,C,N,m,V,q,Z;t=function t(){var af=F.getNLSValue("ImplementUI.Implementing"),ag=F.getNLSValue("ImplementUI.SelectImplementing"),ah=F.getNLSValue("ImplementUI.Implemented"),ae=F.getNLSValue("ImplementUI.SelectImplemented");L=j.createElement("div",{"class":"ImplementUI-Container"});Q=j.createElement("div",{"class":"selectionForm-Main-Container"}).inject(L);if(O.implementingSection===true){Y=j.create("SelectionControl",{title:af,message:ag,renderTo:Q,multiSelection:(b.is(O.multiSelectionOfImplementing))?O.multiSelectionOfImplementing:null})}if(O.implementedSection===true){n=j.create("SelectionControl",{title:ah,message:ae,renderTo:Q,multiSelection:(b.is(O.multiSelectionOfImplemented))?O.multiSelectionOfImplemented:true})}if(O.optionsSection===true){ab=j.createElement("div",{"class":"options-section-container"}).inject(L);N()}f=j.createElement("div",{"class":"dcForm-Main-Container"}).inject(L)};o=function o(ae,af){var ag;if(b.is(af)){if(af.includes("/")){af=af.split("/")[1]}ag=F.getNLSValue(ae,{type:F.getNLSValue(af||"",null,"Type")})}else{ag=F.getNLSValue(ae)}return ag};M=function M(ag){var aj,ae=null,ai,af,ah="PLMEntity.V_Name";O=ag;t();k=j.create("Dialog",{title:o(O.cmdTitle,O.newObjType),domId:O.cmdId,content:L,resizableFlag:true,modalFlag:O.modalFlag,buttons:{Cancel:j.create("Button",{onClick:function(){k.close()}}),Ok:j.create("Button",{disabled:b.is(aj)?aj:true,emphasize:"primary",onClick:function(){var ak={},am,al;if(b.is(z)&&true===U.getPreferenceValue("showDialog")){af=z.validate();if(af.result!==true){k.error(af.message);k.buttons.Ok.disabled=false;return}ae=z.getValues();if(ae[ah]!==aa[0][ah]){al=ae[ah]}for(am=0;am<aa.length;am++){b.merge(aa[am],ae)}if(al){if(aa.length>1){for(am=0;am<aa.length;am++){aa[am][ah]=al+"_"+(am+1)}}else{aa[0][ah]=al}}}else{if(b.is(O.newObjType)){if(b.is(X,"array")){for(am=0;am<X.length;am++){ae={};ae.V_Type=O.newObjType;aa[am]=ae}}}else{aa=null}}ai=b.clone(aa);ak.implementingId=H;ak.implementedIDs=E;ak.implementedPaths=ac;ak.implementingPaths=r;ak.newObjAttributes=ai;ak.isInstancePossible=b.is(O.isInstancePossible)?O.isInstancePossible:null;if(O.optionsSection===true){if(O.scopeOption==="ComboBox"){ak.scopeCreation=K.value}else{if(O.scopeOption==="Toggle"){ak.scopeCreation=K.checkFlag}}if(b.is(O.mfgItemPrefix)&&O.mfgItemPrefix){ak.mfgItemPrefix=u.value}}O.onOKCallBack(ak)}}),}});k.close=function(){g()}};C=function C(){if(b.is(h)){h.destroy()}if(b.is(z)){z.destroy();z=null}};g=function g(){k.destroy();C();f=null;ab=null;J=null;K=null;H=null;E=[];ac=[];r=[];k=null;L=null;if(O.onCancelCallback){O.onCancelCallback()}};N=function N(){var ae;J=j.createElement("div",{"class":"Basic-Section-container"}).inject(ab);ae=j.create("Accordeon",{items:[{header:F.getNLSValue("Expander.Options"),content:J,expandedFlag:true}],style:"filled-separate"}).inject(ab);if(b.is(O.scopeOption)){W=j.createElement("div",{"class":"scope-option-container"}).inject(J);j.createElement("div",{"class":"wux-title-textElement",text:(F.getNLSValue("ImplementUI.CreateScopeForChildren"))}).inject(W);W.tooltipInfos=new T({shortHelp:F.getNLSValue("ImplementUI.CreateScopeForChildren")});if(O.scopeOption==="ComboBox"){K=j.create("ComboBox",{enableSearchFlag:false,elementsList:[{labelItem:F.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},{labelItem:F.getNLSValue("ImplementUI.ScopeCreation.LeafScope"),valueItem:"Leaf"},]}).inject(W)}}if(b.is(O.mfgItemPrefix)&&O.mfgItemPrefix){D=j.createElement("div",{"class":"mfgItemPrefix-option-container"}).inject(J);j.createElement("div",{"class":"wux-title-textElement",text:(F.getNLSValue("ImplementUI.PrefixForMfgItems"))}).inject(D);D.tooltipInfos=new T({shortHelp:F.getNLSValue("ImplementUI.PrefixForMfgItems")});u=j.create("LineEditor",{placeholder:F.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder"),}).inject(D)}return ae};V=function V(af,ae){k.title=o(O.cmdTitle,af),ae.inject(L);k.clearMessages()};m=function B(){if(E.length>0){if(O.implementingSection===true){if(b.is(H)){k.buttons.Ok.disabled=false}else{k.buttons.Ok.disabled=true}}else{k.buttons.Ok.disabled=false}}},q=function q(af){var ah,ag,ae=[];if(b.is(af,"array")){for(ah=0;ah<af.length;ah++){ag=af[ah].get("V_Name");ae.push(ag)}}return ae},Z=function Z(){var ae;if(O.checkForImplementingScope===true){if(x.isScoped(H)){ae=F.getNLSValue(F.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:I}));k.error(ae)}}};return{createUI:function e(ae){M(ae)},isVisible:function i(){return b.is(k)?k.visibleFlag:false},destroyUI:function w(){if(b.is(k)){k.close()}},updateImplemented:function S(ah){var ag=[],af=[],ae=[];v=ah;ac=[];E=[];k.clearMessages();if(ah.length===0){return}ah.forEach(function(ai){af.push(ai.id);ae.push(ai.path);ag.push(l.getReferenceModel(ai.id))});n.updateLabel(ag);X=q(ag);if(O.multiSelectionOfImplemented===true){E=af;ac=ae}else{if(ah.length===1){E=[af[0]];ac=[ae[0]]}else{k.buttons.Ok.disabled=true;C()}}m();Z()},getImplementedIDs:function s(){return E},updateImplementing:function p(ai){var af=[],ag=[],ah=[],ae;H=null;r=[];k.clearMessages();if(ai.length===0){return}ai.forEach(function(aj){ag.push(aj.id);ah.push(aj.path);af.push(l.getReferenceModel(aj.id))});ae=Y.updateLabel(af);if(ae===false){k.buttons.Ok.disabled=true}else{if(b.is(v,"array")){this.updateImplemented(v)}if(O.multiSelectionOfImplementing===true){}else{if(ai.length===1){H=ag[0];r=[ah[0]];I=af[0].get("V_Name")}else{k.buttons.Ok.disabled=true;C()}}m();Z()}},getImplementingID:function R(){return H},showDCFormForAssign:function G(ae){var af;if(b.is(H)&&E.length>0){O.isInstancePossible=ae;if(ae===true){aa=[];if(b.is(X,"array")){for(af=0;af<X.length;af++){aa.push({"PLMEntity.V_Name":X[af]})}}if(!b.is(z)){z=j.create("DataCollectionUI",{type:O.newObjType,onTypeChange:V,renderTo:f,defaultValues:aa})}else{z.updateToDefaultValues(aa[0])}}else{C()}}},showDCFormForCreate:function d(){var ae;if(E.length>0){aa=[];if(b.is(X,"array")){for(ae=0;ae<X.length;ae++){aa.push({"PLMEntity.V_Name":X[ae]})}}if(!b.is(z)){z=j.create("DataCollectionUI",{type:O.newObjType,onTypeChange:V,renderTo:f,defaultValues:aa})}else{z.updateToDefaultValues(aa[0])}}},getSelectionsWithPaths:function P(){var af={},ae=A.getSelectionsWithPaths(U.getId());af.selNodes=[];af.bUpdateImplemented=false;af.bUpdateImplementing=false;if(ae.length<=0){return af}if(ae[0].length!==0){af.selNodes=ae[0];af.bUpdateImplemented=true;af.bUpdateImplementing=false}else{if(ae[1].length!==0){af.selNodes=ae[1];af.bUpdateImplemented=false;af.bUpdateImplementing=true}}return af},showErrorMultipleImplementedSelected:function ad(ae){n.showWarningMessage(ae);ac=[];E=[];k.buttons.Ok.disabled=true},showMessages:function c(af,ae){if(ae==="info"){k.info(af)}else{if(ae==="warning"){k.warning(af)}else{if(ae==="error"){k.error(af)}else{U.debug("type of message is invalid")}}}}}};return a});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager",["UWA/Core"],function(b){var a=function a(o,k,i,e,f,h){var m,l=function l(q){var p;if(b.is(q)){q=(Array.isArray(q))?q:[q];for(p=0;p<q.length;p++){m[q[p].name]=(Array.isArray(q[p].Attribute))?q[p].Attribute:[q[p].Attribute]}}},c=function c(p){k.getXMLValues(p,function r(s){var t=s.Tooltips;l(t.Tooltip)},function q(){o.debug("Failed to get"+p+"XML configuration file");return})},j=function j(p){return m[p]},d=function d(C){var v,r="",x,B,w,u,s,A,z,y=e.getReference(C.nodeModel.getReferencePID()),t=b.is(C.nodeModel.getInstancePID()),q=C.manager.options.columns[C.data.columnID].tooltipIndex,p;if(t){p=e.getInstance(C.nodeModel.getInstancePID())}if(b.is(q)){x=j(q);if(b.is(x)){for(v=0;v<x.length;v++){B=h.getAttributeInfoFromColumn(x[v]);z=f.getAttributeInfo(B.attributeName);if(B.objType==="instance"&&!t){continue}if(B.objType==="instance"&&b.is(p)){u=p.get(B.dataIndex)}else{if(b.is(y)){u=y.get(B.dataIndex)}}if(b.is(u)&&u!==""){if(b.is(z)&&h.hasMagnitude(z)){s=h.getMagnitudeValue(u,z);A=h.getNLSForUnit(z);u=s+" "+A}else{u=u==="NULL"?"":u}w=b.is(z)?h.getNLS(z):B.attributeName;r+=w+" : "+u+"\n"}}}}return r};return{init:function n(p){m={};c(p)},getTooltipValue:function g(p){return d(p)}}};return a});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil",["UWA/Core"],function(b){var a=function a(f,e,d){var h,c;h=function(n,i){var k=d.getAttributesConfiguredOnDocumentColumn(i),j=n.get("dataelements"),l,m="";if(!b.is(k)){m=j.title}else{for(l=0;l<k.length;l++){if(b.is(j[k[l]])&&j[k[l]]!==""){m=m+j[k[l]]+" "}}}return m},c=function c(n,o){var m,l,j,i,k={},p=d.getConnectedDocuments(n);if(!Array.isArray(o)){o=[o]}if(b.is(p)&&o.length>0){for(l=0;l<o.length;l++){j=o[l];if(j.split(".")[1]!=="document"){continue}k[j]=[];for(m=0;m<p.length;m++){i=d.getDocument(p[m]);k[j].push(h(i,j))}}}return k};return{fillNodeOptions:function g(k,l){var i,j=c(k.referencePID,l);for(i in j){if(j.hasOwnProperty(i)){k.grid[i]=j[i]}}return k},getDocumentNodeOptions:c}};return a});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog",["UWA/Core","UWA/Controls/Abstract"],function(c,b){var a=function a(i,g){var d,f=(c.is(g)&&c.is(g.check,"string"))?true:false,l=b.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:false,showColumnHeaders:false},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function j(m){this._parent(m);this.buildSkeleton()},buildSkeleton:function(){var m=c.createElement("table",{"class":"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=m;this.objectsTableHead=c.createElement("thead");this.objectsTableFoot=c.createElement("tfoot");this.objectsTableBody=c.createElement("tbody",{id:"tableBody"});this.objectsTableHead.inject(m);this.objectsTableBody.inject(m);this.objectsTableFoot.inject(m)},setData:function k(p){var n=this,r,o,m=[],q=[],s=(c.is(p)&&c.is(p.attributes,"array"))?p.attributes:[],t=(c.is(p)&&c.is(p.models,"array"))?p.models:[];if(n.options.appendObjects===false){n.empty()}if(n.options.showColumnHeaders&&n.objectsTableBody!==null){if(s.length>0){s.forEach(function(u){m.push({tag:"th",text:u})});r=c.createElement("tr",{html:m});n.objectsTableHead.appendChild(r)}}if(n.objectsTableBody!==null){if(t.length>0){t.forEach(function(u){q=[];s.forEach(function(v){o=u.get(v);q.push({tag:"td",text:c.is(o)?o:""})});if(q.length>0){r=c.createElement("tr",{html:q});n.objectsTableBody.appendChild(r)}})}}},empty:function e(){if(this.objectsTableBody!==null){while(this.objectsTableBody.firstChild){this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}}}});d=function d(r,o,t,s,q){var m,p,n=c.createElement("div",{"class":"confirmation-dialog-content-container"});if(c.is(o,"string")){o=c.createElement("span",{"class":"confirmation-dialog-message",text:o});o.inject(n)}if(c.is(q)){q.inject(n)}if(f){p=i.create("Toggle",{type:"checkbox",checkFlag:false,label:g.check});p.inject(n)}m=i.create("Dialog",{title:r,content:n,minHeight:100,minWidth:400,modalFlag:true,resizableFlag:true,buttons:{Cancel:i.create("Button",{onClick:function(){m.close();t.apply(null,[false,s])}}),Ok:i.create("Button",{disabled:false,emphasize:"primary",onClick:function(){m.close();t.apply(null,[true,s,c.is(p)?p.checkFlag:null])}}),}});m.close=function(){this.destroy();o=null;r=null;m=null}};return{show:function h(r,o,p,t){var s,q,m,n;if(c.is(p)){if(c.is(p.models)){s=p.models;if(s.length>0){n=new l(g);n.setData(p);q=c.createElement("div",{"class":"confirmation-objectList"});m=n.getContent();m.inject(q)}}}d(r,o,t,s,q)}}};return a});define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument",["UWA/Core","UWA/Class","DS/Tree/TreeDocument"],function(g,c,f){var b=f.extend({name:"TreeDocument",getTreeNodeModel:function a(j,h){var i=null;h=h||{};if(!j){throw new Error("id is not defined")}i=this.searchTree(j);if(g.is(h.returnFirstOne)&&h.returnFirstOne){if(0<i.length){i=i[0]}else{i=null}}return i},getHighlightedNodes:function e(){var i;i=this.search({match:function h(k){var j=k.nodeModel;if(j.isHighlighted()){return true}},useTransaction:false});if(0===i.length){i=null}return i},searchTree:function d(h,i,l,k){var m,j=this.search({match:function(n){if(k&&!n.nodeModel.isRoot()){return false}if(!i||"PID"===i){if(h===n.nodeModel.getInstancePID()){return true}if(h===n.nodeModel.getReferencePID()){return true}}else{if(i){m=l?".instance":".reference";if(h===n.nodeModel.options.grid[i+m]){return true}}}},useTransaction:false});return j}});return b});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil",["UWA/Core"],function(b){var a=function a(l,e,f,d,i){var c,m,h;h=function h(p,r,o,q){var n;if(d.getImplementLinkType()===q){n=d.getPathToScope(o);if(!b.equals(p,n)&&!b.equals(r,n)){return false}}return true},c=function c(n,t,r,v){var s={},p,w,q=[],o=b.is(n,"array")?n:[n];p=r||t;if(!b.is(p)){return}q=e.getImpacted(p);o.forEach(function u(x){var y;if(x.split(".")[1]==="relation"){s[x]=[];y=f.getRelationsConfiguredOnColumn(x);if(y){q.forEach(function z(P){var R=P.get("from"),O=P.get("to"),S=P.get("type"),I,U,F,N=false,M,T,Q,H,B,E=null,K,J="",V,D=" ",A,C,G=function G(W,X){if(W.length>0){W.forEach(function(Y){if("Relation"===X||"relation"===X){V=b.is(P.get(Y.name))?P.get(Y.name):""}else{V=b.is(U.get(Y.name))?U.get(Y.name):""}if(J!==""){J+=D}J+=V})}else{if(b.is(U)){J=U.get("V_Name")||U.get("name")||U.get("PLM_ExternalId")}else{J=i.getNLSValue("TableView.RelationsColumn.Unknown")}}return J},L=function L(X,W){B=(b.is(X)&&b.is(X.display_icon))?X.display_icon:null;if(B==="relation"){K=S}else{K=W}return K};if(Array.isArray(R)&&Array.isArray(O)&&Array.isArray(v)){A=R;R=A[A.length-1];C=O;O=C[C.length-1];if(b.is(d.isLinkValidForOccPath,"function")&&!d.isLinkValidForOccPath(A,C,v,S)){return}}I=(r===R||t===R)?O:R;F=b.is(S)?S:null;M=b.is(y[F])?y[F]:null;if(b.is(M)&&b.is(M.attribute_source)&&b.is(M.direction)){switch(M.direction){case"To":N=(r===R||t===R)?true:false;break;case"From":N=(r===O||t===O)?true:false;break;case"Both":N=true;break;default:N=false;l.debug("Direction configured for "+F+" in XML is invalid.")}}if(true===N){if(I){if(Array.isArray(I)){U=e.getInstance(I[I.length-1])}else{U=e.getReferenceModel(I)}}T=("Type"===M.attribute_source)?(b.is(U)?U.get("type"):null):F;w=b.is(T)?y[T]:null;H=f.getRelationsColumnDisplayOptions(T);if(f.isObjectConstraint()&&x===f.getConstraintRelationName()){if(w){E=w}}else{E=b.is(H.Attribute)?H.Attribute:[]}if(b.is(E)){Q=y[S].attribute_source;J=G(E,Q);K=L(H,T);s[x].push({Icon:K,Value:J})}}})}}});return s};m=function k(n,o,t){var r={},v,q=[],s=[],u=l.getBehavior("WUXNodeModelBehavior");if(!b.is(u)){l.debug("nodeModelBehavior is not available to update the relation attributes.");return}if(!b.is(o)){return}q=e.getImpacted(o);q.forEach(function p(B){var x,A=B.get("from"),D=B.get("to"),z=B.get("type"),w,y,C;if(b.is(A,"array")&&b.is(D,"array")&&b.is(t,"array")){y=A;A=y[y.length-1];C=D;D=C[C.length-1];if(!h(y,C,t,z)){return}}w=o===A?D:A;if(b.is(w)){if(b.is(w,"array")){x=e.getInstance(w[w.length-1])}else{x=e.getReference(w)}v=u.getNodeInfo(x.id,true);if(b.is(v)){if(b.is(v.instancePID)){r=c(n,v.referencePID,v.instancePID,t)}else{if(b.is(v.referencePID)){r=c(n,v.referencePID,null,t)}}if(b.is(r)){s[x.id]={attributes:r}}}}});return s};return{fillNodeOptions:function g(q,r,s,p){var o=!b.is(s),u=o?q.referencePID:s.PID,t=c(r,u,null,p),n;for(n in t){if(t.hasOwnProperty(n)){if(b.is(q.grid[n],"array")&&b.is(s)){q.grid[n]=q.grid[n].concat(t[n])}else{q.grid[n]=t[n]}}}return q},getRelationAttributes:function j(v,p,A){var y,q,r=[],t,w,o,s,x,u=[],z=l.getBehavior("WUXNodeModelBehavior"),n;if(!b.is(z)){l.debug("nodeModelBehavior is not available to update the relation attributes.");return}y=function y(B){x=z.getNodeInfo(B);if(b.is(x,"array")){x.forEach(function(C){if(b.is(C.instancePID)){n=b.is(B,"array")?B:null;s=c(p,C.referencePID,C.instancePID,n);u[C.absPath]={attributes:s}}else{if(b.is(C.referencePID)){s=c(p,C.referencePID);u[C.referencePID]={attributes:s}}}})}};if(v.isConnection()){y(v.get("from"));y(v.get("to"))}else{o=v.changedAttributes();if(b.is(o)){q=v.get("type");w=f.getRelationsColumnDisplayOptions(q);if(b.is(w)){w.Attribute.forEach(function(B){r.push(B.name)})}else{r[0]="V_Name"}for(t=0;t<r.length;t++){if(o.hasOwnProperty(r[t])){u=m(p,v.id,A);break}}}}return u}}};return a});define("DS/DELPPWViewBehaviors/EditAttributeBehavior",["UWA/Core"],function(b){var a=function(p,l,n,e,i,h){var k=n.getComponent("Button"),c,r,t,m,u=null,f=null,g=function g(v){var x=r.createElement("div",{"class":"section-container"}),w={attribute:v},y={section:w};u=r.create("FormUI",{sections:y,renderTo:x,headerAccordean:false});return x},q=function q(x,w,v){c=r.createElement("div",{"class":"EditAttribute-Dialog"});if(b.is(r)){f=r.create("Dialog",{title:x,domId:"EditAttributeUI-Dialog",content:c,resizableFlag:true,modalFlag:true,buttons:{Cancel:new k({onClick:function(){f.close()}}),Ok:new k({disabled:false,emphasize:"primary",onClick:function(){var D,C,B,A,z,y;y=u.validate();if(y.result!==true){f.error(y.message);f.buttons.Ok.disabled=false;return}C=u.getValues();for(B in C){if(C.hasOwnProperty(B)){for(A=0;A<v.length;A++){if(B===v[A].attributeInfo.FullName){D=C[B];v[A].newValue=D;z=v[A].instOrRef}}}}if(b.is(t&&z)){t.updateModelAttribute(w,v,D)}else{if(b.is(m)){m.updateLinkAttributes(w,v)}}f.close()}}),}});f.close=function(){this.destroy();if(b.is(u)){u.destroy()}if(b.is(c)){c.destroy()}f=null}}else{l.debug("uxFactoryBehavior is not available.")}},d=function d(y,w,v){var x;if(!b.is(f)){x=g(v);q(y,w,v);x.inject(c)}};return{name:"EditAttributeBehavior",onStart:function o(){r=l.getBehavior("UXFactoryBehavior");t=l.getBehavior("ModelBehavior");m=l.getBehavior("LinkBehavior")},onStop:function j(){},editAttribute:function s(y,z){var C,v,B,A,D,w=function w(){l.notify("stopProgress");l.warn(i.getNLSValue("EditAttributeUI.retrieveDataFailure"))};if(!b.is(z,"array")){z=[z]}if(!b.is(y,"array")){y=[y]}D=z[0].objectToBeModified;if(!b.is(D)){l.debug("objectToBeModified is not available.");return}l.notify("startProgress");h.fetchAttributes(D,{onComplete:function x(){var E=true;l.notify("stopProgress");z.forEach(function(F){if(e.doesAttributeExist(D,F.dataIndex)){v=b.is(F.attributeNLSTitle)?F.attributeNLSTitle:e.getNLS(F.attributeInfo);B=[];y.forEach(function(G){C=null;if((F.instOrRef==="reference")&&b.is(G.referencePID)){C=G.referencePID}else{if((F.instOrRef==="instance")&&b.is(G.instancePID)){C=G.instancePID}else{C=G.id}}if(b.is(C)){B.push(C)}});if(z.length>1){A=i.getNLSValue("EditAttributeUI.HeaderMulti")}else{A=i.getNLSValue("EditAttributeUI.Header",{attributeName:v})}}else{E=false;l.warn(i.getNLSValue("TableView.AvailabilityFailure",{key:v}))}});if(E){d(A,B,z)}},onFailure:w,onTimeout:w})}}};return{plugins:["UXComponentsPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin"],creator:a}});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager",["UWA/Core","DS/Utilities/Utils"],function(c,b){var a=function a(n,h,f,j,k){var e=n.getBehavior("ModelBehavior"),g=function g(p){if(c.is(p.options.oldLabel)){p.prepareUpdate();p.setLabel(p.options.oldLabel);delete p.options.oldLabel;p.pushUpdate()}},i=function i(x){var y,r,v,u,w,s,q,p=[],z,t;if(!x.isHeader){u=x.manager.getColumnOptions(x.virtualColumnID);w=j.getAttributeInfoFromColumn(u);s=h.getAttributeInfo(w.attributeName);q=j.getType(s);if(c.is(x.value)){p=j.getValueAsArray(v)}else{v=c.is(u.getValue)?u.getValue(x):x.cellModel.options.value;if(!c.is(v)){v=""}if(Array.isArray(v)){p=v}else{if(v===""){p[0]=v}else{p=j.getValueAsArray(v)}}}x.cellView.elements.container.value=j.getValueAsString(p,q);if(Array.isArray(p)&&p.length!==0){y=x.cellView.reuseCellContent("multiValueLabelCell");if(c.is(y)){y.style.display="block";r=c.is(p[0])?j.getValueAsString(p[0],q):"";t=y.getElement(".wux-layouts-treeview-label");if(c.is(t)){t.innerHTML=r}z=y.getElement(".wux-layouts-rowentry-moreindicator");if(c.is(z)){z.style.display=(p.length>1)?"inline-block":"none"}x.cellView.getContent().setContent(y)}}}};return{onCellRequest:function m(p,B){var C,s,z=B.cellView,r,y,E,A,x,w,D,t,q,v,u;if(B.isHeader){return}v=z.elements.labelContainer;if(c.is(v)&&v.hasAttribute("title")){v.removeAttribute("title")}y=function y(F,H){var G=B.cellView.reuseCellContent("_lineEditor");H=c.is(H)?H:false;if(c.is(G)){G.value=w;G.disabled=H;if(F){G.pattern=j.getPattern(t.attributeInfo)}}B.cellView.getContent().setContent(G)};w=B.cellModel.options.value;t=j.getNodeAndColumnInfos(B.nodeModel,p);E=function E(){if(!c.is(w)){w=""}q=j.isReadOnly(t.attributeInfo,t.attributeDef);if(j.isVisible(t.attributeDef)===false){w="";y(false,true)}else{if(j.hasMagnitude(t.attributeInfo)){A=B.cellView.reuseCellContent("_unitsEditor");w=B.nodeModel.options.grid[B.dataIndex];if(c.is(A)){A.value=j.getMagnitudeValue(w,t.attributeInfo);if(c.is(A.setUnit,"function")){x=j.getNLSForUnit(t.attributeInfo);A.setUnit(x)}A.disabled=q;B.cellView.getContent().setContent(A)}}else{if(j.isMultiValuated(t.attributeInfo)){if(j.isDate(t.attributeInfo)){D=j.getValueAsDateArray(w);w=D.map(function(F){return j.getFormattedDate(F)})}w=j.getValueAsString(w,j.getType(t.attributeInfo));y(false,q)}else{if(j.isBoolean(t.attributeInfo)){r=B.cellView.reuseCellContent("_toggle");if(c.is(r)){r.checkFlag=w==="TRUE";r.disabled=q}B.cellView.getContent().setContent(r)}else{if(j.hasRangeDefined(t.attributeInfo,t.attributeDef)){C=B.cellView.reuseCellContent("_comboBox");if(c.is(C)){C.actionOnClickFlag=false;C.enableSearchFlag=false;C.expanderVisibleFlag=false;C.elementsList=j.getAuthorizedValuesNLSList(t.attributeInfo,t.attributeDef);if(isNaN(w)){C.selectedIndex=j.getAuthorizedValueIndex(t.attributeInfo,t.attributeDef,w)-1}else{C.selectedIndex=w-1}C.disabled=q}B.cellView.getContent().setContent(C)}else{if(j.isMultiLine(t.attributeInfo)){s=B.cellView.reuseCellContent("_editor");if(c.is(s)){s.value=w;s.disabled=q;s.pattern=j.getPattern(t.attributeInfo)}B.cellView.getContent().setContent(s)}else{if(j.isDouble(t.attributeInfo)||j.isInteger(t.attributeInfo)){w=j.getValueAsString(w,j.getType(t.attributeInfo));y(false,q)}else{y(true,q)}}}}}}}if(q){B.cellView.getContent().addClassName("editor-read-only")}};if(c.is(t.objectToBeModified)){u=j.doesAttributeExist(t.objectToBeModified,t.dataIndex);if(u||(!u&&f.getNavigateOnIndex()&&!t.objectToBeModified.getAdditionalInfo("isFetched"))){E()}}},onMultivalueCellRequest:function o(p){i(p)},onBIvalueCellRequest:function l(s){var p,r,q;if(!s.isHeader){p=s.dataIndex;if(c.is(s.nodeModel.options[p])){r=s.nodeModel.options[p]}q=s.cellView.reuseCellContent("resuableBICell");if(c.is(q)){if(c.is(r)){q.style.color=r.colorCode;q.title=r.tooltip;q.style.display="block";q.addClassName("bullet-indicator");q.setContent("");if(r.status==="Inconsistent"){q.setContent("?");q.removeClassName("bullet-indicator")}}else{q.style.display="none"}s.cellView.getContent().setContent(q)}}},setValue:b.debounce(function d(u,y){var p,r,t,w,q=[],x,v;x=j.getNodeAndColumnInfos(y.nodeModel,u);v=j.isMultiValuated(x.attributeInfo);if(!j.doesAttributeExist(x.objectToBeModified,x.dataIndex)){n.warn(k.getNLSValue("TableView.AvailabilityFailure",{key:x.attributeNLSTitle}));return}if(j.isBoolean(x.attributeInfo)){if(v){p=y.event.target.dsModel.value;p=j.getValueAsArray(p,j.getType(x.attributeInfo))}else{p=y.event.target.dsModel.checkFlag?"TRUE":"FALSE"}}else{if(j.hasRangeDefined(x.attributeInfo,x.attributeDef)){if(!c.is(y.event.target.dsModel)){return}p=y.event.target.dsModel.currentValue;p=j.getAuthorizedValue(x.attributeInfo,x.attributeDef,p)}else{if(j.isDate(x.attributeInfo)){p=c.is(y.value)?y.value:"";if(v){q=j.getValueAsArray(p);p=[];for(w=0;w<q.length;w++){t=new Date(q[w]);if(!isNaN(t.getTime())){p.push(Math.floor(t.getTime()/1000))}else{n.warn(k.getNLSValue("TableView.InvalidDateMessage",{date:q[w]}));y.manager.updateCellView(y.nodeModel,y.virtualColumnID);return}}}else{t=new Date(p);if(!isNaN(t.getTime())){p=Math.floor(t.getTime()/1000)}else{n.warn(k.getNLSValue("TableView.InvalidDateMessage",{date:p}));y.manager.updateCellView(y.nodeModel,y.virtualColumnID);return}}y.nodeModel.options.grid[y.dataIndex]=p;y.manager.updateRowViewWithException(y.nodeModel,y.dataIndex)}else{if(c.is(y.event.target.dsModel)){p=y.event.target.dsModel.value}else{p=y.event.target.value;r=j.getMaxLength(x.attributeInfo);if(r>0&&p.length>r){n.warn(k.getNLSValue("TableView.MaxLengthFailure",{length:p.length,maxLength:r}));return}}if(v){p=j.getValueAsArray(p,j.getType(x.attributeInfo))}}}}if(c.is(e)){e.updateModelAttribute(x.objectToBeModified.id,x,p,{onFailure:function s(){g(y.nodeModel)}})}},100,true)}};return a});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager",["UWA/Core","UWA/Class"],function(f,b){var a=b.singleton({name:"MILColumnManager",init:function e(g){this._parent(g)},onMILCellRequest:function d(l){var i,j,m,o=[],n,k,h=-1,g;if(l.isHeader){return}j=l.cellModel.options.value;k=function k(){i=l.cellView.reuseCellContent("_lineEditor");if(f.is(i)){i.value=j;i.disabled=true}l.cellView.getContent().setContent(i);if("MIL_previous"===l.dataIndex){g=l.nodeModel.options.grid.cellInfo.PreviousProdIconUrl;if(f.is(g)){l.cellView.getContent().innerHTML='<img class="type-icon-datagrid" src="'+g+'" draggable="false"/>'+j}}else{if("MIL_manufactured"===l.dataIndex){g=l.nodeModel.options.grid.cellInfo.MfgItemIconUrl;if(f.is(g)){l.cellView.getContent().innerHTML='<img class="type-icon-datagrid" src="'+g+'" draggable="false"/>'+j}}}};if("MIL_suggestion"===l.dataIndex){m=l.cellView.reuseCellContent("_comboBox");if(f.is(m)){m.actionOnClickFlag=false;m.enableSearchFlag=false;m.expanderVisibleFlag=true;m.elements.container.getChildren().forEach(function(p){if(true===p.hasClassName("wux-controls-combobox-mainelement")){p.addClassName("mil-combobox-button")}p.addClassName("mil-combobox-expanderbutton")});if(f.is(l.nodeModel)&&f.is(l.nodeModel.options)){n=l.nodeModel.options;if(f.is(n.grid)&&f.is(n.grid.cellInfo)){n=n.grid.cellInfo;if(f.is(n.suggestionToPerformEntries)){o=n.suggestionToPerformEntries}}}m.elementsList=o;o.forEach(function(p){h++;if(p.valueItem===j.value){m.selectedIndex=h}})}l.cellView.getContent().setContent(m)}else{if("MIL_rerouting"===l.dataIndex){if(f.is(l.nodeModel)&&f.is(l.nodeModel.options)){n=l.nodeModel.options;if(f.is(n.grid)&&f.is(n.grid.cellInfo)){n=n.grid.cellInfo;if(f.is(n.candidateEntries)&&1<n.candidateEntries.length){o=n.candidateEntries;m=l.cellView.reuseCellContent("_comboBox");if(f.is(m)){m.actionOnClickFlag=false;m.enableSearchFlag=false;m.expanderVisibleFlag=true;m.elements.container.getChildren().forEach(function(p){if(true===p.hasClassName("wux-controls-combobox-mainelement")){p.addClassName("mil-combobox-button")}p.addClassName("mil-combobox-expanderbutton")});m.elementsList=o;o.forEach(function(p){h++;if(p.valueItem===j){m.selectedIndex=h}})}l.cellView.getContent().setContent(m)}else{k()}}}}else{k()}}},setMILValue:function c(k){var i,h,j,l,g;if("MIL_suggestion"===k.dataIndex){if(!f.is(k.event.target.dsModel)){return}i=k.event.target.dsModel.currentValue;if(!f.is(i)){return}j=k.nodeModel.options.grid.cellInfo.suggestionToPerformEntries;j.forEach(function(m){if(m.valueItem===i){l={label:m.labelItem,value:m.valueItem,getLabel:function n(){return this.label}}}});k.cellModel.setCellContent(l);if(f.is(k.nodeModel)&&f.is(k.nodeModel.options)){h=k.nodeModel.options;if(f.is(h.grid)){h.grid.MIL_suggestion=l;if(f.is(h.grid.cellInfo)){h=h.grid.cellInfo;if(f.is(h.action)){h.action=i}}}}}else{if("MIL_rerouting"===k.dataIndex){if(!f.is(k.event.target.dsModel)){return}i=k.event.target.dsModel.currentValue;if(!f.is(i)){return}k.cellModel.setCellContent(i);if(f.is(k.nodeModel)&&f.is(k.nodeModel.options)){h=k.nodeModel.options;if(f.is(h.grid)){h.grid.MIL_rerouting=i;if(f.is(h.grid.cellInfo)){h=h.grid.cellInfo;if(f.is(h.candidateId)){g=i.split(",");h.candidateId=g[g.length-1];h.candidateOccPath=g}}}}}}}});return a});define("DS/DELPPWViewBehaviors/Tagger/FilterComponentServices",["UWA/Core","UWA/Class"],function(e,c){var b=c.extend({init:function(g){},parse:function d(h){var l,j,n,g,i,k={},m=[];for(l in h){if(!h.hasOwnProperty(l)){continue}j=h[l];for(n in j){if(!j.hasOwnProperty(n)){continue}g=j[n];if(!k[n]){k[n]={}}if(g.type==="date"){g.value=g.value.split("-").join("/").substr(0,10)}if(!k[n][g.value]){k[n][g.value]={type:g.type,dispValue:g.dispValue||g.value,subjects:[]}}k[n][g.value].subjects.push(l)}}for(g in k){if(!k.hasOwnProperty(g)){continue}for(i in k[g]){if(!k[g].hasOwnProperty(i)){continue}m.push({sixw:g,object:i,value:i,count:k[g][i].subjects.length,type:k[g][i].type,dispValue:k[g][i].dispValue})}}return{ds6wTagGrouped:k,ds6wTagSummary:m,}},getFilteredSubjects:function f(l,k){var g=[],o=[],j,m,h;for(m in l){if(l.hasOwnProperty(m)){j=l[m];for(h=0;h<j.length;h++){if(k&&k[m]&&k[m][j[h].object]){if(Array.isArray(g)&&(g.length===0)){k[m][j[h].object].subjects.forEach(function(i){g.push(i)})}else{o=[];k[m][j[h].object].subjects.forEach(function(i){o.push(i)});o=g.filter(function n(p){var i=o.indexOf(p)!==-1;return i});if(0!==o.length){g=o}}}}}}return g},findColoredPaths:function(j,h){var i=[],k={};if(h.type==="date"){k=j[h.predicate];for(var g in k){if(k.hasOwnProperty(g)){if(g.indexOf(h.object)!==-1){e.merge(i,k[g])}}}}else{if(j[h.predicate]&&j[h.predicate][h.object]){i=j[h.predicate][h.object].subjects}}return i},getTagsSummary:function a(i){var g,h,j=[];for(g in i){if(!i.hasOwnProperty(g)){continue}for(h in i[g]){if(!i[g].hasOwnProperty(h)){continue}j.push({sixw:g,object:h,value:h,count:i[g][h].subjects.length,type:i[g][h].type,dispValue:i[g][h].dispValue})}}return j}});return b});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager",["UWA/Core"],function(b){var a=function a(c){return{onCellRequest:function d(j){var k,g,i,e,l,m,f,h;if(!j.isHeader){i=j.dataIndex;e=j.nodeModel.options.grid;l=e[i];if(Array.isArray(l)&&l.length!==0){k=j.cellView.reuseCellContent("multiValueCell");if(b.is(k)){g=b.is(l[0].Value)?l[0].Value:"";h=k.children[0].getElement(".wux-layouts-treeview-label");if(b.is(h)){h.innerHTML=g}f=k.children[0].getElement(".wux-layouts-treeview-icon");if(b.is(f)){f.style.backgroundImage="url("+c.getIconURLFromKey(l[0].Icon)+")"}m=k.getElement(".wux-layouts-rowentry-moreindicator");if(b.is(m)){m.style.display=(l.length>1)?"inline-block":"none"}j.cellView.getContent().setContent(k)}}}}}};return a});define("DS/DELPPWViewBehaviors/BI/BIBehavior",["UWA/Core"],function(b){var a=function a(z,q,x,B,k,h){var t,d={},r={},e=[],g=function g(){d={AssociatedWithScope:{colorCode:"#006400",label:k.getNLSValue("BI.PrdStatus.AssociatedWithScope")},NotAssigned:{colorCode:"#FFA500",label:k.getNLSValue("BI.PrdStatus.NotAssigned")},AssignedIndirectly:{colorCode:"#00008B",label:k.getNLSValue("BI.PrdStatus.AssignedIndirectly")},AssignedDirectly:{colorCode:"#ADD8E6",label:k.getNLSValue("BI.PrdStatus.AssignedDirectly")},AssignedMoreThanOnce:{colorCode:"#bd07b0",label:k.getNLSValue("BI.PrdStatus.AssignedMoreThanOnce")},NotAssignable:{colorCode:"#808080",label:k.getNLSValue("BI.PrdStatus.NotAssignable")},NotApplicable:{colorCode:"#A9A9A9",label:k.getNLSValue("BI.PrdStatus.NotApplicable")},PartiallyAssigned:{colorCode:"#8B4513",label:k.getNLSValue("BI.PrdStatus.PartiallyAssigned")},};r={NotApplicable:{colorCode:"#A9A9A9",label:k.getNLSValue("BI.MfgStatus.NotApplicable")},ScopeGood:{colorCode:"#008000",label:k.getNLSValue("BI.MfgStatus.ScopeGood")},ScopeToOldRev:{colorCode:"#7030a0",label:k.getNLSValue("BI.MfgStatus.ScopeToOldRev")},ScopeToNew:{colorCode:"#FFA500",label:k.getNLSValue("BI.MfgStatus.ScopeToNew")},ScopeNoCorrespondingProductOccurence:{colorCode:"#FF0000",label:k.getNLSValue("BI.MfgStatus.ScopeNoCorrespondingProductOccurence")},ImplGood:{colorCode:"#008000",label:k.getNLSValue("BI.MfgStatus.ImplGood")},ImplGoodWithGoodScope:{colorCode:"#008000",label:k.getNLSValue("BI.MfgStatus.ImplGoodWithGoodScope")},ImplCandidatePrdOccWithGoodScope:{colorCode:"#0000FF",label:k.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScope")},ImplCandidatePrdOcc:{colorCode:"#0000FF",label:k.getNLSValue("BI.MfgStatus.ImplCandidatePrdOcc")},ImplCandidatePrdOccWithScopeToOldRev:{colorCode:"#9370DB",label:k.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToOldRev")},ImplCandidatePrdOccButNotCorrespondingScope:{colorCode:"#FFA500",label:k.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccButNotCorrespondingScope")},ImplCandPrdOccToSamePrd:{colorCode:"#0000FF",label:k.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrd")},ImplCandPrdOccToOtherRev:{colorCode:"#9370DB",label:k.getNLSValue("BI.MfgStatus.ImplCandPrdOccToOtherRev")},ImplCandPrdOccToDiffPrd:{colorCode:"#FFA500",label:k.getNLSValue("BI.MfgStatus.ImplCandPrdOccToDiffPrd")},ImplNoCandProdOccurence:{colorCode:"#FF0000",label:k.getNLSValue("BI.MfgStatus.ImplNoCandProdOccurence")},ImplNoProductOccurence:{colorCode:"#FF0000",label:k.getNLSValue("BI.MfgStatus.ImplNoProductOccurence")},IntermediateGood:{colorCode:"#008000",label:k.getNLSValue("BI.MfgStatus.IntermediateGood")},IntermediateChildrenNotUptoDate:{colorCode:"#FFFF00",label:k.getNLSValue("BI.MfgStatus.IntermediateChildrenNotUptoDate")},Inconsistent:{colorCode:"#000000",label:k.getNLSValue("BI.MfgStatus.Inconsistent")}}},m=function(){return t.pprTypes.indexOf("PROCESS")>-1},w=function(){return t.pprTypes.indexOf("PART")>-1||t.pprTypes.indexOf("PRODUCT")>-1},u=function u(){var D=q.getBehavior("TreeListViewBehavior"),E=D.getColumnsByDisplayType("BIEssentials");return E.length>0?E[0]:null},p=function p(F){var G={colorCode:r.Inconsistent.colorCode,tooltip:r.Inconsistent.label,status:"Inconsistent"},D,I=F,H=u(),E={nodeOptions:{},taggerOptions:{}};if(b.is(H)){if(H==="ManufacturingItemUpdateStatus"){D=F.split(",");I=D[D.length-1]}G=b.is(e[I])?e[I]:G;E.nodeOptions[H]={colorCode:G.colorCode,tooltip:G.tooltip,status:G.status};E.taggerOptions={absolutePath:F,status:G.status,dispValue:G.tooltip}}return E},j=function j(){var H=q.getBehavior("WUXNodeModelBehavior"),G=q.getBehavior("TaggerBehavior"),I=H.getAllDescendants(),J,D,F;if(H&&Object.keys(e).length>0){H.prepareUpdate();J=function J(K,L){K.forEach(function(M){var O=M.isRoot()?M.getReferencePID():M.getAbsolutePath().toString(),N=p(O);if(N.nodeOptions){M.updateOptions(N.nodeOptions)}if(G&&N.taggerOptions){G.addExternalTags(N.taggerOptions)}});if(b.is(L,"function")){L()}};F={callback:J,globalArray:I,context:this,blockSize:100};D=h.getExecuteByBlockPromise(F);D.then(function E(){H.pushUpdate();G.displayExternalTags()})}else{return}},c=function c(D){if(b.is(D,"array")&&D.length>0){D.forEach(function(J){var E,G=J.get("status"),K=J.get("type"),F=b.is(J.get("isRef")),M,L,I,H=[];if("ProductsAssignmentStatus"===K){I=J.get("id");H=I.split(",");E=H[H.length-1];M=d[G].colorCode;L=d[G].label}else{if("MfgItemsUpdateStatus"===K){E=J.get("id");M=r[G].colorCode;L=r[G].label}}e[b.is(I)?I:E]={PID:E,colorCode:M,tooltip:L,type:K,occurrencePath:I,status:G,isRef:F}});j()}},A=function A(E){var D=q.getBehavior("TaggerBehavior");if(D){D.setStatusCustomColors(E)}},f=function f(F){var E,D;if(m()){E=F.ProcessStatus;D=r}else{if(w()){E=F.ProductStatus;D=d}}c(E);A(D)},s=function s(D){if(m()){c([D])}else{if(w()){c([D])}}},v=function v(D){if(m()){c([D])}else{if(w()){c([D])}}},o=function o(){var F=q.getBehavior("TreeListViewBehavior"),E=q.getBehavior("WUXNodeModelBehavior"),D=q.getBehavior("TaggerBehavior"),H=F.getColumnsByDisplayType("BIEssentials"),G,I={};e=[];if(!F||!E||!H){return}G=E.getAllDescendants();H.forEach(function(J){I[J]={colorCode:"transparent",tooltip:""};if(b.is(G,"array")&&0<G.length){E.withTransactionUpdate(function(){G.forEach(function(K){K.updateOptions(I)})})}});if(D){D.removeExternalTags()}},i=function i(){var D=q.getBehavior("WUXNodeModelBehavior");if(x.getBICmdState()){if(D.getSelectedNodesInfo().length>0){x.computeBI()}}};return{listenTo:function n(){return{updateBIStatus:f,addBIModel:s,changeBIModel:v,refreshCmd:i,resetBIModel:o}},onStart:function y(D){t=D||{};g()},onStop:function l(){},getNodeOptions:function C(E){var D={nodeOptions:{},taggerOptions:{}};if(x.getBICmdState()&&b.is(E)){D=p(E)}return D}}};return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin"],creator:a}});define("DS/DELPPWViewBehaviors/ToolBarViewBehavior/ToolBarViewBehavior",["UWA/Core"],function(b){var a=function(v,p,i,t,z){var C=null,n=null,f=0,c=50000,r={},o=t.getComponent("Button"),D=t.getComponent("TooltipModel"),s=t.getComponent("Element"),e=null,y,g,h,B,l,w;l=function l(E){p.notify(E,null)};w=function w(){var H,F,G,E=r.Commands||{};H=new s("div",{"class":"toolBarBody",});E.forEach(function(I){G=new o({});G.tooltipInfos=new D({shortHelp:i.getNLSValue(I.toolTip)});G.inject(H);G.addEventListener("click",function(){l(I.command)});F=b.is(I.icon)?I.icon:I.command;i.getIconElem(F).inject(G.getContent())});return H};B=function B(){var J,H,I,G,F,E=r.Commands||{};J=new s("div",{"class":"toolBarBodySmall",});H=new o({}).inject(J);H.addEventListener("click",function(){n.toggle()});i.getIconElem("ActionDropDown").inject(H.getContent());n=new s("ul",{"class":"toolBarBodySmallUl",}).inject(J);E.reverse().forEach(function(K){I=new s("il",{"class":"toolBarBodySmallIl",}).inject(n);G=new o({});G.tooltipInfos=new D({shortHelp:i.getNLSValue(K.toolTip)});G.inject(I);G.addEventListener("click",function(){l(K.command);n.hide()});F=b.is(K.icon)?K.icon:K.command;i.getIconElem(F).inject(G.getContent())});if(b.is(r.Commands)){r.Commands.reverse()}return J};y=function y(G){var F=p.getElement(),E;r=G;if(typeof F.getElementsByClassName==="function"&&(E=F.getElementsByClassName("toolbar-container")[0])){g(E);F.addClassName("showToolBar")}};g=function g(E){var G,F;C=new s("div",{"class":"toolBarView",});G=new s("div",{"class":"toolBarViewIcon",}).inject(C);i.getIconElem(r.Icon).inject(G);F=new s("div",{"class":"toolBarViewTitle",}).inject(C);e=new s("text",{"class":"toolBarViewTitleText",html:r.Title}).inject(F);w().inject(C);B().inject(C);C.inject(E)};h=function h(){var E;if(!b.is(C)){p.debug("_onResize: _toolBarView is not defined");return}E=C.offsetWidth;n.hide();if(E<400){if(C.hasClassName("toolBarView")){C.removeClassName("toolBarView");C.addClassName("toolBarViewSmall")}}else{if(C.hasClassName("toolBarViewSmall")){C.removeClassName("toolBarViewSmall");C.addClassName("toolBarView")}}};return{listenTo:function m(){return{startProgress:this.displayLoadingCircle,stopProgress:this.hideLoadingCircle,blocLayoutResizeEnd:this.onResize}},onStart:function u(F,E){if(F.views&&F.views.treeListView&&F.views.treeListView.toolBarCommands){y({Icon:F.moduleIcon,Title:F.moduleTitle,Commands:F.views.treeListView.toolBarCommands})}E()},onStop:function k(){C.remove();C=void 0;n=void 0},onResize:function d(){setTimeout(function(){h()},200)},setTitle:function j(E){e.setContent(E)},getContent:function A(){if(C){return C}return void 0},displayLoadingCircle:function q(){C.addClassName("loadingCircle");f++;setTimeout(function(){if(f>0){C.removeClassName("loadingCircle");p.debug("Timeout:No response within specified time period.Removed Loading Indicator")}},c)},hideLoadingCircle:function x(){f--;if(f<1){C.removeClassName("loadingCircle")}}}};return{plugins:["ResourcePlugin","UXComponentsPlugin","SelectionPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/View",[],function(){var a=function(b,f,e){return{onStart:function d(h){},onStop:function c(){},extend:function g(h){return e.extend(h)}}};return{plugins:["View"],creator:a}});define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphViewBehaviour",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI",],function(d,c,a){var b=function(K,ag,P,M,H,l,aq,al,v,D,an){var ad,S,r={},ah={},Z={},au=0,ap,I=M.getComponent("EGraphCore"),ai=M.getComponent("EGraphViews"),x=M.getComponent("EGraphIact"),ac=M.getComponent("EGraphUtils"),ae=M.getComponent("Button"),aa=M.getComponent("ContextualMenuManager"),F=M.getComponent("WUXCommandsManager"),at=ag.getElement(),C,t,ar,h,af,k,ak,j,p,av,u,R,L,V,A,U,q,Y,am,s,N,X,ao,f,J,e,m,O,Q,W,ab,B,z;ao=function ao(){var aw="Relations",ax;ax=F.getCommandCheckHeader(aw,ag.getAppContext());if(d.is(ax)){ax.toggleState()}};af=function af(){ai.SVGEdgeView.call(this)},am=function am(){},av=function av(aA,ay,ax,aw){var aB,aC,aD=0;am.prototype.onupdate=function az(aI){var aF,aJ,aE,aH,aG;aF=aI.cl1.c.aleft;aH=aI.cl1.c.atop;aE=aI.cl2.c.aleft;aG=aI.cl2.c.atop;aJ=0.5*(aF+aE);aI.set("path",[I.PathCmd.M,aF,aH,I.PathCmd.L,aJ,aH,I.PathCmd.L,aJ,aG,I.PathCmd.L,aE,aG])};af.prototype.oncreateDisplay=function(aF){var aE=this;ai.SVGEdgeView.prototype.oncreateDisplay.apply(this,arguments);this.display.elt.id=Math.random();this.display.elt.textContent="official";aC=ah.Info;if(d.is(aC,"array")){aC.forEach(function(aG){R(aE,aF,aG.name,aG.dicoType,aD);aD++})}else{R(aE,aF,aC.name,aC.dicoType,aD)}};aB=new I.Edge();if(ax==="Instance"){aB.set("geometry",new am());aB.mark=""}else{aB.set("geometry",new I.AutoBezierGeometry());aB.mark=ax}aB.views.main=new af();aw.addEdge(aA,ay,aB);return aB};u=function u(az,ay,ax,aw){var aA;aA=new I.Edge();aA.set("geometry",new I.AutoBezierGeometry());aA.views.main=new ai.SVGEdgeView((au===0)?"my-first-edge-view":"my-sec-edge-view");aA.mark=ax;aw.addEdge(az,ay,aA);return aA};R=function R(az,aC,aB,ay,aD){var aA="http://www.w3.org/2000/svg",ax="http://www.w3.org/1999/xlink",aw;aw=document.createElementNS(aA,"textPath");aw.setAttributeNS(ax,"href","#"+az.display.elt.id);aw.setAttribute("startOffset","10%");if(aC.mark===""){aw.appendChild(document.createTextNode(""))}else{if(aB==="type"){aw.appendChild(document.createTextNode(P.getNLSValue(aC.mark.get(aB))));aD++}else{if(aC.mark.get(aB)){aw.appendChild(document.createTextNode(P.getNLSValue(ay+"."+aB)+": "+aC.mark.get(aB)));aD++}}}az.display.text=document.createElementNS(aA,"text");az.display.text.setAttribute("dy",-14*(aD-1)+12);az.display.text.grElt=aC;ac.classListAdd(az.display.text,"edge-text");az.display.text.appendChild(aw);if(aw.innerHTML!==""){az.structure.root.appendChild(az.display.text)}};Y=function Y(aD,aC,ax,aA,aE,aw,aB,ay){var az;az=new I.Node();az.views.main=new h();az.name=ax;az.idObjet=aE;az.referencePID=aE;az.typeDobjet=aA;az.imgType=aB;if(d.is(ay)){az.referencePID=ay.get("referencePID");az.instancePID=ay.get("instancePID");az.childOccurencePath=ay.get("childOccurencePath");az.isAggregatedBy=ay.get("isAggregatedBy")}az.data={};az.multiset("left",aD,"top",aC,"width",250,"height",80);h.prototype.buildNodeElement=function(aG){var aM=null,aO="",aI=null,aJ,aK,aN,aL,aF;if(d.is(aG)){if(d.is(aG.referencePID)){aM=l.getReference(aG.referencePID);aO=P.getIconURLFromKey(aM.get("type"));aI=aw.cloneNode(true);aI.childNodes["1"].className+=" EGraph_obj_"+aM.get("PPRTYPE")+" "+aM.id;aJ=d.is(r.Primary.Info)?r.Primary.Info.property:null;aK=d.is(aJ)?aM.get(aJ):null;aN=d.is(r.Secondary.Info,"array")?r.Secondary.Info:[r.Secondary.Info];aL=r.Image.value;aF=new d.Element("div",{"class":"wux-control-inline-container"});aF.inject(aI.childNodes["0"]);if((aL==="true")&&(d.is(aO,"string")&&(aO.length>0))){aI.childNodes["0"].innerHTML+='<img src="'+aO+'"> '}if(d.is(aK,"string")&&(aK.length>0)){aI.childNodes["0"].innerHTML+=aK}aN.forEach(function aH(aP){var aR,aQ,aS,aT;if(d.is(aP)&&d.is(aP.property)){aR=d.is(aP.dicoType)?(aP.dicoType+"."+aP.property):aP.property;aQ=P.getNLSValue(aR);aS=aM.get(aP.property);aT="</br><b>"+aQ+"</b>: "+aS;aI.childNodes["1"].innerHTML+=aT}})}else{aI=aw.cloneNode(true)}return aI}};return az};C=function C(ax){var aw;if(d.is(ax)&&d.is(ax.views.main.display.elt)){aw=ax.views.main.display.elt}return aw};f=function f(ax,aw){var ay=false;aw.forEach(function(az){if(ax===az){ay=true;return}});return ay};J=function J(aE,aF){var aw=[],aC=aF,aB=aE.clientX,aA=aE.clientY,ay=ag.getBehavior("EditAttributeBehavior"),ax=ag.getBehavior("AttributeBehavior"),az,aD;az={icon:"url("+P.getIconURLFromKey("GeneralDelete")+")",label:P.getNLSValue("LinksUI.DeleteLink"),sensitivity:"enabled",callback:function(){var aG=l.getConnection(aC);l.deleteConnection(aG,{onFailure:function(){ag.warn(P.getNLSValue("LinksUI.DeleteFailure"))},onComplete:function(){ag.info(P.getNLSValue("LinksUI.DeleteSuccess"))},logMessage:P.getNLSValue("LinksUI.LogMessage")})}};aD={icon:"url("+P.getIconURLFromKey("EditAttribute")+")",label:P.getNLSValue("LinksUI.EditAttribute"),sensitivity:"enabled",callback:function(){var aJ=l.getConnection(aC),aG=Z[aJ.get("type")],aH,aI;if(d.is(aG)){aH=aG.Attribute;aI=ax.getObjectAndAttributeInfos(aH);aI.forEach(function(aK){aK.objectToBeModified=aJ});ay.editAttribute(aJ,aI)}else{ag.warn(P.getNLSValue("LinksUI.NoAttributes"))}}};aw.push(az);aw.push(aD);aa.show({nodes:aw},[aB,aA])};t=function t(aJ){var aN,aF,aI,az,aL,ax,aA,aH,aD,aE,aw=function aw(aO){aE=aO},aB=true,aK,aG,ay;ay=at.getElement("#canvas"+au.toString());ay.addEventListener("mouseover",aw,false);aJ.addChangeListener(function aM(aO){if(aO[0].path[0]==="edges"){if(aO[0].child.cl1.c!==null&&aO[0].child.cl2.c!==null&&d.is(aO[0].child.cl2.c.node.referencePID)&&d.is(aO[0].child.cl2.c.node.referencePID)){aK=l.getReference(aO[0].child.cl1.c.node.referencePID);if(d.is(aK)){aN=aK;aI=l.getParentInstancesFromCollection(aK.id);aI=aI[0]}aG=l.getReference(aO[0].child.cl2.c.node.referencePID);if(d.is(aG)){aF=aG;aD=l.getParentInstancesFromCollection(aG.id);aD=aD[0]}if(!d.is(aO[0].child.geometry)){ag.notify("CreateLink",{fatherId:aN.id,childId:aF.id,fromInstanceId:aI.id,toInstanceId:aD.id})}setTimeout(function(){az=[];at;az=at.getElements("path");for(aA=0;aA<az.length;aA++){if(az[aA].innerHTML!=="official"){aL=window.getComputedStyle(az[aA]);aH=aL.getPropertyValue("marker-end");if(aH==="none"){if(az[aA].parentElement.id!=="arrow-edge-end-marker"){az[aA].parentElement.removeChild(az[aA])}}}}},500)}}if(aB){return}aB=aO.some(function(aP){return aP.path[0]==="selection"})});aJ.addListener("update",function aC(){var a3,aZ,aQ,a0,aR,aT,aV,aS,a2,aW,aU,aP=aE,aY=ag.getBehavior("SelectionBehavior"),aO=[],a1,aX=new d.Class.Collection([],{});if(aB){aB=false;aT=aY.getSelections();aV=aT[0].concat(aT[1]).concat(aT[2]).concat(aT[3]);aS=aY.getSelections()[0];aV.forEach(function(a4){if(d.is(a4)){a2=l.getReferenceModel(a4);aX.add({ref:a2})}});if(aJ.selection.first===null){a3=at.getElements(".myNodeLinkEdit");ax=0;while(ax<a3.length){a3[ax].innerHTML="";ax++}}for(aZ=aJ.selection.first;aZ;aZ=aZ.nextSel){if(aZ.type===I.Type.NODE){at;a3=at.getElements(".myNodeLinkEdit");ax=0;aR=f(aZ.referencePID,aS);aQ=l.getReference(aZ.referencePID);if(!aR){a3=at.getElements(".myNodeLinkEdit");ax=0;while(ax<a3.length){a3[ax].innerHTML="";ax++}a1=C(aZ);if(d.is(a1)){a0=a1.getElementsByClassName("myNodeLinkEdit")[0];new ae({label:"",icon:"bars",iconSize:"1x",displayStyle:"lite",onClick:ao}).inject(a0)}aU=aQ.id}aX.forEach(function(a4){if(a4.get("ref").id===aZ.referencePID){aX.remove(a4)}})}else{if(I.Type.EDGE===aZ.type){if(d.is(aZ.mark.get("PID"))){aP=aE;J(aP,aZ.mark.get("PID"),aZ.mark.get("from"));aJ.selection.first=null;aJ.selection.last=null}}}}aX.forEach(function(a4){aO.push(a4.get("ref").id)});if(d.is(aU)){aW={selectedNodeIds:[aO],changed:{nodeId:aQ.id,isSelected:true}};ag.notify("EGraphNodeSelect",aW)}}})};ar=function ar(){var aw;aw=new I.EGraph();aw.addView("main",new ai.HTMLGraphView(at.childNodes["0"]));new x.StateMachine(aw,null,null,aw.views.main);aw.updateLock();return aw};h=function h(){ai.HTMLNodeView.call(this)};af=function af(){ai.SVGEdgeView.call(this)};k=function k(ax){var aB=[],aw=[],az=[],aA=[],ay=[];ax.forEach(function(aC){switch(aC.get("Type")){case 0:aB.push(aC);break;case 1:aw.push(aC);break;case 2:az.push(aC);break;case 3:aA.push(aC);break;default:break}});ay=[aA,aB,aw,az];return ay};ak=function ak(aE){var aF=new d.Class.Collection([],{}),aw=aE.where({index:0}),aB=0,aA,aC,ay,aG,aD,az,ax,aH;while(aw.length>0){aA=aw[0];aC=aB;ay=aA.get("index");aw.shift();if(aF.findWhere({ref:aA})===undefined){while(aF.findWhere({y:aC,x:ay})!==undefined){aC++}aF.add({y:aC,x:ay,ref:aA});aB=aC}aA.get("links").forEach(function(aI){aI=aE.findWhere({PID:aI[0]});aC=0;ay=aI.get("index");while(aF.findWhere({y:aC,x:ay})!==undefined){aC++}aG=aF.findWhere({ref:aI});aD=aF.findWhere({ref:aA});if(aG===undefined){aG=aF.add({y:aC,x:ay,ref:aI});aB=aC}az=false;aC=aD.get("y")-1;ax=aG.get("x")-aD.get("x");if(ax>1){while(az===false){az=true;aC++;for(aH=aD.get("x")+1;aH<aG.get("x");aH++){if(aF.findWhere({x:aH,y:aC})!==undefined){az=false}}}for(aH=aD.get("x")+1;aH<aG.get("x");aH++){aF.add({y:aC,x:aH,ref:null})}aG.set({y:aC});aD.set({y:aC});aB=aC}aw.unshift(aI)})}return aF};j=function j(ax,aA,az){var aw,ay;ay=40;aw=new I.Connector();if(az===true){aw.views.main=new ai.SVGConnView("egraph_views_mySVGConnView")}else{aw.views.main=(au===0)?new ai.SVGConnView("egraph_views_mySVGConnView_invisible"):new ai.SVGConnView()}aw.multiset(["cstr","attach"],ax,["cstr","offset"],ay);return aw};p=function p(aw){if(au===0){aw.data.out=j(I.BorderCstr.RIGHT,1,true);aw.appendConnector(aw.data.out);aw.data.in1=j(I.BorderCstr.LEFT,1,true);aw.appendConnector(aw.data.in1);aw.data.outInstance=j(I.BorderCstr.BOTTOM,1,false);aw.appendConnector(aw.data.outInstance)}else{aw.data.in1=j(I.BorderCstr.LEFT,0,true);aw.appendConnector(aw.data.in1);aw.data.in2=j(I.BorderCstr.LEFT,1,true);aw.appendConnector(aw.data.in2);aw.data.out=j(I.BorderCstr.RIGHT,0,true);aw.appendConnector(aw.data.out)}};L=function L(aL,ay){var aE=0,aB=0,aI=0,aF,ax,aw,aH,aM,aA,aG,az,aC,aD=ag.getBehavior("SelectionBehavior"),aK,aJ;aK=new d.Class.Collection([],{});aC=aD.getSelections();az=aC[0].concat(aC[3]);aL.forEach(function(aO,aN){aO.forEach(function(aP,aQ){aE=aP.get("X");aG=(aN*(2000/4)+(40)+(150*(aE+aB)));aF=(aQ*(125)+(40));ax=aP.get("V_Name");aA=aP.get("PPRTYPE");aM=aP.get("referencePID");aw=at.childNodes["0"].childNodes["0"].childNodes["0"];aH=aP.get("TYPE");aK.add({PID:aM,Node:Y(aG,aF,ax,aA,aM,aw,aH,aP)});p(aK.last().get("Node"));if(aE>aI){aI=aE}});aB+=aI});try{aK._models.forEach(function(aN){ay.addNode(aN.get("Node"));az.forEach(function(aO){aJ=l.getReferenceModel(aO);if(aN.get("Node").referencePID===aJ.id){ay.addToSelection(aN.get("Node"))}})})}finally{ay.updateUnlock()}return aK};V=function V(aI,aB){var aw=0,az=0,aC,ay,aA,aD,aJ,aG,ax,aF,aE,aH=new d.Class.Collection([],{});aI.forEach(function(aK){ay=aK.get("ref");if(ay!==null){aF=aK.get("x")*450;aE=aK.get("y")*150;aA=ay.get("V_Name");aD=ay.get("PPRTYPE");aJ=ay.get("PID");aG=ay.get("TYPE");ax=at.childNodes["0"].childNodes["0"].childNodes["0"];aH.add({PID:aJ,Node:Y(aF,aE,aA,aD,aJ,ax,aG)});aH.push(aC);p(aH.last().get("Node"));if(aw<aK.get("y")*150){aw=aK.get("y")*150}if(az<aK.get("x")*450){az=aK.get("x")*450}}});try{aH._models.forEach(function(aK){aB.addNode(aK.get("Node"))})}finally{aB.updateUnlock()}return aH};A=function A(aE,aF,aw){var ay,aB,ax,aA,aD,aC,az;aE.forEach(function(aG){if(aG.get("isAggregatedBy")!==null){ax=aF.where({PID:aG.get("referencePID")});ax.forEach(function aH(aI){if(d.is(aI)){aB=aI.get("Node");ay=aF.where({PID:aB.isAggregatedBy});ay.forEach(function aJ(aK){aA=aK.get("Node");if(d.is(aB.childOccurencePath)&&d.is(aA.instancePID)){az=aB.childOccurencePath.split(",");if(az.length>1){if(az[az.length-2]===aA.instancePID){av(aB.data.in1,aA.data.outInstance,"Instance",aw)}}}else{if(d.is(aA.referencePID===aB.isAggregatedBy)){av(aB.data.in1,aA.data.outInstance,"Instance",aw)}}})}else{ag.warn(P.getNLSValue("GraphView.NodeWithPID")+aG.get("PID")+P.getNLSValue("GraphView.NotExist"))}})}aG.get("LINKS").forEach(function(aN){var aJ=aN.get("from"),aS=aN.get("to"),aQ,aK,aP=null,aM=null,aO=null,aL=null,aI=null,aR=null;aQ=d.is(aJ,"string")?aF.where({PID:aJ}):null;aK=d.is(aS,"string")?aF.where({PID:aS}):null;if(d.is(aQ,"array")){if(d.is(aQ.length!==0)){aP=aQ[0];if(d.is(aP)){aD=aP.get("Node");if(d.is(aD)){aO=l.getReference(aD.referencePID);if(d.is(aO)){aI=aO._attributes.PPRTYPE}}}}}if(d.is(aK,"array")){if(d.is(aK.length!==0)){aM=aK[0];if(d.is(aM)){aC=aM.get("Node");if(d.is(aC)){aL=l.getReference(aC.referencePID);if(d.is(aL)){aR=aL._attributes.PPRTYPE}}}}}if(d.is(aC)&&d.is(aD)){if(aI===aR){av(aD.data.out,aC.data.out,aN,aw);u(aD.data.out,aC.data.out,aN,aw)}else{if(aD.actualLeft<aC.actualLeft){av(aD.data.out,aC.data.in1,aN,aw);u(aD.data.out,aC.data.in1,aN,aw)}else{av(aC.data.out,aD.data.in1,aN,aw);u(aD.data.in1,aC.data.out,aN,aw)}}}})})};U=function U(aA,ay,aw){var aB,az,ax;aA.forEach(function(aC){aB=aC.get("PID");aC.get("links").forEach(function(aD){az=ay.findWhere({PID:aB});az=az.get("Node");ax=ay.findWhere({PID:aD[0]});ax=ax.get("Node");u(az.data.out,ax.data.in1,aD[1],aw)})})};s=function s(){B();(au===0)?ab():z()};N=function N(){var aw;aw=new a(ag);aw.loadLinkGraphUI()};q=function q(){var aF=ag.getElement(),aP=P.getIconURLFromKey("Refresh"),aI=P.getIconURLFromKey("Graph.LinksFilter"),aG=d.createElement("div",{"class":"canvas-gv",id:"canvas"+au.toString()}),aA=d.createElement("img",{src:aP,"class":"GraphViewBar"}),ax=d.createElement("img",{src:aI,"class":"GraphViewBar"}),aJ=d.createElement("div",{"class":"input-node my-node"}),aB=d.createElement("div",{"class":"my-node-header"}),aN=d.createElement("div",{"class":"my-node-container"}),aM=d.createElement("div",{"class":"my-node-col left"}),aD=d.createElement("div",{"class":"my-node-col right"}),aw=d.createElement("div",{"class":"myNodeLinkEdit"}),aO=d.createElement("div",{"class":"my-node-text"}),az=d.createElement("div",{"class":"InputNodeData"}),ay=at.getElement("#canvas"+au.toString()),aK=d.extendElement(document.createElementNS("http://www.w3.org/2000/svg","svg")),aH=d.extendElement(document.createElementNS("http://www.w3.org/2000/svg","defs")),aC=d.extendElement(document.createElementNS("http://www.w3.org/2000/svg","marker")),aL=d.extendElement(document.createElementNS("http://www.w3.org/2000/svg","path"));if(!d.is(at)){at=aF}if(ay!==null){ay.remove(0)}aK.appendChild(aH);aH.appendChild(aC);aC.appendChild(aL);aK.setAttribute("width","0");aK.setAttribute("height","0");aK.setAttribute("style","position:absolute;");aC.setAttribute("id","arrow-edge-end-marker");aC.setAttribute("markerWidth","10");aC.setAttribute("markerHeight","8");aC.setAttribute("refX","8");aC.setAttribute("refY","4");aC.setAttribute("orient","auto");aL.setAttribute("d","M 0 0 L 10 4 L 0 8");aL.setAttribute("fill","#777");aL.setAttribute("stroke","none");aL.setAttribute("z-index","10");aA.addEvent("click",s);ax.addEvent("click",N);function aE(aQ){d.Event.stop(aQ)}aG.addEvent("contextmenu",aE);aG.setStyles({width:"100%",height:"100%","background-color":"white"});aJ.setStyles({width:"50px",height:"50px"});aO.setStyles({top:"0px"});az.setStyles({display:"none"});aD.appendChild(aO);aJ.appendChild(aB);aJ.appendChild(aN);aJ.appendChild(aM);aJ.appendChild(aD);aJ.appendChild(aw);aG.appendChild(az);az.appendChild(aJ);aG.appendChild(aK);if(d.is(ap.showReloadAction)&&ap.showReloadAction===true){aA.inject(aG)}if(d.is(ap.showGraphViewFilter)&&ap.showGraphViewFilter===true){ax.inject(aG)}if(d.is(at)){aG.inject(at)}return at};X=function X(aw){var az,ay,ax;ax=new ac.BoundingRect();for(az=aw.nodes.first;az;az=I.dftNext(aw,az)){ax.update(az,az.actualLeft-300,az.actualLeft+az.actualWidth,az.actualTop,az.actualTop+az.actualHeight)}ay=ac.reframeViewpoint(aw.views.main.getSize(),ax,{padding:15,minSize:50,horizontal:-1,vertical:-1,aliasing:0,defaultVpt:aw.views.main.vpt,maxScale:1});aw.views.main.setViewpoint(ay,true)};W=function W(){q();ac.inherit(h,ai.HTMLNodeView);if(au===0){ac.inherit(af,ai.SVGEdgeView)}ad=ar();return ad};e=function e(){var aw,ax;if(d.is(S)&&S.length>0){return S}aw=an.getRoots(ag.getId());ax=aw[0].concat(aw[1]).concat(aw[2]);S=D.getEGraphDataToDisplay(ax);return S};O=function O(ax){var aw;aw=k(ax);return aw};m=function m(){var ax=ag.getBehavior("SelectionBehavior"),aw=ax.getSelections()[0][0],ay;if(d.is(aw)){ay=l.getReferenceModel(aw);if(d.is(ay)){S=D.getProductFlowDataToDisplay(ay.id)}}return S};Q=function Q(ax){var aw;aw=ak(ax);return aw};ab=function ab(){var az,aw,ay,ax;az=e();if(d.is(az)&&az.length>0){aw=O(az);ay=W();ax=L(aw,ay);A(az,ax,ay);X(ay);t(ay)}};B=function B(){if(d.is(at)&&d.is(at.childNodes["0"])){at.childNodes["0"].destroy();ad=void 0;S=void 0}};z=function z(){var aA,aw,az,ay,ax;aA=m();if(d.is(aA)&&aA.length>0){if(D.isProductFlowDataLooped(aA)){ag.warn(P.getNLSValue("ProductFlowView.Loop"),ax,"error")}else{aw=Q(aA);az=W();ay=V(aw,az);U(aA,ay,az);X(az);t(az)}}};return{viewName:"EgraphView",listenTo:function G(){return{}},onStart:function w(ay,ax){var aw;ay=ay||{};if(d.is(ay.displayNodeConfigXML)&&d.is(ay.displayLinkConfigXML)){aw=al.getXMLValues(ay.displayNodeConfigXML);if(d.is(aw.Config.Preferences)){r=aw.Config.Preferences}aw=al.getXMLValues(ay.displayLinkConfigXML);if(d.is(aw.Config.Preferences)){ah=aw.Config.Preferences}}if(d.is(ay.editLinkConfigXML)){aw=al.getXMLValues(ay.editLinkConfigXML);if(d.is(aw.Config)){Z=aw.Config}}if(d.is(ay.graphType)){au=ay.graphType}ap=ay;ax()},onStop:function E(){B()},updateLink:function y(aw){var az,aB,aA,ay,ax;az=ad.nodes.first;while(d.is(az)){if(az.referencePID===aw.get("from")){aB=az}else{if(az.referencePID===aw.get("to")){aA=az}}az=az.next}if(d.is(aB)&&d.is(aA)){ay=l.getReference(aB.referencePID).get("type");ax=l.getReference(aA.referencePID).get("type");if(ay===ax){av(aB.data.out,aA.data.out,aw,ad);u(aB.data.out,aA.data.out,aw,ad)}else{if(aB.actualLeft<aA.actualLeft){av(aB.data.out,aA.data.in1,aw,ad);u(aB.data.out,aA.data.in1,aw,ad)}else{av(aA.data.out,aB.data.in1,aw,ad);u(aB.data.in1,aA.data.out,aw,ad)}}}else{s()}},createGenericEGraphView:function aj(){ag.notify("startProgress");ab();ag.notify("stopProgress")},removeGenericEGraphView:function i(){B()},createProductFlowEGraphView:function T(){ag.notify("startProgress");z();ag.notify("stopProgress")},setLinkDisplayStatus:function o(aw,ax){D.setLinkDisplayStatus(aw,ax)},getSupportedTypesOfLink:function g(){return D.getCreatableTypesOfLink()},setGraphContainer:function n(aw){at=aw}}};return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin"],creator:b}});define("DS/DELPPWViewBehaviors/Tagger/TaggerBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWViewBehaviors/Tagger/FilterComponentServices"],function(d,c,a){function b(C,L,j,g,p,S){var O,y,B={},M={},A=[],I=[],e,t=new a({facade:L}),x=function x(){return O.pprTypes.indexOf("PROCESS")>-1},R=function R(){return O.pprTypes.indexOf("PART")>-1||O.pprTypes.indexOf("PRODUCT")>-1},K=function K(){if(d.is(y)){y.clearLocalFilter(true);y.unsetTags()}A=[];M={};B={}},o=function o(){if(d.is(y)){if(p.getActiveView()!==L.getId()){y.deactivate()}else{y.activate()}}},f=function f(W){var V=L.getBehavior("TreeListViewBehavior"),T=L.getBehavior("WUXNodeModelBehavior"),U=L.getBehavior("GraphViewBehavior");if(p.getActiveView()!==L.getId()){return}if(!d.is(V)||!d.is(T)){return}V.manageColumn("taggerColor",{visible:true});if(d.is(U)){U.setTaggerStatus(true)}T.withTransactionUpdate(function(){W.tagColors.forEach(function(Y){var X=t.findColoredPaths(M,Y);X.forEach(function(ab){var Z=B[ab],aa=T.getNodeModel(Z,false);if(Array.isArray(aa)&&(aa.length>0)){aa.forEach(function(ac){var ad=ac.isRoot()?ac.getReferencePID():ac.getAbsolutePath().toString();if(ad===ab){ac.updateOptions({taggerColor:Y.color})}})}})})})},E=function E(){var U,T;if(p.getActiveView()!==L.getId()){return}U=L.getBehavior("TreeListViewBehavior");T=L.getBehavior("GraphViewBehavior");if(d.is(U)){U.manageColumn("taggerColor",{visible:false})}if(d.is(T)){T.setTaggerStatus(false)}},G=function G(U){var V=U.subjectpaths,T=U.allsubjectpaths;V.forEach(function(Z){var W=T[Z],X=L.getBehavior("WUXNodeModelBehavior"),Y=X.getNodeModel(W,false);if(Array.isArray(Y)&&(Y.length>0)){Y.forEach(function(aa){var ab=aa.isRoot()?aa.getReferencePID():aa.getAbsolutePath().toString();if(ab===Z){aa._filterStatus="IN";aa.getParents().forEach(function(ac){ac._filterStatus="IN"})}})}})},r=function r(){var V,T=L.getBehavior("WUXNodeModelBehavior"),U;if(!d.is(T)){return}V=T.getRoots();U=function U(X){var W;if(X._filterStatus==="IN"){W=X.getChildren();if(W&&W.length>0){W.slice(0).forEach(function(Y){U(Y)})}}else{X.filterOut()}delete X._filterStatus};if(Array.isArray(V)&&(V.length>0)){V.forEach(function(X){var W=T.getNodeModel(X,false);if(Array.isArray(W)&&(W.length>0)){W.forEach(function(Y){U(Y)})}})}},Q=function Q(W){var V,T,U;if(!M.hasOwnProperty(e)){return}for(V in W){if(W.hasOwnProperty(V)){for(T in M[e]){if(M[e].hasOwnProperty(T)){U=M[e][T];if(-1!==U.subjects.indexOf(V)){W[V][e].value=T;W[V][e].dispValue=U.dispValue;break}}}}}},D=function D(X){var T=L.getBehavior("WUXNodeModelBehavior"),Y={},W,V,U;X.forEach(function(aa){var Z=B[aa];V=T.getNodeModel(Z,false);if(Array.isArray(V)&&(V.length>0)){V.forEach(function(ac){var ad=ac.isRoot()?ac.getReferencePID():ac.getAbsolutePath().toString(),ab=B[aa],ae;if(ad!==aa){return}W=j.getReference(ab);if(!d.is(W)){return}ae=W.getAdditionalInfo("ds6w");if(d.is(ae)){Y[ad]=d.clone(ae)}ac.getParents().forEach(function(ah){var ag=ah.isRoot()?ah.getReferencePID():ah.getAbsolutePath().toString(),af=B[ag],ai;if(d.is(Y)&&Y.hasOwnProperty(ag)){return}W=j.getReference(af);if(!d.is(W)){return}ai=W.getAdditionalInfo("ds6w");if(d.is(ai)){Y[ag]=d.clone(ai)}})})}});Q(Y);U=t.parse(Y);U=U||{ds6wTagSummary:[]};y.setTags(null,U.ds6wTagSummary)},J=function J(){var T=L.getBehavior("WUXNodeModelBehavior"),U,V=[];U=T.getRoots();U.forEach(function(X){var W=T.getNodeModel(X);if(Array.isArray(W)&&(W.length>0)){W.forEach(function(Y){V.push(Y)})}});return V},s=function s(aa){var X,Z=aa.allfilters,W=[],U=[],Y,V=L.getBehavior("WUXNodeModelBehavior"),T=(I.length>0)?I.slice(0):J();if(p.getActiveView()!==L.getId()){return}X=L.getBehavior("TreeListViewBehavior");if(!d.is(X)){return}V.withTransactionUpdate(function(){I=[];T.forEach(function(ab){ab.filterIn(true);I.push(ab)});if(Object.keys(Z).length===0){I=[];for(Y in B){if(B.hasOwnProperty(Y)){U.push(Y)}}D(U);return}W=t.getFilteredSubjects(Z,M);if(0===W.length){return}G({subjectpaths:W,allsubjectpaths:B});r();D(W)})},P=function P(){if(!y){y=S.create(S.PROXY.TaggerProxy);y.addEvent("colorize",f);y.addEvent("unColorize",E);y.addEvent("onFilterChange",s);if(x()){e="ds6w:what/Update Status"}else{if(R()){e="ds6w:what/Assignment Status"}}y.deactivate()}return y},n=function n(V){var Y,Z=V.absolutePath,U=V.status,ad=V.dispValue,ab,aa={},T,ac,W,X=[];if(!M[e]){M[e]={}}if(M[e]&&M[e][U]&&M[e][U].subjects.length>0){if(-1!==M[e][U].subjects.indexOf(Z)){return}}if(M[e]){for(ac in M[e]){if(M[e].hasOwnProperty(ac)){T=M[e][ac];X=T.subjects;W=X.indexOf(Z);if(-1!==W){if(X.length===1){delete M[e][ac]}else{M[e][ac].subjects.splice(W,1)}}}}}if(!M[e][U]){M[e][U]={};M[e][U]={type:"string",dispValue:ad,subjects:[]}}M[e][U].subjects.push(Z);Y=B[Z];ab=j.getReference(Y);if(d.is(ab)){aa=ab.getAdditionalInfo("ds6w");aa=aa||{};if(d.is(aa)){aa[e]={dispValue:ad,type:"string",value:U};ab.setAdditionalInfo({ds6w:aa})}}},m=function m(T,Y){var W=function W(){if(d.is(Y,"function")){Y()}return c.resolve()},V=function V(Z){if(d.is(Y,"function")){Y()}},U=function U(){return new c(function(ae,ad){var ac,af,aa=[],ab=A.length>1000?1000:A.length,Z=A.splice(0,ab);if(Array.isArray(Z)&&Z.length>0){Z.forEach(function(ag){if(("add"===ag.event)){B[ag.Path]=ag.PID;ac=j.getReference(ag.PID);if(!d.is(ac)){ad("Model not found for PID:"+ag.PID);return}af=ac.getAdditionalInfo("ds6w");if(!d.is(af)){aa.push(ag.PID)}if(Object.keys(ag.externalTags).length>0){ag.externalTags.forEach(function(ah){n(ah)})}}else{if("remove"===ag.event){delete B[ag.Path]}}});if(Object.keys(B).length<=0){K();ad("View data empty.")}if(aa.length>0){j.fetchRoot(aa,{select_predicate:["physicalid"],WithSynthesisAttribute:true,silent:true,onComplete:function(){ae()},onFailure:function(){ad("Failed to fetch index attributes for root PID:"+aa)}})}else{ae()}}else{ad("No nodes to process tags.")}})},X=function X(){return new c(function(ae,ad){var ac={},aa,ag,Z,ab,af;for(ag in B){if(B.hasOwnProperty(ag)){Z=B[ag];ab=j.getReference(Z);if(!d.is(ab)){ad("Model not found for PID:"+Z);return}af=ab.getAdditionalInfo("ds6w");if(d.is(af)){ac[ag]=af}}}aa=t.parse(ac);aa=aa||{ds6wTagSummary:[]};M=aa.ds6wTagGrouped;y.setTags(null,aa.ds6wTagSummary);ae()})};U().then(X).then(W).fail(V)},h=function h(){var T=[];T=t.getTagsSummary(M);if(d.is(T)){y.setTags(null,T)}},i=function i(){var X=[],T=L.getBehavior("WUXNodeModelBehavior"),U,W,V;if(!T){return}if(d.is(M[e])){delete M[e]}X=t.getTagsSummary(M);if(d.is(X)){y.setTags(null,X)}U=T.getAllDescendants();if(Array.isArray(U)&&0<U.length){U.forEach(function(Y){W=j.getReference(Y.getReferencePID());if(d.is(W)){V=W.getAdditionalInfo("ds6w");if(d.is(V)&&d.is(V[e])){delete V[e];W.setAdditionalInfo({ds6w:V})}}})}},k=function k(U){var W=[],V,T={};if(0===Object.keys(U).length){return}for(V in U){if(U.hasOwnProperty(V)){W.push({color:U[V].colorCode,type:"string",object:V})}}T[e]=W;if(d.is(T)){y.setColorMap(T)}};return{listenTo:function z(){return{activeViewChange:o}},onStart:function q(U,T){O=U||{};P();T()},onStop:function w(){if(y){y.removeEvent("colorize");y.removeEvent("unColorize");y.removeEvent("onFilterChange");y.die();y=void 0}},clear:function H(){K()},getNodeUpdatePromise:function u(U){var T={};if(!d.is(U)){return}if(Array.isArray(U)){A=A.concat(U)}else{A.push(U)}T={callback:m,globalArray:A,context:this,delay:500,blockSize:1000};return j.getExecuteByBlockPromise(T)},addExternalTags:function l(T){n(T)},displayExternalTags:function v(){h()},removeExternalTags:function N(){i()},setStatusCustomColors:function F(T){k(T)}}}return{plugins:["DatabasePlugin","WebServicePlugin","TreeViewPlugin","ProxyPlugin"],creator:b}});define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightHelper"],function(c,a){var b=function b(E,w,l,H,I){var B,J,u,f,o,g,s,A=Object.create(null);var z,h,k,e,G,r,q,i,v,j,y,t;z=function z(M){var N=null,L;L=Array.isArray(M)?M:[M];if(Array.isArray(L)&&L.length>0){N=g.getTreeNodeModel(L[0]);if(c.is(N,"array")&&N.length>0){N=N.map(function(O){var R,P,Q=O,T,U,S;if(!Q.isVisible()){T=Q.getParent();while(!T.isVisible()){T=T.getParent()}U=T}else{for(R=1;R<L.length;R++){S=Q.getVisibleChildren();if(!c.is(S)||S.length===0){break}for(P=0;P<S.length;P++){if(S[P].getInstancePID()===L[R]){Q=S[P];break}}}U=Q}return U})}}return N};h=function h(M){if(Array.isArray(M)&&M.length>0){M.reduce(function L(P,Q){var O=z(Q);if(Array.isArray(O)&&O.length>0){P=P.concat(O)}return P},[]).forEach(function N(O){O.highlight()})}};k=function k(){var M=g.getHighlightedNodes();if(Array.isArray(M)&&M.length>0){M.forEach(function L(N){N.unhighlight()})}};e=function e(O,L){var N=false,M;L=L||false;if(L===true){if(c.is(O,"array")&&O.length>0){M=g.getTreeNodeModel(O[0],{returnFirstOne:true});N=c.is(M)}else{w.debug("Invalid path while partially searching for node")}}else{}return N};G=function G(N,M){var L={found:[],notFound:[]};M=M||false;N.forEach(function(Q){var P,O;if(c.is(Q,"array")){if(e(Q,true)){L.found.push(Q)}else{if(!M){L.notFound.push(Q)}}}else{P=f.getNodeInfo(Q);if(c.is(P,"array")){O=P.map(function(S){var R;if(S.absPath.length===0){R=S.referencePID}else{R=S.absPath}return R});L.found=L.found.concat(O)}else{if(!M){L.notFound.push(Q)}}}});return L};r=function r(){var M=Object.keys(A).reduce(function L(N,O){return N.concat(A[O])},[]);h(M)};q=function q(Q,M){var P,O,R,L,N={};M=M||{};if(c.is(M.isRoot)&&M.isRoot){R=Q}else{if(c.is(M.onlyRefRefOfInstance)&&M.onlyRefRefOfInstance){P=l.getInstance(Q);O=P.get("isInstanceOf");R=O}else{R=Q}}if(c.is(M.skipScopeLink)&&M.skipScopeLink){N.excludeRelationTypes=[s,s+"_inverse"]}L=l.getImpacted(R,true,N);return L};i=function i(O,T){var W,Z,X,M,S,U,N,R,Y=null,L,V,Q,aa,P;N=u;R=J;if(T.length===0){L={isRoot:true}}else{if(N){Y=o.getImplementingItemInstIDs(T);L={onlyRefRefOfInstance:true,skipScopeLink:true}}else{if(R){L={skipScopeLink:true}}}}M=q(O,L);if(c.is(Y,"array")&&Y.length>0){M=M.concat(Y)}for(W=0,X=M.length;W<X;W++){Z=M[W];if(c.is(Z,"array")){S=o.getParentScoped(T);if(c.is(S,"array")&&S.length>0){U=o.getScopedNodeAbsolutePath(S);if(c.is(U)){M[W]=U.concat(Z)}}}}V=G(M);aa=V.found;P=V.notFound;Q=T.length>0?T:O;A[Q.toString()]=aa;H.setNodeIdsToHighlight(Q,aa.concat(P));r()};v=function v(){var L;L=H.getAllNodeIdsToHighlight();A=Object.create(null);Object.keys(L).forEach(function(O){var N,M,P;M=L[O];N=G(M,true);if(N.found.length>0){P=N.found;A[O]=P}})};j=function j(){v();r()};y=function y(M){var L=M.toString();H.removeFromHighlightMap(L);delete A[L];r()};t=function t(L){if(L!==w.getId()){k();j()}};return{listenTo:function p(){return{updateCrossHighlight:t}},onStart:function D(L){s=I.getScopeLinkType();B=c.is(L.enableCrossHighlight)?L.enableCrossHighlight:false;J=c.is(L.implementing)?L.implementing:null;u=c.is(L.implemented)?L.implemented:null;if(!u&&!J){w.debug('Cross-highlight needs "implemented" && "implementing" entries in Module Configuration');return}else{if(u===true&&J===true){w.debug("Wrong configuration for Cross-highlight in the module: "+w.getId());return}}f=w.getBehavior("WUXNodeModelBehavior");if(!c.is(f)){w.debug("WUXNodeModelBehavior is not available");return}g=f.getWUXNodeModel();o=new a(E.getLogger(),I,l)},onStop:function n(){},highlightNodes:function d(L){h(L)},unHighlightAll:function C(){k()},crossHighlight:function F(N,M,L){if(!B){return}if(!c.is(N)){w.debug("nodeId is not defined to crossHighlight");return}if(L){i(N,M)}else{k();y(M.length>0?M:N)}},crossHighlightImpacted:function m(L){if(!B){return}if(L===true){g.unselectAll()}else{k()}j()},reHighlightMyView:function x(){if((Object.keys(A).length>0)){k();r()}},updateCrossHighlightForSelf:function K(M){var L,N;if(!B){return}if(c.is(M,"array")){L=M;N=L[L.length-1]}else{L=[];N=M}i(N,L);w.notify("updateCrossHighlight",w.getId())}}};return{plugins:["DatabasePlugin","SelectionPlugin","ImplementPlugin"],creator:b}});define("DS/DELPPWViewBehaviors/GraphViewBehavior/GraphViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(d,b,c){var a=function(B,O,H,D,x,C,i,S,R,l){var e,n={},q=D.getComponent("ETree"),F=D.getComponent("ETreeViewsFactory"),k=q.OrientationMode.ROOT_ON_TOP,s={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},o={height:"auto",useAsyncPreExpand:false,isDraggable:true,resize:{columns:true,},selection:{unselectAllOnEmptyArea:true,toggle:false,cells:false,enableListSelection:true},enableActiveUI:true,enableKeyboardNavigation:true},r,L,E,m,P,A,K,t,g,U;r=function r(ai){var X=O.getElement(),aa,ab,Y,aj,ac,ad,al,W,ah,ag,Z;if(!d.is(X.getElementsByClassName,"function")||!(aa=X.getElementsByClassName("graphView-container")[0])){O.debug("graph Container not defined.");return}al=ai||{};aj=al.graphViewOptions?d.extend(o,al.graphViewOptions,true):o;if(d.is(L,"array")){ab=new b(O,D,H,x);ag=function ag(ao){var aq,an={context:this,nodes:[],},ap,am;if(d.is(ao)){if(!ao.isSelected()){ao.select()}}ap={selectedNodes:e.getModel().getXSO().get(),};aq=ab.buildContextualMenu(L,O.getAppContext(),ap);if(ap.selectedNodes.length===0){am=L.indexOf("ExploreInWebApp");if(am>=0){aq[am].sensitivity="disabled"}}an.nodes=aq;return an}}Y={template:['<div class="etree-sync-node" draggable="true">','		<div class="etree-sync-node-widget">','			<div class="etree-sync-node-label">','				<div class="etree-sync-node-color"></div>','				<div class="etree-sync-node-label-content"></div>',"			</div>",'    		<div class="etree-sync-node-caption">','      		<div class="etree-sync-node-icon"></div>','      		<div class="etree-sync-node-moreinfo" data-egraph-subelt="moreinfo"></div>',"    		</div>","  	</div>",'		<div class="etree-sync-node-collapse-expand" data-egraph-subelt="collapse-expand">','			<div class="etree-sync-node-collapse-expand-spinner"></div>',"  	</div>","</div>",'<div class="etree-sync-temp-node">',"</div>",'<div class="etree-sync-group">',"</div>",].join("\n"),onmodifyDisplay:function(au){var av=[{dicoType:"PLMEntity",dataIndex:"V_Name.reference"}],am,aw,aq,ap,ax,at,ay,an=d.is(n)?n:{},ar=au.nodeView,ao=au.nodeModel;if(ao.options.isBeingCut){ar.classList.add("is-being-cut")}else{ar.classList.remove("is-being-cut")}ay=ar.querySelector(".etree-sync-node-color");if(d.is(U)&&U&&d.is(ao.options.taggerColor)){ar.classList.add("colorized");ay.style.backgroundColor=ao.options.taggerColor}else{ar.classList.remove("colorized")}ay=ar.querySelector(".etree-sync-node-icon");ay.classList.remove("hidden");if(ao.options.icons&&ao.options.icons.length>0){ay.style.backgroundImage='url("'+ao.options.icons[0]+'")';ay.style["background-size"]="22px 22px"}else{ay.classList.add("hidden")}ay=ar.querySelector(".etree-sync-node-moreinfo");ay.classList.remove("hidden");ay.classList.add("hidden");if(d.is(an.Color)){ay=ar.querySelector(".etree-sync-node-widget");aw=an.Color.dataIndex;at=an.Color.colorDef;aq=ao.options.grid[aw];if(d.is(aq)&&d.is(at[aq])&&!ao.isSelected()){ay.style.background=at[aq].code}else{ay.style.background=""}}ay=ar.querySelector(".etree-sync-node-label-content");if(d.is(an.Content)&&d.is(an.Content[ao._type])){av=an.Content[ao._type]}am=[];ay.innerHTML="";av.forEach(function(az){aq=ao.options.grid[az.dataIndex];ax=S.getAttributeInfo(az.dicoType+"."+az.dataIndex.split(".")[0]);ap=x.getNLS(ax);am.push(ap+" : "+aq)});ay.innerHTML=am.join("<br/>");ay.title=am.join("\n")}};al=d.extend(aj,{orientation:k,contextCallback:ag,fittingArea:s,nodeView:F.generateNodeView(Y),});Z=function Z(ao,an){var ap=O.getBehavior("DropZoneViewBehavior"),am=O.getBehavior("WUXNodeModelBehavior");if(d.is(ap)){ap.setIcon(ao);if(d.is(am)){if(an===true&&!am.isDocumentEmpty()){ap.hide()}}}};e=new q.SyncEGraphTree(aa,al);e.treeContainer.ondragenter=function af(){var am=O.getBehavior("DropZoneViewBehavior");if(d.is(am)){Z(am.iconEnum.PLUS,false)}};e.treeContainer.ondragleave=function ak(){var am=O.getBehavior("DropZoneViewBehavior");if(d.is(am)){Z(am.iconEnum.DROPHERE,true)}};e.treeContainer.ondrop=function ae(){var am=O.getBehavior("DropZoneViewBehavior");if(d.is(am)){Z(am.iconEnum.DROPHERE,true)}};if(typeof X.getElementsByClassName==="function"&&X.getElementsByClassName("drop-zone-container")[0]){e.widget.sm.rootState.actions.insert=function(){};ah=e.container.getElementsByClassName("egraph_views_RootLayer");if(d.is(ah)){if(ah.length>=1){W=ah[0];if(d.is(W)){ac={dropZone:W,acceptedTypes:ai.pprTypes};ad=new c(B,O,H,i,S);ad.init(ac)}}}}e.createOverview();e.swapOverviewVisibility()};E=function E(){var W;W=l.getCurrentView();if(d.is(W[O.getId()].currentView)){if(W[O.getId()].currentView==="graphView"){return true}}return false};m=function m(W){R.getXMLValues(W,function Y(Z){var ab,aa,ac="BOMView";if(d.is(Z.Config.Preferences[ac])){if(d.is(Z.Config.Preferences[ac]["Color"])){n.Color=Z.Config.Preferences.BOMView.Color.AttributeDefinition;n.Color["colorDef"]=Z.convert("Config.Preferences.BOMView.Color.ColorDefinition","value")}if(d.is(Z.Config.Preferences[ac]["Content"])){n.Content={};aa=Z.convert("Config.Preferences.BOMView.Content.Type","name");for(ab in aa){if(aa.hasOwnProperty(ab)){n.Content[ab]=Array.isArray(aa[ab].Row)?aa[ab].Row:[aa[ab].Row]}}}}A()},function X(){O.debug("Failed to get"+W+"XML configuration file");return})};A=function A(){var W=[];K(W);i.setSelectPredicate(O.getId(),W)};K=function K(Z,Y){var X,W=[];if(d.is(n)){if(d.is(n.Color)&&Z.indexOf(n.Color.dataIndex)<0){Z.push(n.Color.dataIndex)}if(d.is(Y)){if(d.is(n.Content)&&d.is(n.Content[Y])){W.push(Y)}}else{if(d.is(n.Content)){Object.keys(n.Content).forEach(function(aa){W.push(aa)})}}W.forEach(function(aa){X=n.Content[aa];X.forEach(function(ab){if(Z.indexOf(ab.dataIndex)<0){Z.push(ab.dataIndex)}})})}};t=function t(ab){var X,Z,Y=ab.type,W={icons:"",label:"",grid:{},useAsyncPreExpand:true},aa=[];K(aa,Y);for(X in ab){if(ab.hasOwnProperty(X)){Z=ab[X];if(d.is(Z)&&Z!=="NULL"){if(aa&&aa.indexOf(X+".reference")>=0){W.grid[X+".reference"]=ab[X]}else{if("PID"===X){W.referencePID=ab[X]}else{if("type"===X){W.referenceType=ab[X]}}}}}}return W};g=function g(W,ab){var aa=[],X,Z,Y=t(W);K(aa,W.type);for(X in ab){if(ab.hasOwnProperty(X)){Z=ab[X];if(d.is(Z)&&Z!=="NULL"){if(aa&&aa.indexOf(X+".instance")>=0){Y.grid[X+".instance"]=ab[X]}else{if("PID"===X){Y.instancePID=ab[X]}}}}}return Y};return{viewName:"graphView",listenTo:function w(){return{Reframe:this.reframeAll,ReframeOn:this.reframeOn,ToggleOrientation:this.toggleOrientation,ToggleOverview:this.toggleOverview}},onStart:function p(X,W){X=X||{};if(d.is(X.views)&&d.is(X.views.graphView)){L=X.views.graphView.contextualCommands}r({pprTypes:X.pprTypes,graphViewOptions:X.graphViewOptions});if(d.is(X.views.graphView.configXML)){m(X.views.graphView.configXML)}P=d.is(X.registerLayoutPreference)?X.registerLayoutPreference:false;if(P===true){l.registerViewforWidgetLayout({viewID:O.getId(),viewType:this.viewName})}W()},onStop:function u(){e.container.remove();e=void 0;if(P===true){l.unregisterViewforWidgetLayout(O.getId(),this.viewName)}},getReferenceNodeOptions:function f(W){var X;if(d.is(W)){X=t(W.toJSON())}return X},getInstanceNodeOptions:function j(X,W){var Y;if(d.is(X)&&d.is(W)){Y=g(X.toJSON(),W.toJSON())}return Y},setModel:function T(W){O.debug("set model on Graph View");if(d.is(e)){e.setModel(W)}return},getModel:function V(){var W=void 0;if(d.is(e)){W=e.getModel()}return W},toggleOrientation:function Q(){if(E()){e.swapLayoutOrientation()}},toggleOverview:function N(){if(E()){e.swapOverviewVisibility()}},reframeOn:function h(){if(E()){e.reframeOn()}},reframeAll:function M(){if(E()){e.reframeAll()}},setSize:function J(){if(E()){e.setSize()}},selectArea:function y(){if(E()){e.selectArea()}},setRootPosition:function I(W){if(E()){if(d.is(W,"string")){switch(W){case"left":e.setRootPosition(q.OrientationMode.ROOT_ON_LEFT);break;case"top":e.setRootPosition(q.OrientationMode.ROOT_ON_TOP);break;case"right":e.setRootPosition(q.OrientationMode.ROOT_ON_RIGHT);break;case"bottom":e.setRootPosition(q.OrientationMode.ROOT_ON_BOTTOM);break;default:break}}else{O.debug("position should be a string")}}},getContent:function G(){var W=void 0;if(d.is(e)){W=e.getContent()}return W},setDisplay:function v(W){_isDisplayed=W},setTaggerStatus:function z(Y){var X,W=O.getElement();X=W.getElementsByClassName("graphView-container")[0];U=Y||false;Y?X.removeClassName("unColorizeTagger"):X.addClassName("unColorizeTagger")}}};return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","SelectionPlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin"],creator:a}});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(c,a){var b=function(e,p,k,h,j,l,m,g){var r,o=new a(e,p,k,h,j,l,m,g),q=o.init;o.init=function(s){r=s||{};q.call(this,s)};o.checkType=function d(s){return(this.isAcceptedType(s)===false)?false:true};o.processRootDrop=function i(u,z,C,s,P,G,H,J,L){var F=this,x,K=p.getBehavior("SelectionBehavior"),O=p.getBehavior("ModelBehavior"),I=p.getBehavior("LinkBehavior"),w=k.getNLSValue(p.getId()),B=k.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{view:w}),y=k.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:w}),N,v,A,E,M,t,D=r.linkTypes[0];if(!c.is(K)||!c.is(O)||!c.is(I)){p.debug("WUXActionDragDrop: Required behaviors are missing.");L("AbstractDragAndDropManager.InternalError");return}x=p.log(y);E=function E(S){var Q,R=p.getBehavior("WUXNodeModelBehavior");Q=c.is(R)?R.validate(S):Q;return Q};t=function t(T,R){var U={},S,Q;if(F.checkType(R)){Q=E(R);if(c.is(Q)){U[Q.param]=Q.paramValue;S=k.getNLSValue(Q.key,U,"ValidationError");p.warn(S,x,"failed");L()}else{p.log(B,x,"completed");I.createConnection([{type:D,idFrom:T.id,idTo:R.id}]);J()}}else{S=k.getNLSValue("DragDrop.NotValidType.Title");p.warn(S,x,"failed");L("DragDrop.NotValidType.Title")}};v=K.getSelections();N=c.is(v[1],"array")?v[1][0]:null;if(c.is(N)){M=O.getReferenceModel(N);A=O.getReference(u);if(!A){A=h.fetchRoot(u,{onComplete:function(Q){if(c.is(Q)){t(M,Q);p.debug("WUXActionDragDrop:Succesfully fetched reference : %o",Q)}else{p.warn(k.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),x,"failed");L("AbstractDragAndDropManager.RootNotInDB")}},onFailure:function(){p.debug("Failed to fetch Refernce for PID: "+u);p.warn(k.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),x,"failed");L("AbstractDragAndDropManager.RootNotInDB")},context:this,silent:true})}else{t(M,A)}}else{p.warn(k.getNLSValue("CreateLink.NoMBOMSelected"),x,"failed");L()}};o.onTreeListViewDrop=function f(v,u){var t={action:[],parameters:[]},w=this.getDragNDropInfo(v,u);if(c.is(w)&&c.is(w.draggedItems,"array")){w.draggedItems.forEach(function s(y,x){t.action[x]="addRoot";t.parameters[x]={rootReferencePID:y.rootReferencePID}});this.processDropEffect(t)}};o.onDropBlank=function n(t,s){return this.onTreeListViewDrop(t,s)};return o};return b});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager"],function(e,c,b,a){var d=function d(s,k,w,g,o,u,n,l){var t=u.getComponent("Element"),z=new c(s,w,k,g,o),v=new b(o),m,f,j,x;f=function f(B){var D={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},E,C,G,F=s.getPreferenceValue("separator"),A;if(e.owns(B,"name")&&("Auxiliary"===B.name)&&e.owns(B,"Label")&&e.is(B.Label.length)&&(B.Label.length>1)){D.treeDataIndex="";D.label="";D.dicoType="";G=B.Label;for(C=0;C<G.length;C++){D.treeDataIndex+=B.Label.dataIndex;D.dicoType+=B.Label.dicoType;E=D.treeDataIndex.split(".");D.label+=E[0];A=E[1];if(A==="instance"){D.labelIsOnRef=(!e.is(D.labelIsOnRef))?false:D.labelIsOnRef&&false}else{D.labelIsOnRef=(!e.is(D.labelIsOnRef))?true:D.labelIsOnRef&&true}if(C+1!==G.length){D.label+=F;D.type+=F;D.dicoType+=F;D.treeDataIndex+=F}}}else{if(e.owns(B,"Label")){D.treeDataIndex=B.Label.dataIndex;D.dicoType=B.Label.dicoType;E=D.treeDataIndex.split(".");D.label=E[0];A=E[1];if(A==="instance"){D.labelIsOnRef=false}else{D.labelIsOnRef=true}}}return D};j=function j(B){var C,D,A=[];if(!e.is(B,"array")){B=[B]}B.forEach(function(E){var F={isSortable:false,dataIndex:E.dataIndex,dicoType:E.dicoType,displayType:E.displayType,isHidden:e.is(E.isHidden)?E.isHidden:false,width:isNaN(E.width)?"auto":parseInt(E.width),minWidth:isNaN(E.minWidth)?100:parseInt(E.minWidth),text:g.getColumnDisplayValue(E),tooltipIndex:E.Tooltip};D=g.getAttributeInfoFromColumn(E);C=w.getAttributeInfo(D.attributeName);if(!e.is(E.displayType)&&e.is(D)){if(g.isDate(C)&&!g.isMultiValuated(C)){E.displayType="Date"}}if(e.is(E.displayType)){F.isEditable=false;switch(E.displayType){case"Relation":F.onCellRequest=v.onCellRequest;break;case"DocMgmt":F.onCellRequest=z.onMultivalueCellRequest.bind(z);break;case"BIEssentials":F.onCellRequest=z.onBIvalueCellRequest.bind(z);break;case"MIL":F.onCellRequest=a.onMILCellRequest;F.setValue=a.setMILValue;break;case"CFG":F.onCellRequest=E.onCellRequest;break;case"Date":case"DateTime":F.isEditable=!g.isReadOnly(C);F.typeRepresentation=(E.displayType==="DateTime")?"datetime":"date";F.setValue=z.setValue.bind(z,E);F.getValue=function(I){var G=I.nodeModel.options.grid[I.dataIndex],H=typeof G==="number"?G*1000:G;return new Date(H)};break;default:break}}else{F.isEditable=false;F.onCellRequest=z.onCellRequest.bind(z,E);F.setValue=z.setValue.bind(z,E)}A.push(F)});return A};x=function x(B,A){var C,D,E,F;A=A||false;D=l.getLabelInfo(s.getId());if(e.is(B)&&e.is(B.name)){E="Column.";F=o.getNLSValue(E+B.name)}else{F=g.getColumnDisplayValue(B.Label)}C={isSortable:false,text:F,dataIndex:"tree",width:A?"100%":"30%",minWidth:150,dicoType:D.dicoType,label:D.attributeName,labelIsOnRef:D.labelIsOnRef,isEditable:false};C.isEditable=!g.isReadOnly(w.getAttributeInfo(D.attributeName));C.setValue=z.setValue.bind(z,C);return C};return{getBlockAttributes:function p(D){var I={index:[],database:[]},C=false,E,H,F,G,B=e.is(D.Columns)?D.Columns.Column:[],A=f(D);if(e.is(A.label)){I.index.push(A.label);I.database.push(A.label)}if(!e.is(B,"array")){B=[B]}B.forEach(function(J){H=g.getAttributeInfoFromColumn(J);F=H.dataIndex;G=H.objType;if(G==="instance"||G==="reference"){if(I.index.indexOf(F)===-1){I.index.push(F)}}if(G==="relation"){C=true}if(I.database.indexOf(F)===-1){I.database.push(F)}});if(C){E=n.getAllRelationDisplayAttributes();if(e.is(E,"array")&&E.length>0){I.index=I.index.concat(E)}}return I},setReusablecontent:function q(B){var C=B.getManager(),D=function D(F){var I,H,E={};F.preventDefault();F.stopPropagation();I=F.target.getParent().dsView.getCellInfos();H=g.getNodeAndColumnInfos(I.nodeModel,C.getColumnOptions(I.virtualColumnID));if(e.is(H.objectToBeModified)&&!g.doesAttributeExist(H.objectToBeModified,H.dataIndex)){E.onComplete=function G(){H.objectToBeModified.setAdditionalInfo({isFetched:true});if(!g.doesAttributeExist(H.objectToBeModified,H.dataIndex)){s.warn(o.getNLSValue("TableView.AvailabilityFailure",{key:H.attributeNLSTitle}))}I.cellView.getGridEngine().updateRowView(I.virtualRowID)};E.forceDBMode=true;k.fetchRoot(H.objectToBeModified.id,E)}};C.addEventListener("show",function A(E){s.debug("onEventShow fired");D(E)});C.registerReusableCellContent({id:"resuableTaggerColor",buildContent:function(){return new t("div",{"class":"taggerColorCell"})}});C.registerReusableCellContent({id:"resuableBICell",buildContent:function(){return new t("span",{"class":"indicator bullet-indicator",styles:{display:"none"}})}});C.registerReusableCellContent({id:"_unitsEditor",buildContent:function(){var F={displayStyle:"lite",requiredFlag:false,},E=new (u.getComponent("UnitsEditor"))(F);E.getContent().addEventListener("focus",D);return E}});C.registerReusableCellContent({id:"_toggle",buildContent:function(){var E=new (u.getComponent("Toggle"))({checkFlag:false});E.getContent().addEventListener("focus",D);return E}});C.registerReusableCellContent({id:"_comboBox",buildContent:function(){var E=new (u.getComponent("ComboBox"))({elementsList:["dummy"]});E.addEventListener("preDropdown",D);return E}});C.registerReusableCellContent({id:"_lineEditor",buildContent:function(){var E=new (u.getComponent("LineEditor"))({displayStyle:"lite"});E.getContent().addEventListener("focus",D);return E}});C.registerReusableCellContent({id:"_editor",buildContent:function(){var E=new (u.getComponent("Editor"))();E.getContent().addEventListener("focus",D);return E}});C.registerReusableCellContent({id:"_datePicker",buildContent:function(){return new (u.getComponent("DatePicker"))({timePickerFlag:true})}});C.registerReusableCellContent({id:"multiValueCell",buildContent:function(){var G,F,E,I,H;G=new t("div",{"class":"wux-layouts-rowentry",name:"mainDiv"});F=new t("div",{"class":"wux-layouts-treeview-multivaluecell-container",});E=new t("div",{"class":"wux-layouts-treeview-icon","icon-type":"css",id:"multiValueCellIcon"});I=new t("div",{"class":"wux-layouts-treeview-label",id:"multiValueCellLabel"});H=new t("i",{"class":"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator",styles:{display:"none"}});F.inject(G);E.inject(F);I.inject(F);H.inject(G);return G}});C.registerReusableCellContent({id:"multiValueLabelCell",buildContent:function(){var E,G,F;E=new t("div",{"class":"wux-layouts-rowentry",name:"mainDiv"});G=new t("div",{"class":"wux-layouts-treeview-multivaluecell-container wux-layouts-treeview-label",id:"multiValueCellLabel"});F=new t("i",{"class":"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator",styles:{display:"none"}});E.addEvent("dblclick",function(K){var I=K.currentTarget,H=I.getParent(),J,L;J=H.value;I.hide();L=new t("input",{"class":"wux-tree-label",id:"multiValueInput",value:e.is(J)?J:""});L.addEvent("blur",function(N){var O=N.currentTarget,M=O.getParent().getElement(".wux-layouts-rowentry");O.destroy();M.show()});L.inject(H)});G.inject(E);F.inject(E);return E}})},getColumnDataIndexByDisplayType:function y(C,B){var D,A,E=[],F;if(!e.is(B)){return this.getColumnsDataIndex(C)}A=C.getManager().getNumberOfColumns();for(D=1;D<A;D++){F=C.getManager().getColumnOptions(D);if(e.is(F)&&e.owns(F,"dataIndex")&&e.owns(F,"displayType")){if(F.displayType===B){E.push(F.dataIndex)}}}return E},getColumnsDataIndex:function i(B,E){var D,H,A,F=[],C,G,E=e.is(E)?E:false;if(E||!e.is(m)){C=B.getManager();A=C.getNumberOfColumns();if(e.is(B._treeDataIndex)){F.push(B._treeDataIndex)}for(D=1;D<A;D++){G=C.getColumnOptions(D);H=e.is(G.isExportable)?G.isExportable:true;if(e.is(G)&&e.owns(G,"dataIndex")&&H){if(!E||!C.isColumnHidden(G.dataIndex)){F.push(G.dataIndex)}}}if(!E){m=F}}else{F=m}return F},createTreeListViewColumns:function r(C,F,A){var B,D=[];if(C.Columns&&C.Columns.Column){D=j(C.Columns.Column)}if(C.Label){B=x(C,D.length===0);B.isExportable=false,D.splice(0,0,B)}if(e.is(A)&&A===true){D.splice(0,0,{isSortable:false,isExportable:false,text:"",dataIndex:"selection",type:"selection",width:40})}if(e.is(F)&&F===true){D.splice(0,0,{isSortable:false,isEditable:false,isDraggable:false,isExportable:false,isHidden:true,text:"",dataIndex:"taggerColor",width:5,onCellRequest:function E(H){var G;if(H.manager.getColumnOptions("taggerColor").isHidden===false){if(!H.isHeader){G=H.cellView.reuseCellContent("resuableTaggerColor");if(G){if(e.is(H.nodeModel.options.taggerColor)){G.style["background-color"]=H.nodeModel.options.taggerColor}else{G.style["background-color"]=""}H.cellView.getContent().setContent(G)}}}}})}return{columns:D,labelIsOnRef:e.is(C.Label)?B.labelIsOnRef:null,label:e.is(C.Label)?B.label:null}},manageColumn:function h(A,C,B){if(!B){return}if(true===B.visible){A.getManager().showColumn(C)}else{A.getManager().hideColumn(C)}}}};return d});define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel"],function(e,a,c){var d=function d(f){f=f||{};c.call(this,f);this.object={};this.options.grid["ds6w:type"]=this.getReferenceType();this.object.type=this.getReferenceType()};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.updateBadge=function b(f){this.prepareUpdate();this.setBadges(f);this.pushUpdate()};return d});define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/WUXNodeModelBehavior",["UWA/Core","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel"],function(d,a,c){var b=function b(l,L,an,ap,aq,z,Y,am,ae,R){var ad,K,ag,v,j,W,t,af,s,H,F,i,S,au,aa,o,E,m,y,e,n,u,k=new a({useAsyncPreExpand:true}),h,ar,I;ad=k.getXSO();if(ad){ad.onChange(function(aD){var aE,aL=[],aI=[],aG,aH,aF,aM,aK=L.getBehavior("ViewBehavior"),aB=aD.getInstancePID()||aD.getReferencePID(),aA=aD.isSelected(),aJ=k.getSelectedNodes(),aC=aD.getAbsolutePath();for(aG=0,aH=aJ.length;aG<aH;aG++){aF=aJ[aG];if(d.is(aF)){aM=aF.getInstancePID()||aF.getReferencePID();aL.push(aM);aI.push({id:aM,path:aF.getAbsolutePath()})}}aq.setSelection(L.getId(),aI);aE={sourceId:L.getId(),selectedNodeIds:aL,changed:{nodeId:aB,isSelected:aA,absPath:aC}};if(d.is(h)){h.crossHighlight(aB,aC,aA)}if(d.is(aK)&&true===aA){aK.setActiveView()}L.notify("select",aE)})}K=function K(){var aC,aB,aA=function aA(){};aC=function aC(aJ){var aI,aF,aK,aL,aH,aE,aG;aJ.preventDefault();aJ.stopPropagation();aI=k.getSelectedNodes();aK=function aK(){var aM=k.getRoots(),aN;if(d.is(aM)){aN=aM[0];if(d.is(aN)){aN.select()}}};if(!aI){aK();return}aL=aI[0];if(!aL){aK();return}if(aL.hasChildren()||aL.getNextBrother()){aH=aL.getNextVisibleNode();aH.select();aL.unselect()}else{if(aL.isRoot()){aL.unselect();aK();return}else{aG=aL.getParent();while(aG&&!aG.getNextBrother()&&!aG.isRoot()){aG=aG.getParent()}aF=aG.getNextBrother();if(aF){aF.select();aL.unselect()}else{if(aG.getPreviousBrother()){aE=aG.getPreviousBrother();aE.select();aL.unselect()}else{aL.unselect();aK();return}}}}};aB=function aB(aH){var aE=k.getSelectedNodes(),aJ,aI,aG,aF=function aF(){var aL,aK,aM,aN;aL=k.getRoots();if(d.is(aL,"array")&&aL.length>0){aK=aL[aL.length-1];aM=aK.getVisibleChildren();if(d.is(aM,"array")&&aM.length>0){aN=aM[aM.length-1]}else{aN=aK}aN.select()}};aH.preventDefault();aH.stopPropagation();if(!aE){aF();return}aJ=aE[0];if(!aJ){aF();return}aI=aJ._rowID;if(0===aI){aJ.unselect();aF();return}aG=aJ.getPreviousVisibleNode();aJ.unselect();aG.select()};Y.createHandler({domElement:L.getElement(),onTab:aC,onDownArrow:aC,onShiftTab:aB,onUpArrow:aB,onCtrlA:function aD(aE){k.selectAll();aE.preventDefault();aE.stopPropagation()},onCtrlC:aA,onCtrlV:aA,onCtrlX:aA,onSuppr:aA,onBackspace:aA})};ag=function ag(aC,aD){var aA,aB;aD=aD||false;aB=function aB(aF){var aE=[],aG=null;aG=k.getTreeNodeModel(aF[0]);if(!d.is(aG)||aG.length===0){return null}if(aF.length===1){if(aD){aG=aG[0]}}else{if(aF.length>1){aG.forEach(function(aH){var aL,aI,aK=aH,aJ,aM;for(aL=1;aL<aF.length;aL++){aJ=aK.getChildren();aM=false;for(aI=0;aI<aJ.length;aI++){if(aJ[aI].getInstancePID()===aF[aL]){aK=aJ[aI];aM=true;break}}if(!aM){break}}if(aM){aE.push(aK)}});if(aE.length>0){aG=(aD)?aE[0]:aE}else{aG=null}}}return aG};if(Array.isArray(aC)&&aC.length>0){aA=aB(aC)}else{if(d.is(aC,"string")){aA=k.getTreeNodeModel(aC,{returnFirstOne:aD});if(Array.isArray(aA)&&aA.length<1){aA=null}}else{L.debug("nodeId is not valid.");aA=null}}return aA};v=function v(aC){var aA=k.getRoots(),aE=null,aB,aD;aD=aA.length;for(aB=0;aB<aD;aB++){if(aA[aB].getReferencePID()===aC){aE=aA[aB];break}}return aE};W=function W(){var aA=k.getRoots();return Array.isArray(aA)&&aA.length<=0};y=function y(aF){var aE,aD,aC,aB,aA;if(aF){aE=aF.getReferencePID();if(aE){aD=an.getReference(aE);if(aD){aC=!an.needToQueryForChildren(aD);if(aC){aF.expand();aB=aF.getChildren();if(Array.isArray(aB)&&aB.length>0){aB.forEach(function(aG){y(aG)})}}else{aA=function aA(){if(!aF.hasChildren()){aa(aF,{loadChildren:true})}y(aF)};aF.setState({state:"expanding"});an.getDescendantsFromServer(aE,aA,{context:this,expandLevel:-1})}}}}else{L.debug("Invalid node to expand.")}},H=function H(aG,aH,aD){var aE,aF=L.getBehavior("TaggerBehavior"),aI=L.getBehavior("BIBehavior"),aB={nodeOptions:{},taggerOptions:{}},aC,aA,aK;if(d.is(aH)){aK=aH.getAbsolutePath().toString();aA=aK!==""?aK.concat(",",aG.instancePID):aG.instancePID}else{aA=aG.referencePID}if(aI){aB=aI.getNodeOptions(aA);d.merge(aG,aB.nodeOptions)}aC=new c(aG);if(d.is(aH)){aH.addChild(aC,aD)}else{k.addRoot(aC);if(true!==W()){aE=L.getBehavior("DropZoneViewBehavior");if(d.is(aE)){aE.hide()}}if(true===j){am.addRoot(L.getId(),aC.getID())}}F(aC);if(aF){aF.getNodeUpdatePromise({PID:aC.getID(),Path:aC.isRoot()?aC.getReferencePID():aC.getAbsolutePath().toString(),event:"add",externalTags:[aB.taggerOptions]}).then(function aJ(){Promise.resolve()})}return aC};F=function F(aB){var aA=[];if(d.is(af)){aA=z.getScopeLinksOfImplementing(aB.getID());if(aA.length>0){i(aB,af.badgeIcon)}}};i=function i(aD,aB){var aA=d.is(aB)?ap.getIconURLFromKey(aB):"",aC={bottomLeft:d.is(aA)?aA:""};if(Array.isArray(aD)){aD.forEach(function aE(aF){aF.updateBadge(aC)})}else{aD.updateBadge(aC)}};u=function u(aE,aD){var aC,aB,aA=null;if(aD){aB=aD.getChildren();if(Array.isArray(aB)&&aB.length>0){for(aC=0;aC<aB.length;aC++){if(aE===aB[aC].options.instancePID){aA=aB[aC];break}}}}return aA};au=function au(aG,aB,aE){var aD,aK,aF,aO,aP=L.getBehavior("TreeListViewBehavior"),aR=L.getBehavior("GraphViewBehavior"),aQ,aN,aA,aC,aI,aL,aM=true,aJ,aH;aE=aE||{};aI=d.is(aE.onEndAddToNodeList,"function")?aE.onEndAddToNodeList:null;if(d.is(aI)){delete aE.onEndAddToNodeList}aH=d.is(aE.onEndAddNode,"function")?aE.onEndAddNode:null;if(d.is(aH)){delete aE.onEndAddNode}if(s&&!d.is(aE.configIds)){aE.configIds={pids:[],relids:[]}}aL=function aL(aS,aT){if(s&&d.is(aH)){I(aE.configIds.pids);ae.updateAttributes(aE.configIds,ar);aE.configIds={pids:[],relids:[]}}if(d.is(aI)){if(!aT.hasChildren()){aT.setState({state:"noChildren"})}aI(aS,aT)}};if(!d.is(aG,"string")){L.debug("_addToNodeModelListRecursive: invalid PID.");aL(null,null);return}if(!d.is(aP)){L.debug("treeListViewBehavior is undefined");return}aC=function aC(){aa(aF,aE);aL(aD,aF);return};if(!d.is(aB)){aD=an.getReference(aG);if(aD){if(s&&Array.isArray(aE.configIds.pids)&&!((aE.configIds.pids).indexOf(aG)>0)){aE.configIds.pids.push(aG)}aF=ag(aG,true);if(d.is(aF)&&(aF.isRoot()||(d.is(aE.updateItem)&&aE.updateItem===true))){aQ=aP.getUpdateNodeOptions(aD);m(aG,aQ)}else{aN=aP.getReferenceNodeOptions(aD);aQ=aN;if(d.is(aR)){aA=aR.getReferenceNodeOptions(aD);aQ.grid=d.merge(aN.grid,aA.grid)}aF=H(aQ)}}}else{aK=an.getInstance(aG);if(d.is(aK)){if(s&&Array.isArray(aE.configIds.relids)&&!((aE.configIds.relids).indexOf(aG)>0)){aE.configIds.relids.push(aG)}aD=an.getReferenceModelFromInstance(aK);if(!d.is(aD)){return}aF=u(aG,aB);if(d.is(aF)){if(aF.getReferencePID()!==aK.get("isInstanceOf")){aO=aF._getLocalID();aB.removeChild(aF)}else{aM=false;aQ=aP.getUpdateNodeOptions(aK,aF);m(aG,aQ);S(aK,aF.getAbsolutePath())}}if(aM){aJ=aB.getAbsolutePath();aJ.push(aK.id);aN=aP.getInstanceNodeOptions(aD,aK,aJ);aQ=aN;if(d.is(aR)){aA=aR.getInstanceNodeOptions(aD,aK);aQ.grid=d.merge(aN.grid,aA.grid)}if(aD.getAdditionalInfo("queriedForChildren")===false){aQ.children=[]}aF=H(aQ,aB,aO)}}else{aD=an.getReference(aG)}}if(!aE.loadChildren){aL(aD,aF);return}if(aK){aC()}else{if(an.needToQueryForChildren(aD)){aE=d.merge(aE,{silentMode:true});aF._expandState="expanding";an.getDescendantsFromServer(aD.id,aC,aE)}else{if(d.is(aE.withLinksResolved)&&aE.withLinksResolved&&an.needToQueryForConnections(aD)){aF._expandState="expanding";an.findMissingLinkedObjects(aD.id,aC,aE)}else{aC()}}}};aa=function aa(aC,aD){var aA,aE=d.is(aD.filterQuery)?aD.filterQuery:null;k.prepareUpdate();aA=an.getFilteredInstancesFromCollection(aC._referencePID,aE);aA=aA.map(function(aF,aG){return{position:aG,data:aF}});aA=aA.sort(function(aI,aH){var aG=aI.data.get("V_TreeOrder"),aJ=aH.data.get("V_TreeOrder"),aF;if(aG&&aJ){aF=Number(aG)-Number(aJ)}else{aF=aI.position-aH.position}return aF});aA=aA.map(function(aF){return aF.data});aA.forEach(function aB(aF){au(aF.id,aC,aD)});k.pushUpdate()};o=function o(aE){var aB=null,aH,aD,aA,aI,aG,aC,aF;aG=function aG(){L.notify("startProgress");aB.prepareUpdate()},aC=function aC(aJ){aB.preExpandDone();aB.pushUpdate();if(""!==aJ){aB.setState({state:aJ})}L.notify("stopProgress");if(d.is(h)){h.reHighlightMyView()}};aD=function aD(){var aJ="";if(!aB.hasChildren()){aa(aB,{loadChildren:true})}if(!aB.hasChildren()){aJ="noChildren"}aC(aJ)};aA=function aA(){L.warn(ap.getNLSValue("Error.ExpandFailed.Title"));aF.setAdditionalInfo({queriedForChildren:false});aC("collapsed")};aI=function aI(){L.warn(ap.getNLSValue("Info.ExpandCanceled.Title"));aF.setAdditionalInfo({queriedForChildren:false});aC("collapsed")};if(d.is(aE)&&d.is(aE.data)&&d.is(aE.data.nodeModel)){aB=aE.data.nodeModel;aF=an.getReference(aB.getReferencePID());if(d.is(aF)){aG(aB);if(!an.needToQueryForChildren(aF)){aD(aB)}else{aH={ordered:false,context:this,doNotExpand:true,onFailure:aA,onTimeout:aA,onCancel:aI};an.getDescendantsFromServer(aF.id,aD,aH)}}}};E=function E(aA){if(d.is(h)){h.reHighlightMyView()}};m=function m(aB,aE){var aC,aD,aA=d.is(aB,"array")?ag(aB):ag(aB.split(","));aE=aE||{};if(d.is(aA,"array")){k.prepareUpdate();for(aC=0;aC<aA.length;aC++){aD=aA[aC];if(d.is(aE.label)){aD.setLabel(aE.label)}if(d.is(aE.attributes)){if(d.is(aD._getRowID())){aD.updateOptions({grid:aE.attributes})}else{for(aC in aE.attributes){if(aE.attributes.hasOwnProperty(aC)){aD.options.grid[aC]=aE.attributes[aC]}}}}F(aD)}k.pushUpdate()}};S=function S(aB,aC){var aF,aE,aD,aA=L.getBehavior("TreeListViewBehavior");k.prepareUpdate();aF=aA.getRelationNodeOptions(aB,aC);if(d.is(aF)){for(aE in aF){if(aF.hasOwnProperty(aE)){aD=aF[aE].attributes;if(d.is(aD)){m(aE,{attributes:aD})}}}}k.pushUpdate()};e=function e(aG){var aH,aE=an.getReference(aG.getReferencePID()),aD,aC=L.getBehavior("TreeListViewBehavior"),aA,aB=L.getBehavior("GraphViewBehavior"),aF;if(!d.is(aG)&&!d.is(aC)){return}if(aG.isRoot()){aA=aC.getReferenceNodeOptions(aE);aH=aA;if(d.is(aB)){aF=aB.getReferenceNodeOptions(aE);aH.grid=d.merge(aA.grid,aF.grid)}}else{aD=an.getInstance(aG.getInstancePID());aA=aC.getInstanceNodeOptions(aE,aD,aG.getAbsolutePath());aH=aA;if(d.is(aB)){aF=aB.getInstanceNodeOptions(aE,aD);aH.grid=d.merge(aA.grid,aF.grid)}}aG.updateOptions(aH);F(aG)};ar=function ar(aB){var aA,aC;aA=Object.getOwnPropertyNames(aB.relids);for(aC=0;aC<aA.length;aC++){m(aA[aC],{attributes:aB.relids[aA[aC]]})}};I=function I(aC){var aA=ae.getRootEffectivity(),aB;if(d.is(aC,"array")&&aC.length>0){for(aB=0;aB<aC.length;aB++){m(aC[aB],{attributes:aA})}}};return{listenTo:function al(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,updateEffectivityColumns:this.updateEffectivityColumns}},onStart:function T(aA){j=d.is(aA.registerRoots)?aA.registerRoots:false;t=d.is(aA.withLinksResolved,"boolean")?aA.withLinksResolved:true;af=d.is(aA.displayBadge)?aA.displayBadge:null;s=R.showEffectivityColumns();k.onPreExpand(o);k.onPreCollapse(E);n=aA.pprTypes;K();h=L.getBehavior("CrossHighlightBehavior")},onStop:function Q(){k.empty()},validate:function f(aB){var aA;if(d.is(aB)&&d.is(v(aB.id))){aA={};aA.key="AlreadyRoot";aA.param="referenceName";aA.paramValue=aB.get("V_Name")}return aA},getNodeModel:function G(aA,aB){return ag(aA,aB)},getNodeInfo:function ay(aD,aE){var aB=null,aA=ag(aD,aE),aC;aC=function aC(aF){return{label:aF.getLabel(),referencePID:aF.getReferencePID(),instancePID:aF.getInstancePID(),referenceType:aF.getReferenceType(),absPath:aF.getAbsolutePath()}};if(Array.isArray(aA)){aB=aA.map(aC)}else{if(d.is(aA,"object")){aB=aC(aA)}}return aB},addNodeModel:function p(aC,aA){var aB;aB=H(aC,aA);return aB},removeNode:function at(aG,aF){var aE=[],aB=L.getBehavior("TaggerBehavior"),aC,aD=function aD(){var aH=L.getBehavior("DropZoneViewBehavior");if(W()){if(d.is(aH)){aH.setIcon(aH.iconEnum.DROPHERE);aH.show()}}if(d.is(aF,"function")){aF()}};if(d.is(aG,"string")){aC=k.searchTree(aG)}else{aC=d.is(aG,"array")?aG:[aG]}aC.forEach(function aA(aK){var aL,aJ,aI;if(d.is(aB)){aL=aK.getAllDescendants();if(d.is(aL)){aE=aL.map(function aH(aM){return{PID:aM.getID(),Path:aM.isRoot()?aM.getReferencePID():aM.getAbsolutePath().toString(),event:"remove"}})}aE.push({PID:aK.getID(),Path:aK.isRoot()?aK.getReferencePID():aK.getAbsolutePath().toString(),event:"remove"})}if(aK.isRoot()){aI=aK.getID();k.removeRoot(aK);if(true===j){am.removeRoot(L.getId(),aI)}L.notify("removeRoot",aI)}else{aJ=aK.getParent();if(aJ){aJ.removeChild(aK)}}});if(d.is(aB)){aB.getNodeUpdatePromise(aE).then(aD).fail(aD)}else{aD()}},hideNodes:function ai(aE){var aA,aG,aC=[],aD,aB={};if(d.is(aE,"array")&&aE.length>0){aA=L.getBehavior("ExpandFilterBehavior");if(d.is(aA)){aA.resetFilterUI()}aC=aE.filter(function(aH){return d.is(aH)&&aH.isRoot()});aB={callback:this.removeNode,globalArray:aC,context:this,blockSize:50};k.prepareUpdate();k.getXSO().empty(false);aD=an.getExecuteByBlockPromise(aB);aD.then(function aF(){k.pushUpdate();aG=am.getRoots();if(d.is(aG,"array")&&0===aG.length){an.resetCollections()}})}},onHideRootNode:function J(){this.hideNodes(k.getSelectedNodes())},onHideAll:function P(){this.hideNodes(k.getRoots())},updateEffectivityColumns:function M(aB,aA){if(d.is(aB)&&(L.getId()!=="AUXILIARY")&&(n.indexOf(aA)!==-1)){ar(aB)}},onChangeSortIndex:function g(aB){var aA,aC=k.getTreeNodeModel(aB.get("PID"));if(d.is(aC)){aC.setAttribute("sortIndex",aB.get("sortIndex"));aA=aC.getParent();aA.sortChildren({isRecursive:false,sortFunction:function(aE,aD){return(aE.options.grid.sortIndex<aD.options.grid.sortIndex)?-1:1}})}},isSelected:function az(aD){var aB=ag(aD,false),aA=false;if(d.is(aB,"array")){aA=aB.some(function aC(aE){return aE.isSelected()})}return aA},isNodeAdded:function aw(aB){var aA=ag(aB,true);return d.is(aA)},selectNode:function av(aB){var aA=ag(aB,false);if(d.is(aA,"array")){aA.forEach(function(aC){if(aC.isSelected()){aC.unselect()}aC.select()})}},unSelectNode:function C(aB){var aA=ag(aB,false);if(d.is(aA,"array")){aA.forEach(function(aC){if(aC.isSelected()){aC.unselect()}})}},updateBadge:function D(aB,aC){var aA;if(d.is(aB)){aA=ag(aB,false);if(d.is(aA)){i(aA,aC)}}},getWUXNodeModel:function w(){return k},unSelectAll:function q(){k.unselectAll()},withTransactionUpdate:function ax(aA){k.withTransactionUpdate(aA)},prepareUpdate:function ak(){k.prepareUpdate()},pushUpdate:function U(){k.pushUpdate()},getRoots:function aj(){var aB,aC=k.getRoots();aB=aC.map(function aA(aD){return aD.getReferencePID()});return aB},getChildren:function A(aB){var aA=ag(aB,true),aC=[];if(d.is(aA)){aC=aA.getChildrenPID()}return aC},getAllDescendants:function Z(){return k.getAllDescendants()},getSelectedNodes:function V(){return k._xso.get()},getSelectedNodesInfo:function O(){var aA,aB=this.getSelectedNodes();aA=aB.map(function(aC){return{id:aC.getID(),absPath:aC.getAbsolutePath()}});return aA},emptyNodeModel:function B(){var aB,aA=L.getBehavior("TaggerBehavior");if(d.is(aA)){aA.clear()}k.prepareUpdate();if(d.is(k)){k.empty()}k.pushUpdate();if(k._numberOfNodesInDocument<1){aB=L.getBehavior("DropZoneViewBehavior");if(d.is(aB)){aB.show()}}},addEventListener:function(aA,aB){return k.getModelEvents().addEventListener(aA,aB)},removeEventListener:function(aA){k.getModelEvents().unsubscribe(aA)},addNode:function x(aJ,aM){var aA=aM||{},aQ,aO,aL=d.is(aA.loadChildren,"boolean")?aA.loadChildren:true,aN=d.is(aA.silentMode,"boolean")?aA.silentMode:true,aH=d.is(aA.withLinksResolved,"boolean")?aA.withLinksResolved:t,aD=d.is(aA.doNotExpand,"boolean")?aA.doNotExpand:false,aF=d.is(aA.forceDBMode,"boolean")?aA.forceDBMode:false,aG=d.is(aA.updateItem,"boolean")?aA.updateItem:false,aK=d.is(aA.onAddToTreeListFail,"function")?aA.onAddToTreeListFail:null,aC=d.is(aA.onAddToTreeListComplete,"function")?aA.onAddToTreeListComplete:null,aB,aI,aE;aB=function aB(aS,aR){if(d.is(aR)){if(!aR.isExpanded()){aR.expand()}e(aR);L.notify("addRootNode",aR.getID())}L.notify("stopProgress");if(d.is(aC,"function")){aC(aS)}};aI=function aI(){};aE=function aE(aR){L.notify("stopProgress");if(d.is(aK,"function")){aK(aR)}};aA=d.merge(aA,{loadChildren:aL,silentMode:aN,withLinksResolved:aH,forceDBMode:aF,updateItem:aG,onEndAddNode:aI,onFailure:aE});k.prepareUpdate();if(aJ.isReference()){L.notify("startProgress",{noTimeout:true});aA.onEndAddToNodeList=aB;au(aJ.id,null,aA)}else{if(aJ.isInstance()){aO=an.getAggregatingReferenceModelFromInstance(aJ);aQ=k.searchTree(aO.id);if(d.is(aQ)&&aQ.length>0){aQ.forEach(function aP(aR){L.notify("startProgress",{noTimeout:true});au(aJ.id,aR,aA);if(!aD){if(!aR.isExpanded()){aR.expand()}}L.notify("stopProgress")})}}}k.pushUpdate()},updateNode:function X(aC,aB){var aA=ag(aC);aB=aB||{};if(d.is(aA,"array")){k.prepareUpdate();aA.forEach(function(aD){if(d.is(aB.loadChildren)&&aB.loadChildren){aa(aD,aB);if(aD.isSelected()||aD.isRoot()){aD.expand()}}e(aD)});k.pushUpdate()}},updateAttributes:function ab(aB){var aC,aA=L.getBehavior("TreeListViewBehavior");if(!d.is(aB)){L.debug("updateAttributes: Input model is undefined.");return}aC=aA.getUpdateNodeOptions(aB);if(d.is(aC)){m(aB.id,aC)}S(aB)},updateDocAttributes:function r(aC){var aB,aA=L.getBehavior("TreeListViewBehavior");k.prepareUpdate();aB=aA.getDocumentNodeOptions(aC);if(d.is(aB)){m(aC,aB)}k.pushUpdate()},reparent:function ao(aD){var aC,aB;if(d.is(aD)){L.notify("startProgress");k.prepareUpdate();if(d.is(aD.formerParentsPIDArray,"array")){aD.formerParentsPIDArray.forEach(function aF(aG){aC=an.getReference(aG);if(d.is(aC)){aB=ag(aC.id)}if(d.is(aB,"array")){aB.forEach(function aH(aI){var aK=aI.getChildren();if(d.is(aK,"array")){aK=aK.filter(function aL(aM){var aO=false,aN=aM.getInstancePID();if(d.is(aD.movedInstPIDArray,"array")){aD.movedInstPIDArray.forEach(function aP(aQ){if(aN===aQ){aO=true}})}return aO});aK.forEach(function aJ(aM){aI.removeChild(aM)})}})}},this)}if(d.is(aD.newParentPID,"string")){aC=an.getReference(aD.newParentPID);if(d.is(aC)){aB=ag(aC.id);if(d.is(aB,"array")){aB.forEach(function aA(aG){aG.removeChildren()});if(d.is(aD.newInstPIDArray,"array")){aD.newInstPIDArray.forEach(function aE(aH){var aG=an.getInstance(aH);if(d.is(aG)){this.addNode(aG)}},this)}}}}k.pushUpdate();L.notify("stopProgress")}},expandNode:function ah(aC){var aB,aA;this.withTransactionUpdate(function aD(){if(d.is(aC,"array")&&aC.length>0){for(aB=0,aA=aC.length;aB<aA;aB++){y(aC[aB])}}else{y(aC)}})},filterChildren:function ac(aE,aF){var aB=this,aH=aF||null,aA,aD=d.is(aH)?true:false,aG=aD?{filterQuery:aH}:{},aC={bottomRight:aD?"filter":""};aA=v(aE);if(d.is(aA)){k.withTransactionUpdate(function(){var aJ;if(aA.hasChildren()){aA.getChildren().slice().forEach(function(aK){aB.removeNode(aK)})}aJ=an.getFilteredInstancesFromCollection(aA.getReferencePID(),aH);aJ.forEach(function aI(aK){aB.addNode(aK,aG)});aA.updateBadge(aC)})}},isDocumentEmpty:function N(){return W()}}};return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin"],creator:b}});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(c,b){var a=function(u,o,k,i,v,j,A,q){var e,w=new b(u,o,k,i,v,j,A,q),f=w.init;w.init=function r(B){e=B||{};f.call(this,e)};w.onDragEndCell=function s(C,B){return false};w.onDragEnterRowHeader=function n(C,B){return false};w.onDragLeaveRowHeader=function d(C,B){return false};w.onDragEnterColumnHeader=function l(C,B){return false};w.onDragLeaveColumnHeader=function g(C,B){return false};w.onDragEnterCell=function t(C,B){return false};w.onDragLeaveCell=function m(C,B){return false};w.onDragOverCell=function z(C,B){return false};w.onDragEnterBlank=function y(C,B){return false};w.onDragLeaveBlank=function h(C,B){return false};w.onDropCell=function x(C,B){o.warn(k.getNLSValue("AbstractDragAndDropManager.NotAuthorized"));return false};w.onDropBlank=function p(C,B){o.warn(k.getNLSValue("AbstractDragAndDropManager.NotAuthorized"));return false};return w};return a});define("DS/DELPPWViewBehaviors/TreeListViewBehavior/TreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager"],function(d,a,f,b,j,c,e,i,g){var h=function(I,V,P,J,o,ag,F,D,p,L,s,t,H,ac,z){var n,ab,R,Q,S,Y,v={},ae=new e(V,o,D,H,P),G=new i(V,o,p),W=J.getComponent("TreeListView"),u=J.getComponent("Tree"),x=new g(V,L,P,o,ag,F),ah={apiVersion:2,enableDragAndDrop:false,height:"auto",showSelection:true,isEditable:false,performances:{resizeDebounceTimeout:200,renderingMode:"adaptive"},resize:{columns:true,rows:true},selection:{unselectAllOnEmptyArea:true,toggle:false,cells:false,enableListSelection:true},enableActiveUI:true,enableKeyboardNavigation:true,shouldDisplayTooltip:function(ar){var ao=ar.manager.getColumnOptions(ar.virtualColumnID),ak={longHelp:"",},au=[],aq=F.getAttributeInfoFromColumn(ao),ap=ag.getAttributeInfo(aq.attributeName),am=ar.cellModel.options.value,at,al,an;if(!d.is(ao.displayType)&&d.is(aq)){if(F.isMultiValuated(ap)){ao.displayType="Multivalue"}}switch(ao.displayType){case"Relation":case"Multivalue":case"DocMgmt":if(ao.displayType==="Multivalue"&&!ar.isHeader){am=F.getValueAsArray(ar.nodeModel.options.grid[ar.dataIndex])}if(Array.isArray(am)&&am.length!==0){if(F.isDate(ap)){am=am.map(function(av){return F.getFormattedDate(av)})}for(al=0;al<am.length;al++){at=am[al];au.push(d.is(at.Value)?at.Value:at)}ak.longHelp=F.getValueAsString(au,F.getType(ap)).split(V.getPreferenceValue("separator")).join("\n")}else{if(ar.isHeader){ak.longHelp=am}}break;default:an=ar.cellModel.options.value;if(!ar.isHeader){if(!d.is(an)){an=""}else{if(d.typeOf(an)==="object"){an=an.getLabel()}else{if(d.typeOf(an)==="boolean"){an=(an)?"True":"False"}else{if(F.isDate(ap)){an=F.getFormattedDate(an)}else{if(F.hasRangeDefined(ap)){an=ar.cellModel.options.value}else{if(F.isDouble(ap)||F.isInteger(ap)){an=F.getValueAsString(an,F.getType(ap))}}}}}}}ak.longHelp=an}if(!ar.isHeader){ak.longHelp+="\n\n"+x.getTooltipValue(ar)}return ak},shouldBeEditable:function(am){var ak=true,al;if(true===am.isHeader){ak=false}else{if("selection"===am.dataIndex){ak=true}else{al=F.getNodeAndColumnInfos(am.nodeModel,am.parent.options.columns[am.virtualColumnID]);ak=!F.isReadOnly(al.attributeInfo,al.attributeDef)}}return ak}},M,m,C,A,K,ai;M=function M(au){var al=V.getElement(),av=d.is(au.columnConfig)?au.columnConfig:t.getViewColumnPreferences(V.getId(),Q),an,am,ar,aq,at=V.getPreferenceValue("separator"),ap,ao;au=au||{};ar=au.treeListViewOptions?d.extend(ah,au.treeListViewOptions,true):ah;if(!d.is(av)){throw new Error("_createTreeListView options not defined")}if(ar.contextualCommands){an=new f(V,J,P,F);ar.onContextualEvent={callback:function ak(aE){var aC=[],ay,az,aF,aA,aw={};if(!d.is(aE.treeview)){return}aF=aE.treeview;ay=aF.nodeModel;aA=aF.manager;if(!d.is(aF.virtualRowID)){return}else{if(-1===aF.virtualRowID){if(d.is(ar.headerContextualCommands)){az=n.options.columns[aF.virtualColumnID];aw={node:ay,selectedNodes:n.getDocument().getXSO().get(),column:az,virtualColumnID:aF.virtualColumnID,manager:aA,handlers:{onSizeColumnToFit:function aG(aH){aA.sizeColumnToFit(aH)},onSortColumnContentAsc:function ax(aH){aA.sortColumnContent(aH,{sortOrder:"asc"})},onSortColumnContentDesc:function aB(aH){aA.sortColumnContent(aH,{sortOrder:"desc"})},onHideColumn:function aD(aH){t.updateViewPreferences(V.getId(),aF.dataIndex,{visibility:false});aA.hideColumn(aH)}}};aC=an.buildContextualMenu(ar.headerContextualCommands,V.getAppContext(),aw);if(aF.dataIndex==="selection"||aF.dataIndex==="taggerColor"){aC.forEach(function(aH){aH.state="disabled"})}else{if(aF.dataIndex==="tree"){aC.forEach(function(aH){if(aH.title==="Hide"){aH.state="disabled"}})}}}}else{if(0<=aF.virtualRowID){if(d.is(ay)){if(!ay.isSelected()){ay.select()}}az=n.options.columns[aF.virtualColumnID];aw={node:ay,selectedNodes:n.getDocument().getXSO().get(),column:az};aw.infos=F.getNodeAndColumnInfos(ay,az);aC=an.buildContextualMenu(ar.contextualCommands,V.getAppContext(),aw)}}}return aC}}}if(d.is(au.treeListViewOptions)&&d.is(au.treeListViewOptions.enableDragAndDrop)){ao={acceptedTypes:au.pprTypes,addToAuxIfNotAcceptedType:d.is(au.addToAuxIfNotAcceptedType)?true:null};switch(au.dragDropManager){case"WUXActionDragDrop":ao=d.extend(ao,{linkTypes:au.linkTypes});R=new j(I,V,P,o,ag,L,s,z);break;case"WUXGenericLinksDragDrop":ao=d.extend(ao,{linkTypes:au.linkTypes});R=new c(I,V,P,o,ag,L,s,J);break;default:R=new a(I,V,P,o,ag,L,s,z)}R.init(ao);ar=d.extend(ar,R.getDDBehavior())}ab=new b(V,o,ag,F,P,J,D,t);am=ab.createTreeListViewColumns(av,ar.showTagger,ar.showSelection);if(d.is(am)&&d.is(am.columns)&&am.columns.length>1){n=new W(ar)}else{n=new u(ar)}if(z.showEffectivityColumns()){ac.registerReusableCellContent(n)}n.loadColumns(am.columns);if(av.Label){if("Auxiliary"===av.name&&d.is(av.Label.length)){n._treeDataIndex="";n._label="";n._types="";for(ap=0;ap<av.Label.length;ap++){n._treeDataIndex+=(ap<av.Label.length-1)?av.Label[ap].dataIndex+at:av.Label[ap].dataIndex;n._label+=(ap<av.Label.length-1)?av.Label[ap].dataIndex.split(".")[0]+at:av.Label[ap].dataIndex.split(".")[0];n._types+=(ap<av.Label.length-1)?av.Label[ap].type+at:av.Label[ap].type}n._labelIsOnRef=true;n.isMultipleLabel=(av.Label.length>1)?true:false}else{n._treeDataIndex=av.Label.dataIndex;n._label=am.label;n._labelIsOnRef=am.labelIsOnRef;n.isMultipleLabel=false}}else{n.getManager().hideColumn("tree")}ab.setReusablecontent(n);aq=ab.getBlockAttributes(av);o.setSelectPredicate(V.getId(),aq.index)};C=function C(av){var au,al,at=av.type,an,aq,ar,ak={icons:"",label:"",grid:{},useAsyncPreExpand:true},am,aw=V.getPreferenceValue("separator"),ap,ao=ab.getColumnsDataIndex(n);if(n._labelIsOnRef){ar=P.getIconURLFromKey(at);ak.icons=[ar];ak.label="";if(d.is(n.isMultipleLabel)&&n.isMultipleLabel){an=n._label.split(aw);aq=n._types.split(aw);for(ap=0;ap<an.length;ap++){if(d.is(av.type)&&(("undefined"===aq[ap])||(("undefined"!==aq[ap])&&ag.isAKindOf(av.type,aq[ap])))){am=(""===ak.label)?"":aw;if(d.owns(av,an[ap])&&d.is(av[an[ap]])){ak.label+=av[an[ap]]!=="NULL"?am+av[an[ap]]:""}}}}if(d.owns(av,n._label)){ak.label=av[n._label]!=="NULL"?av[n._label]:""}}for(au in av){if(av.hasOwnProperty(au)){al=av[au];if(d.is(al)&&al!=="NULL"){if(ao&&ao.indexOf(au+".reference")>=0){ak.grid[au+".reference"]=av[au]}else{if("PID"===au){ak.referencePID=av[au]}else{if("type"===au){ak.referenceType=av[au]}}}}}}ae.fillNodeOptions(ak,ao);G.fillNodeOptions(ak,ao);return ak};m=function m(ak,aq,ao){var ap=ab.getColumnsDataIndex(n),al,an,am=C(ak);if(!n._labelIsOnRef&&d.owns(aq,n._label)){am.label=aq[n._label]!=="NULL"?aq[n._label]:""}for(al in aq){if(aq.hasOwnProperty(al)){an=aq[al];if(d.is(an)&&an!=="NULL"){if(ap&&ap.indexOf(al+".instance")>=0){am.grid[al+".instance"]=aq[al]}else{if("PID"===al){am.instancePID=aq[al]}}}}}ae.fillNodeOptions(am,ap,aq,ao);return am};A=function A(ao){var al,ap,at,ak=ao.changedAttributes(),an=(ao.isInstance())?".instance":".reference",ar=n._labelIsOnRef?".reference":".instance",aq=ab.getColumnsDataIndex(n),am={};if(ao.isConnection()||!d.is(ak)){return}for(al in ak){if(ak.hasOwnProperty(al)){at=al+an;if(aq.indexOf(at)!==-1){am[at]=(ak[al]!=="NULL")?ak[al]:""}if(al===n._label&&ar===an){ap=(ak[al]!=="NULL")?ak[al]:""}}}return{label:ap,attributes:am}};K=function K(){var an=[],al=n.getManager(),ak=al.getNumberOfRows(),ao,am;for(ao=0;ao<ak;ao++){am=al.getTreeNodeModelFromRowID(ao);an.push(am.getReferencePID())}return an};ai=function ai(){var ap,at,an,al,ak,aq,ar,au,am,ao;if(S){al=t.getViewColumnPreferences(V.getId());an=d.is(al)?al.Columns.Column:[];at=n.getManager();aq=at.getColumnIDFromDataIndex("tree")+1;at.prepareUpdateView();for(ap=0;ap<an.length;ap++){ak=an[ap];am=ak.width;ao=ak.minWidth;ar=at.getColumnIDFromDataIndex(ak.dataIndex);if(!ak.isHidden){if(at._listOfColumnsPreviousWidth[ar]===0){at._listOfColumnsPreviousWidth[ar]=100}am=isNaN(am)?"auto":parseInt(am);ao=isNaN(ao)?"100":parseInt(ao);au=at.getColumnOptions(ar);if((au.minWidth!==ao)||(au.width!==am)){at.setColumnOptions(ar,{width:am,minWidth:ao});at.setColumnWidth(ar,am)}if(at.isColumnHidden(ar)){at.showColumn(ar)}if(ar!==aq){at.moveColumn(ar,aq)}}else{if(!at.isColumnHidden(ar)){at.hideColumn(ar)}}aq++}at.pushUpdateView(true)}};return{viewName:"treeListView",listenTo:function E(){return{TreeViewPrefModified:ai}},onStart:function w(al,ak){al=al||{};if(!d.is(al.pprTypes)||!d.is(al.columnConfigName)){throw new Error(V.getId()+": TreeListViewBehavior initialization failed")}if(d.is(al.views)&&d.is(al.views.treeListView)){v=al.views.treeListView}if(d.is(al.views.treeListView.toolTipConfigXML)){x.init(al.views.treeListView.toolTipConfigXML)}Q=al.columnConfigName;S=d.is(al.registerViewPreference)?al.registerViewPreference:false;if(S){t.registerViewforColumnPref({viewID:V.getId(),columnConfigName:al.columnConfigName,viewIcon:al.moduleIcon})}M({pprTypes:al.pprTypes,treeListViewOptions:d.merge(v,{isEditable:d.is(al.isAuthoringAllowed)?al.isAuthoringAllowed:false}),dragDropManager:al.dragDropManager,linkTypes:al.linkTypes,addToAuxIfNotAcceptedType:d.is(al.addToAuxIfNotAcceptedType)?true:null});Y=d.is(al.registerLayoutPreference)?al.registerLayoutPreference:false;if(Y===true){t.registerViewforWidgetLayout({viewID:V.getId(),viewType:this.viewName})}ak()},onStop:function B(){n.remove();n=void 0;if(S){t.unRegisterViewforColumnPref(V.getId())}if(Y===true){t.unregisterViewforWidgetLayout(V.getId(),this.viewName)}},createTreeListView:function T(al){var ak,am=v;if(d.is(al.columnConfig)){ak=al.columnConfig}if(d.is(al.treeListViewOptions)){am=al.treeListViewOptions}M({columnConfig:ak,pprTypes:al.pprTypes,treeListViewOptions:am,dragDropManager:al.dragDropManager,linkTypes:al.linkTypes})},getColumnsByDisplayType:function k(an){var am,ap=[],al,ao=ab.getColumnDataIndexByDisplayType(n,an),ak=ao.length;for(am=0;am<ak;am++){al=ao[am];ap.push(al.split(".")[0])}return ap},loadDocument:function aj(ak){n.getManager().loadDocument(ak)},getContent:function O(){var ak=void 0;if(d.is(n)){ak=n.getContent()}return ak},manageColumn:function U(al,ak){if(d.is(n)&&d.is(ab)){return ab.manageColumn(n,al,ak)}},processDropEffect:function af(ak){return R.processDropEffect(ak)},getTreeListViewManager:function r(){var ak=null;if(d.is(n)){ak=n.getManager()}return ak},getLabelAttribute:function aa(){return n._label},getReferenceNodeOptions:function l(ak){var al;if(d.is(ak)){al=C(ak.toJSON())}return al},getInstanceNodeOptions:function q(al,ak,am){var an;if(d.is(al)&&d.is(ak)){an=m(al.toJSON(),ak.toJSON(),am)}return an},getRelationNodeOptions:function Z(ak,al){var am=ab.getColumnsDataIndex(n),an;an=ae.getRelationAttributes(ak,am,al);return an},getDocumentNodeOptions:function N(am){var al=ab.getColumnsDataIndex(n),ak;ak={attributes:G.getDocumentNodeOptions(am,al)};return ak},getUpdateNodeOptions:function ad(ak){var al;if(d.is(ak)){al=A(ak)}return al},getVisibleTableContentAsCSV:function y(al){var ay,at,ap,aw,au,ax,av,ak,ao=this.getTreeListViewManager(),ar=ao.getNumberOfRows(),an=ab.getColumnsDataIndex(n,true),am="\r\n",aq='"'+P.getNLSValue("ExportCSVCmd.DepthColumnName")+'"';av=ao.getRowModel(-1);for(ax=0;ax<an.length;ax++){ak="";if(ax===0){ak=av.tree}else{if(d.is(av[an[ax]])){ak=av[an[ax]]}}aq+=al+'"'+ak+'"'}aq+=am;for(au=0;au<ar;au++){av=ao.getTreeNodeModelFromRowID(au);aq+=av._nodeDepth;for(ax=0;ax<an.length;ax++){ay=av.options.grid[an[ax]];if(d.is(ay)){if(d.is(ay,"array")){aw="";for(ap=0;ap<ay.length;ap++){if(0!==ap){aw+=","}at=ay[ap];if(d.is(at.Value)){aw+=at.Value}else{aw+=at.toString()}}}else{aw=ay.toString()}}else{aw=""}aq+=al+'"'+aw.replace(/"/g,'""')+'"'}aq+=am}return aq},getConfiguredAttributesAsCSV:function X(ak,al){var av=[],aq,ap,am,au,an="\r\n",at,ao="";function ar(ax){return ak.hasOwnProperty(ax)}function aw(ax,az){var aA,ay;aA=ak[az].Attribute;for(ay=0;ay<aA.length;ay++){au=aA[ay].name;if(au===ax){return true}}return false}for(aq in ak){ap=ak[aq].Attribute;for(am=0;am<ap.length;am++){au=ap[am].name;if(av.indexOf(au)===-1){av.push(au)}}}for(at=0;at<av.length;at++){if(at!==0){ao+=al}ao+='"'+av[at]+'"'}ao+=an;K().forEach(function(ax){var az,ay,aA;az=o.getReference(ax);if(d.is(az)){aq=az.get("type");if(ar(aq)){for(at=0;at<av.length;at++){if(at!==0){ao+=al}ay=av[at];if(aw(ay,aq)&&d.is(az.get(ay))){aA=String(az.get(ay))}else{aA=""}ao+='"'+aA.replace(/"/g,'""')+'"'}ao+=an}}});return ao},}};return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","CfgColumnsPlugin","PlatformPlugin"],creator:h}});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI"],function(c,a){var b=function(x,q,u,l,h,f,z){var r,m=null,F=null,j=null,g=null,t=null,B={},C=null,e=new c.Element("div",{"class":"Form-Sections-Container"}),k=u.getComponent("ComboBox"),o=u.getComponent("Accordeon"),G=u.getComponent("TooltipModel"),w=function w(I){var H;F=I.dsModel.currentValue;H=m.concat("/",F);r.type=H;t.destroy();if(c.is(C)){C.destroy()}E(function(J){s(J)});r.onTypeChange(F,e)},i=function i(I,J){var H=new c.Element("div",{"class":"Type-Section-Container"}).inject(e);new o({items:[{header:l.getNLSValue(I)?l.getNLSValue(I):I,content:J,expandedFlag:true}],style:"filled-separate"}).inject(H)},n=function n(I){var K,J=[],H;for(H=0;H<I.elementsList.length;H++){J[H]={labelItem:I.elementsList[H].label,valueItem:I.elementsList[H].value}}K=new k({elementsList:J,actionOnClickFlag:false,enableSearchFlag:false});K.fieldType=I.fieldType;B[I.name]=K;if(c.is(w,"function")){K.addEventListener("change",w)}return K},A=function A(){var O,H,L,N,K,I,M,J=[];O=function O(Q,P){var R=0;if(Q<P){R=-1}else{if(Q>P){R=1}}return R};J.push({value:F,label:l.getNLSValue(F,null,"Type")});M=z.getTypeHierarchy(F);if(c.is(M,"array")){M.sort(O);M.forEach(function(P){if(P!==F){J.push({value:P,label:l.getNLSValue(P,null,"Type")})}})}I=new c.Element("div",{"class":"section-container"});N=new c.Element("div",{"class":"Type-Container"});H=new c.Element("div",{"class":"wux-type-inline-container"}).inject(I);K=new c.Element("h6",{"class":"wux-type-textElement",text:l.getNLSValue("Type")}).inject(H);L=n({name:"V_Type",elementsList:J,fieldType:"select"});K.tooltipInfos=new G({shortHelp:l.getNLSValue("Type")});L.inject(H);if(c.is(r.typeContainer)){H.inject(N);N.inject(r.typeContainer)}else{i("Type",I)}},E=function E(J){var H=function H(){var L=g[F]||{};if(!L.hasOwnProperty("Section")){L.Section={};L.Section.name="General";L.Section.Attribute=[{dicoType:"PLMEntity",name:"V_Name",mandatory:true},{dicoType:"PLMEntity",name:"V_description"}]}J(L)};if(c.is(g)){H()}else{h.getXMLValues(x.getConfig().resource.insertFormAttributeXML,function K(L){g=L.convert("AttributesDescriptionList.Type","name");H()},function I(L){q.debug("failed to get insertFormAttribute XML. Error Desc: "+L)})}},s=function s(H){t=new a(x,q,u,l,f,z);C=new c.Element("div",{"class":"Form-container"});t.createUI({sections:H,type:r.type,renderTo:C,defaultValues:j});C.inject(e)};return{createUI:function y(H){r=H||{};if(c.is(r.type)&&c.is(r.renderTo)){if(true===q.getPreferenceValue("showDialog")){F=r.type.split("/")[1]||"";m=r.type.split("/")[0];if(r.defaultValues){j=r.defaultValues[0]}E(function(I){A();s(I)})}e.inject(r.renderTo)}},destroy:function D(){if(c.is(t)){t.destroy()}if(c.is(C)){C.destroy()}if(c.is(e)){e.destroy()}},getValues:function d(){var I={},H={};if(B.hasOwnProperty("V_Type")){if(c.is("V_Type")){if(B.V_Type.currentValue){H.V_Type=m.concat("/",B.V_Type.currentValue);H.type=F}else{H.V_Type=B.V_Type;H.type=F}}}I=t.getValues();c.extend(I,H);return I},validate:function p(){return(t)?t.validate():{result:true,message:null}},updateToDefaultValues:function v(H){if(t){t.updateToDefaultValues(H)}}}};return b});define("DS/DELPPWViewBehaviors/UXFactoryBehavior/UXFactoryBehavior",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog"],function(h,a,e,g,c,b,f){var d=function(k,x,i,t,u,s,r,n,v,m){var y=function y(B,A){var z=[null].concat(A),C=i.getComponent(B);return new (Function.prototype.bind.apply(C,z))};return{onStart:function w(){},onStop:function q(){},getComponent:function l(z){return i.getComponent(z)},showConfirmation:function p(D,B,C,E,A){var z=new f(this,A);z.show(D,B,C,E)},createElement:function j(A,B){var z=Array.prototype.slice.call(arguments);return y("Element",z)},create:function o(z,G){var F,E,B,A,H,C=Array.prototype.slice.call(arguments,1);switch(z){case"Tree":F=new (i.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:false,canMultiSelect:false},styles:{height:"100%",width:"100%"}});break;case"Dialog":A=i.getComponent("WUXFrameWindowsManager"),H=A.getFrameWindow(x.getAppContext());B={position:{my:"center",at:"center"},immersiveFrame:H.getImmersiveFrame()};h.extend(G,B);F=new (i.getComponent("CustomDialog"))(G);F.addEventListener("contextmenu",function D(I){I.preventDefault()});if(h.is(F.buttons.Ok)){F.buttons.Ok._giveFocus()}else{if(F.buttons.Cancel){F.buttons.Cancel._giveFocus()}}F.addEventListener("keypress",function(I){if(I.key==="Enter"){if(F.buttons.Ok&&!F.buttons.Ok.disabled&&F.buttons.Ok._isFocused()){F.buttons.Ok.onClick()}else{if(F.buttons.Cancel&&!F.buttons.Cancel.disabled&&F.buttons.Cancel._isFocused()){F.buttons.Cancel.onClick()}}}});break;case"Filter":F=new (i.getComponent("Segmented"))({multiSelect:true,data:{PART:{text:t.getNLSValue("PPRTYPE.PART")},PRODUCT:{text:t.getNLSValue("PPRTYPE.PRODUCT")},PROCESS:{text:t.getNLSValue("PPRTYPE.PROCESS")},SYSTEM:{text:t.getNLSValue("PPRTYPE.SYSTEM")},RESOURCE:{text:t.getNLSValue("PPRTYPE.RESOURCE")},PARENT:{text:t.getNLSValue("PPRTYPE.PARENT")}}});E=t.getIconElem("PART");F.setItemTitle("PART",E);E=t.getIconElem("PRODUCT");F.setItemTitle("PRODUCT",E);E=t.getIconElem("PROCESS");F.setItemTitle("PROCESS",E);E=t.getIconElem("SYSTEM");F.setItemTitle("SYSTEM",E);E=t.getIconElem("RESOURCE");F.setItemTitle("RESOURCE",E);E=t.getIconElem("CreateInstance");F.setItemTitle("PARENT",E);F.selectItem("PART");F.selectItem("PRODUCT");F.selectItem("PROCESS");F.selectItem("SYSTEM");F.selectItem("RESOURCE");break;case"SelectionControl":F=new e(k,x,i,t);F.createUI(G);break;case"FormUI":F=new a(k,x,i,t,s,r);F.createUI(G);break;case"DataCollectionUI":F=new g(k,x,i,t,u,s,r);F.createUI(G);break;case"ImplementUI":F=new c(k,x,this,t,n,v,m);F.createUI(G);break;case"ImplementedRevChooserUI":F=new b(k,x,this,t,n);F.createUI(G);break;default:F=y(z,C);break}return F},}};return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin"],creator:d}});