var _selectedOperationName="";var _selectedOperation="";var _CreateCommandLaunched=false;function SubscribeToCallbacksOnLoading(){require(["DS/IssueManagement/commands/CommandsManager"],function(b){var a=b.getCommand("Create");if(a!==undefined){a.onBegin(function(){console.log("Create Blank issue Command invoked")});a.onEnd(function(){if(_CreateCommandLaunched!=true){console.log("Create Blank issue Page Loaded");var c=a.component;if(c!==undefined){dscef.sendString("GetSelectedOperation=1")}_CreateCommandLaunched=true}});dscef.sendString("SubscribeOnLoadingDone=1")}})}function SetDetailsOfSelectedOperation(b){var a=b;a=a.split(",");_selectedOperationName=a[0];_selectedOperation=a[1];_CreateCommandLaunched=false;if(_selectedOperationName!==""){ApplyTemplateToFillDetails()}}function ApplyTemplateToFillDetails(){require(["DS/IssueManagement/commands/CommandsManager"],function(b){var a=b.getCommand("Create");var e=a.component;var d=[];var h=[];var f=[];var g=d.reduce(function(j,i){j.push(i.user);return j},[]);var c=d.reduce(function(j,i){j[i.user]={user:i.user,fullName:i.fullName,organization:i.organization};return j},{});e.isLoaded.then(function(){var l="";for(var k in c){if(c.hasOwnProperty(k)){l=c[k].organization}}var j=new Date();var i="Issue_"+_selectedOperationName+"_"+j.getFullYear()+"/"+j.getMonth()+"/"+j.getDate()+"/"+j.getHours()+":"+j.getMinutes();var m={id:"template-"+Date.now(),info:{name:"",description:"",lastUsed:null},data:{title:i,description:"",resolutionRecommendation:"",priority:"Low",resolutionDate:(j.getMonth()+1)+"/"+j.getDate()+"/"+j.getFullYear(),estimatedStartDate:(j.getMonth()+1)+"/"+j.getDate()+"/"+j.getFullYear(),estimatedEndDate:(j.getMonth()+1)+"/"+j.getDate()+"/"+j.getFullYear(),reportedAgainst:{add:h},positions:[],context:_selectedOperation,assignees:{add:g},responsibleOrganization:l,reportingOrganization:l,attachments:f,primaryAttachment:null,automationTasks:[]},ui:{assignees:{add:c},responsibleOrganization:l}};e.applyTemplate(m)})["catch"](function(i){e._logger.error(i)})["finally"](function(){console.log("Create Widget is Loaded")})})};