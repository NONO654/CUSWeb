define("DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule",["UWA/Core"],function(b){var a=function(x,E,v,p,I,y,d,k,j,q,s,A,w,g,F,B,K,c){var e,f=function f(L){var P,O,N,M={forceDBMode:true,silent:true,onComplete:function(Q){if(b.is(Q)){I.createRefOrInst({isInstanceOf:Q.id,V_Name:Q.get("V_Name"),type:Q.get("type")},N.get("PID"))}else{x.debug("Child reference fetch failed")}}};P=v.getSelectedNodes();if(b.is(P,"array")&&b.is(L)){O=P[0].getID();N=I.getReferenceModel(O);L.forEach(function(Q){I.fetchRoot(Q.id,M)})}};return{listenTo:function r(){return{addReference:this.onAddReference,addInstance:this.onAddInstance,addConnection:this.onAddConnection,removeReference:this.onRemoveRefOrInst,removeInstance:this.onRemoveRefOrInst,removeConnection:this.onRemoveConnection,changeReference:this.onChangeIRPC,changeConnection:this.onChangeIRPC,addDocumentConnections:this.addDocumentConnections,select:this.onSelect,EditAttribute:this.onEditAttribute,reparentInstances:this.onReparentInstances,searchAndAddInstance:this.onSearchAndAddInstance,expandAll:this.onExpandAll}},onStart:function D(M){var L=x.getElement(),N=L.getElementsByClassName("tree-list-container")[0];e=b.is(M.displayBadge)?M.displayBadge:null;E.loadDocument(v.getWUXNodeModel());E.getContent().inject(N)},onStop:function o(){},onReparentInstances:function u(L){v.reparent(L)},onExpandAll:function i(){var L=v.getSelectedNodes();if(b.is(L,"array")&&L.length>0){v.expandNode(L)}},onEditAttribute:function H(M,L){q.editAttribute(M,L)},onSearchAndAddInstance:function C(){var L;L=v.getSelectedNodes();if(L.length===1){k.showSearchDialoguAndActivate(f,{types:I.getValidChildTypes(L[0].getReferenceType())})}},onAddReference:function z(M,O,L){var N={silentMode:true,withLinksResolved:false};if(b.is(L)){N=b.merge(L,{silentMode:true,withLinksResolved:false})}v.addNode(M,N)},onAddInstance:function l(M,L){var N={silentMode:true,withLinksResolved:false};if(b.is(L)){N=b.merge(L,{silentMode:true,withLinksResolved:false})}v.addNode(M,N)},onAddConnection:function t(O){var N=0,L,M;M=function M(S){var R,Q,T,P;R=S.get("from");Q=S.get("to");T=S.get("type");P=R;if(s.isDocConnection(S)){v.updateDocAttributes(R);return}if(v.isNodeAdded(R)){if(b.is(e)&&e.linkType===T){v.updateBadge(P,e.badgeIcon)}v.updateAttributes(S)}};if(b.is(O,"array")){v.withTransactionUpdate(function(){L=O.length;for(N=0;N<L;N++){M(O[N])}})}else{M(O)}},addDocumentConnections:function h(L){v.withTransactionUpdate(function(){if(b.is(L,"array")){L.forEach(function(M){v.updateDocAttributes(M)})}})},onChangeIRPC:function m(L){v.updateAttributes(L)},onRemoveRefOrInst:function J(L){v.removeNode(L.id)},onRemoveConnection:function n(N){var O,M,L;if(!b.is(N)){x.debug("ERROR: No model defined");return}M=N.get("from");L=N.get("to");if(s.isDocConnection(N)){v.updateDocAttributes(N.get("from"));return}O=N.get("type");if(!b.is(O,"string")){x.debug("Could not get connection type");return}if(v.isNodeAdded(M)){if(b.is(e)&&e.linkType===O){v.updateBadge(M,null)}v.updateAttributes(N)}},onSelect:function G(L){if(b.is(L)&&b.is(L.changed)){g.crossHighlightImpacted(L.changed.isSelected)}}}};return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","CrossHighlightBehavior","UXFactoryBehavior","ImplementBehavior","ViewBehavior","ExpandFilterBehavior"],creator:a}});define("DS/DELPPWTreeListAuthoringModule/TreeListAuthoringMGAModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule"],function(c,b){var a=function(K,w,G,k,m,C,d,B,U,L,I,H,n,e,J,i,f,q,M,Q){var S=b.creator,z=new S(K,w,G,k,m,d,B,U,L,I,H,n,e,J,i,f,M),t=[],o=[],D,E,x,F,s,T;E=function(W){var X,V=false;if(c.is(W)&&c.is(W.get)){if(W.isConnection()){V=o.indexOf(W.get("type"))>-1}else{X=m.getPPRType(W);V=t.indexOf(X)>-1}}return V},x=function x(){return t.indexOf("PROCESS")>-1};F=function F(){return t.indexOf("RESOURCE")>-1};s=function s(){return t.indexOf("SYSTEM")>-1||t.indexOf("OPERATION")>-1};T=function T(Z,Y){var X,V,W;if(c.is(Z,"array")&&Z.length>0){X=Z[0];if((Y.instOrRef==="reference")&&c.is(X.referencePID)){V=X.referencePID}else{if((Y.instOrRef==="instance")&&c.is(X.instancePID)){V=X.instancePID}}if(c.is(V)){W=m.getReferenceModel(V);return E(W)}}return false};return{listenTo:function y(){return c.extend(z.listenTo(),{addReference:this.onAddReference,addConnection:this.onAddConnection,removeReference:this.onRemoveRefOrInst,removeInstance:this.onRemoveRefOrInst,removeConnection:this.onRemoveConnection,changeReference:this.onChangeIRPC,changeInstance:this.onChangeIRPC,changeConnection:this.onChangeIRPC,addRootNode:this.onRootNodeAdded,EditAttribute:this.onEditAttribute,reparentInstances:this.onReparentInstances,searchAndAddInstance:this.onSearchAndAddInstance,DuplicateAdvCmd:this.onDuplicateAdvCmd,EGraphNodeSelect:this.onEGraphNodeSelect})},onStart:function p(V){z.onStart(V);if(!V.pprTypes||!V.linkTypes){throw new Error(K.getId()+": TreeListAuthoringMGAModule initialization failed")}t=V.pprTypes;o=V.linkTypes;D=c.is(V.displayBadge)?V.displayBadge:null;Q.loadRoots()},onStop:function u(){z.onStop()},onReparentInstances:function A(V){if(x()){z.onReparentInstances(V)}},onEditAttribute:function l(W,V){if(T(W,V)){z.onEditAttribute(W,V)}},onSearchAndAddInstance:function r(){if(s()){z.onSearchAndAddInstance()}},onAddReference:function P(V,X,W){if(!E(V)){return}if(x()||F()){K.notify("addToAuxiliaryView",[V,W]);return}z.onAddReference(V,X,W)},onAddConnection:function v(Z){var X=0,V,W,Y=[];W=function W(ad,ah){var ac,ab,ag,aa,af,ae;if(!E(ad)){return}ac=ad.get("from");ab=ad.get("to");ag=ad.get("type");aa=ac;if(c.is(ah,"array")&&ah.length>0&&ah.indexOf(ab)>-1){return}ah.push(ab);if(H.isDocConnection(ad)){G.updateDocAttributes(ac);return}if(s()){ae=ac}else{if(x()||F()){ae=ab}}if(c.is(ae)){if(!G.isNodeAdded(ae)){af=m.getReference(ae);if(c.is(af)){G.addNode(af,{loadChildren:true})}}else{if(G.isNodeAdded(ae)){if(c.is(D)&&D.linkType===ag){G.updateBadge(aa,D.badgeIcon)}G.updateAttributes(ad)}}}};if(c.is(Z,"array")){G.withTransactionUpdate(function(){V=Z.length;for(X=0;X<V;X++){W(Z[X],Y)}})}else{W(Z,Y)}},onRootNodeAdded:function R(V){var X,W,Y=[];if(s()&&c.is(V)&&G.isNodeAdded(V)){X=m.getAllChildrenFromCollection(V);if(c.is(X)&&c.is(X.referencesPID,"array")){Y.push(V);Y=Y.concat(X.referencesPID);W=m.getImpactedConnections(Y);if(c.is(W)){K.notify("addConnection",[W])}}}},onEGraphNodeSelect:function N(V){if(c.is(V)&&c.is(V.changed)){G.selectNode(V.changed.nodeId);if(c.is(V.selectedNodeIds)&&c.is(V.selectedNodeIds.length>0)){V.selectedNodeIds.forEach(function(W){G.unSelectNode(W)})}}},onChangeIRPC:function h(V){if(E(V)){z.onChangeIRPC(V)}},onRemoveRefOrInst:function O(V){if(E(V)){z.onRemoveRefOrInst(V)}},onRemoveConnection:function g(X){var Y,W,V,Z;if(!c.is(X)){K.debug("ERROR: No model defined");return}if(!E(X)){return}W=X.get("from");V=X.get("to");if(H.isDocConnection(X)){G.updateDocAttributes(X.get("from"));return}if(s()){Y=X.get("type");if(!c.is(Y,"string")){K.debug("Could not get connection type");return}if(G.isNodeAdded(W)){if(c.is(D)&&D.linkType===Y){G.updateBadge(W,null)}G.updateAttributes(X)}}else{if(x()||F()){if(G.isNodeAdded(V)){Z=G.getNodeModel(V,true);if(c.is(Z)&&Z.isRoot()){G.removeNode(V)}else{G.updateAttributes(X)}}}}},onDuplicateAdvCmd:function j(){if(G.getSelectedNodes().length>0){q.exectuteDuplicateAdvCmd()}}}};return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","CrossHighlightBehavior","UXFactoryBehavior","ImplementBehavior","DuplicateAdvBehavior","ExpandFilterBehavior","LoadRecentBehavior"],creator:a}});define("DS/DELPPWTreeListAuthoringModule/TreeListAuthoringModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule/TreeListAuthoringBaseModule"],function(c,a){var b=function(O,z,V,K,k,o,G,d,E,Z,P,M,L,p,e,N,i,f,s,F,Q,U,R){var X=a.creator,D=new X(O,z,K,k,o,d,E,Z,P,M,L,p,e,N,i,f,F,Q),x=[],q=[],H,I,A,Y,m,J,u,v;I=function(ab){var ac,aa=false;if(c.is(ab)&&c.is(ab.get)){if(ab.isConnection()){aa=q.indexOf(ab.get("type"))>-1}else{ac=o.getPPRType(ab);aa=x.indexOf(ac)>-1}}return aa};A=function(){return x.indexOf("PROCESS")>-1};Y=function(){return x.indexOf("PART")>-1||x.indexOf("PRODUCT")>-1};v=function v(){var aa;aa=K.getSelectedNodesInfo();aa.forEach(function(ab){N.updateCrossHighlightForSelf((ab.absPath.length>0)?ab.absPath:ab.id)})};u=function u(ac){var ab,aa,af,ae=function ae(){aa=K.getWUXNodeModel();V.setModel(aa);af=V.viewName},ad=function ad(){aa=V.getModel();z.loadDocument(aa);af=z.viewName};ab=O.getElement();if(c.is(ac,"boolean")){if(ac===true){if(!ab.hasClassName("showGraphView")){ae();ab.addClassName("showGraphView")}}else{if(ab.hasClassName("showGraphView")){ad();ab.removeClassName("showGraphView")}}}else{if(ab.hasClassName("showGraphView")){ad()}else{ae()}ab.toggleClassName("showGraphView")}F.setCurrentView({currentView:af});O.notify("ManageGraphViewCmdAvailablity")};J=function J(ab){var aa=false;if(c.is(ab.arguments[0])&&c.is(ab.arguments[0].sourceModuleId)){if(ab.arguments[0].sourceModuleId!==O.getId()){aa=false}else{if(ab.arguments[0].sourceModuleId===O.getId()){aa=true}}}else{if(F.getActiveView()!==O.getId()){aa=false}else{aa=true}}if(aa){u()}};m=function m(){var ac=O.getId(),aa,ad,ab;ad=O.getPreferenceValue("widgetLayoutValues");if(c.is(ad)){aa=c.Json.decode(ad);if(aa[ac]!==""){ab=(aa[ac]===V.viewName)?true:false;u(ab)}}};return{listenTo:function B(){return c.extend(D.listenTo(),{addReference:this.onAddReference,addConnection:this.onAddConnection,addProductOrPart:this.onAddProductOrPart,removeReference:this.onRemoveRefOrInst,removeInstance:this.onRemoveRefOrInst,removeConnection:this.onRemoveConnection,changeReference:this.onChangeIRPC,changeInstance:this.onChangeIRPC,addRootNode:this.onRootNodeAdded,changeConnection:this.onChangeIRPC,EditAttribute:this.onEditAttribute,reparentInstances:this.onReparentInstances,searchAndAddInstance:this.onSearchAndAddInstance,DuplicateAdvCmd:this.onDuplicateAdvCmd,ToggleGraphView:J,widgetLayoutChanged:m})},onStart:function r(aa){D.onStart(aa);if(!aa.pprTypes||!aa.linkTypes){throw new Error(O.getId()+": TreeListAuthoringModule initialization failed")}x=aa.pprTypes;q=aa.linkTypes;H=c.is(aa.displayBadge)?aa.displayBadge:null;m();O.notify("ManageGraphViewCmdAvailablity");U.loadRoots()},onStop:function w(){D.onStop()},onReparentInstances:function C(aa){if(A()){D.onReparentInstances(aa)}},onEditAttribute:function l(ab,aa){if(A()){D.onEditAttribute(ab,aa)}},onSearchAndAddInstance:function t(){if(A()){D.onSearchAndAddInstance()}},onAddReference:function T(ab,ad,aa){var ac={silentMode:true,withLinksResolved:false};if(I(ab)){if(c.is(aa)){ac=c.merge(aa,{silentMode:true,withLinksResolved:false})}D.onAddReference(ab,ad,ac)}},onAddConnection:function y(ad){var ac=0,aa,ab;ab=function ab(ah){var ag,af,ai,ae;if(!I(ah)){return}ag=ah.get("from");af=ah.get("to");ai=ah.get("type");ae=ag;if(L.isDocConnection(ah)){K.updateDocAttributes(ag);return}if(A()){if(K.isNodeAdded(ag)){if(c.is(H)&&H.linkType===ai){K.updateBadge(ae,H.badgeIcon)}K.updateAttributes(ah)}v()}if(Y()){v()}};if(c.is(ad,"array")){K.withTransactionUpdate(function(){aa=ad.length;for(ac=0;ac<aa;ac++){ab(ad[ac])}})}else{ab(ad)}},onRootNodeAdded:function W(ac){var aa,ab;if(A()&&c.is(ac)&&K.isNodeAdded(ac)){aa=f.getScopeLinksOfImplementing(ac);if(aa.length>0){ab=aa[0].get("to");R.dropScopedProduct(ab);O.notify("addProductOrPart",{pid:ab})}}},onAddProductOrPart:function n(aa){var ac,ab;if(!c.is(aa)||!c.is(aa.pid)){O.debug(this.name,"Required input parameters are missing.");return}if(Y()){if(!K.isNodeAdded(aa.pid)){ac=o.getReference(aa.pid);if(c.is(ac)){K.addNode(ac,{silentMode:true,withLinksResolved:false})}else{ab={forceDBMode:true,silent:true,onComplete:function(ad){if(c.is(ad)){K.addNode(ad,{silentMode:true,withLinksResolved:false})}}};o.fetchRoot(aa.pid,ab)}}}},onChangeIRPC:function h(aa){if(I(aa)){D.onChangeIRPC(aa)}},onRemoveRefOrInst:function S(aa){if(I(aa)){D.onRemoveRefOrInst(aa)}},onRemoveConnection:function g(ac){var ad,ab,aa;if(!c.is(ac)){O.debug("ERROR: No model defined");return}if(!I(ac)){return}ab=ac.get("from");aa=ac.get("to");if(L.isDocConnection(ac)){K.updateDocAttributes(ac.get("from"));return}if(A()){ad=ac.get("type");if(!c.is(ad,"string")){O.debug("Could not get connection type");return}if(K.isNodeAdded(ab)){if(c.is(H)&&H.linkType===ad){K.updateBadge(ab,null)}K.updateAttributes(ac)}v()}if(Y()){v()}},onDuplicateAdvCmd:function j(){if(K.getSelectedNodes().length>0){s.exectuteDuplicateAdvCmd()}}}};return{behaviors:["TreeListViewBehavior","GraphViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","CrossHighlightBehavior","UXFactoryBehavior","ImplementBehavior","DuplicateAdvBehavior","ViewBehavior","ExpandFilterBehavior","LoadRecentBehavior","Viewer3DBehavior"],creator:b}});