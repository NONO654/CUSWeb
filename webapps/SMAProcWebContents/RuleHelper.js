define("DS/SMAProcWebContents/RuleHelper",["DS/JSCMM/SMAJSCMMRule"],function(c){var b={};function a(){this.type="download"}Object.assign(a.prototype,{setMode:function(e){this.type=e;return this},setDataContainer:function(e){this.container=e;return this},setContent:function(e){this.content=e;return this},setObjectParameter:function(e){this.parameter=e;return this},setSourceFileName:function(e){this.sourceFileName=e;return this},setDataHandler:function(e){this.dataHandler=e||"com.dassault_systemes.sma.datahandler.DataHandlerPLM";return this},setReferenceId:function(e){this.referenceId=e;return this},getRule:function(){if(!this.container){console.warn("container not set");return""}if(this.content&&this.parameter){console.warn("conflict on rule builder. either content or parameter can be set not both.");return""}if(this.referenceId){this.container.removeTempSimulationData(this.referenceId);this.referenceId=null}var h="";var g=new c(this.type);g.parent=this.container;if(this.content){g.rule.content=this.content}if(this.parameter){g.rule.objectParam=this.parameter.getName()}if(this.sourceFileName){g.rule.sourceFileName=this.sourceFileName}else{g.rule.method="exporter"}if(!this.content&&!this.parameter){return{referenceId:null,ruleString:""}}if(this.dataHandler&&this.sourceFileName){g.rule.name="Rule_PLMDoc_DataHandler";var f=g.getRuleXML();var e=this.type==="download"?6:10;h="<rawFN>"+this.sourceFileName+"</rawFN><toOption>"+e+"</toOption><del>N</del><type></type><dataEnc></dataEnc><rwEnc></rwEnc><handlerType>"+this.dataHandler+"</handlerType><hconfig>"+f+"</hconfig>"}else{h=g.getRuleXML()}return{referenceId:g.rule.referenceId,ruleString:h}}});function d(l,e,k){var n="<hconfig>";var o="</hconfig>";var m=l.indexOf(n);var g=l.indexOf(o);if(m>=0&&g>=0){var p=l.substring(m+n.length,g);if(p){l=p}}k=k||"download";var h=new c(k);h.parent=e;h.setRuleXML(l);var f={};if(h.rule.objectParam){var i=h.rule.objectParam;var j=e.getParameters().findIndex(function(q){return q.getName()===i});if(j>=0){f.parameter=e.getParameters()[j];f.category="param"}}else{f.content=h.rule.content;f.category="content"}if(h.rule.sourceFileName){f.sourceFileName=h.rule.sourceFileName}f.dataHandler=h.rule.dataHandler;f.referenceId=h.rule.referenceId;return f}b.getRuleBuilder=function(){return new a()};b.parseRuleString=d;return b});