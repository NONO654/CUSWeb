define("DS/SMAProcWebContents/WUXControlUtil",["UWA/Core","DS/Controls/LineEditor","DS/Controls/SpinBox","DS/Controls/Editor","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/DatePicker","DS/Controls/Tab","DS/Controls/Button","DS/JSCMM/SMAJSCMMUtils","DS/Controls/Expander","DS/Controls/TooltipModel","i18n!DS/SMAProcWebCMMUtils/assets/nls/SMAJSCMMDataFlowUtilsNLS","DS/Tweakers/TweakerString","DS/SMAProcWebCommonControls/import!DS/SMAProcSPUI/sp-content-chooser/sp-content-chooser.html"],function(k,b,i,o,n,p,c,h,m,a,l,j,f,g){var d={CREATEANDMAP:0,MAP:1,MAPPED:2};var e={createControl:function(y,u,E,t,I){var x,D;switch(u){case"lineEditor":x=new b({placeholder:t.placeholder||"",value:E,disabled:t.readonly,domId:y});x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.value;x.fire("onChange",{value:L})});x.addEventListener("keydown",function(M){var L=M.keyCode;x.fire("onkeydown",{keyCode:L})},true);x.addEventListener("keyup",function(N){var M=N.keyCode;var L=N.target.value;x.fire("onkeyup",{keyCode:M,value:L})},true);x.addEventListener("focus",function(L){x.fire("onFocus")});break;case"tab":x=new h({displayStyle:["strip"],domId:y});for(var F=0;F<t.tabs.length;F++){x.add({label:t.tabs[F],index:F,isSelected:t.selectedIndex==F?true:false,content:t.content[F]})}x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.value;x.fire("onChange",{value:L})});break;case"tweakerString":x=new b({value:E,disabled:t.readonly,domId:y});x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.value;x.fire("onChange",{value:L})});x.addEventListener("keydown",function(M){var L=M.keyCode;x.fire("onkeydown",{keyCode:L})},true);x.addEventListener("keyup",function(M){var L=M.keyCode;x.fire("onkeyup",{keyCode:L})},true);break;case"toggle":if(k.is(E,"string")){E=(E.toLowerCase()==="true")}var B=t.toggleType;var C=t.label;x=new n({type:B||"checkbox",label:C||"",checkFlag:E,mixedState:false,disabled:t.readonly,domId:y,allowUnsafeHTMLLabel:false});x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.checkFlag;x.fire("onChange",{value:L})});break;case"ComboBox":D=t.choices;if(!(D instanceof Array)){D=D.split(", ")}if(E===""){D.unshift("")}var J=[];var s=-1;if(t.type==="Real"||t.type==="Integer"){E=E.toString()}for(var F=0;F<D.length;F+=1){J.push({labelItem:D[F],valueItem:D[F]});if(D[F]===E){s=F}}x=new p({elementsList:J,selectedIndex:s,enableSearchFlag:t.enableSearchFlag||false,disabled:t.readonly,domId:y});x.addEventListener("change",function(N){N.preventDefault();N.stopImmediatePropagation();var M=N.dsModel.value;var L=N.dsModel.selectedIndex;x.fire("onChange",{value:M,index:L})});break;case"spinBoxEditor":var v=t.type==="Integer"?1:0.01;var K=t.type==="Integer"?0:4;E=Number(E);x=new i({value:E,minValue:t.minValue,maxValue:t.maxValue,stepValue:v,decimals:K,disabled:t.readonly,domId:y});x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.value;x.fire("onChange",{value:L})});break;case"datepicker":x=new k.createElement("div",{"class":"datepicker-wrapper",style:{"vertical-align":"top"}});var w=new c({value:new Date(E),disabled:t.readonly,timePickerFlag:true,timePickerPrecision:true,domId:y}).inject(x);w.addEventListener("show",function(M){var L=M.target.getOffsets().y;setTimeout(function(){var N=document.querySelectorAll(".wux-controls-popup");Array.prototype.forEach.call(N,function(Q){if(Q.querySelector(".wux-controls-datepicker-popup-content")){var P=Q.querySelector(".wux-controls-datepicker-popup-content").getParent();var O=(L+P.getDimensions().height+20)-document.body.offsetHeight;if(P!==null&&(O>0)){P.style.top=(document.body.offsetHeight-(P.getDimensions().height+20))+"px"}}})},0)});w.addEventListener("change",function(O){O.preventDefault();O.stopImmediatePropagation();var N=O.dsModel.value;var L=new Date(N);var M=L.valueOf();w.fire("onChange",{value:M})});break;case"contentchooser":var q=t.objectId,H=t.displayName,A=t.busType,z=t.readonly;x=document.createElement("sp-content-chooser");x.objectId=q;x.showclear=Boolean(q);x.objectTitle=q?H:"Drop or Search Content";x.objectType=A;x.readOnly=Boolean(z);x.disableprop=z;x.strictMatch=false;x.id=y;x.reject=["Simulation","Simulation Activity"];x.accept="3DShape, Chapter, DesignSight, FEM, GenerativeStress, Material,PLMCoreRepReference, PLMReference, Part, PlmParameter, Products, Requirement, SpotFastener,Test Case, Use Case, VPMReference, XRep, DOCUMENTS, Approximation, Simulation Folder, Test Execution, Workspace Vault";x.addEventListener("change",function(L){L.preventDefault();L.stopImmediatePropagation();if(L.detail.value){x.showclear=true}x.fire("onChange",{newObject:L.detail.value})});x.addEventListener("clear",function(L){L.preventDefault();L.stopImmediatePropagation();x.objectTitle="Drop or Search Content";x.fire("onClear")});x.addEventListener("close",function(L){L.preventDefault();L.stopImmediatePropagation()});x.addEventListener("dropUnsupportedObject",function(){x.fire("onDropUnsupportedObject")});break;case"editor":x=new o({icon:"test",value:E,disabled:t.readonly,placeholder:t.placeholder,domId:y,newLineMode:"enter",widthInCharNumber:t.widthInCharNumber,nbRows:t.nbRows});x.addEventListener("change",function(M){M.preventDefault();M.stopImmediatePropagation();var L=M.dsModel.value;x.fire("onChange",{value:L})});x.addEventListener("keyup",function(M){var L=M.target.value;x.fire("onkeyup",{value:L})},true);break;case"string":x=k.createElement("div",{text:E});break;case"indentedstring":var r="indent";if(t.readonly){r="readonlyIndent"}x=k.createElement("span",{text:"  -  "+E,"class":r});break;case"readonlyfield":x=k.createElement("span",{"data-title":t.tooltip,styles:{width:"100%",height:"100%",display:"flex"}});break;case"expander":x=new l({header:t.displayName,body:t.content,expandedFlag:t.expandedFlag||false,style:t.style||"simple",orientation:t.orientation||"vertical",height:"auto",});x.getContent().addEventListener("expand",function(L){x.fire("onExpand")});x.getContent().addEventListener("collapse",function(){x.fire("onCollapse")});break;case"button":x=new m({label:t.label,emphasize:t.emphasize||"",disabled:t.disabled||false});x.addEventListener("buttonclick",function(L){L.preventDefault();L.stopImmediatePropagation();x.fire("_buttonclick",{})});break;default:}if(x&&t.tooltip){var G={title:t.tooltipTitle||"",shortHelp:t.tooltipShortHelp||"",longHelp:t.tooltip||"",position:t.tooltipPosition||"",mouseRelativePosition:t.tooltipMouseRelativePosition||"",wrapThreshold:t.tooltipWrapThreshold||"",};this.setToolTip(x,G)}I&&this.renderTo(x,I);return x},renderTo:function(s,r){var q=new k.Element("div",{"class":r.customClass,styles:{display:"block"}});q.setContent(s);r.location.appendChild(q)},setToolTip:function(r,q){r.tooltipInfos=new j({title:q.title||"",shortHelp:q.shortHelp||"",longHelp:q.longHelp||"",mouseRelativePosition:q.mouseRelativePosition||"",position:q.position||"",wrapThreshold:q.tooltipWrapThreshold||"",allowUnsafeHTMLTitle:false,allowUnsafeHTMLLongHelp:false,allowUnsafeHTMLShortHelp:false});r.tooltipInfos.initialDelay=0},createElement:function(r,q){return k.createElement(r,{"class":q.classList,text:q.text||"",html:q.html||""})},decideEditor:function(s,q,r){var u="string";var t=s.Type;var w=s.Choices;var v=s.Value;switch(t){case"Boolean":u="toggle";break;case"Timestamp":u="datepicker";break;case"String":if(s.Multiline===a.DataSubType.client.Multiline){if(r==="parameterTable"){u="tweakerString"}else{u="editor"}}else{u="lineEditor"}break;case"Real":case"Integer":u="spinBoxEditor";break;case"Chooser":case"Owned_chooser":case"Object":u="contentchooser";break;default:u=""}if(w&&w.length>0){u="ComboBox"}if(q||(typeof v==="object")){if(t!=="Timestamp"&&t!=="Object"){u="lineEditor"}}return u},ParameterNameView:function(s,q){var r=k.createElement("div");if(q!==undefined){k.createElement("span",{"class":"wux-ui-3ds wux-ui-3ds-1x "+this._mappingIcon(q),title:this._mappingTitle(q),styles:{color:"#00e800",width:"14px"}}).inject(r)}k.createElement("span",{"class":"wux-ui-3ds wux-ui-3ds-1x "+this._dataTypeIcon(s.getDataType()),title:s._getDataTypeName(),styles:{color:"#b4b6ba",width:"14px"}}).inject(r);k.createElement("span",{"class":"wux-ui-3ds wux-ui-3ds-1x "+this._getModeIcon(s.getMode()),title:s._getModeName(),styles:{color:"#b4b6ba",width:"14px"}}).inject(r);k.createElement("span",{html:s.getName()}).inject(r);return r},_dataTypeIcon:function(q){if(q===a.DataType.String){return"wux-ui-3ds-text"}else{if(q===a.DataType.Boolean){return"wux-ui-3ds-check"}else{if(q===a.DataType.Integer){return"wux-ui-3ds-number-sign"}else{if(q===a.DataType.Real){return"wux-ui-3ds-number-sign"}else{if(q===a.DataType.Timestamp){return"wux-ui-3ds-calendar"}else{if(q===a.DataType.PLMObject){return"wux-ui-3ds-3d-object "}}}}}}return""},_getModeIcon:function(q){if(q===a.Mode.In){return"wux-ui-3ds-login"}else{if(q===a.Mode.Out){return"wux-ui-3ds-logout"}else{if(q===a.Mode.InOut){return"wux-ui-3ds-dataflow-input-output"}else{if(q===a.Mode.Neutral){return"wux-ui-3ds-dataflow-neutral"}}}}return""},_mappingIcon:function(q){if(q===d.MAP){return"wux-ui-3ds-parameter-mapping"}else{if(q===d.MAPPED){return""}else{if(q===d.CREATEANDMAP){return"wux-ui-3ds-new-create"}}}return""},_mappingTitle:function(q){if(q===d.MAP){return f["Dataflow.Mapping.toBeCreated"]}else{if(q===d.MAPPED){return""}else{if(q===d.CREATEANDMAP){return f["Dataflow.Mapping.CreateAndMap"]}}}return""}};return e});