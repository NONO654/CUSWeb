define("DS/SMAProcWebContents/TreeDropDown",["UWA/Core","UWA/Controls/Abstract","DS/Tree/Tree","DS/Tree/TreeDocument"],function(h,g,e,d){var b={label:"",data:null,icon:""};var f="22px";var c="300px";var a=g.extend({init:function(i){this._parent(i);this._buildUI(i)},_buildUI:function(i){var j=this;j.elements.container=h.createElement("div",{styles:{"box-sizing":"border-box",width:"100%",height:f,"min-width":"200px",position:"relative","vertical-align":"middle",border:"1px solid grey","border-radius":"4px","background-color":"white",display:"flex","align-items":"center"}});j.elements.img=h.createElement("img",{styles:{visibility:"hidden",display:"inline-block",width:f,height:f}}).inject(j.elements.container);j.elements.editor=h.createElement("div",{styles:{display:"inline-block",height:"100%","flex-grow":2,"line-height":f,"margin-left":"5px",overflow:"hidden"}}).inject(j.elements.container);j.elements.btn=h.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-down",styles:{display:"inline-block",height:"100%",width:f,"vertical-align":"middle","text-align":"center","line-height":f,cursor:"pointer",color:"rgb(54, 142, 196)"},events:{click:function(){if(this.hasClassName("wux-ui-3ds-down")){j.toggleTree(true)}else{j.toggleTree(false)}}}}).inject(j.elements.container);j.elements.treeContainer=h.createElement("div",{styles:{display:"none",height:c,"z-index":50,position:"absolute","background-color":"white",border:"1px solid grey",top:"100%",left:0,right:0}}).inject(j.elements.container);var k=new d({useAsyncPreExpand:false,apiVersion:2,shouldBeEditable:function(){return false},shouldAcceptDrag:function(){return false},shouldAcceptDrop:function(){return false}});j.elements.treeView=new e({treeDocument:k}).inject(j.elements.treeContainer);j.focusableElement=j.elements.treeView.getContent().getElement("[tabindex]");if(j.focusableElement){j.focusableElement.addEvent("blur",function(){j.toggleTree(false)})}j.elements.treeView.onNodeClick(function(n){var l=n.nodeModel.options;if(l.data.selectable){var m=(n.nodeModel.options.icons&&n.nodeModel.options.icons[0])||"";j.setSelectedItem({label:n.nodeModel.options.label,data:n.nodeModel.options.data.object,icon:m});j.toggleTree(false)}})},getTreeDoc:function(){return this.elements.treeView.getDocument()},setRootItems:function(j){var l=this.elements.treeView.getDocument();l.prepareUpdate();l.empty();for(var k=0;k<j.length;++k){l.addRoot(j[k])}l.pushUpdate();this.setSelectedItem(b)},setSelectedItem:function(i){if(this.selectedItem&&this.selectedItem.label===i.label&&this.selectedItem.data===i.data){return}this.selectedItem=i;this.elements.editor.setText(i.label);if(i.icon){this.elements.img.src=i.icon;this.elements.img.setStyles({visibility:"visible"})}else{this.elements.img.setStyles({visibility:"hidden"})}this.dispatchEvent("change",this.selectedItem,this)},getSelectedItem:function(){return this.selectedItem},toggleTree:function(i){var j=this;if(!j.istoggling){j.istoggling=true;setTimeout(function(){if(i){j.elements.treeContainer.show();j.elements.btn.removeClassName("wux-ui-3ds-down").addClassName("wux-ui-3ds-up");if(j.focusableElement){j.focusableElement.focus()}}else{j.elements.treeContainer.hide();j.elements.btn.removeClassName("wux-ui-3ds-up").addClassName("wux-ui-3ds-down")}j.istoggling=false},200)}}});return a});