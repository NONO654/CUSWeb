/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define(["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,d,e){var c={};function b(j,h){var k,g,l=false;if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if((j.configuration.environmentVariables[g].name===h.name)&&(j.configuration.environmentVariables[g].value===h.value)){l=true;break}}}if(!l){k=d.shallowCopy(j);if(!k.configuration.environmentVariables){k.configuration.environmentVariables=[]}for(g=0;g<k.configuration.environmentVariables.length;g++){if(k.configuration.environmentVariables[g].name===h.name){k.configuration.environmentVariables[g].value=h.value;break}}if(g===k.configuration.environmentVariables.length){k.configuration.environmentVariables.push({name:h.name,value:h.value})}k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}return k}function a(j,h){var k,g,l=false;switch(h.type){case f.SET_JOB_ENV_VARS:k=d.setStateProperty(j,"configuration.environmentVariables",h.environmentVariables,true);break;case f.ADD_JOB_ENV_VAR:k=b(j,h);break;case f.SET_JOB_ENV_VAR_VALUE:if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if(j.configuration.environmentVariables[g].name===h.name){k=d.shallowCopy(j);k.configuration.environmentVariables[g].value=h.value;k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_JOB_ENV_VAR:if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if(j.configuration.environmentVariables[g].name===h.name){k=d.shallowCopy(j);k.configuration.environmentVariables.splice(g,1);if(k.configuration.environmentVariables.length===0){delete k.configuration.environmentVariables}k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_ALL_JOB_ENV_VARS:if(j.configuration.environmentVariables&&(j.configuration.environmentVariables.length>0)){k=d.shallowCopy(j);delete k.configuration.environmentVariables;k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}break;default:k=j;break}return k}c["default"]=a;return c});