/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define(["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,d,e){var b={};function c(j,h){var k,g,l=false;if(j.configuration.parameters){for(g=0;g<j.configuration.parameters.length;g++){if((j.configuration.parameters[g].name===h.name)&&(j.configuration.parameters[g].parameterType===h.parameterType)&&(j.configuration.parameters[g].mode===h.mode)&&(j.configuration.parameters[g].valueType===h.valueType)&&(j.configuration.parameters[g].value===h.value)){l=true;break}}}if(!l){k=d.shallowCopy(j);if(!k.configuration.parameters){k.configuration.parameters=[]}for(g=0;g<k.configuration.parameters.length;g++){if(k.configuration.parameters[g].name===h.name){k.configuration.parameters[g].parameterType=h.parameterType;k.configuration.parameters[g].mode=h.mode;k.configuration.parameters[g].valueType=h.valueType;k.configuration.parameters[g].value=h.value;break}}if(g===k.configuration.parameters.length){k.configuration.parameters.push({parameterType:h.parameterType,name:h.name,mode:h.mode,valueType:h.valueType,value:h.value})}k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}return k}function a(j,h){var k,g,l=false;switch(h.type){case f.SET_JOB_PARAMETERS:k=d.setStateProperty(j,"configuration.parameters",h.parameters,true);break;case f.ADD_JOB_PARAMETER:k=c(j,h);break;case f.SET_JOB_PARAMETER_VALUE:if(j.configuration.parameters){for(g=0;g<j.configuration.parameters.length;g++){if(j.configuration.parameters[g].name===h.name){k=d.shallowCopy(j);k.configuration.parameters[g].value=h.value;k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_JOB_PARAMETER:if(j.configuration.parameters){for(g=0;g<j.configuration.parameters.length;g++){if(j.configuration.parameters[g].name===h.name){k=d.shallowCopy(j);k.configuration.parameters.splice(g,1);if(k.configuration.parameters.length===0){delete k.configuration.parameters}k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_ALL_JOB_PARAMETERS:if(j.configuration.parameters&&(j.configuration.parameters.length>0)){k=d.shallowCopy(j);delete k.configuration.parameters;k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}break;default:k=j;break}return k}b["default"]=a;return b});