/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors",[],function(){var a={};a.ErrorCodes={CONNECTOR_DEFINITIONS_WS_ERROR:"SMAPoweredByState.ad-state-domain-connector-definitions.CONNECTOR_DEFINITIONS_WS_ERROR"};a.isConnectorDefinitionsInitialized=function(b){return !b.domain.connectorDefinitions.uninitialized};a.connectorDefinitionsPersistenceOperation=function(b){return !b.domain.connectorDefinitions.persistenceOperation?null:b.domain.connectorDefinitions.persistenceOperation};a.connectorDefinitionsPersistenceError=function(b){return !b.domain.connectorDefinitions.persistenceError?null:b.domain.connectorDefinitions.persistenceError};a.allConnectorDefinitions=function(b){return b.domain.connectorDefinitions.objects};a.connectorDefinitionWithID=function(d,e){var c=null,b;for(b=0;b<d.domain.connectorDefinitions.objects.length;b++){if(d.domain.connectorDefinitions.objects[b].id===e){c=d.domain.connectorDefinitions.objects[b];break}}return c};a.connectorDefinitionForApp=function(f,b,c){var e=null,d;for(d=0;d<f.domain.connectorDefinitions.objects.length;d++){if((f.domain.connectorDefinitions.objects[d].appName===b)&&((f.domain.connectorDefinitions.objects[d].appVersion===c)||!c)){e=f.domain.connectorDefinitions.objects[d];break}}return e};a.connectorOption=function(d,c){var e=null,b;if(d.options){for(b=0;b<d.options.length;b++){if(d.options[b].name===c){e=d.options[b];break}}}return e};a.connectorOptionWithID=function(e,f,c){var d=null,b=a.connectorDefinitionWithID(e,f);if(b){d=a.connectorOption(b,c)}return d};a.connectorOptionForApp=function(g,b,c,e){var f=null,d=a.connectorDefinitionForApp(g,b,c);if(d){f=a.connectorOption(d,e)}return f};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-logging/selectors",[],function(){var a={};a.REDUXLOGGING_LS_KEY="SMAPoweredBy.enableReduxLogging";a.REDUXLOGGING_ENABLED_LS_VALUE="yes";a.isReduxLoggingEnabled=function(){return(window.localStorage.getItem(a.REDUXLOGGING_LS_KEY)===a.REDUXLOGGING_ENABLED_LS_VALUE)};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-types",[],function(){var a={};a.REFRESH_CONNECTOR_DEFINITIONS="REFRESH_CONNECTOR_DEFINITIONS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-preferences/selectors",[],function(){var a={};a.defaultJobType=function(b){return !b.app.preferences.defaultJobType?null:b.app.preferences.defaultJobType};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app/action-types",[],function(){var a={};a.REFRESH_APP="REFRESH_APP";a.ADD_ERROR="ADD_ERROR";a.REMOVE_ERROR="REMOVE_ERROR";a.REMOVE_ALL_ERRORS="REMOVE_ALL_ERRORS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-credentials/action-types",[],function(){var a={};a.SAVE_CREDENTIALS="SAVE_CREDENTIALS";a.CLEAR_CREDENTIALS="CLEAR_CREDENTIALS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study-templates/selectors",[],function(){var b={};b.ErrorCodes={STUDY_TEMPLATES_WS_ERROR:"SMAPoweredByState.ad-state-domain-study-templates.STUDY_TEMPLATES_WS_ERROR",STUDY_TEMPLATE_OPTIONS_WS_ERROR:"SMAPoweredByState.ad-state-domain-study-templates.STUDY_TEMPLATE_OPTIONS_WS_ERROR"};const a="Empty Process";b.isStudyTemplatesInitialized=function(c){return !c.domain.studyTemplates.uninitialized};b.studyTemplatesPersistenceOperation=function(c){return !c.domain.studyTemplates.persistenceOperation?null:c.domain.studyTemplates.persistenceOperation};b.studyTemplatesPersistenceError=function(c){return !c.domain.studyTemplates.persistenceError?null:c.domain.studyTemplates.persistenceError};b.allStudyTemplates=function(c){return c.domain.studyTemplates.objects};b.studyTemplateWithID=function(e,f){var d=null,c;for(c=0;c<e.domain.studyTemplates.objects.length;c++){if(e.domain.studyTemplates.objects[c].id===f){d=e.domain.studyTemplates.objects[c];break}}return d};b.studyTemplateWithTitle=function(e,f){var d=null,c;for(c=0;c<e.domain.studyTemplates.objects.length;c++){if(e.domain.studyTemplates.objects[c].title===f){d=e.domain.studyTemplates.objects[c];break}}return d};b.emptyStudyTemplate=function(c){return b.studyTemplateWithTitle(c,a)};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-alerts/action-types",[],function(){var a={};a.ADD_ALERT="ADD_ALERT";a.REMOVE_ALERT="REMOVE_ALERT";a.REMOVE_ALL_ALERTS="REMOVE_ALL_ALERTS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study/action-types",[],function(){var a={};a.CREATE_STUDY="CREATE_STUDY";a.CREATE_JOB_WITH_STUDY="CREATE_JOB_WITH_STUDY";a.UPDATE_STUDY="UPDATE_STUDY";a.REFRESH_STUDY="REFRESH_STUDY";a.CLOSE_STUDY="CLOSE_STUDY";a.SET_STUDY_TITLE="SET_STUDY_TITLE";a.SET_STUDY_DESCRIPTION="SET_STUDY_DESCRIPTION";return a});
/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-action-types",[],function(){var a={};a.SET_STATE_ITEM="ad-state-action-types.SET_STATE_ITEM";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study-templates/action-types",[],function(){var a={};a.REFRESH_STUDY_TEMPLATES="REFRESH_STUDY_TEMPLATES";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-credentials/selectors",[],function(){var b={},a=function(g){var f=null;if(!g){return f}var h=g.encryptedString[0];var e=[];f={};f={OS:[h],IsightV5:e,credentialsEncrypted:true};f.domainName=g.domainName;f.windowsUser=g.windowsUser;f.linuxUser=g.linuxUser;f.id=g.id;f.lengthWindows=g.lengthWindows;f.lengthLinux=g.lengthLinux;return f},d=function(g){var e=null;var f=g.app.credentials.objects.filter(function(h){return h.domainName!==""});if(f.length>0){e=a(f[f.length-1]);return e}else{return null}},c=function(i,g,e,j){var f=null;e=e?e:null;j=j?j:null;var h=i.app.credentials.objects.filter(function(k){return k.domainName===g&&k.windowsUser===e&&k.linuxUser===j});if(h.length>0){f=a(h[h.length-1]);return f}else{return null}};b.getCredentials=function(i,g,e,j){var f=null;e=e?e:null;j=j?j:null;if(e&&j){f=c(i,g,e,null);var h=c(i,"",null,j);if(f&&h){f.linuxUser=h.linuxUser;f.OS.push(h.OS[0]);f.id="drmMode";f.lengthLinux=h.lengthLinux}else{f=f||h}}else{if(e||j){f=c(i,g,e,j)}}return f};b.getCredentialsByDomain=function(h,f){var e=null;f=f?f:"";var g=h.app.credentials.objects.filter(function(i){return i.domainName===f});if(g.length>0){e=a(g[g.length-1]);return e}else{return null}};b.getDRMModeCredentials=function(h){var f=null;var g=h.app.credentials.objects.filter(function(j){return j.windowsUser&&j.linuxUser});if(g.length>0){var i=g[0].encryptedString;var e=[];f={OS:i,IsightV5:e,credentialsEncrypted:true};f.windowsUser=g[0].windowsUser;f.linuxUser=g[0].linuxUser;f.id=g[0].id;return f}else{return null}};b.getCredentialsByID=function(h,i){var e=null;var f=h.app.credentials.objects.filter(function(j){return j.id===i});e=a(f[0]);if(i==="drmMode"){var g=this.getCredentialsByDomain(h,"");e=d(h);if(e&&g){e.linuxUser=g.linuxUser;e.OS.push(g.OS[0]);e.id=i;e.lengthLinux=g.lengthLinux}else{e=e||g}}return e};b.credentialsPersistenceOperation=function(e){return !e.app.credentials.persistenceOperation?null:e.app.credentials.persistenceOperation};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-logging/action-types",[],function(){var a={};a.ENABLE_REDUX_LOGGER="ENABLE_REDUX_LOGGER";a.DISABLE_REDUX_LOGGER="DISABLE_REDUX_LOGGER";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-job-types/action-types",[],function(){var a={};a.REFRESH_JOB_TYPES="REFRESH_JOB_TYPES";a.REFRESH_JOB_TYPE_OPTIONS="REFRESH_JOB_TYPE_OPTIONS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-preferences/action-types",[],function(){var a={};a.SET_DEFAULT_JOB_TYPE="SET_DEFAULT_JOB_TYPE";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-loading-utils",[],function(){var a={};var b=function(d){var e=window,c=function(f){if(typeof e[f]!=="undefined"){e=e[f];return true}else{return false}};return d.split(".").every(c)};a.loadWebComponents=function(h,d,g){var e,f=h.length,c=function(){if((--f===0)&&g){g()}};if(!d||(d&&(d.length===h.length))){for(e=0;e<h.length;e++){a.loadWebComponent(h[e],(d?d[e]:null),c)}}};a.loadWebComponent=function(c,d,e){window.Polymer.Base.importHref(c,function(){if(d&&(d.length>0)){a.waitForWebComponents([d],e)}else{if(e){e()}}})};a.waitForWebComponents=function(d,e){var c=function(){var f,g=true;for(f=0;f<d.length;f++){if(!b(d[f])){g=false;break}}if(!g){window.setTimeout(c,1)}else{if(e){e()}}};c()};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-defs",[],function(){var a={};a.MCS_NO_CREATE_ACCESS_RESPONSE="no create access";a.SSO_LOGIN_REQUEST="sso login request";a.BATCH_JOB_DATA_PARAMETER_NAME="PoweredByBatchJobData";a.BATCH_JOB_ITERATION_PARAMETER_NAME="Iteration";a.BATCH_JOB_SIZE_PARAMETER_NAME="Size";a.PersistenceStatus={CLEAN:"CLEAN",DIRTY:"DIRTY",STALE:"STALE"};a.PersistenceOperation={CREATING:"CREATING",INITIALIZING:"INITIALIZING",READING:"READING",UPDATING:"UPDATING",DELETING:"DELETING",REMOVING:"REMOVING"};a.AsyncStatus={PENDING:"_PENDING",SUCCESS:"_FULFILLED",FAILURE:"_REJECTED"};a.ErrorCodes={SESSION_TIMEOUT_ERROR:"SMAPoweredByState.SESSION_TIMEOUT_ERROR",UNAUTHORIZED_ACCESS_ERROR:"SMAPoweredByState.UNAUTHORIZED_ACCESS_ERROR",RUNAS_CREDENTIALS_ERROR:"SMAPoweredByState.RUNAS_CREDENTIALS_ERROR"};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study/selectors",[],function(){var a={};a.ErrorCodes={STUDY_CREATE_WS_ERROR:"SMAPoweredByState.ad-state-domain-study.STUDY_CREATE_WS_ERROR",STUDY_UPDATE_ACCESS_ERROR:"SMAPoweredByState.ad-state-domain-study.STUDY_UPDATE_ACCESS_ERROR",STUDY_UPDATE_WS_ERROR:"SMAPoweredByState.ad-state-domain-study.STUDY_UPDATE_WS_ERROR",STUDY_WS_ERROR:"SMAPoweredByState.ad-state-domain-study.STUDY_WS_ERROR"};a.studyPersistenceStatus=function(b){return(b.domain.study&&b.domain.study.persistenceStatus)?b.domain.study.persistenceStatus:null};a.studyPersistenceOperation=function(b){return(b.domain.study&&b.domain.study.persistenceOperation)?b.domain.study.persistenceOperation:null};a.studyPersistenceError=function(b){return(b.domain.study&&b.domain.study.persistenceError)?b.domain.study.persistenceError:null};a.studyObject=function(b){return b.domain.study};a.studyID=function(b){return(b.domain.study&&b.domain.study.id)?b.domain.study.id:null};a.studyManagedDataRootID=function(b){return(b.domain.study&&b.domain.study.managedDataRootID)?b.domain.study.managedDataRootID:null};a.studyMasks=function(b){return(b.domain.study&&b.domain.study.masks)?b.domain.study.masks:null};a.isReadOnly=function(c){var b=a.studyMasks(c),d=null;if(b&&typeof b.modifyMask!=="undefined"&&typeof b.locked!=="undefined"){d=b.modifyMask!=="TRUE"||b.locked!=="FALSE"}return d};a.studyNotFound=function(c){var b=a.studyObject(c);return(b&&b.persistenceError&&b.persistenceError.code===a.ErrorCodes.STUDY_WS_ERROR&&b.persistenceError.status===500)};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app/selectors",[],function(){var b={};b.AppLicenses={ABAQUS_STUDY:"Abaqus_Study",SIMULATION_COMPANION:"Simulation_Companion",RUN_ABAQUS_CAE:"Run_Abaqus_CAE"};b.ErrorCodes={APPS_MGMT_WS_ERROR:"SMAPoweredByState.ad-state-app.APPS_MGMT_WS_ERROR",APPS_LICENSE_WS_ERROR:"SMAPoweredByState.ad-state-app.APPS_LICENSE_WS_ERROR"};b.TRANSIENT_WIDGET_PREFIX="preview-";var a="x3dPlatformId",c="whereUsedTenantId";b.isAppInitialized=function(d){return !d.app.uninitialized};b.appPersistenceOperation=function(d){return !d.app.persistenceOperation?null:d.app.persistenceOperation};b.appPersistenceError=function(d){return !d.app.persistenceError?null:d.app.persistenceError};b.isCloudEnabled=function(d){return d.app.cloudEnabled};b.platforms=function(f){var d,e=null;if(window.widget&&window.widget.getPreference&&window.widget.getPreference(a)){d=window.widget.getPreference(a);if(d&&d.options){e=d.options.map(function(g){return{id:g.value,displayName:g.name}})}}else{if(f.app.platforms){e=f.app.platforms.slice()}}return e};b.currentPlatformID=function(d){var e=null;if(window.widget&&window.widget.getValue&&window.widget.getValue(a)){e=window.widget.getValue(a)}else{if(d.app.currentPlatform){e=d.app.currentPlatform.id}}return e};b.whereUsedTenants=function(f){var d,e=null;if(window.widget&&window.widget.getPreference&&window.widget.getPreference(c)){d=window.widget.getPreference(c);if(d&&d.options){e=d.options.map(function(g){return{id:g.value,displayName:g.name}})}}else{if(f.app.whereUsedTenants){e=f.app.whereUsedTenants.slice()}}return e};b.currentWhereUsedTenantID=function(e){var d=null;if(window.widget&&window.widget.getValue&&window.widget.getValue(c)){d=window.widget.getValue(c)}else{if(e.app.currentWhereUsedTenant){d=e.app.currentWhereUsedTenant.id}}return d};b.spaceURL=function(d){return d.app.spaceURL};b.myAppsURL=function(d){return d.app.myAppsURL};b.dslsURL=function(d){return d.app.dslsURL};b.isTransientWidget=function(d){return d.app.transientWidget};b.hasLicense=function(e,d){return(e.app.licenses&&(e.app.licenses.indexOf(d)!==-1))};b.securityContext=function(e){var d=null;if(e.app.securityContext){d=e.app.securityContext}else{if(window.widget&&window.widget.getValue("Security Context")){d=window.widget.getValue("Security Context")}}return d};b.allErrors=function(d){return d.app.errors.slice().sort(function(f,e){return f.time-e.time})};b.errorsWithCode=function(e,d){return e.app.errors.filter(function(f){return(f.error&&f.error.code&&(f.error.code===d))}).sort(function(g,f){return g.time-f.time})};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-redux-observer",["UWA/Promise","DS/Redux/Redux"],function(b,a){var f=function(){this._unsubscribeList=[]};f.ERROR_CODES={TIMED_OUT:"TIMED_OUT"};var e=window.Promise||b;function g(i,h){var j=null;if(typeof i==="undefined"&&typeof h==="undefined"){j=true}else{if(typeof i==="undefined"||typeof h==="undefined"){j=false}else{if(i&&h&&i.length===0&&h.length===0){j=true}else{if(i&&h&&i.length!==h.length){j=false}else{j=JSON.stringify(i)===JSON.stringify(h)}}}}return j}function d(i){var j,k=null,h=function(){var m=[i.store.getState()].concat(i.selectArguments),n=i.select.apply(null,m),l=false;if(i.unSubScribeCriteria){var o=i.unSubScribeCriteria(i.store.getState());if(o){k()}}if(i.compareFunc){if(!i.compareFunc(j,n)){l=true}}else{if(i.arrayCompare){if(!g(j,n)){l=true}}else{if(n!==j){l=true}}}if(l){j=n;i.onChange(j);l=false}};k=i.store.subscribe(h);h();return k}function c(h){return new e(function(n,m){var l=null,k,p=null,j=h.isResolved?h.isResolved:function(q){return q===null},i=function(q){if(h.checkError){k=h.checkError(h.store.getState());if(k!==null){if(p!==null){window.clearTimeout(p)}if(l){l()}m(k)}}if(j(q)){if(p!==null){window.clearTimeout(p)}if(l){l()}n()}};if(j(h.select(h.store.getState()))){n()}else{if(h.timeout){var o=function(){if(l){l()}k={code:f.ERROR_CODES.TIMED_OUT};m(k)};p=window.setTimeout(o,h.timeout)}l=d({store:h.store,select:h.select,onChange:i})}})}f.prototype.observeStore=function(h){var i=d(h);this._unsubscribeList.push({unsubscribe:i,callbackName:h.onChange.name});return i};f.prototype.waitFor=function(h){return c.apply(this,[h])};f.prototype.unsubscribeAll=function(){this._unsubscribeList.forEach(function(h){h.unsubscribe()});this._unsubscribeList.splice(0,this._unsubscribeList.length)};f.prototype.getBoundActions=function(i,h){return a.bindActionCreators(i,h)};return f});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-job-types/selectors",[],function(){var a={};a.ErrorCodes={JOB_TYPES_WS_ERROR:"SMAPoweredByState.ad-state-domain-job-types.JOB_TYPES_WS_ERROR",JOB_TYPE_OPTIONS_WS_ERROR:"SMAPoweredByState.ad-state-domain-job-types.JOB_TYPE_OPTIONS_WS_ERROR"};a.UNKNOWN_JOB_TYPE="unknown";a.isJobTypesInitialized=function(b){return !b.domain.jobTypes.uninitialized};a.jobTypesPersistenceOperation=function(b){return !b.domain.jobTypes.persistenceOperation?null:b.domain.jobTypes.persistenceOperation};a.jobTypesPersistenceError=function(b){return !b.domain.jobTypes.persistenceError?null:b.domain.jobTypes.persistenceError};a.allJobTypes=function(b){return b.domain.jobTypes.objects};a.jobTypeWithID=function(d,e){var b=null,c;for(c=0;c<d.domain.jobTypes.objects.length;c++){if(d.domain.jobTypes.objects[c].id===e){b=d.domain.jobTypes.objects[c];break}}return b};a.jobTypeWithTitleRevision=function(e,f,c){var b=null,d;for(d=0;d<e.domain.jobTypes.objects.length;d++){if((e.domain.jobTypes.objects[d].title===f)&&(e.domain.jobTypes.objects[d].revision===c)){b=e.domain.jobTypes.objects[d];break}}return b};a.jobTypeHandlerWithId=function(c,d){var b=a.jobTypeWithID(c,d);return(b&&b.handler)?b.handler:"DS/SMAPoweredByHandler/default/ADDefaultHandler"};a.jobTypeHandlerWithTitleRevision=function(e,f,c){var b=null,d;for(d=0;d<e.domain.jobTypes.objects.length;d++){if((e.domain.jobTypes.objects[d].title===f)&&(e.domain.jobTypes.objects[d].revision===c)){b=e.domain.jobTypes.objects[d];break}}return(b&&b.handler)?b.handler:null};a.latestJobTypeWithTitle=function(d,e){var b=null,c;for(c=0;c<d.domain.jobTypes.objects.length;c++){if((d.domain.jobTypes.objects[c].title===e)&&d.domain.jobTypes.objects[c].isLatestRevision){b=d.domain.jobTypes.objects[c];break}}return b?b.id:null};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/action-types",[],function(){var a={};a.REFRESH_JOBS="REFRESH_JOBS";a.REFRESH_JOB_DATA="REFRESH_JOB_DATA";a.STORE_JOB_CONFIGURATION="STORE_JOB_CONFIGURATION";a.CREATE_JOB="CREATE_JOB";a.CREATE_BATCH_JOB="CREATE_BATCH_JOB";a.CLONE_JOB="CLONE_JOB";a.UPDATE_JOB="UPDATE_JOB";a.UPDATE_BATCH_JOB="UPDATE_BATCH_JOB";a.START_JOB="START_JOB";a.ABORT_JOB="ABORT_JOB";a.DELETE_JOBS="DELETE_JOBS";a.SET_JOB_TITLE="SET_JOB_TITLE";a.SET_JOB_DESCRIPTION="SET_JOB_DESCRIPTION";a.SET_JOB_READY="SET_JOB_READY";a.SET_JOB_STATUS="SET_JOB_STATUS";a.SET_JOB_3DX_PARAMETERS="SET_JOB_3DX_PARAMETERS";a.MARK_UPLOAD_JOB_PROCESSED="MARK_UPLOAD_JOB_PROCESSED";a.SET_JOB_INPUTS="SET_JOB_INPUTS";a.POPULATE_BATCH_ITERATION_JOB_INPUTS="POPULATE_BATCH_ITERATION_JOB_INPUTS";a.SET_JOB_MAIN_INPUT="SET_JOB_MAIN_INPUT";a.POPULATE_BATCH_ITERATION_JOB_MAIN_INPUT="POPULATE_BATCH_ITERATION_JOB_MAIN_INPUT";a.ADD_JOB_INPUT="ADD_JOB_INPUT";a.REMOVE_JOB_INPUT="REMOVE_JOB_INPUT";a.REMOVE_ALL_JOB_INPUTS="REMOVE_ALL_JOB_INPUTS";a.SET_JOB_ARGUMENTS="SET_JOB_ARGUMENTS";a.ADD_JOB_ARGUMENT="ADD_JOB_ARGUMENT";a.SET_JOB_ARGUMENT_VALUE="SET_JOB_ARGUMENT_VALUE";a.REMOVE_JOB_ARGUMENT="REMOVE_JOB_ARGUMENT";a.REMOVE_ALL_JOB_ARGUMENTS="REMOVE_ALL_JOB_ARGUMENTS";a.SET_JOB_ENV_VARS="SET_JOB_ENV_VARS";a.ADD_JOB_ENV_VAR="ADD_JOB_ENV_VAR";a.SET_JOB_ENV_VAR_VALUE="SET_JOB_ENV_VAR_VALUE";a.REMOVE_JOB_ENV_VAR="REMOVE_JOB_ENV_VAR";a.REMOVE_ALL_JOB_ENV_VARS="REMOVE_ALL_JOB_ENV_VARS";a.SET_JOB_OUTPUT_FILE_SPECS="SET_JOB_OUTPUT_FILE_SPECS";a.SET_JOB_OUTPUT_FILE_SPECS_ENABLED="SET_JOB_OUTPUT_FILE_SPECS_ENABLED";a.ADD_JOB_OUTPUT="ADD_JOB_OUTPUT";a.SET_JOB_GENERATE_RESULTS="SET_JOB_GENERATE_RESULTS";a.SET_JOB_GENERATE_RESULTS_UNITS="SET_JOB_GENERATE_RESULTS_UNITS";a.SET_JOB_GENERATE_RESULTS_UNITS_ENABLED="SET_JOB_GENERATE_RESULTS_UNITS_ENABLED";a.SET_JOB_GENERATE_RESULTS_SOURCE_FILENAME="SET_JOB_GENERATE_RESULTS_SOURCE_FILENAME";a.SET_JOB_GENERATE_RESULTS_TITLE="SET_JOB_GENERATE_RESULTS_TITLE";a.SET_JOB_EXECUTION_OPTIONS="SET_JOB_EXECUTION_OPTIONS";a.SET_JOB_EXECUTION_SERVER="SET_JOB_EXECUTION_SERVER";a.SET_JOB_EXECUTION_DRM_MODE="SET_JOB_EXECUTION_DRM_MODE";a.SET_JOB_EXECUTION_CREDENTIALS_ID="SET_JOB_EXECUTION_CREDENTIALS_ID";a.SET_JOB_EXECUTION_STATION="SET_JOB_EXECUTION_STATION";a.SET_JOB_EXECUTION_OS="SET_JOB_EXECUTION_OS";a.SET_JOB_EXECUTION_NUM_PROCS="SET_JOB_EXECUTION_NUM_PROCS";a.SET_JOB_EXECUTION_CUSTOM_DRM_CORES="SET_JOB_EXECUTION_CUSTOM_DRM_CORES";a.SET_JOB_EXECUTION_LICENSE_OPTIONS="SET_JOB_EXECUTION_LICENSE_OPTIONS";a.SET_JOB_EXECUTION_SXALICENSE_TYPE="SET_JOB_EXECUTION_SXALICENSE_TYPE";a.SET_JOB_EXECUTION_SXALICENSE_FEATURES="SET_JOB_EXECUTION_SXALICENSE_FEATURES";a.SET_JOB_EXECUTION_SXALICENSE_MODEL_SIZE="SET_JOB_EXECUTION_SXALICENSE_MODEL_SIZE";a.SET_JOB_EXECUTION_SXALICENSE_PERFORMANCE="SET_JOB_EXECUTION_SXALICENSE_PERFORMANCE";a.SET_JOB_EXECUTION_WORK_DIR="SET_JOB_EXECUTION_WORK_DIR";a.SET_JOB_EXECUTION_REMOVE_WORK_DIR="SET_JOB_EXECUTION_REMOVE_WORK_DIR";a.SET_BATCH_JOB_OPTIONS="SET_BATCH_JOB_OPTIONS";a.SET_JOB_COMMAND="SET_JOB_COMMAND";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-work-data/action-types",[],function(){var a={};a.CREATE_EXEC_DIR="CREATE_EXEC_DIR";a.INITIALIZE_EXEC_DIR="INITIALIZE_EXEC_DIR";a.SET_EXEC_DIR_CREDENTIALS="SET_EXEC_DIR_CREDENTIALS";a.CLEAR_EXEC_DIR_FILEMONITOR="CLEAR_EXEC_DIR_FILEMONITOR";a.REMOVE_EXEC_DIR="REMOVE_EXEC_DIR";a.MARK_FOR_REMOVAL="MARK_FOR_REMOVAL";a.REFRESH_WORK_DATA="REFRESH_WORK_DATA";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-cos/action-types",[],function(){var a={};a.REFRESH_SERVERS="REFRESH_SERVERS";a.REFRESH_STATIONS="REFRESH_STATIONS";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-managed-data/action-types",[],function(){var a={};a.REFRESH_MANAGED_DATA="REFRESH_MANAGED_DATA";a.REFRESH_MANAGED_DATA_DOCUMENT="REFRESH_MANAGED_DATA_DOCUMENT";a.UPLOAD_LOCAL_FILE="UPLOAD_LOCAL_FILE";a.UPLOAD_WORK_DATA="UPLOAD_WORK_DATA";a.ADD_REFERENCED_CONTENT="ADD_REFERENCED_CONTENT";a.DELETE_MANAGED_DATA="DELETE_MANAGED_DATA";a.REMOVE_MANAGED_DATA="REMOVE_MANAGED_DATA";a.SET_FILE_VERSION_COMMENTS="SET_FILE_VERSION_COMMENTS";a.SET_FILE_UPLOAD_PROGRESS="SET_FILE_UPLOAD_PROGRESS";a.CLEAR_MANAGED_DATA_PERSISTENCE_ERROR="CLEAR_MANAGED_DATA_PERSISTENCE_ERROR";return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-view-utils",["UWA/Class/Promise"],function(b){var a={};var c=window.Promise||b;a.observeStore=function(f,d,e,j){var h,g=function(){var k=d(f.getState());if(j){if(!j(h,k)){h=k;window.console.debug("Calling change handler (view-utils): "+e.name);e(h)}}else{if(k!==h){h=k;window.console.debug("Calling change handler (view-utils): "+e.name);e(h)}}};window.console.debug("Subscribing  (view-utils): "+e.name);var i=f.subscribe(g);g();return i};a.observeStore2=function(e){var f,g=null,d=function(){var h=[e.store.getState()].concat(e.selectArguments);var i=e.selectFunc.apply(null,h);if(e.unSubScribeCriteria){var j=e.unSubScribeCriteria(e.store.getState());if(j){g()}}if(e.compareFunc){if(!e.compareFunc(f,i)){f=i;window.console.debug("Calling change handler (view-utils): "+e.onChange.name);e.onChange(f)}}else{if(i!==f){f=i;window.console.debug("Calling change handler (view-utils): "+e.onChange.name);e.onChange(f)}}};window.console.debug("Subscribing  (view-utils): "+e.onChange.name);g=e.store.subscribe(d);d();return g};a.waitForAsyncState=function(d){return new c(function(h,g){var f=null,e=function(i){var k,j;if(d.isResolved){k=d.isResolved(i)}else{k=(i===null)}if(d.isError){j=d.isError(i)}else{if(d.errorSelector){j=d.errorSelector(d.store.getState())}}if(k){if(j){if(f){f()}g(j)}else{if(f){f()}h()}}};f=a.observeStore(d.store,d.selector,e)})};a.dispatchAsyncAction=function(d){return new c(function(h,g){var e=false,f=null,i=function(j){var m,l;if(d.isResolved){m=d.isResolved(j)}else{m=(j===null)}if(d.isError){l=d.isError(j)}else{if(d.errorSelector){l=d.errorSelector(d.store.getState())}}if(e&&l){f();var k=null;if(d.errorSelector){k=d.errorSelector(d.store.getState())}g(k)}else{if(m&&e){f();h()}}};f=a.observeStore(d.store,d.selector,i);d.action.apply(null,d.actionArgs?d.actionArgs:[null]);e=true})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-cos/selectors",["UWA/Utils"],function(b){var a={};var c="cores";a.ErrorCodes={SERVER_STATUS_WS_ERROR:"SMAPoweredByState.ad-state-cos.SERVER_STATUS_WS_ERROR",RUNASENABLED_WS_ERROR:"SMAPoweredByState.ad-state-cos.RUNASENABLED_WS_ERROR",DRM_WS_ERROR:"SMAPoweredByState.ad-state-cos.DRM_WS_ERROR",DRM_CONFIG_OPTIONS_WS_ERROR:"SMAPoweredByState.ad-state-cos.DRM_CONFIG_OPTIONS_WS_ERROR",DRM_CPULIMIT_WS_ERROR:"SMAPoweredByState.ad-state-cos.DRM_CPULIMIT_WS_ERROR",STATIONS_WS_ERROR:"SMAPoweredByState.ad-state-cos.STATIONS_WS_ERROR",PRIVATE_STATIONS_ERROR:"SMAPoweredByState.ad-state-cos.PRIVATE_STATIONS_ERROR",SERVERS_WS_ERROR:"SMAPoweredByState.ad-state-cos.SERVERS_WS_ERROR"};a.DRMMode={CLOUD:"Cloud",FIPER:"fiper",LSF:"lsf"};a.DRMPropertyType={INTEGER:"integer",STRING:"string",REAL:"real",BOOLEAN:"boolean"};a.OS={WINDOWS:"windows",LINUX:"linux"};a.ServerStatus={NOTRESPONDING:"NOTRESPONDING",UNKNOWN:"UNKNOWN",UNSTARTED:"UNSTARTED",INITIALIZING:"INITIALIZING",STARTING:"STARTING",RUNNING:"RUNNING",SHUTTINGDOWN:"SHUTTINGDOWN",STOPPED:"STOPPED"};a.StationStatus={INVALID:"Invalid",UNKNOWN:"Unknown",RUNNING:"Running",OFFLINE:"Offline",QUIETING:"Quieting",SHUTDOWN:"Shutdown",SUSPENDED:"Suspended"};a.LOCALSTATIONNAME="{localhost}";a.MaxCores={};a.MaxCores[a.OS.WINDOWS]=4;a.MaxCores[a.OS.LINUX]=16;a.isServersInitialized=function(d){return !d.cos.servers.uninitialized};a.serversPersistenceOperation=function(d){return !d.cos.servers.persistenceOperation?null:d.cos.servers.persistenceOperation};a.serversPersistenceError=function(d){return !d.cos.servers.persistenceError?null:d.cos.servers.persistenceError};a.allServers=function(d){return d.cos.servers.objects};a.serverWithID=function(e,g){var f=null,d;for(d=0;d<e.cos.servers.objects.length;d++){if(e.cos.servers.objects[d].id===g){f=e.cos.servers.objects[d];break}}return f};a.serverForStation=function(f,e){var g=null,d;for(d=0;d<f.cos.servers.objects.length;d++){if(f.cos.servers.objects[d].id===e.server){g=f.cos.servers.objects[d];break}}return g};a.isStationsInitialized=function(d){return !d.cos.stations.uninitialized};a.stationsPersistenceOperation=function(d){return !d.cos.stations.persistenceOperation?null:d.cos.stations.persistenceOperation};a.stationsPersistenceError=function(d){return !d.cos.stations.persistenceError?null:d.cos.stations.persistenceError};a.allStations=function(d){return d.cos.stations.objects};a.serverStations=function(d,e){return d.cos.stations.objects.filter(function(f){return f.server===e.id})};a.firstStationWithID=function(f,g){var e=null,d;for(d=0;d<f.cos.stations.objects.length;d++){if(f.cos.stations.objects[d].id===g){e=f.cos.stations.objects[d];break}}return e};a.stationWithID=function(f,g,j){var e=null,h,d;if(g){h=a.serverStations(f,g);for(d=0;d<h.length;d++){if(h[d].id===j){e=h[d];break}}}return e};a.stationWithName=function(g,h,d){var f=null,j=a.serverStations(g,h),e;for(e=0;e<j.length;e++){if(j[e].name===d){f=j[e];break}}return f};a.privateStation=function(g,h,f){var e=null,j=a.serverStations(g,h),d;for(d=0;d<j.length;d++){if(j[d].name===a.LOCALSTATIONNAME){if(!f||(b.matchUrl(f,j[d].spaceURL))){e=j[d];break}}}return e};a.runningStations=function(e,f,d){return e.cos.stations.objects.filter(function(g){return((!f||(g.server===f.id))&&(!d||(b.matchUrl(d,g.spaceURL)))&&(g.status===a.StationStatus.RUNNING))})};a.runningWindowsStations=function(e,f,d){return a.runningStations(e,f,(d?d:null)).filter(function(g){return(g.os===a.OS.WINDOWS)})};a.drmModeSupported=function(g,j,f){var h=(typeof j==="string")?a.serverWithID(g,j):j,d=false;if(h&&h.drmInfo&&h.drmInfo.length>0){for(var e=0;e<h.drmInfo.length;e++){if(h.drmInfo[e].name===f){d=true;break}}}return d};a.drmModeEnabledServers=function(f,d){var e=a.allServers(f);return e.filter(function(g){return a.drmModeSupported(f,g,d)})};a.cpuLimit=function(h,k,f,g){var j=(typeof k==="string")?a.serverWithID(h,k):k,d=null;if(f===a.DRMMode.CLOUD){if(g===a.OS.WINDOWS){d=a.MaxCores[a.OS.WINDOWS]}else{d=a.MaxCores[a.OS.LINUX];if(j&&j.drmInfo&&j.drmInfo.length>0){for(var e=0;e<j.drmInfo.length;e++){if(j.drmInfo[e].name===a.DRMMode.CLOUD&&j.drmInfo[e].cpuLimit>0){d=j.drmInfo[e].cpuLimit;break}}}}}return d};a.customDRMDef=function(f,d,j){var h=null,g=a.serverWithID(f,d),e;if(g&&g.drmInfo){for(e=0;e<g.drmInfo.length;e++){if(g.drmInfo[e].name===j){h=g.drmInfo[e];break}}}return h};a.customDRMPropertyDef=function(h,e,k,d){var j=null,g=a.customDRMDef(h,e,k),f;if(g&&g.properties){for(f=0;f<g.properties.length;f++){if(g.properties[f].name===d){j=g.properties[f];break}}}return j};a.customDRMCoresProperty=function(h,e,j){var d=null,g=a.customDRMDef(h,e,j),f;if(g&&g.attributes){for(f=0;f<g.attributes.length;f++){if(g.attributes[f].name.toLowerCase()===c.toLowerCase()){d=g.attributes[f].value;break}}}return d};a.isRunAsJob=function(g,f){var d=false,h,e;if(f&&f.executionOptions){if((f.executionOptions.drmMode!==a.DRMMode.FIPER)&&(f.executionOptions.drmMode!==a.DRMMode.CLOUD)){d=true}else{h=a.serverWithID(g,f.executionOptions.server);e=a.stationWithID(g,h,f.executionOptions.station);if(e&&h&&e.isRunAsEnabled&&h.isRunAsEnabled){d=true}}}return d};a.isCustomDRMJob=function(e,d){var f=false;if(d&&d.executionOptions&&(d.executionOptions.drmMode!==a.DRMMode.FIPER)&&(d.executionOptions.drmMode!==a.DRMMode.CLOUD)){f=true}return f};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-alerts/selectors",[],function(){var a={};a.Level={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error"};a.allAlerts=function(b){return b.app.alerts.slice()};a.alertsOfLevel=function(b,c){return b.app.alerts.filter(function(d){return d.level===c})};a.alertsOfCategory=function(c,b){return c.app.alerts.filter(function(d){return d.category===b})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-logging/actions",["DS/SMAPoweredByState/ad-state-app-logging/action-types"],function(b){var a={};a.enableReduxLogger=function(){return{type:b.ENABLE_REDUX_LOGGER}};a.disableReduxLogger=function(){return{type:b.DISABLE_REDUX_LOGGER}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-preferences/actions",["DS/SMAPoweredByState/ad-state-app-preferences/action-types"],function(b){var a={};a.setDefaultJobType=function(c){if(window.widget&&window.widget.addPreference){window.widget.addPreference({name:"defaultJobType",type:"hidden",label:"defaultJobType",defaultValue:c})}return{type:b.SET_DEFAULT_JOB_TYPE,id:c}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-actions",["DS/SMAPoweredByState/ad-state-action-types"],function(b){var a={};a.setStateItem=function(d,c){return{type:b.SET_STATE_ITEM,path:d,value:c}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-alerts/actions",["DS/SMAPoweredByState/ad-state-app-alerts/action-types"],function(b){var a={};a.addAlert=function(d,f,e,c){return{type:b.ADD_ALERT,category:d,level:f,text:(e?e:null),code:(c?c:null)}};a.removeAlert=function(c){return{type:b.REMOVE_ALERT,alertID:c}};a.removeAllAlerts=function(){return{type:b.REMOVE_ALL_ALERTS}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-utils",["DS/SMAPoweredByState/ad-state-defs"],function(d){var b={};function a(j,h){var g=null,e,f;if(j&&h){e=h.split(".");for(f=0;f<e.length;f++){g=j[e[f]];if((typeof g==="undefined")||!g){break}}}return g}function c(g,q,n){var f,h,j,l,m,o,e,p,k;if(g&&q){f=q.split(".");h=g;for(j=0;j<f.length;j++){e=f[j].indexOf("[");if(e===-1){if(j<(f.length-1)){k=h[f[j]];if((typeof k==="undefined")||!k){h[f[j]]={}}else{h[f[j]]=b.shallowCopy(h[f[j]])}h=h[f[j]]}else{h[f[j]]=n}}else{l=f[j].substring(0,e);m=f[j].substring(e+1,f[j].indexOf("]")).trim();o=parseInt(m);p=isNaN(o);if(p){o=m.substring(1,m.length-1)}if(j<(f.length-1)){if(p){k=h[l][o];if((typeof k==="undefined")||!k){h[l][o]={}}else{h[l][o]=b.shallowCopy(h[l][o])}}else{h[l].splice(o,1,b.shallowCopy(h[l][o]))}h=h[l][o]}else{if(p){h[l][o]=n}else{h[l].splice(o,1,n)}}}}}}b.generateID=function(){return"ad-state-"+Date.now()+"-"+Math.random()};b.shallowCopy=function(e){var f=null;if(e){f=Object.create(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(g){f[g]=e[g]})}return f};b.deepCopy=function(e){var f=null;if(e){if(Array.isArray(e)){f=[];e.forEach(function(g){f.push(JSON.parse(JSON.stringify(g)))})}else{f=JSON.parse(JSON.stringify(e))}}return f};b.getObject=function(g,h){var f,e=null;if(g&&h){for(f=0;f<g.length;f++){if(g[f].id===h){e=g[f];break}}}return e};b.getObjectIDs=function(e){var f=[];if(e.length>0){f=e.reduce(function(g,h){g.push(h.id);return g},[])}return f};b.replaceObject=function(h,g,e){var f,j;if(h&&g){j=e?e.id:g.id;for(f=0;f<h.length;f++){if(h[f].id===j){h.splice(f,1,g);break}}}};b.removeObject=function(f,g){var e;if(f&&g){for(e=0;e<f.length;e++){if(f[e].id===g){f.splice(e,1);break}}}};b.setStateProperty=function(f,h,e,g){var i=f;if(f){if(a(f,h)!==e){i=b.shallowCopy(f);c(i,h,e);if(g){i.persistenceStatus=d.PersistenceStatus.DIRTY}}}return i};b.buildError=function(i,g,h,e){var f={error:{code:i,errorLvl:e},time:Date.now()};if(g){f.error.status=g.status;f.error.response=g.response}if(h){f.context=h;f.error.context=h}return f};b.getNodeParent=function(h,j){var g=b.findNodeInHierarchy(j,h.hierarchy),f=null,e;if(g&&g.parent){for(e=0;e<h.objects.length;e++){if(h.objects[e].id===g.parent){f=h.objects[e];break}}}return f};b.getNodeChildren=function(g,i){var f=b.findNodeInHierarchy(i,g.hierarchy),h=[],e=[];if(f){f.children.forEach(function(j){h.push(j.id)});g.objects.forEach(function(j){if(h.indexOf(j.id)>=0){e.push(j)}})}return e};b.getNodeDescendants=function(g,i){var f=b.findNodeInHierarchy(i,g.hierarchy),h=[],e=function(l,k,j){var m=[];if(k){k.children.forEach(function(n){e(l,n,j);m.push(n.id)});l.objects.forEach(function(n){if(m.indexOf(n.id)>=0){h.push(n)}})}};e(g,f,h);return h};b.findNodeInHierarchy=function(g,e){var f=function(l,h){var k=null,j;if(h){if(h.id===l){k=h}else{if(h.children){for(j=0;j<h.children.length;j++){k=f(l,h.children[j]);if(k){break}}}}}return k};return f(g,e)};b.clearNodeDescendants=function(j,m,l){var h,k=[],g,e,f=function(p,o){var n;if(p&&p.children){for(n=0;n<p.children.length;n++){o.push(p.children[n].id);f(p.children[n],o)}}};h=b.findNodeInHierarchy(m,j.hierarchy);if(h){f(h,k);h.children=[];if(k.length>0){g=0;while(g<j.objects.length){if(k.indexOf(j.objects[g].id)>=0){j.objects.splice(g,1)}else{g++}}}if((typeof l!=="undefined")&&(l)){e=b.findNodeInHierarchy(h.parent,j.hierarchy);if(e){for(g=0;g<e.children.length;g++){if(e.children[g].id===h.id){e.children.splice(g,1);break}}}}}if(l){for(g=0;g<j.objects.length;g++){if(j.objects[g].id===m){j.objects.splice(g,1);break}}}};b.parseTimestamp=function(f){var g=0,e=parseInt(f);if(!isNaN(e)){g=e}return g};b.getTimestamp=function(g){var f=g,m,e,k,l,h,n,j=0;if(g&&g.length>0){n=new Date(f);if(isNaN(n)){m=g.indexOf("T");if(m>0){f=g.substring(0,m+1);e=g.substring(m+1);k=e.indexOf("-");if(k<0){k=e.indexOf("+")}if(k>=0){l=e.substring(k+1);if(l.indexOf(":")<0){for(h=l.length;h<4;h++){l+="0"}l=l.substring(0,2)+":"+l.substring(2)}e=e.substring(0,k+1)+l}f+=e}n=new Date(f)}j=n.getTime()}return j};b.formatCredentials=function(e){var f={};if(!e){return null}f.OS=e.OS;f.IsightV5=e.IsightV5;f.credentialsEncrypted=true;return f};b.formatCredForDirUpdate=function(e){if(e){delete e.OS;delete e.IsightV5;delete e.credentialsEncrypted}else{return null}return e};b.isInteger=function(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};b.getBatchJobIteration=function(k,h,g){var j=null,f,e;if(k&&k.batchConfiguration&&k.batchConfiguration.iterations&&b.isInteger(h)){if(g){e=h-(k.batchConfiguration.iterations.length-1);for(f=0;f<e;f++){k.batchConfiguration.iterations.push({})}}if(h<k.batchConfiguration.iterations.length){j=k.batchConfiguration.iterations[h]}}return j};b.removeBatchJobIteration=function(f,e){if(f&&f.batchConfiguration&&f.batchConfiguration.iterations&&b.isInteger(e)&&f.batchConfiguration.iterations.length>e){f.batchConfiguration.iterations.splice(e,1)}};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-wc-adapter",["DS/WebappsUtils/WebappsUtils","DS/SMAPoweredByState/ad-state-loading-utils","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","UWA/Class/Promise"],function(g,v,c,k,f){var D={};D.ErrorCodes={COS_RUNTIME_ERROR:"SMAPoweredByState.ad-state-wc-adapter.COS_RUNTIME_ERROR",COS_WS_NOT_FOUND:"SMAPoweredByState.ad-state-wc-adapter.COS_WS_NOT_FOUND",COS_RUNAS_CREDENTIALS_ERROR:"SMAPoweredByState.ad-state-wc-adapter.COS_RUNAS_CREDENTIALS_ERROR",COS_PRIVATE_STATION_USER_MISMATCH:"SMAPoweredByState.ad-state-wc-adapter.COS_PRIVATE_STATION_USER_MISMATCH",COS_PRIVATE_STATION_SERVER_MISMATCH:"SMAPoweredByState.ad-state-wc-adapter.COS_PRIVATE_STATION_SERVER_MISMATCH",COS_PRIVATE_STATION_NOT_FOUND:"SMAPoweredByState.ad-state-wc-adapter.COS_PRIVATE_STATION_NOT_FOUND",COS_BUILD_JOB_ERROR:"SMAPoweredByState.ad-state-wc-adapter.COS_BUILD_JOB_ERROR",COS_SSO_LOGIN_REQUEST_ERROR:"SMAPoweredByState.ad-state-wc-adapter.COS_SSO_LOGIN_REQUEST_ERROR"};var o="/resources/slmservices",w="adhoc",l=5,r=5000;var b=null,e=null,t=null,x=null,j=null,h=null,C=null,y=null,a=null,n=null;var d=window.Promise||f;function s(H,G){var I,J,F,E;if(t.$.dashboard.isInDashboard()){I=t.$.dashboard.getMcsUri()+G}else{J=window.location.pathname;if(J&&J.length>0){if(J[0]==="/"){J=J.substr(1)}F=J.split("/");if(F.length>0){E=F[0]}}I=window.location.protocol+"//"+window.location.host+"/"+E+G}return I+((H[0]!=="/")?"/":"")+H}function m(J,L,E,F){var K,I=function(){if(this.retryTimer){window.clearTimeout(this.retryTimer);delete this.retryTimer}if(this.successCallback){this.successCallback({objectID:L})}},H=function(M){if(this.numRetries<l){this.numRetries++;this.retryTimer=window.setTimeout(K.bind(this),r)}else{if(this.errorCallback){this.errorCallback(M)}}};K=function(){D.callSMAProcService({verb:"PUT",headers:{Accept:"text/plain"},data:this.checkinResponse,uri:"/fcs/commit",onComplete:I.bind(this),onError:H.bind(this)})};var G={numRetries:0,name:name,checkinResponse:J,successCallback:E,errorCallback:F};K.call(G)}function B(H,E,K,L,F,J,I){var G=new FormData(),M=new XMLHttpRequest();G.append("csrfTokenName","ENO_CSRF_TOKEN");G.append("noOfFiles","1");G.append("__fcs__jobTicket",K);if(H instanceof Blob){G.append("file",H,H.name)}else{G.append("bfile0",H);G.append("fileName0",H.name);G.append("format0","generic")}if(I&&M.upload){M.upload.onprogress=I}M.onreadystatechange=function(){if(M.readyState!==4){return}if(M.status===200){m(M.responseText,E,F,J)}else{if(J){J(M)}}};M.open("POST",L,true);M.send(G)}function A(I,F,K,G,L,J){var M,H=function(P){var Q=JSON.parse(P.response),S,R,N,O;S=Q.id;R=new DOMParser().parseFromString(Q.fcsTicket,"text/xml");N=R.getElementsByTagName("Ticket")[0].textContent;O=R.getElementsByTagName("FcsUrl")[0].textContent;B(I,S,N,O,G,L,J)},E=function(N){if(L){L(N)}};M={uri:F,verb:K,onComplete:H,onError:E};D.callSMAProcService(M)}function q(E,G){var F=function(){var H=E;if((typeof G!=="undefined")&&(G!==null)){H=c.shallowCopy(E);H.uri=s(H.uri,G)}if(H.sessionTimeoutInfo){H.onSessionTimeout=function(I){H.sessionTimeoutInfo.handler(c.buildError(k.ErrorCodes.SESSION_TIMEOUT_ERROR,I,H.sessionTimeoutInfo.context))}}t.sendRequest(H)};if(!t){v.loadWebComponents([g.getWebappsBaseUrl()+"SMAProcSP/sp-mcsservice/sp-mcsservice.html",g.getWebappsBaseUrl()+"SMAProcSP/sp-dashboard/sp-dashboard.html"],["DS.SMAProcSP.SPMCSService","DS.SMAProcSP.SPDashboard"],function(){if(!t){t=document.createElement("sp-mcsservice");document.body.appendChild(t)}F()})}else{F()}}function z(E,G){var F=function(){var H=E;if((typeof G!=="undefined")&&(G!==null)){H=c.shallowCopy(E);H.uri=s(H.uri,G)}if(H.sessionTimeoutInfo){H.onSessionTimeout=function(I){H.sessionTimeoutInfo.handler(c.buildError(k.ErrorCodes.SESSION_TIMEOUT_ERROR,I,H.sessionTimeoutInfo.context))}}e.sendRequest(H)};if(!e){v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-webservice/sp-webservice.html","DS.SMAProcSP.SPWebservice",function(){if(!e){e=document.createElement("sp-webservice");document.body.appendChild(e)}F()})}else{F()}}function p(E){if(!a){v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-cos-filemonitor/sp-cos-filemonitor.html","DS.SMAProcSP.SPCOSFileMonitor",function(){if(!a){a=document.createElement("sp-cos-filemonitor");document.body.appendChild(a)}E()})}else{E()}}function i(E){if(n){E()}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-encryption/sp-encryption.html",null,function(){if(!n){n=document.createElement("sp-encryption");document.body.appendChild(n)}E()})}}function u(F){var G=[];if(F.windowsUser){var E=n.encryptSingleCredential(F.domainName,F.windowsUser,F.enoviaUser,F.windowsPassword,F.pubkeyValue);G.push(E)}if(F.linuxUser){var H=n.encryptSingleCredential(n.ENCRYPTIONTYPES.LINUX,F.linuxUser,F.enoviaUser,F.linuxPassword,F.pubkeyValue);G.push(H)}F.onComplete(G,F)}D.getDashboard=function(){return new d(function(E){if(!b){v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-dashboard/sp-dashboard.html","DS.SMAProcSP.SPDashboard",function(){if(!b){b=document.createElement("sp-dashboard");document.body.appendChild(b)}E(b)})}else{E(b)}})};D.callSMAProcService=function(E){q(E,o)};D.call3DSpaceService=function(E){q(E,"")};D.callENOService=function(E){q(E,null)};D.callSPWebService=function(E){z(E,null)};D.callCOSService=function(E){if(x){x.sendRequest(E)}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-cosservice/sp-cosservice.html",null,function(){if(!x){x=document.createElement("sp-cosservice");document.body.appendChild(x)}x.sendRequest(E)})}};D.callUploadLocalFile=function(E){A(E.file,E.createURL,E.createMethod,(typeof E.onComplete!=="undefined")?E.onComplete:null,(typeof E.onFailure!=="undefined")?E.onFailure:null,(typeof E.onProgress!=="undefined")?E.onProgress:null)};D.callRefreshCOSConfigurations=function(E){if(j){j.refreshCosConfigurations(E.onComplete)}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-cos/sp-cos.html",null,function(){if(!j){j=document.createElement("sp-cos");document.body.appendChild(j)}j.refreshCosConfigurations(E.onComplete)})}};D.callGetPrivateStations=function(E){var F,H=[],I=function(J){if(J){for(F=0;F<J.length;F++){if(J[F].info.cosid===E.serverID){H.push(J[F].info)}}}if(E.onComplete){E.onComplete(H)}},G=function(){if(E.onComplete){E.onComplete(H)}};if(j){j.getPrivateStationInfo({onComplete:I,onFailure:G})}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-cos/sp-cos.html",null,function(){if(!j){j=document.createElement("sp-cos");document.body.appendChild(j)}j.getPrivateStationInfo({onComplete:I,onFailure:G})})}};D.callRunUpload=function(E){var I=null,G=null,F=function(){h.removeEventListener("success",I);h.removeEventListener("error",G)},H=function(){var J={successCallback:I,errorCallback:G};h.addEventListener("success",I);h.addEventListener("error",G);h.jobData=JSON.stringify(E.data);if(E.isLocalStation===true){J.forceHasLocalHost=true}if(E.credentials){h.runSimulationAs(J,E.studyID,"",true,E.credentials,w,E.serverID)}else{h.runSimulation(J,E.studyID,"",true,w,E.serverID)}};I=function(J){if(J.detail.result.context.successCallback===I){J.stopPropagation();J.cancelBubble=true;J.preventDefault();if(E.onComplete){E.onComplete({serverID:J.detail.result.cosServerID,eedJobID:J.detail.result.EEDJobID,mcsJobID:J.detail.result.MCSJobID})}F()}return true};G=function(J){if(J.detail.result.context.errorCallback===G){var K=D.ErrorCodes.COS_RUNTIME_ERROR;J.stopPropagation();J.cancelBubble=true;J.preventDefault();if(J.detail.status===404){K=D.ErrorCodes.COS_WS_NOT_FOUND}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_USER_MISMATCH){K=D.ErrorCodes.COS_PRIVATE_STATION_USER_MISMATCH}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_SERVER_MISMATCH){K=D.ErrorCodes.COS_PRIVATE_STATION_SERVER_MISMATCH}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_NO_STATION_FOUND){K=D.ErrorCodes.COS_PRIVATE_STATION_NOT_FOUND}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.BUILD_JOB_ERROR){K=D.ErrorCodes.COS_BUILD_JOB_ERROR}}}}}if(E.onFailure){E.onFailure({code:K,message:(J.detail.response)?J.detail.response:null})}F()}return true};if(h){H()}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-run/sp-run.html","DS.SMAProcSP.SPRun",function(){if(!h){h=document.createElement("sp-run");h.jobUrl="/resources/slmservices/jobs/uploadJob";h.timeout=60000;document.body.appendChild(h)}H()})}};D.callRunJob=function(E){var I=null,G=null,F=function(){C.removeEventListener("success",I);C.removeEventListener("error",G)},H=function(){C.addEventListener("success",I);C.addEventListener("error",G);C.tenantID=(E.tenantID)?E.tenantID:"";if(E.credentials){C.runSimulationAs(E.context?E.context:null,E.jobID,"",true,E.credentials,w,E.serverID?E.serverID:null,E.disablePrivateStationCheck)}else{C.runSimulation(E.context?E.context:null,E.jobID,"",true,w,E.serverID?E.serverID:null,E.disablePrivateStationCheck)}};I=function(J){J.stopPropagation();J.cancelBubble=true;J.preventDefault();if(E.onComplete){E.onComplete({serverID:J.detail.result.cosServerID,eedJobID:J.detail.result.EEDJobID,mcsJobID:J.detail.result.MCSJobID,credentials:J.detail.result.credentials})}F();return true};G=function(J){var K=D.ErrorCodes.COS_RUNTIME_ERROR;J.stopPropagation();J.cancelBubble=true;J.preventDefault();if(J.detail.status===404){K=D.ErrorCodes.COS_WS_NOT_FOUND}else{if((J.detail.status===500)&&(J.detail.response&&(J.detail.response.toLowerCase().indexOf(k.MCS_NO_CREATE_ACCESS_RESPONSE))!==-1)){K=k.ErrorCodes.UNAUTHORIZED_ACCESS_ERROR}else{if((J.detail.status===500)&&(J.detail.response&&(J.detail.response.toLowerCase().indexOf(k.SSO_LOGIN_REQUEST))!==-1)){K=D.ErrorCodes.COS_SSO_LOGIN_REQUEST_ERROR}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_USER_MISMATCH){K=D.ErrorCodes.COS_PRIVATE_STATION_USER_MISMATCH}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_SERVER_MISMATCH){K=D.ErrorCodes.COS_PRIVATE_STATION_SERVER_MISMATCH}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.PRIVATE_STATION_NO_STATION_FOUND){K=D.ErrorCodes.COS_PRIVATE_STATION_NOT_FOUND}else{if(J.detail.status===DS.SMAProcSP.SPRun.ERRORS.BUILD_JOB_ERROR){K=D.ErrorCodes.COS_BUILD_JOB_ERROR}}}}}}}if(E.onFailure){E.onFailure({code:K,message:(J.detail.response)?J.detail.response:null})}F();return true};if(C){H()}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-run/sp-run.html","DS.SMAProcSP.SPRun",function(){if(!C){C=document.createElement("sp-run");document.body.appendChild(C)}H()})}};D.callInitExecDir=function(E){var I={},H=function(J){if(E.onComplete){if(E.activityID&&J.path){J.path=J.path+E.activityID.toUpperCase()+"_1"+(E.iteration+1)}E.onComplete(J.path)}},F=function(J){if(E.onFailure){E.onFailure(J)}},G=function(){I.mcsJobID=E.execDir.mcsJobID;I.cosJobID=E.execDir.eedJobID;I.activityID=E.activityID?null:"ANY";I.physicalID=I.mcsJobID;if(E.execDir.station){I.station=E.execDir.station}if(E.execDir.server){I.serverID=E.execDir.server}I.onComplete=H;I.onFailure=F;a.initExecDir(I)};p(G)};D.callLs=function(F){var K={},J={},I={},H=function(L){if(J.filemonJobID){I.filemonJobID=J.filemonJobID}if(J.filemonURL){I.filemonURL=J.filemonURL}I.data=L;if(F.onComplete){F.onComplete(I)}},G=function(L){if(J.filemonJobID){I.filemonJobID=J.filemonJobID}if(J.filemonURL){I.filemonURL=J.filemonURL}if(F.credentials&&(L.error===DS.SMAProcSP.SPCOSFileMonitor.ERRORS.filemonURLNotFound)){I.error=D.ErrorCodes.COS_RUNAS_CREDENTIALS_ERROR}else{I.error=L}if(F.onFailure){F.onFailure(I)}},E=function(){J={mcsJobID:F.execDir.mcsJobID,cosJobID:F.execDir.eedJobID,path:F.execDir.path};if(F.execDir.station){J.station=F.execDir.station}if(F.execDir.server){J.serverID=F.execDir.server}if(F.credentials){var L={};L.OS=F.credentials.OS;L.IsightV5=F.credentials.IsightV5;L.credentialsEncrypted=true;J.credentials=L}if(F.execDir.filemonJobID){J.filemonJobID=F.execDir.filemonJobID}if(F.execDir.filemonURL){J.filemonURL=F.execDir.filemonURL}K.execDir=J;K.physicalID=F.execDir.mcsJobID;if(F.subdirPath){K.subdirPath=F.subdirPath}K.onComplete=H;K.onFailure=G;K.credentialsFunction=function(M){M.execDir.credentials=F.credentials;M.onComplete(true)};a.ls(K)};p(E)};D.callTail=function(F){var J={},I={},H=function(K){if(F.onComplete){F.onComplete(K)}},G=function(K){if(F.onFailure){F.onFailure({error:(F.credentials&&(K.error===DS.SMAProcSP.SPCOSFileMonitor.ERRORS.filemonURLNotFound))?D.ErrorCodes.COS_RUNAS_CREDENTIALS_ERROR:K})}},E=function(){I={mcsJobID:F.execDir.mcsJobID,cosJobID:F.execDir.eedJobID,path:F.execDir.path};if(F.execDir.station){I.station=F.execDir.station}if(F.execDir.server){I.serverID=F.execDir.server}if(F.credentials){var K={};K.OS=F.credentials.OS;K.IsightV5=F.credentials.IsightV5;K.credentialsEncrypted=true;I.credentials=K}if(F.execDir.filemonJobID){I.filemonJobID=F.execDir.filemonJobID}if(F.execDir.filemonURL){I.filemonURL=F.execDir.filemonURL}J.execDir=I;J.physicalID=F.execDir.mcsJobID;J.filePath=F.filePath;if(F.start){J.start=F.start}if(typeof(F.numLines)!=="undefined"&&F.numLines!==null){J.numLines=F.numLines}J.onComplete=H;J.onFailure=G;J.credentialsFunction=function(L){L.execDir.credentials=F.credentials;L.onComplete(true)};a.tail(J)};p(E)};D.callGetFileURL=function(E){var J={},I={},H=function(K){if(E.onComplete){E.onComplete(K)}},G=function(K){if(E.onFailure){E.onFailure({error:(E.credentials&&(K.error===DS.SMAProcSP.SPCOSFileMonitor.ERRORS.filemonURLNotFound))?D.ErrorCodes.COS_RUNAS_CREDENTIALS_ERROR:K})}},F=function(){I={mcsJobID:E.execDir.mcsJobID,cosJobID:E.execDir.eedJobID,path:E.execDir.path};if(E.execDir.station){I.station=E.execDir.station}if(E.execDir.server){I.serverID=E.execDir.server}if(E.credentials){var K={};K.OS=E.credentials.OS;K.IsightV5=E.credentials.IsightV5;K.credentialsEncrypted=true;I.credentials=K}if(E.execDir.filemonJobID){I.filemonJobID=E.execDir.filemonJobID}if(E.execDir.filemonURL){I.filemonURL=E.execDir.filemonURL}J.execDir=I;J.physicalID=E.execDir.mcsJobID;J.filePath=E.filePath;J.onComplete=H;J.onFailure=G;J.credentialsFunction=function(L){L.execDir.credentials=E.credentials;L.onComplete(true)};a.getFileURL(J)};p(F)};D.callStopFileMonitor=function(E){var I={},H={},G=function(){if(E.onComplete){E.onComplete()}},F=function(K){if(E.onFailure){E.onFailure({error:K})}},J=function(){H={mcsJobID:E.execDir.mcsJobID,cosJobID:E.execDir.eedJobID,path:E.execDir.path};if(E.execDir.station){H.station=E.execDir.station}if(E.execDir.server){H.serverID=E.execDir.server}if(E.execDir.filemonJobID){H.filemonJobID=E.execDir.filemonJobID}if(E.execDir.filemonURL){H.filemonURL=E.execDir.filemonURL}I.execDir=H;I.physicalID=E.execDir.mcsJobID;I.onComplete=G;I.onFailure=F;a.stopFileMonitor(I)};p(J)};D.encryptCredentials=function(E){var F=function(G){y.getCOSPubkey(G).then(function(H){E.pubkeyValue=H;i(u.bind(null,E))})};if(y){F(E.serverId)}else{v.loadWebComponent(g.getWebappsBaseUrl()+"SMAProcSP/sp-cosservice/sp-cosservice.html",null,function(){if(!y){y=document.createElement("sp-cosservice");document.body.appendChild(y)}F(E.serverId)})}};return D});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-managed-data/selectors",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-domain-study/selectors"],function(b,c,d){var a={};a.Types={CATEGORY:"Simulation Category - Internal Data",FOLDER:"Simulation Folder",DOCUMENT:"Simulation Document - Versioned",NVDOCUMENT:"Simulation Document - NonVersioned",FILE:"file",FILEVERSION:"fileversion",SIMULATION_OBJECT:"DesignSight",RDOCUMENT:"Document",PROJECTION:"projection",PROJECTION3DX:"3dxprojection",UNKNOWN:"unknown"};a.ErrorCodes={GET_FILE_VERSIONS_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.GET_FILE_VERSIONS_WS_ERROR",GET_CONTENT_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.GET_CONTENT_WS_ERROR",ADD_REF_CONTENT_EXISTS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.ADD_REF_CONTENT_EXISTS_ERROR",ADD_REF_CONTENT_UNAUTHORIZED:"SMAPoweredByState.ad-state-domain-managed-data.ADD_REF_CONTENT_UNAUTHORIZED",ADD_REF_CONTENT_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.ADD_REF_CONTENT_WS_ERROR",UPLOAD_FILE_UNAUTHORIZED:"SMAPoweredByState.ad-state-domain-managed-data.UPLOAD_FILE_UNAUTHORIZED",UPLOAD_FILE_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.UPLOAD_FILE_WS_ERROR",UPLOAD_WORK_DATA_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.UPLOAD_WORK_DATA_ERROR",UPLOAD_JOB_FILE_CHECKIN_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.UPLOAD_JOB_FILE_CHECKIN_WS_ERROR",CREATE_CONTENT_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.CREATE_CONTENT_WS_ERROR",DELETE_CONTENT_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.DELETE_CONTENT_WS_ERROR",SET_FILE_VERSION_COMMENTS_WS_ERROR:"SMAPoweredByState.ad-state-domain-managed-data.SET_FILE_VERSION_COMMENTS_WS_ERROR"};a.isManagedDataInitialized=function(e){return !e.domain.managedData.uninitialized};a.managedDataPersistenceStatus=function(f,g){var e;if(g){e=a.managedDataWithID(f,g);return(e&&e.persistenceStatus)?e.persistenceStatus:null}else{return !f.domain.managedData.persistenceStatus?null:f.domain.managedData.persistenceStatus}};a.managedDataPersistenceOperation=function(f,g){var e;if(g){e=a.managedDataWithID(f,g);return(e&&e.persistenceOperation)?e.persistenceOperation:null}else{return !f.domain.managedData.persistenceOperation?null:f.domain.managedData.persistenceOperation}};a.managedDataPersistenceError=function(f,g){var e;if(g){e=a.managedDataWithID(f,g);return(e&&e.persistenceError)?e.persistenceError:null}else{return !f.domain.managedData.persistenceError?null:f.domain.managedData.persistenceError}};a.allManagedData=function(i,e,g){var j=((typeof e!=="undefined")&&e&&(e.length>0))?e.slice():null,h=((typeof g!=="undefined")&&g&&(g.length>0))?g.slice():null,f=i.domain.managedData.objects.filter(function(k){return((!j||(j.indexOf(k.type)>=0))&&(!h||(h.indexOf(k.type)<0)))});return f};a.managedDataWithID=function(g,h){var e=null,f;for(f=0;f<g.domain.managedData.objects.length;f++){if(g.domain.managedData.objects[f].id===h){e=g.domain.managedData.objects[f];break}}return e};a.managedDataParent=function(g,j,i){var h=(typeof i!=="undefined")?i:true,f=b.findNodeInHierarchy(j,g.domain.managedData.hierarchy),e=null;if(f&&f.parent){e=a.managedDataWithID(g,f.parent);if(h&&((a.Types.DOCUMENT===e.type)||(a.Types.NVDOCUMENT===e.type))){e=a.managedDataParent(g,e.id)}}return e};a.managedDataChildren=function(e,f,o){var n=(typeof o!=="undefined")?o:true,l,h,m=[],j,k,g=[];if(f){l=b.findNodeInHierarchy(f,e.domain.managedData.hierarchy)}else{l=b.findNodeInHierarchy(d.studyManagedDataRootID(e),e.domain.managedData.hierarchy)}if(l){l.children.forEach(function(i){h=a.managedDataWithID(e,i.id);if(n&&((a.Types.DOCUMENT===h.type)||(a.Types.NVDOCUMENT===h.type))){j=a.managedDataChildren(e,h.id);for(k=0;k<j.length;k++){m.push(j[k].id)}}else{if(h.id){m.push(h.id)}}})}if(m.length>0){g=e.domain.managedData.objects.filter(function(i){return(m.indexOf(i.id)>=0)})}return g};a.managedDataFilesWithName=function(h,f,e){var g=[],i=e?e:d.studyManagedDataRootID(h);a.managedDataChildren(h,i).forEach(function(j){if((j.type===a.Types.FILE)&&(j.name===f)){g.push(j)}});return g};a.nonJobOutputManagedData=function(h){var f=h.domain.jobs,e=a.managedDataChildren(h,null,true),i=[],g;f.objects.forEach(function(j){j.outputs.forEach(function(k){var m=a.managedDataWithID(h,k),l;if(m){l=m.id;if(m.type===a.Types.FILEVERSION){l=a.managedDataParent(h,k).id}i.push(l)}})});g=e.filter(function(j){return i.indexOf(j.id)===-1});return g};a.isFileUploading=function(h,i){var e=false,f=(typeof i==="string")?a.managedDataWithID(h,i):i;if(f.persistenceOperation===c.PersistenceOperation.CREATING){e=true}else{var g=a.managedDataChildren(h,f.id,true).filter(function(j){return j.persistenceOperation===c.PersistenceOperation.CREATING});e=g.length>0}return e};a.uploadingFiles=function(e){return a.allManagedData(e).filter(function(f){return(((f.type===a.Types.FILE)||(f.type===a.Types.FILEVERSION))&&(f.persistenceOperation===c.PersistenceOperation.CREATING))})};a.isFileDeleting=function(f,g){var e=(typeof g==="string")?a.managedDataWithID(f,g):g;return e.persistenceOperation===c.PersistenceOperation.DELETING};a.isFileParentReferenced=function(g,h){var e=(typeof h==="string")?a.managedDataWithID(g,h):h,f=a.managedDataParent(g,e.id,false);return f.referenced===true};a.getFileUploadProgress=function(g,h){var i=null,e=(typeof h==="string")?a.managedDataWithID(g,h):h;if(typeof e.persistenceOperation!=="undefined"){i=typeof e.uploadProgress!=="undefined"?e.uploadProgress:null}else{var f=a.managedDataChildren(g,e.id,true).filter(function(j){return typeof j.persistenceOperation!=="undefined"});i=f[0]&&typeof f[0].uploadProgress!=="undefined"?f[0].uploadProgress:null}return i};a.hasVersions=function(g,h){var e=(typeof h==="string")?a.managedDataWithID(g,h):h,f=b.findNodeInHierarchy(e.id,g.domain.managedData.hierarchy);return(f.children&&f.children.length>0)};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-work-data/selectors",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-cos/selectors"],function(c,b){var a={};a.Types={EXECDIR:"execdir",FOLDER:"folder",FILE:"file",SIMOBJECT:"DesignSight"};a.ErrorCodes={INITIALIZE_EXEC_DIR_ERROR:"SMAPoweredByState.ad-state-domain-work-data.INITIALIZE_EXEC_DIR_ERROR",REFRESH_WORK_DATA_ERROR:"SMAPoweredByState.ad-state-domain-work-data.REFRESH_WORK_DATA_ERROR",DOWNLOAD_MANAGED_DATA_ERROR:"SMAPoweredByState.ad-state-domain-work-data.DOWNLOAD_MANAGED_DATA_ERROR",COS_JOB_NOT_DISPATCHED:"SMAPoweredByState.ad-state-domain-work-data.COS_JOB_NOT_DISPATCHED",EXE_DIR_CONTENT_NOT_FOUND:"SMAPoweredByState.ad-state-domain-work-data.EXE_DIR_CONTENT_NOT_FOUND",EXE_DIR_PATH_NOT_FOUND:"SMAPoweredByState.ad-state-domain-work-data.EXE_DIR_PATH_NOT_FOUND",FILE_MON_JOB_NOT_STARTED:"SMAPoweredByState.ad-state-domain-work-data.FILE_MON_JOB_NOT_STARTED",FILE_MON_JOB_USR_MISMATCH:"SMAPoweredByState.ad-state-domain-work-data.FILE_MON_JOB_USR_MISMATCH",FILE_MON_URL_NOT_FOUND:"SMAPoweredByState.ad-state-domain-work-data.FILE_MON_URL_NOT_FOUND",TRANSIENT_MON_FINISHED:"SMAPoweredByState.ad-state-domain-work-data.TRANSIENT_MON_FINISHED",CREDENTILAS_NOT_SUPPIED:"SMAPoweredByState.ad-state-domain-work-data.CREDENTILAS_NOT_SUPPIED"};a.isWorkDataInitialized=function(d){return !d.domain.workData.uninitialized};a.workDataPersistenceStatus=function(d,f){var e;if(f){e=a.workDataWithID(d,f);return(e&&e.persistenceStatus)?e.persistenceStatus:null}else{return !d.domain.workData.persistenceStatus?null:d.domain.workData.persistenceStatus}};a.workDataPersistenceOperation=function(d,f){var e;if(f){e=a.workDataWithID(d,f);return(e&&e.persistenceOperation)?e.persistenceOperation:null}else{return !d.domain.workData.persistenceOperation?null:d.domain.workData.persistenceOperation}};a.workDataPersistenceError=function(d,f){var e;if(f){e=a.workDataWithID(d,f);return(e&&e.persistenceError)?e.persistenceError:null}else{return !d.domain.workData.persistenceError?null:d.domain.workData.persistenceError}};a.allWorkData=function(d){return d.domain.workData.objects};a.allExecDirs=function(d){return d.domain.workData.objects.filter(function(e){return(e.type===a.Types.EXECDIR)})};a.workDataWithID=function(e,g){var f=null,d;if(e.domain&&e.domain.workData&&e.domain.workData.objects){for(d=0;d<e.domain.workData.objects.length;d++){if(e.domain.workData.objects[d].id===g){f=e.domain.workData.objects[d];break}}}return f};a.workDataType=function(d,f){var e=a.workDataWithID(d,f);return(e?e.type:null)};a.workDataParent=function(f,g){var e=c.findNodeInHierarchy(g,f.domain.workData.hierarchy),d=null;if(e){if(e.parent){d=a.workDataWithID(f,e.parent)}}return d};a.workDirForJob=function(g,h,e){var f=null,d;if(g.domain&&g.domain.workData&&g.domain.workData.objects){for(d=0;d<g.domain.workData.objects.length;d++){if((g.domain.workData.objects[d].mcsJobID===h)&&(g.domain.workData.objects[d].type===a.Types.EXECDIR)&&((parseInt(e)!==e)||(e===g.domain.workData.objects[d].iteration))){f=g.domain.workData.objects[d];break}}}return f};a.workDataChildren=function(f,h){var e=c.findNodeInHierarchy(h,f.domain.workData.hierarchy),g=null,d=[];if(e&&e.children&&(e.children.length>0)){g=e.children.reduce(function(i,j){if(j.id){i.push(j.id)}return i},[])}if(g&&(g.length>0)){d=f.domain.workData.objects.filter(function(i){return(g.indexOf(i.id)>=0)})}return d};a.workDataExecDir=function(d,f){var e=a.workDataWithID(d,f);while((e&&(e.type!==a.Types.EXECDIR))){e=a.workDataParent(d,e.id)}return e};a.workDataExecDirByLocation=function(f,e,g){var h=null,d;if(f.domain&&f.domain.workData&&f.domain.workData.objects){for(d=0;d<f.domain.workData.objects.length;d++){if((f.domain.workData.objects[d].type===a.Types.EXECDIR)&&(f.domain.workData.objects[d].station===e)&&(f.domain.workData.objects[d].path.toLowerCase()===g.toLowerCase())){h=f.domain.workData.objects[d];break}}}return h};a.workDataExecDirByStation=function(f,d){var e=a.allExecDirs(f);return e.filter(function(g){return g.station===d})};a.workDataRelPath=function(e,g){var f=a.workDataWithID(e,g),d="";while((f&&(f.type!==a.Types.EXECDIR))){d=f.name+(d.length>0?"/":"")+d;f=a.workDataParent(e,f.id)}if(f.station&&(b.OS.WINDOWS===f.station.os)){d=d.replace("/","\\")}return d};a.workDataFullPath=function(g,h){var e=a.workDataExecDir(g,h),f=a.workDataRelPath(g,h),d;d=e.path;if((d[length-1]!=="/")&&(d[length-1]!=="\\")){d+=(b.OS.LINUX===e.os)?"/":"\\"}d+=f;return d};a.getWorkDirUserInfo=function(f,e){var d=null;if(e.type&&(e.type===a.Types.EXECDIR)&&e.credentials){d=e.credentials;d.domainName=d.domainName?d.domainName:""}d=d?c.shallowCopy(d):{domainName:"",windowsUser:null,linuxUser:null};return d};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-stream-utils",["DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors"],function(c,e,a){var b={};function d(g,j){var f=null,h;if(g.relateddata&&g.relateddata.files){for(h=0;h<g.relateddata.files.length;h++){if(g.relateddata.files[h].dataelements&&g.relateddata.files[h].dataelements.title&&(g.relateddata.files[h].dataelements.title===j)){f=g.relateddata.files[h].id;break}}}return f}b.getManagedFileURL=function(g,i,k,j,r,p){var s=(typeof p!=="undefined")?p:false,h,m,l,o=function(t){var u=JSON.parse(t.response);if(u.data&&(u.data.length>0)&&u.data[0].dataelements&&u.data[0].dataelements.ticketURL){if(k){k(u.data[0].dataelements.ticketURL)}}else{if(j){j(t)}}},n=function(t){if(j){j(t)}},f=function(t){if(r){r(t)}},q=function(t){var v=JSON.parse(t.response),u;if(v.csrf&&v.data&&(v.data.length===1)){l=d(v.data[0],h.name);u=(e.Types.FILEVERSION===h.type)?"/resources/v1/modeler/documents/"+m+"/files/"+l+"/versions/"+h.id+"/DownloadTicket":"/resources/v1/modeler/documents/"+m+"/files/"+l+"/DownloadTicket";if(s){u+="?zipName="+h.name+".zip"}c.call3DSpaceService({uri:u,verb:"PUT",data:JSON.stringify({csrf:{name:v.csrf.name,value:v.csrf.value}}),onComplete:o,onError:n,onSessionTimeout:f})}else{if(j){j(t)}}};h=e.managedDataWithID(g,i);if(h){if(e.Types.FILEVERSION===h.type){l=e.managedDataParent(g,h.id,false).id}else{l=h.id}m=e.managedDataParent(g,l,false).id;c.call3DSpaceService({uri:"/resources/v1/modeler/documents/"+m,onComplete:q,onError:n,onSessionTimeout:f})}else{if(j){j()}}};b.getDocumentsTicketURL=function(f,l,i,h,n){var k=function(o){var p=JSON.parse(o.response);if(p.data&&(p.data.length>0)&&p.data[0].dataelements&&p.data[0].dataelements.ticketURL){if(i){i(p.data[0].dataelements.ticketURL)}}else{if(h){h(o)}}},j=function(o){if(h){h(o)}},g=function(o){if(n){n(o)}},m=function(p){var q=JSON.parse(p.response);if(q.csrf){var o=[];l.forEach(function(r){o.push({id:r})});c.call3DSpaceService({uri:"/resources/v1/modeler/documents/DownloadTicket?zipFiles=true",verb:"PUT",data:JSON.stringify({csrf:{name:q.csrf.name,value:q.csrf.CSRFToken},data:o}),onComplete:k,onError:j,onSessionTimeout:g})}else{if(h){h(p)}}};c.callSMAProcService({uri:"token/CSRF",headers:{Accept:"application/json"},onComplete:m,onError:j,sessionTimeoutInfo:{handler:g,context:l[0]}})};b.getWorkFileURL=function(j,m,l,i,k){var f,g,h;f=a.workDataWithID(j,m);if(f){g=a.workDataExecDir(j,m);h=f.name;c.callGetFileURL({execDir:g,filePath:h,onComplete:l,onError:i,sessionTimeoutInfo:{handler:k}})}else{if(i){i()}}};b.getFileContent=function(g,h,j,i,o,n){var p=(typeof n!=="undefined")?n:false,l=function(q){if(q.response||(q.response==="")){if(j){j(q.response)}}else{if(i){i(q)}}},k=function(q){if(i){i(q)}},f=function(q){if(o){o(q)}},m=function(s){var r=s.split("?"),q=r[0],t=r[1];c.callSPWebService({uri:q,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded",Accept:"*/*"},verb:"POST",data:t,onComplete:l,onError:k,onSessionTimeout:f})};b.getManagedFileURL(g,h,m,k,f,p)};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/selectors",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-cos/selectors"],function(f,g,b,e){var c={};function d(j,h,i){return f.getBatchJobIteration((typeof h==="string")?c.jobWithID(j,h):h,i)}function a(m,l){var k=null,h,j,n=[];if(m&&l){k=m.slice(0);l.forEach(function(i){h=false;for(j=0;j<m.length;j++){if(m[j].name===i.name){h=true}}if(!h){n.push(i)}});k=k.concat(n)}else{if(m){k=m.slice(0)}else{if(l){k=l.slice(0)}}}return k}c.JobKind={TOOL:"tool",UPLOAD:"upload",DOWNLOAD:"download",GENERATE_RESULT:"generate result"};c.DATA_TRANSFER_KEY="dataTransfer_Job";c.DATA_TRANSFER_DESCRIPTION_SEPARATOR="\t";c.JobStatus={UNKNOWN:"Unknown",CONFIGURING:"Configuring",ATTEMPTING_RUN:"AttemptingRun",RUN_ACCEPTED:"RunAccepted",CREATED:"Created",INITIALIZING:"Initializing",QUEUED:"Queued",STARTED:"Started",DEFERRED:"Deferred",RUNNING:"Running",PAUSED:"Paused",STOPPING:"Stopping",DONE:"Done",DELETED:"Deleted",COMPLETED:"Completed",ABORTED:"Aborted",FAILED:"Failed",NOTSTARTED:"NotStarted",SYSTEM_FAILED:"System Failed"};c.JobCompletionCode={UNKNOWN:"Unknown",CANCELED:"Canceled",FAILED:"Failed",SYSTEM_FAILED:"System Failed"};c.LicenseType={CREDITS:"credits",TOKENS:"tokens",TOKENS_TRADITIONAL:"traditionalTokens"};c.ErrorCodes={ACTIVITIES_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.ACTIVITIES_WS_ERROR",ACTIVITY_CREATE_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.ACTIVITY_CREATE_WS_ERROR",ACTIVITY_UPDATE_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.ACTIVITY_UPDATE_WS_ERROR",ACTIVITY_DELETE_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.ACTIVITY_DELETE_WS_ERROR",JSCMM_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JSCMMS_ERROR",JOBS_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOBS_WS_ERROR",JOB_UPDATE_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_UPDATE_WS_ERROR",JOB_ADD_OUTPUT_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_ADD_OUTPUT_WS_ERROR",JOB_DELETE_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_DELETE_WS_ERROR",JOB_ABORT_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_ABORT_WS_ERROR",JOB_PROGRESS_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_PROGRESS_WS_ERROR",JOB_DETAILS_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_DETAILS_WS_ERROR",JOB_PARAMETERS_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_PARAMETERS_WS_ERROR",JOB_FILE_CHECKIN_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_FILE_CHECKIN_WS_ERROR",JOB_FILE_CHECKOUT_WS_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_FILE_CHECKOUT_WS_ERROR",JOB_ACTION_NOT_ALLOWED_ERROR:"SMAPoweredByState.ad-state-domain-jobs.JOB_ACTION_NOT_ALLOWED_ERROR",START_JOB_RUNTIME_ERROR:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_RUNTIME_ERROR",JOB_CREATION_UNAUTHORIZED:"SMAPoweredByState.ad-state-domain-jobs.JOB_CREATION_UNAUTHORIZED",START_JOB_WS_NOT_FOUND:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_WS_NOT_FOUND",START_JOB_PRIVATE_STATION_USER_MISMATCH:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_PRIVATE_STATION_USER_MISMATCH",START_JOB_PRIVATE_STATION_SERVER_MISMATCH:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_PRIVATE_STATION_SERVER_MISMATCH",START_JOB_PRIVATE_STATION_NOT_FOUND:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_PRIVATE_STATION_NOT_FOUND",START_JOB_SSO_LOGIN_REQUEST_ERROR:"SMAPoweredByState.ad-state-domain-jobs.START_JOB_SSO_LOGIN_REQUEST_ERROR",ACTIVITY_NOT_FOUND:"SMAPoweredByState.ad-state-domain-jobs.ACTIVITY_NOT_FOUND",JOB_HANDLER_NOT_FOUND:"SMAPoweredByState.ad-state-domain-jobs.JOB_HANDLER_NOT_FOUND",JOB_NOT_FOUND:"SMAPoweredByState.ad-state-domain-jobs.JOB_NOT_FOUND"};c.TOOL_JOB_CONFIG_FILENAME="activityDefinition.json";c.UPLOAD_JOB_CONFIG_FILENAME="uploadDefinition.json";c.HIDDEN_JOB_PROCESSING_MARKER="__processing";c.HIDDEN_JOB_PROCESSED_MARKER="__processed";c.CREATE_NEW_WORKDIR="createNew";c.isJobsInitialized=function(h){return !h.domain.jobs.uninitialized};c.isJobInitialized=function(j,h){var i=(typeof h==="string")?c.jobWithID(j,h):h,k=false;if(i){k=!i.uninitialized}return k};c.jobsPersistenceOperation=function(h){return !h.domain.jobs.persistenceOperation?null:h.domain.jobs.persistenceOperation};c.jobsPersistenceError=function(h){return !h.domain.jobs.persistenceError?null:h.domain.jobs.persistenceError};c.jobPersistenceStatus=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j){i=!j.persistenceStatus?null:j.persistenceStatus}return i};c.jobPersistenceOperation=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j){i=!j.persistenceOperation?null:j.persistenceOperation}return i};c.jobPersistenceError=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j){i=!j.persistenceError?null:j.persistenceError}return i};c.jobKind=function(k,h){var i=null,j=(typeof h==="string")?c.jobWithID(k,h):h;if(j){i=!j.kind?null:j.kind}return i};c.jobOwner=function(j,h){var i=(typeof h==="string")?c.jobWithID(j,h):h;return(i&&i.owner)?i.owner:""};c.isBatchJob=function(k,h){var i=false,j=(typeof h==="string")?c.jobWithID(k,h):h;if(j&&j.batchConfiguration){i=true}return i};c.batchJobConfiguration=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j&&c.isBatchJob(k,j)){i=f.deepCopy(j.batchConfiguration)}return i};c.batchJobIterations=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j&&c.isBatchJob(k,j)){i=f.deepCopy(j.batchConfiguration.iterations)}return i};c.batchJobIteration=function(l,h,i){var k=(typeof h==="string")?c.jobWithID(l,h):h,j;if(k&&k.batchConfiguration.iterations&&(i<k.batchConfiguration.iterations.length)){j=f.deepCopy(k.batchConfiguration.iterations[i])}return j};c.batchJobIterationCount=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=0;if(j&&c.isBatchJob(k,j)){i=j.batchConfiguration.iterations.length}return i};c.isJobConfiguring=function(k,h){var i=false,j=(typeof h==="string")?c.jobWithID(k,h):h;if(j&&((c.JobStatus.CONFIGURING===j.status)||(c.JobStatus.ATTEMPTING_RUN===j.status))){i=true}return i};c.isJobRunning=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,h,j),i=c.JobStatus.UNKNOWN;if(m&&m.progress){i=m.status}else{if(k){i=k.status}}return((c.JobStatus.RUN_ACCEPTED===i)||(c.JobStatus.CREATED===i)||(c.JobStatus.INITIALIZING===i)||(c.JobStatus.QUEUED===i)||(c.JobStatus.STARTED===i)||(c.JobStatus.DEFERRED===i)||(c.JobStatus.RUNNING===i)||(c.JobStatus.PAUSED===i)||(c.JobStatus.STOPPING===i))};c.isJobDone=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,h,j),i=c.JobStatus.UNKNOWN;if(m&&m.progress){i=m.status}else{if(k){i=k.status}}return((c.JobStatus.DONE===i)||(c.JobStatus.DELETED===i)||(c.JobStatus.COMPLETED===i)||(c.JobStatus.ABORTED===i)||(c.JobStatus.FAILED===i)||(c.JobStatus.SYSTEM_FAILED===i))};c.isJobSuccessful=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,h,j),i=c.JobStatus.UNKNOWN;if(m&&m.progress){i=m.status}else{if(k){i=k.status}}return((c.JobStatus.DONE===i)||(c.JobStatus.COMPLETED===i))};c.isJobExecuted=function(j,h,i){return c.isJobRunning(j,h,(i?i:null))||c.isJobDone(j,h,(i?i:null))};c.isJobClaimed=function(l,i,j){var k=(typeof i==="string")?c.jobWithID(l,i):i,m=d(l,i,j),h=false;if(m&&m.progress){h=m.progress.claimed}else{if(k&&k.progress){h=k.progress.claimed}}return h};c.jobCredentialsID=function(j,h){var i=(typeof h==="string")?c.jobWithID(j,h):h;return(i&&i.executionOptions&&i.executionOptions.credentialsID)?i.executionOptions.credentialsID:null};c.isHiddenJobProcessed=function(k,h){var i=false,j=(typeof h==="string")?c.jobWithID(k,h):h;if(j){i=(j.title&&(j.title.indexOf(c.HIDDEN_JOB_PROCESSED_MARKER)!==-1))}return i};c.isHiddenJobProcessing=function(k,h){var i=false,j=(typeof h==="string")?c.jobWithID(k,h):h;if(j){i=(j.title&&(j.title.substr(j.title.length-c.HIDDEN_JOB_PROCESSING_MARKER.length)===c.HIDDEN_JOB_PROCESSING_MARKER))}return i};c.allJobs=function(h){return h.domain.jobs.objects};c.configuringJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.isJobConfiguring(h,i))})};c.runningJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.isJobRunning(h,i))})};c.executedJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.isJobExecuted(h,i))})};c.toolJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.jobKind(h,i)===c.JobKind.TOOL)})};c.uploadJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.jobKind(h,i)===c.JobKind.UPLOAD)})};c.batchJobs=function(h){return h.domain.jobs.objects.filter(function(i){return(c.isBatchJob(h,i))})};c.jobsOfKind=function(i,h){return i.domain.jobs.objects.filter(function(j){return(c.jobKind(i,j)===h)})};c.jobWithID=function(i,j){var h=i.domain.jobs.objects.filter(function(k){return(k.id===j)});return(h&&(h.length===1))?h[0]:null};c.jobsWithTitle=function(i,j){var h=i.domain.jobs.objects.filter(function(k){return(k.title===j)});return h};c.newlyCreatedJobs=function(j,h){var i=f.getObjectIDs(h);return j.domain.jobs.objects.filter(function(k){return((k.status===c.JobStatus.CONFIGURING)&&(i.indexOf(k.id)===-1))})};c.newlyStartedJobs=function(j,h){var i=f.getObjectIDs(h);return j.domain.jobs.objects.filter(function(k){return((k.status===c.JobStatus.RUN_ACCEPTED)&&(i.indexOf(k.id)===-1))})};c.newlyCompletedJobs=function(j,i){var h={};i.forEach(function(k){h[k.id]=k.status});return j.domain.jobs.objects.filter(function(m){var l=m.status===c.JobStatus.COMPLETED,k=h[m.id]===c.JobStatus.COMPLETED||typeof h[m.id]==="undefined";return l&&!k})};c.newlyFailedJobs=function(j,i){var h={};i.forEach(function(k){h[k.id]=k.status});return j.domain.jobs.objects.filter(function(l){var m=l.status===c.JobStatus.FAILED,k=h[l.id]===c.JobStatus.FAILED||typeof h[l.id]==="undefined";return m&&!k})};c.jobInputs=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,j=[],n=l&&l.batchConfiguration&&l.batchConfiguration.iterations;if(l){if(n){if(f.isInteger(k)&&l.batchConfiguration.iterations.length>k){if(l.batchConfiguration.iterations[k].inputs){l.batchConfiguration.iterations[k].inputs.forEach(function(o){j.push(o.inputID)})}}else{l.batchConfiguration.iterations.forEach(function(o){if(o.inputs){o.inputs.forEach(function(p){j.push(p.inputID)})}})}}if(l.inputs&&(!n||Boolean(i))){j=j.concat(l.inputs)}}return j};c.jobInputObjects=function(n,j,m,l){var k=c.jobInputs(n,j,m,l),i=[],h;if(k){k.forEach(function(o){h=g.managedDataWithID(n,o);if(h){i.push(h)}})}return i};c.batchJobIterationInputData=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,i=[];if(k){if(f.isInteger(j)){if((k.batchConfiguration.iterations.length>j)&&k.batchConfiguration.iterations[j].inputs){i=k.batchConfiguration.iterations[j].inputs.slice(0)}}else{k.batchConfiguration.iterations.forEach(function(m){if(m.inputs){i=i.concat(m.inputs)}})}}return i};c.jobMainInput=function(k,h,i){var j=(typeof h==="string")?c.jobWithID(k,h):h,m=d(k,h,i),l=null;if(m&&m.mainInputFile){l=m.mainInputFile}else{if(j&&j.mainInputFile){l=j.mainInputFile}}return l};c.jobArguments=function(m,h,k,j){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),i=null;if(l){if(n&&n.configuration&&n.configuration.arguments){i=n.configuration.arguments.slice(0)}if((!n||Boolean(j))&&l.configuration&&l.configuration.arguments){i=a(i,l.configuration.arguments)}}return i};c.jobArgumentValue=function(p,h,l,n,j){var o=null,k=c.jobArguments(p,h,n,j),m;if(k){for(m=0;m<k.length;m++){if(k[m].name===l){o=k[m].value;break}}}return o};c.jobEnvironmentVariables=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=null;if(l){if(n&&n.configuration&&n.configuration.environmentVariables){j=n.configuration.environmentVariables.slice(0)}if((!n||Boolean(i))&&l.configuration&&l.configuration.environmentVariables){j=a(j,l.configuration.environmentVariables)}}return j};c.jobEnvironmentVariableValue=function(p,j,l,n,k){var o=null,h=c.jobEnvironmentVariables(p,j,n,k),m;if(h){for(m=0;m<h.length;m++){if(h[m].name===l){o=h[m].value;break}}}return o};c.jobExecutionOptions=function(m,h,j,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,j),k={};if(l){if(n&&n.executionOptions){k=f.shallowCopy(n.executionOptions)}if((!n||Boolean(i))&&l.executionOptions){Object.getOwnPropertyNames(l.executionOptions).forEach(function(o){if(!k||!k[o]){k[o]=l.executionOptions[o]}})}}return k};c.jobWorkDirectory=function(l,h,i){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,h,i),j=null;if(m&&m.executionOptions&&m.executionOptions.workDirectory){j=b.workDataWithID(l,m.executionOptions.workDirectory)}else{if(k&&k.executionOptions&&k.executionOptions.workDirectory){j=b.workDataWithID(l,k.executionOptions.workDirectory)}else{if(c.isJobExecuted(l,k)){j=b.workDirForJob(l,k.id,i)}}}return j};c.allowedWorkDirectories=function(k,h){var i=[],j=(typeof h==="string")?c.jobWithID(k,h):h;if(j&&j.executionOptions&&j.executionOptions.station){i=b.workDataExecDirByStation(k,j.executionOptions.station)}return i};c.jobDRMMode=function(k,h,i){var j=c.jobExecutionOptions(k,h,(i?i:null),true);return(j&&j.drmMode)?j.drmMode:null};c.isTransientStation=function(j,h,i){return c.jobDRMMode(j,h,i)!==e.DRMMode.FIPER};c.jobOS=function(m,h,j){var k=c.jobExecutionOptions(m,h,(j?j:null),true),l=null,i=null;if(k&&k.drmMode){if((k.drmMode===e.DRMMode.FIPER)&&k.server&&k.station){i=e.stationWithID(m,e.serverWithID(m,k.server),k.station);if(i){l=i.os}}else{if((k.drmMode===e.DRMMode.CLOUD)&&k.os){l=k.os}}}return l};c.jobOutputFileSpecs=function(l,h,j,i){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,h,j),n=null;if(m&&m.configuration&&m.configuration.outputFileSpecs){n=m.configuration.outputFileSpecs.slice(0)}else{if((!m||Boolean(i))&&k.configuration&&k.configuration.outputFileSpecs){n=k.configuration.outputFileSpecs.slice(0)}}return n};c.jobOutputFileSpecsEnabled=function(m,h,j,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,j),k=false;if(n&&n.configuration&&(typeof n.configuration.outputFileSpecsEnabled!=="undefined")){k=Boolean(n.configuration.outputFileSpecsEnabled)}else{if((!n||Boolean(i))&&l&&l.configuration&&(typeof l.configuration.outputFileSpecsEnabled!=="undefined")){k=Boolean(l.configuration.outputFileSpecsEnabled)}}return k};c.jobResultsOptions=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=null;if(n&&n.resultsOptions){j=f.shallowCopy(n.resultsOptions)}if((!n||Boolean(i))&&l.resultsOptions){Object.getOwnPropertyNames(l.resultsOptions).forEach(function(o){if(!j||!j[o]){if(!j){j={}}j[o]=l.resultsOptions[o]}})}return j};c.jobGenerateResults=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=false;if(n&&n.resultsOptions&&(typeof n.resultsOptions.generateResults!=="undefined")){j=Boolean(n.resultsOptions.generateResults)}else{if((!n||Boolean(i))&&l&&l.resultsOptions&&(typeof l.resultsOptions.generateResults!=="undefined")){j=Boolean(l.resultsOptions.generateResults)}}return j};c.jobGenerateResultsUnits=function(m,h,j,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,j),k=null;if(n&&n.resultsOptions&&n.resultsOptions.generateResultsUnits){k=n.resultsOptions.generateResultsUnits}else{if((!n||Boolean(i))&&l&&l.resultsOptions&&l.resultsOptions.generateResultsUnits){k=l.resultsOptions.generateResultsUnits}}return k};c.jobGenerateResultsUnitsEnabled=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=false;if(n&&n.resultsOptions&&(typeof n.resultsOptions.generateResultsUnitsEnabled!=="undefined")){j=Boolean(n.resultsOptions.generateResultsUnitsEnabled)}else{if((!n||Boolean(i))&&l&&l.resultsOptions&&(typeof l.resultsOptions.generateResultsUnitsEnabled!=="undefined")){j=Boolean(l.resultsOptions.generateResultsUnitsEnabled)}}return j};c.jobGenerateResultsSourceFilename=function(l,h,j,i){var k=(typeof h==="string")?c.jobWithID(l,h):h,n=d(l,h,j),m=null;if(n&&n.resultsOptions&&n.resultsOptions.generateResultsSourceFilename){m=n.resultsOptions.generateResultsSourceFilename}else{if((!n||Boolean(i))&&k&&k.resultsOptions&&k.resultsOptions.generateResultsSourceFilename){m=k.resultsOptions.generateResultsSourceFilename}}return m};c.jobGenerateResultsTitle=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=null;if(n&&n.resultsOptions&&n.resultsOptions.generateResultsTitle){j=n.resultsOptions.generateResultsTitle}else{if((!n||Boolean(i))&&l&&l.resultsOptions&&l.resultsOptions.generateResultsTitle){j=l.resultsOptions.generateResultsTitle}}return j};c.jobOutputs=function(h,j,k){var i=(typeof j==="string")?c.jobWithID(h,j):j,p=[];if(i){if(i.batchConfiguration&&i.batchConfiguration.iterations&&f.isInteger(k)&&i.batchConfiguration.iterations.length>k){if(i.batchConfiguration.iterations[k].outputs){p=i.batchConfiguration.iterations[k].outputs.slice(0)}else{if(i.batchConfiguration.iterations[k].mainInputFile&&i.batchConfiguration.iterations[k].mainInputFile.inputID){var o=g.managedDataWithID(h,i.batchConfiguration.iterations[k].mainInputFile.inputID);if(o){var n=o.title?o.title:o.name;if(n){n=n.substring(0,n.lastIndexOf("."));if(n&&i.outputs){var m,l;i.outputs.forEach(function(q){m=g.managedDataWithID(h,q);if(m){l=m.title?m.title:m.name;l=l.substring(0,l.lastIndexOf("."));if(l===n){p.push(q)}}})}}}}}}else{p=i.outputs.slice(0)}}return p};c.jobOutputObjects=function(n,i,k,l){var m=(typeof i==="string")?c.jobWithID(n,i):i,o=c.jobOutputs(n,m,l),j=[],h;if(o){o.forEach(function(p){h=g.managedDataWithID(n,p);if(h){j.push(h)}})}if(m&&k){j=j.concat(c.jobProjectedOutputs(n,m.id))}return j};c.jobProjectedOutputs=function(j,h){var i=[],k=j.domain.jobs.objects.filter(function(l){return l.title&&(l.title.indexOf(c.DATA_TRANSFER_KEY)===0)&&((h===null)||(l.configuration.attachToJobID===h))&&!c.isHiddenJobProcessed(j,l)&&l.status!==c.JobStatus.FAILED&&l.status!==c.JobStatus.ABORTED});if(k&&k.length>0){k.forEach(function(l){if(l.configuration&&l.configuration.managedDataProjections){l.configuration.managedDataProjections.forEach(function(m){i.push({name:m.fileName,type:g.Types.PROJECTION,version:m.version,id:l.id})})}if(l.resultsOptions&&l.resultsOptions.generateResults){i.push({name:l.resultsOptions.generateResultsTitle,type:g.Types.PROJECTION3DX,id:l.id})}})}return i};c.jobResults=function(j,h,i){return c.jobOutputObjects(j,h,false,i).filter(function(k){return k.type==="DesignSight"})};c.jobWorkDataObjects=function(k,h,j){var i=c.jobWorkDirectory(k,h,j),l=[];if(i){l=b.workDataChildren(k,i.id)}return l};c.jobProgress=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,k,j),i=null;if(m&&m.progress){i=m.progress}else{if(k&&k.progress){i=k.progress}}return i};c.jobOverallProgress=function(l,h,j){var k=(typeof h==="string")?c.jobWithID(l,h):h,m=d(l,k,j),i=0;if(m&&m.progress&&m.progress.overallProgress){i=m.progress.overallProgress}else{if(k&&k.progress&&k.progress.overallProgress){i=k.progress.overallProgress}}return i};c.jobTypeId=function(k,h){var j=(typeof h==="string")?c.jobWithID(k,h):h,i=null;if(j){i=j.jobType}return i};c.jobCommand=function(m,h,k,i){var l=(typeof h==="string")?c.jobWithID(m,h):h,n=d(m,h,k),j=null;if(l){if(n&&n.configuration&&(typeof n.configuration.command!=="undefined")){j=n.configuration.command}else{if((!n||Boolean(i))&&l.configuration&&(typeof l.configuration.command!=="undefined")){j=l.configuration.command}}}return j};c.getApplication=function(j,h){var i=(typeof h==="string")?c.jobWithID(j,h):h;return(i&&i.configuration&&i.configuration.application)?i.configuration.application:null};c.jobLicenseOptions=function(k,h,i){var j=c.jobExecutionOptions(k,h,(i?i:null),true);return(j&&j.licenseOptions)?j.licenseOptions:null};c.jobLicenseType=function(j,h,i){var k=c.jobLicenseOptions(j,h,i);return(k&&k.licenseType)?k.licenseType:null};c.jobFeatures=function(j,h,i){var k=c.jobLicenseOptions(j,h,i);return(k&&k.features)?k.features:null};c.jobModelSize=function(j,h,i){var k=c.jobLicenseOptions(j,h,i);return(k&&k.modelSize)?k.modelSize:null};c.jobPerformance=function(j,h,i){var k=c.jobLicenseOptions(j,h,i);return(k&&k.performance)?k.performance:null};return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-cos/reducer",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-cos/action-types"],function(d,i,g,b){var e={};const c={uninitialized:true,objects:[]};const h={uninitialized:true,objects:[]};function j(k,l){if(l&&(l.length>0)){return k.filter(function(m){return(m.server!==l[0].server)}).concat(l)}else{return k.slice()}}function a(m,l){var n,k,o;if(typeof m==="undefined"){n=c}else{switch(l.type){case b.REFRESH_SERVERS+i.AsyncStatus.PENDING:n={persistenceOperation:i.PersistenceOperation.READING,objects:m.objects.slice()};for(k=0;k<n.objects.length;k++){if(n.objects[k].persistenceError){o=g.shallowCopy(n.objects[k]);delete o.persistenceError;g.replaceObject(n.objects,o)}}break;case b.REFRESH_SERVERS+i.AsyncStatus.SUCCESS:n={objects:l.payload.slice()};break;case b.REFRESH_SERVERS+i.AsyncStatus.FAILURE:n={persistenceError:l.payload.error,objects:m.objects};break;default:n=m;break}}return n}function f(l,k){var m;if(typeof l==="undefined"){m=h}else{switch(k.type){case b.REFRESH_STATIONS+i.AsyncStatus.PENDING:m={persistenceOperation:i.PersistenceOperation.READING,objects:l.objects.slice()};break;case b.REFRESH_STATIONS+i.AsyncStatus.SUCCESS:m={objects:j(l.objects,k.payload.stations)};break;case b.REFRESH_STATIONS+i.AsyncStatus.FAILURE:m={persistenceError:k.payload.error,objects:l.objects.slice()};break;default:m=l;break}}return m}e["default"]=d.combineReducers({servers:a,stations:f});return e});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study/reducer",["DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-domain-work-data/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,g,d,e){var c={};const a=null;function b(i,h){var j;if(typeof i==="undefined"){j=d.deepCopy(a)}else{switch(h.type){case g.CREATE_EXEC_DIR:case g.INITIALIZE_EXEC_DIR+e.AsyncStatus.SUCCESS:case g.REMOVE_EXEC_DIR:j=d.shallowCopy(i);j.persistenceStatus=e.PersistenceStatus.DIRTY;break;case f.CREATE_STUDY+e.AsyncStatus.PENDING:j={persistenceStatus:e.PersistenceStatus.CLEAN,persistenceOperation:e.PersistenceOperation.CREATING,id:null,title:null,description:null,created:null,modified:null,owner:null,managedDataRootID:null};break;case f.REFRESH_STUDY+e.AsyncStatus.PENDING:j=d.shallowCopy(i)||{};j.persistenceOperation=e.PersistenceOperation.READING;if(j.persistenceError){delete j.persistenceError}break;case f.UPDATE_STUDY+e.AsyncStatus.PENDING:j=d.shallowCopy(i);j.persistenceOperation=e.PersistenceOperation.UPDATING;if(j.persistenceError){delete j.persistenceError}break;case f.CREATE_STUDY+e.AsyncStatus.SUCCESS:case f.REFRESH_STUDY+e.AsyncStatus.SUCCESS:j=d.shallowCopy(h.payload.study);break;case f.UPDATE_STUDY+e.AsyncStatus.SUCCESS:j=d.shallowCopy(i);j.persistenceStatus=e.PersistenceStatus.CLEAN;delete j.persistenceOperation;break;case f.CREATE_STUDY+e.AsyncStatus.FAILURE:case f.REFRESH_STUDY+e.AsyncStatus.FAILURE:case f.UPDATE_STUDY+e.AsyncStatus.FAILURE:j=d.shallowCopy(i);j.persistenceError=h.payload.error;delete j.persistenceOperation;break;case f.SET_STUDY_TITLE:j=d.setStateProperty(i,"title",h.title,true);break;case f.SET_STUDY_DESCRIPTION:j=d.setStateProperty(i,"description",h.description,true);break;case f.CLOSE_STUDY:j=d.deepCopy(a);break;default:j=i;break}}return j}c["default"]=b;return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-logging/reducer",["DS/SMAPoweredByState/ad-state-app-logging/action-types","DS/SMAPoweredByState/ad-state-app-logging/selectors","DS/SMAPoweredByState/ad-state-utils"],function(f,d,e){var c={};const b={};function a(h,g){var i;if(typeof h==="undefined"){i=e.deepCopy(b)}else{i={};switch(g.type){case f.ENABLE_REDUX_LOGGER:if(!d.isReduxLoggingEnabled()){window.localStorage.setItem(d.REDUXLOGGING_LS_KEY,d.REDUXLOGGING_ENABLED_LS_VALUE)}else{i=h}break;case f.DISABLE_REDUX_LOGGER:if(d.isReduxLoggingEnabled()){window.localStorage.removeItem(d.REDUXLOGGING_LS_KEY)}else{i=h}break;default:i=h;break}}return i}c["default"]=a;return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/results-actions",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types"],function(b){var a={};a.setJobGenerateResults=function(d,c){return{type:b.SET_JOB_GENERATE_RESULTS,jobID:d,generateResults:c}};a.setJobGenerateResultsUnits=function(d,c){return{type:b.SET_JOB_GENERATE_RESULTS_UNITS,jobID:d,generateResultsUnits:c}};a.setJobGenerateResultsUnitsEnabled=function(d,c){return{type:b.SET_JOB_GENERATE_RESULTS_UNITS_ENABLED,jobID:d,generateResultsUnitsEnabled:c}};a.setJobGenerateResultsSourceFilename=function(d,c){return{type:b.SET_JOB_GENERATE_RESULTS_SOURCE_FILENAME,jobID:d,generateResultsSourceFilename:c}};a.setJobGenerateResultsTitle=function(d,c){return{type:b.SET_JOB_GENERATE_RESULTS_TITLE,jobID:d,generateResultsTitle:c}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-work-data/reducer",["DS/SMAPoweredByState/ad-state-domain-work-data/action-types","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,a,d,k,l){var h={};const e={uninitialized:true,objects:[],hierarchy:{id:"WorkDataRoot",parent:null,children:[]}};function g(r,t){var s={},n={},p,q,o,u;r.objects.forEach(function(v){if(v.type===a.Types.EXECDIR){s[v.id]=v}});t.forEach(function(v){n[v.id]=v});Object.keys(s).forEach(function(v){o=s[v];u=n[v];if(u){if(o.filemonJobID){u.filemonJobID=o.filemonJobID}if(o.filemonURL){u.filemonURL=o.filemonURL}}});p=t.filter(function(v){return(Object.keys(s).indexOf(v.id)<0)});q=r.objects.filter(function(v){return((v.type===a.Types.EXECDIR)&&(Object.keys(n).indexOf(v.id)<0))});q.forEach(function(v){k.clearNodeDescendants(r,v.id,true)});p.forEach(function(v){r.objects.push(v);r.hierarchy.children.push({id:v.id,parent:r.hierarchy.id,children:[]})})}function b(n,p,v,x,u,r,w,t){var o,q,s;k.clearNodeDescendants(n,p,false);q=k.getObject(n.objects,p);q.modified=v;n.objects=n.objects.concat(x);s=k.findNodeInHierarchy(p,n.hierarchy);s.children=u.children;o=k.getObject(n.objects,r);if(w){o.filemonJobID=w}if(t){o.filemonURL=t}}function m(o,n){var p,q;switch(n.type){case f.REFRESH_WORK_DATA+l.AsyncStatus.PENDING:p={objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.getObject(p.objects,n.payload.workDataID);if(q){q.persistenceOperation=l.PersistenceOperation.READING;k.replaceObject(p.objects,q)}break;case f.REFRESH_WORK_DATA+l.AsyncStatus.SUCCESS:p={objects:o.objects.slice(),hierarchy:o.hierarchy};b(p,n.payload.workDataID,n.payload.modified,n.payload.descendants,n.payload.descendantHierarchy,n.payload.execDirID,(typeof n.payload.filemonJobID!=="undefined")?n.payload.filemonJobID:null,(typeof n.payload.filemonURL!=="undefined")?n.payload.filemonURL:null);q=k.getObject(p.objects,n.payload.workDataID);if(q){if(q.persistenceOperation){delete q.persistenceOperation}if(n.payload.credentials){q.credentials=n.payload.credentials}k.replaceObject(p.objects,q)}break;case f.REFRESH_WORK_DATA+l.AsyncStatus.FAILURE:p={persistenceError:n.payload.error,objects:o.objects.slice(),hierarchy:o.hierarchy};if(n.payload.context.execDirID){q=k.getObject(p.objects,n.payload.context.execDirID);if(q){if(n.payload.context.filemonJobID){q.filemonJobID=n.payload.context.filemonJobID}if(n.payload.context.filemonURL){q.filemonURL=n.payload.context.filemonURL}if(n.payload.context.credentials&&(n.payload.error.code===l.ErrorCodes.RUNAS_CREDENTIALS_ERROR)){q.credentials=n.payload.context.credentials}k.replaceObject(p.objects,q)}}q=k.getObject(p.objects,n.payload.context.workDataID);if(q){if(q.persistenceOperation){delete q.persistenceOperation}k.replaceObject(p.objects,q)}break;default:p=o;break}return p}function c(o,n){var p,q;switch(n.type){case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.PENDING:p={objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.shallowCopy(k.getObject(p.objects,n.payload.execDirID));if(q){q.persistenceOperation=l.PersistenceOperation.INITIALIZING;k.replaceObject(p.objects,q)}break;case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.SUCCESS:p={objects:o.objects.slice(),hierarchy:o.hierarchy};if(n.payload){q=k.shallowCopy(k.getObject(p.objects,n.payload.execDirID))}if(q){if(q.persistenceOperation){delete q.persistenceOperation}q.path=n.payload.path;k.replaceObject(p.objects,q)}break;case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.FAILURE:p={persistenceError:n.payload.error,objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.shallowCopy(k.getObject(p.objects,n.payload.context));if(q){if(q.persistenceOperation){delete q.persistenceOperation}k.replaceObject(p.objects,q)}break;default:p=o;break}return p}function j(o,n){var p,q;switch(n.type){case f.MARK_FOR_REMOVAL:p={objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.shallowCopy(k.getObject(p.objects,n.execDirID));if(q){q.removeAfterExecution=true;k.replaceObject(p.objects,q)}break;case f.REMOVE_EXEC_DIR:p={objects:o.objects.slice(),hierarchy:o.hierarchy};k.clearNodeDescendants(p,n.execDirID,true);break;default:p=o;break}return p}function i(o,n){var p,q;if(typeof o==="undefined"){p=k.deepCopy(e)}else{switch(n.type){case d.CREATE_STUDY+l.AsyncStatus.SUCCESS:case d.CLOSE_STUDY:p=k.deepCopy(e);break;case d.REFRESH_STUDY+l.AsyncStatus.PENDING:p=o;break;case d.REFRESH_STUDY+l.AsyncStatus.SUCCESS:p={objects:o.objects.slice(),hierarchy:o.hierarchy};g(p,n.payload.execDirs);break;case f.REFRESH_WORK_DATA+l.AsyncStatus.PENDING:case f.REFRESH_WORK_DATA+l.AsyncStatus.SUCCESS:case f.REFRESH_WORK_DATA+l.AsyncStatus.FAILURE:p=m(o,n);break;case f.CREATE_EXEC_DIR:p={objects:o.objects.slice(),hierarchy:o.hierarchy};p=k.shallowCopy(o);p.objects.push(n.execDir);p.hierarchy.children.push({id:n.execDir.id,parent:p.hierarchy.id,children:[]});break;case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.PENDING:case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.SUCCESS:case f.INITIALIZE_EXEC_DIR+l.AsyncStatus.FAILURE:p=c(o,n);break;case f.SET_EXEC_DIR_CREDENTIALS:p={objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.shallowCopy(k.getObject(p.objects,n.execDirID));if(q){q.credentials=n.credentials;k.replaceObject(p.objects,q)}break;case f.CLEAR_EXEC_DIR_FILEMONITOR:p={objects:o.objects.slice(),hierarchy:o.hierarchy};q=k.shallowCopy(k.getObject(p.objects,n.execDirID));if(q){if(q.filemonJobID){delete q.filemonJobID}if(q.filemonURL){delete q.filemonURL}k.replaceObject(p.objects,q)}break;case f.MARK_FOR_REMOVAL:case f.REMOVE_EXEC_DIR:p=j(o,n);break;default:p=o;break}}return p}h["default"]=i;return h});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/inputs-actions",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-domain-jobs/action-types"],function(b,c){var a={};a.setJobInputs=function(f,d,e){return{type:c.SET_JOB_INPUTS,jobID:f,inputIDs:d,iterationNum:b.isInteger(e)?e:null}};a.populateBatchIterationJobInputs=function(e,d){return{type:c.POPULATE_BATCH_ITERATION_JOB_INPUTS,jobID:e,inputIDSets:d}};a.setJobMainInput=function(f,d,e){return{type:c.SET_JOB_MAIN_INPUT,jobID:f,inputID:d,iterationNum:b.isInteger(e)?e:null}};a.populateBatchIterationJobMainInput=function(e,d){return{type:c.POPULATE_BATCH_ITERATION_JOB_MAIN_INPUT,jobID:e,inputIDs:d}};a.addJobInput=function(f,d,e){return{type:c.ADD_JOB_INPUT,jobID:f,inputID:d,iterationNum:b.isInteger(e)?e:null}};a.removeJobInput=function(f,d,e){return{type:c.REMOVE_JOB_INPUT,jobID:f,inputID:d,iterationNum:b.isInteger(e)?e:null}};a.removeAllJobInputs=function(e,d){return{type:c.REMOVE_ALL_JOB_INPUTS,jobID:e,iterationNum:b.isInteger(d)?d:null}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-job-types/reducer",["DS/SMAPoweredByState/ad-state-domain-job-types/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,d,e){var c={};const a={uninitialized:true,objects:[]};function b(i,h){var j,k,g;if(typeof i==="undefined"){j=a}else{switch(h.type){case f.REFRESH_JOB_TYPES+e.AsyncStatus.PENDING:j={persistenceOperation:e.PersistenceOperation.READING,objects:i.objects};break;case f.REFRESH_JOB_TYPES+e.AsyncStatus.SUCCESS:j={objects:h.payload.slice()};break;case f.REFRESH_JOB_TYPES+e.AsyncStatus.FAILURE:j={persistenceError:h.payload.error,objects:i.objects};break;case f.REFRESH_JOB_TYPE_OPTIONS+e.AsyncStatus.PENDING:j={objects:i.objects.slice()};k=d.getObject(j.objects,h.payload.jobTypeID);g=d.shallowCopy(k);delete g.persistenceError;g.persistenceOperation=e.PersistenceOperation.READING;d.replaceObject(j.objects,g);break;case f.REFRESH_JOB_TYPE_OPTIONS+e.AsyncStatus.SUCCESS:j={objects:i.objects.slice()};k=d.getObject(j.objects,h.payload.jobTypeID);g=d.shallowCopy(k);g.options=h.payload.options;delete g.persistenceOperation;d.replaceObject(j.objects,g);break;case f.REFRESH_JOB_TYPE_OPTIONS+e.AsyncStatus.FAILURE:j={objects:i.objects.slice()};k=d.getObject(j.objects,h.payload.context);g=d.shallowCopy(k);g.persistenceError=h.payload.error;delete g.persistenceOperation;d.replaceObject(j.objects,g);break;default:j=i;break}}return j}c["default"]=b;return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study-templates/action-impls",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-study-templates/selectors","UWA/Class/Promise"],function(f,b,d,c){var a={};var e=window.Promise||c;a.getStudyTemplates=function(){return new e(function(i,h){var j=function(l){var k=JSON.parse(l.response),m=[];if(k){m=k.map(function(n){return{id:n.id,title:n.title,description:n.description,lifecycleState:n.currentState,revision:n.revision,revisionComments:n.revisionComments,isLatestRevision:n.isLatestrevision}})}i(m)},g=function(k){h(f.buildError(d.ErrorCodes.STUDY_TEMPLATES_WS_ERROR,k))};b.callSMAProcService({uri:"/templates?templateType=type_Simulation&usage=Adhoc",onComplete:j,onError:g,sessionTimeoutInfo:{handler:h,context:null}})})};a.getTemplateOptions=function(g){return new e(function(j,i){var k=function(l){var m=JSON.parse(l.response);if(m){g.studyTemplate.options=m}j(g.studyTemplate)},h=function(l){i(f.buildError(d.ErrorCodes.STUDY_TEMPLATE_OPTIONS_WS_ERROR,l))};b.callSMAProcService({uri:"/templates/"+g.studyTemplate.id+"/options",onComplete:k,onError:h,sessionTimeoutInfo:{handler:i,context:null}})})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study-templates/actions",["DS/SMAPoweredByState/ad-state-domain-study-templates/action-types","DS/SMAPoweredByState/ad-state-domain-study-templates/action-impls","UWA/Class/Promise"],function(e,c,b){var d=window.Promise||b;var a={};a.refreshStudyTemplates=function(){return{type:e.REFRESH_STUDY_TEMPLATES,payload:{promise:c.getStudyTemplates().then(function(f){return d.all(f.map(function(g){return c.getTemplateOptions({studyTemplate:g})}))})}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-logger",["DS/SMAPoweredByState/ad-state-app-logging/selectors"],function(c){var a={};function b(d){return function(e){return function(h){var g=c.isReduxLoggingEnabled(),f=null;if(g){window.console.debug("****** PoweredBy Redux Action: "+h.type)}f=e(h);if(g){window.console.debug("****** PoweredBy Redux State after "+h.type);window.console.debug(d.getState())}return f}}}a["default"]=b;return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/inputs-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(h,e,f){var b={};function a(l,k){var m=l,j,n=false;switch(k.type){case h.SET_JOB_INPUTS:m=e.setStateProperty(l,"inputs",k.inputIDs,true);break;case h.SET_JOB_MAIN_INPUT:m=e.setStateProperty(l,"mainInputFile",k.inputID,false);break;case h.ADD_JOB_INPUT:if(l.inputs){for(j=0;j<l.inputs.length;j++){if(l.inputs[j]===k.inputID){n=true;break}}}if(!n){m=e.shallowCopy(l);if(!m.inputs){m.inputs=[]}m.inputs.push(k.inputID);m.persistenceStatus=f.PersistenceStatus.DIRTY}break;case h.REMOVE_JOB_INPUT:if(l.inputs){for(j=0;j<l.inputs.length;j++){if(l.inputs[j]===k.inputID){m=e.shallowCopy(l);m.inputs.splice(j,1);if(m.mainInputFile===k.inputID){m.mainInputFile=null}m.persistenceStatus=f.PersistenceStatus.DIRTY;break}}}break;case h.REMOVE_ALL_JOB_INPUTS:if(l.inputs&&(l.inputs.length>0)){m=e.shallowCopy(l);m.inputs=[];m.persistenceStatus=f.PersistenceStatus.DIRTY;m.mainInputFile=null}break;default:m=l;break}return m}function g(n,m){var o=n,l=e.getBatchJobIteration(n,m.iterationNum,true),k,p=false,j=[];switch(m.type){case h.SET_JOB_INPUTS:if(m.inputIDs){m.inputIDs.forEach(function(i){j.push({inputID:i,relID:null})})}if(l){o=e.setStateProperty(n,"batchConfiguration.iterations["+m.iterationNum+"].inputs",j,true)}break;case h.SET_JOB_MAIN_INPUT:if(l){o=e.setStateProperty(n,"batchConfiguration.iterations["+m.iterationNum+"].mainInputFile",m.inputID,false)}break;case h.ADD_JOB_INPUT:if(l.inputs){for(k=0;k<l.inputs.length;k++){if(l.inputs[k].inputID===m.inputID){p=true;break}}}if(!p){o=e.shallowCopy(n);l=e.getBatchJobIteration(o,m.iterationNum,false);if(!l.inputs){l.inputs=[]}l.inputs.push({inputID:m.inputID,relID:null});o.persistenceStatus=f.PersistenceStatus.DIRTY}break;case h.REMOVE_JOB_INPUT:if(l&&l.inputs){for(k=0;k<l.inputs.length;k++){if(l.inputs[k].inputID===m.inputID){o=e.shallowCopy(n);if(l.inputs.length===1){e.removeBatchJobIteration(o,m.iterationNum)}else{l=e.getBatchJobIteration(o,m.iterationNum,false);l.inputs.splice(k,1);if(l.mainInputFile===m.inputID){l.mainInputFile=null}}o.persistenceStatus=f.PersistenceStatus.DIRTY;break}}}break;case h.REMOVE_ALL_JOB_INPUTS:if(l&&l.inputs&&(l.inputs.length>0)){o=e.shallowCopy(n);e.removeBatchJobIteration(o,m.iterationNum);o.persistenceStatus=f.PersistenceStatus.DIRTY}break;default:o=n;break}return o}function c(m,l){var n=m,k,j=[];switch(l.type){case h.POPULATE_BATCH_ITERATION_JOB_INPUTS:n=e.shallowCopy(m);for(k=0;k<l.inputIDSets.length;k++){if(k<n.batchConfiguration.iterations.length){n.batchConfiguration.iterations[k]=e.setStateProperty(e.getBatchJobIteration(n,k,false),"inputs",l.inputIDSets[k],false)}else{j.push({inputs:l.inputIDSets[k]})}}n.batchConfiguration.iterations=n.batchConfiguration.iterations.concat(j);n.persistenceStatus=f.PersistenceStatus.DIRTY;break;case h.POPULATE_BATCH_ITERATION_JOB_MAIN_INPUT:n=e.shallowCopy(m);for(k=0;k<l.inputIDs.length;k++){if(k<n.batchConfiguration.iterations.length){n.batchConfiguration.iterations[k]=e.setStateProperty(e.getBatchJobIteration(n,k,false),"mainInputFile",l.inputIDs[k],false)}else{j.push({mainInputFile:l.inputIDs[k]})}}n.batchConfiguration.iterations=n.batchConfiguration.iterations.concat(j);n.persistenceStatus=f.PersistenceStatus.DIRTY;break;default:n=m;break}return n}function d(j,i){var k;switch(i.type){case h.SET_JOB_INPUTS:case h.SET_JOB_MAIN_INPUT:case h.ADD_JOB_INPUT:case h.REMOVE_JOB_INPUT:case h.REMOVE_ALL_JOB_INPUTS:if(e.isInteger(i.iterationNum)){k=g(j,i)}else{k=a(j,i)}break;case h.POPULATE_BATCH_ITERATION_JOB_INPUTS:case h.POPULATE_BATCH_ITERATION_JOB_MAIN_INPUT:k=c(j,i);break;default:k=j;break}return k}b["default"]=d;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-credentials/action-impls",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-cos/selectors","UWA/Class/Promise"],function(f,b,d,c){var a={};var e=window.Promise||c;a.encryptAndSaveCredentials=function(g){return new e(function(j,i){var k=function(l,m){var n={id:f.generateID(),domainName:m.domainName,windowsUser:m.windowsUser,linuxUser:m.linuxUser,enoviaUser:m.enoviaUser,lengthWindows:g.windowsPassword?g.windowsPassword.length:0,lengthLinux:g.linuxPassword?g.linuxPassword.length:0,encryptedString:l};j(n)};var h=function(l){i(l)};g.onComplete=k;g.onFailure=h;g.windowsUser=g.windowsUser;g.linuxUser=g.linuxUser;b.encryptCredentials(g)})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-middleware",["DS/Redux/Redux","DS/ReduxThunk/ReduxThunk","DS/ReduxPromiseMiddleware/ReduxPromiseMiddleware","DS/SMAPoweredByState/ad-state-logger","DS/SMAPoweredByTracker/ad-tracker/ad-usage-tracker"],function(a,e,f,c,d){var b={};b["default"]=a.applyMiddleware(e["default"],f["default"](),c["default"],d["default"]);return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-connector-definitions/reducer",["DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,c,e){var b={};const a={uninitialized:true,objects:[]};function d(h,g){var i;if(typeof h==="undefined"){i=c.deepCopy(a)}else{switch(g.type){case f.REFRESH_CONNECTOR_DEFINITIONS+e.AsyncStatus.PENDING:i={persistenceOperation:e.PersistenceOperation.READING,objects:h.objects};break;case f.REFRESH_CONNECTOR_DEFINITIONS+e.AsyncStatus.SUCCESS:i={objects:g.payload.slice()};break;case f.REFRESH_CONNECTOR_DEFINITIONS+e.AsyncStatus.FAILURE:i={persistenceError:g.payload.error,objects:h.objects};break;default:i=h;break}}return i}b["default"]=d;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-cos/action-impls",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-cos/selectors","UWA/Class/Promise"],function(h,a,k,i){var e={};var j=window.Promise||i;function l(n,p){var o={};o={id:k.LOCALSTATIONNAME,name:k.LOCALSTATIONNAME,server:n,spaceURL:p.spaceurl,isPrivate:true,isRunAsEnabled:false,allowedUsers:[p.user],os:((p.os.toLowerCase()==="linux")||(p.os.toLowerCase()==="unix"))?k.OS.LINUX:k.OS.WINDOWS,domains:[],status:p.status};return o}function m(q,u){var t={},s="",p,o="",n,r;t.id=u["@name"];t.name=u["@name"];t.server=q;t.status=u["@status"];t.os=((u.GeneralInfo["@os"].toLowerCase()==="linux")||(u.GeneralInfo["@os"].toLowerCase()==="unix"))?k.OS.LINUX:k.OS.WINDOWS;t.isPrivate=false;t.isRunAsEnabled=u.GeneralInfo["@disableRunAs"]!=="disabled";t.allowedUsers=[];t.domains=[];s=u.GeneralInfo["@allowedUsers"];if(s){p=s.split(/[\s,]/);for(r=0;r<p.length;r++){if(p[r].length>0){t.allowedUsers.push(p[r])}}}if(t.os===k.OS.WINDOWS){o=u.GeneralInfo["@domain"];if(o){n=o.split(/[\s,]/);for(r=0;r<n.length;r++){if(n[r].length>0){t.domains.push(n[r])}}}}return t}function b(n){var p=function(q){var s=[],r;if(q){for(r=0;r<q.length;r++){s.push(l(n.serverID,q[r]))}}n.onComplete(s)},o=function(q){n.onFailure(q)};a.callGetPrivateStations({serverID:n.serverID,onComplete:p,onError:o})}function g(n){var p=function(r){var s=[],q=JSON.parse(r.response);if(q&&(typeof q.StationList!=="undefined"&&q.StationList)&&(typeof q.StationList.Station!=="undefined"&&q.StationList.Station)){if(Array.isArray(q.StationList.Station)){q.StationList.Station.forEach(function(t){if(t.GeneralInfo&&t.GeneralInfo["@drmMode"]&&t.GeneralInfo["@drmMode"].toLowerCase()!==k.DRMMode.LSF){s.push(m(n.serverID,t))}})}else{if(q.StationList.Station.GeneralInfo&&q.StationList.Station.GeneralInfo["@drmMode"]&&q.StationList.Station.GeneralInfo["@drmMode"].toLowerCase()!==k.DRMMode.LSF){s.push(m(n.serverID,q.StationList.Station))}}}n.onComplete(s)},o=function(q){n.onFailure(q)};a.callCOSService({uri:"admin/station/query",serverId:n.serverID,onComplete:p,onError:o})}function f(o){var n={};n.name=o["@name"];n.value=o.Value;return n}function d(n){var o={};o.id=n["@id"];o.name=n["@name"];o.required=(n["@required"]==="true");o.readOnly=(n["@ReadOnlyFlag"]==="true");o.visible=!(n["@VisibleFlag"]==="false");o.defaultValue=(typeof n.Value!=="undefined")?n.Value:"";o.type=n["@type"]?n["@type"]:k.DRMPropertyType.STRING;if(n.DisplayName&&n.DisplayName.$){o.displayName=n.DisplayName.$}else{if(n.DisplayName){o.displayName=n.DisplayName}else{o.displayName=o.name}}if(n.DisplayName&&n.DisplayName["@nlsFile"]&&n.DisplayName["@nlsID"]){o.displayNameNlsFile=n.DisplayName["@nlsFile"];o.displayNameNlsID=n.DisplayName["@nlsID"]}o.description=n.Description?n.Description:"";if(n.Limit){if((n.Limit["@type"]==="choice")&&n.Limit.$){o.choices=n.Limit.$.split("\n")}}return o}function c(o,n){o.displayName=(n.DisplayName&&n.DisplayName.$)?n.DisplayName.$:o.name;if(n.DisplayName&&n.DisplayName["@nlsFile"]&&n.DisplayName["@nlsID"]){o.displayNameNlsFile=n.DisplayName["@nlsFile"];o.displayNameNlsID=n.DisplayName["@nlsID"]}o.description=(n.Description&&n.Description.$)?n.Description.$:"";if(n.Description&&n.Description["@nlsFile"]&&n.Description["@nlsID"]){o.descriptionNlsFile=n.Description["@nlsFile"];o.descriptionNlsID=n.Description["@nlsID"]}o.attributes=[];if(n.Attributes&&n.Attributes.Attribute){if(Array.isArray(n.Attributes.Attribute)){n.Attributes.Attribute.forEach(function(p){o.attributes.push(f(p))})}else{o.attributes.push(f(n.Attributes.Attribute))}}o.properties=[];if(n.Properties&&n.Properties.Property){if(Array.isArray(n.Properties.Property)){n.Properties.Property.forEach(function(p){o.properties.push(d(p))})}else{o.properties.push(d(n.Properties.Property))}}}e.getServers=function(){return new j(function(q,p){var r=function(t){var v=[],s=JSON.parse(t.response),u=s.COSConfiguration||s.configurations;if(Array.isArray(s)){u=s}else{u=s.COSConfiguration||s.configurations}if(u&&(u.length>0)){v=u.map(function(w){return{id:w.id,url:w.fullCosUrl,isDefault:w.isDefault,isRunAsEnabled:false}})}q(v)},n=function(s){p(h.buildError(k.ErrorCodes.SERVERS_WS_ERROR,s))},o=function(){a.callSMAProcService({uri:"../eepservices/cos/configurations",onComplete:r,onError:n,sessionTimeoutInfo:{handler:p,context:null}})};a.callRefreshCOSConfigurations({onComplete:o})})};e.getServerStatus=function(n){return new j(function(q,p){var r=function(s){n.server.status=(s.response)?s.response:k.ServerStatus.UNKNOWN;q(n.server)},o=function(s){n.server.status=k.ServerStatus.NOTRESPONDING;p(h.buildError(k.ErrorCodes.SERVER_STATUS_WS_ERROR,s,n.server.id))};a.callCOSService({headers:{Accept:"text/plain"},serverId:n.server.id,uri:"admin/status",onComplete:r,onError:o})})};e.getRunAsEnabled=function(n){return new j(function(q,p){var r=function(s){n.server.isRunAsEnabled=(s.response)?s.response.toLowerCase().startsWith("true"):false;q(n.server)},o=function(s){p(h.buildError(k.ErrorCodes.RUNASENABLED_WS_ERROR,s,n.server.id))};a.callCOSService({headers:{Accept:"text/plain"},serverId:n.server.id,uri:"admin/runAsEnabled",onComplete:r,onError:o})})};e.getDRMInfo=function(n){return new j(function(t,s){var r=function(u){var w=(u.response)?parseInt(u.response):k.CLOUD_DRM_CPULIMIT_DEFAULT,v;for(v=0;v<n.server.drmInfo.length;v++){if(n.server.drmInfo[v].name===k.DRMMode.CLOUD){n.server.drmInfo[v].cpuLimit=w;break}}t(n.server)},q=function(u){s(h.buildError(k.ErrorCodes.DRM_CPULIMIT_WS_ERROR,u,n.server.id))},o=function(w){var v=JSON.parse(w.response),u=false,x;n.server.drmInfo=[];if(v&&v.Drms&&v.Drms.Drm){if(Array.isArray(v.Drms.Drm)){v.Drms.Drm.forEach(function(y){x=y["@name"];if(x.toLowerCase()!==k.DRMMode.LSF){n.server.drmInfo.push({name:x});if(x===k.DRMMode.CLOUD){u=true}}})}else{x=v.Drms.Drm["@name"];if(x.toLowerCase()!==k.DRMMode.LSF){n.server.drmInfo.push({name:x});if(x===k.DRMMode.CLOUD){u=true}}}}if(u){a.callCOSService({headers:{Accept:"text/plain"},serverId:n.server.id,uri:"admin/drm/Cloud/cpu",onComplete:r,onError:q})}else{t(n.server)}},p=function(u){s(h.buildError(k.ErrorCodes.DRM_WS_ERROR,u,n.server.id))};a.callCOSService({serverId:n.server.id,uri:"admin/drm",onComplete:o,onError:p})})};e.getDRMConfigOptions=function(n){return new j(function(p){var q=function(s){var r=JSON.parse(s.response);if(r&&r["wfext.Extension"]){c(n.drm,r["wfext.Extension"])}p(n.drm)},o=function(r){n.drm.error=h.buildError(k.ErrorCodes.DRM_CONFIG_OPTIONS_WS_ERROR,r,n.drm.name);p(n.drm)};if((n.drm.name!==k.DRMMode.FIPER)&&(n.drm.name!==k.DRMMode.CLOUD)){a.callCOSService({serverId:n.server.id,uri:"admin/drm/"+n.drm.name+"/configOptions",onComplete:q,onError:o})}else{p(n.drm)}})};e.getStations=function(n){return new j(function(s,r){var u=[],t=function(v){u=u.concat(v);s({stations:u})},o=function(v){r(h.buildError(k.ErrorCodes.PRIVATE_STATIONS_ERROR,null,{serverID:n.serverID,error:v}))},p=function(v){u=u.concat(v);b({serverID:n.serverID,onComplete:t,onFailure:o})},q=function(v){r(h.buildError(k.ErrorCodes.STATIONS_WS_ERROR,v,n.serverID))};g({serverID:n.serverID,onComplete:p,onFailure:q})})};return e});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-cos/actions",["DS/SMAPoweredByState/ad-state-cos/action-types","DS/SMAPoweredByState/ad-state-cos/action-impls","UWA/Class/Promise"],function(e,c,b){var a={};var d=window.Promise||b;a.refreshServers=function(){return{type:e.REFRESH_SERVERS,payload:{promise:c.getServers().then(function(f){return d.all(f.map(function(g){return c.getServerStatus({server:g}).then(function(){return{server:g}}).then(c.getRunAsEnabled).then(function(){return{server:g}}).then(c.getDRMInfo).then(function(){return d.all(g.drmInfo.map(function(h){return c.getDRMConfigOptions({server:g,drm:h})}))}).then(function(){return g})["catch"](function(h){g.persistenceError=h.error;return g})}))})}}};a.refreshStations=function(f){return{type:e.REFRESH_STATIONS,payload:{promise:c.getStations({serverID:f.id})}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/envvars-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,d,e){var c={};function b(j,h){var k,g,l=false;if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if((j.configuration.environmentVariables[g].name===h.name)&&(j.configuration.environmentVariables[g].value===h.value)){l=true;break}}}if(!l){k=d.shallowCopy(j);if(!k.configuration.environmentVariables){k.configuration.environmentVariables=[]}for(g=0;g<k.configuration.environmentVariables.length;g++){if(k.configuration.environmentVariables[g].name===h.name){k.configuration.environmentVariables[g].value=h.value;break}}if(g===k.configuration.environmentVariables.length){k.configuration.environmentVariables.push({name:h.name,value:h.value})}k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}return k}function a(j,h){var k,g,l=false;switch(h.type){case f.SET_JOB_ENV_VARS:k=d.setStateProperty(j,"configuration.environmentVariables",h.environmentVariables,true);break;case f.ADD_JOB_ENV_VAR:k=b(j,h);break;case f.SET_JOB_ENV_VAR_VALUE:if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if(j.configuration.environmentVariables[g].name===h.name){k=d.shallowCopy(j);k.configuration.environmentVariables[g].value=h.value;k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_JOB_ENV_VAR:if(j.configuration.environmentVariables){for(g=0;g<j.configuration.environmentVariables.length;g++){if(j.configuration.environmentVariables[g].name===h.name){k=d.shallowCopy(j);k.configuration.environmentVariables.splice(g,1);if(k.configuration.environmentVariables.length===0){delete k.configuration.environmentVariables}k.persistenceStatus=e.PersistenceStatus.DIRTY;l=true;break}}}if(!l){k=j}break;case f.REMOVE_ALL_JOB_ENV_VARS:if(j.configuration.environmentVariables&&(j.configuration.environmentVariables.length>0)){k=d.shallowCopy(j);delete k.configuration.environmentVariables;k.persistenceStatus=e.PersistenceStatus.DIRTY}else{k=j}break;default:k=j;break}return k}c["default"]=a;return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/outputs-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(e,c,d){var a={};function b(g,f){var h;switch(f.type){case e.SET_JOB_OUTPUT_FILE_SPECS:h=c.setStateProperty(g,"configuration.outputFileSpecs",f.outputFileSpecs,true);break;case e.SET_JOB_OUTPUT_FILE_SPECS_ENABLED:h=c.setStateProperty(g,"configuration.outputFileSpecsEnabled",f.outputFileSpecsEnabled,true);break;case e.ADD_JOB_OUTPUT+d.AsyncStatus.PENDING:h=c.shallowCopy(g);h.outputs.push(f.payload.outputID);h.persistenceOperation=d.PersistenceOperation.UPDATING;if(h.persistenceError){delete h.persistenceError}break;case e.ADD_JOB_OUTPUT+d.AsyncStatus.SUCCESS:h=c.shallowCopy(g);delete h.persistenceOperation;break;case e.ADD_JOB_OUTPUT+d.AsyncStatus.FAILURE:h=c.shallowCopy(g);h.outputs.splice(h.outputs.indexOf(f.payload.context.outputID),1);h.persistenceError=f.payload.error;delete h.persistenceOperation;break;default:h=g;break}return h}a["default"]=b;return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/arguments-actions",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-domain-jobs/action-types"],function(b,c){var a={};a.setJobArguments=function(f,d,e){return{type:c.SET_JOB_ARGUMENTS,jobID:f,arguments:d,iterationNum:b.isInteger(e)?e:null}};a.addJobArgument=function(g,d,f,e){return{type:c.ADD_JOB_ARGUMENT,jobID:g,name:d,value:f,iterationNum:b.isInteger(e)?e:null}};a.setJobArgumentValue=function(g,d,f,e){return{type:c.SET_JOB_ARGUMENT_VALUE,jobID:g,name:d,value:f,iterationNum:b.isInteger(e)?e:null}};a.removeJobArgument=function(e,d){return{type:c.REMOVE_JOB_ARGUMENT,jobID:e,name:d}};a.removeAllJobArguments=function(d){return{type:c.REMOVE_ALL_JOB_ARGUMENTS,jobID:d}};a.setJobCommandValue=function(f,e,d){return{type:c.SET_JOB_COMMAND,jobID:f,value:e,iterationNum:b.isInteger(d)?d:null}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/envvars-actions",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types"],function(b){var a={};a.setJobEnvironmentVariables=function(d,c){return{type:b.SET_JOB_ENV_VARS,jobID:d,environmentVariables:c}};a.addJobEnvironmentVariable=function(e,c,d){return{type:b.ADD_JOB_ENV_VAR,jobID:e,name:c,value:d}};a.setJobEnvironmentVariableValue=function(e,c,d){return{type:b.SET_JOB_ENV_VAR_VALUE,jobID:e,name:c,value:d}};a.removeJobEnvironmentVariable=function(d,c){return{type:b.REMOVE_JOB_ENV_VAR,jobID:d,name:c}};a.removeAllJobEnvironmentVariables=function(c){return{type:b.REMOVE_ALL_JOB_ENV_VARS,jobID:c}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-alerts/reducer",["DS/SMAPoweredByState/ad-state-app-alerts/action-types","DS/SMAPoweredByState/ad-state-utils"],function(e,d){var c={};const a=[];function b(h,g){var j=[],f;if(typeof h==="undefined"){j=d.deepCopy(a)}else{switch(g.type){case e.ADD_ALERT:j=d.shallowCopy(h);j.push({id:d.generateID(),category:g.category,level:g.level,text:g.text,code:g.code});break;case e.REMOVE_ALERT:for(f=0;f<h.length;f++){if(h[f].id!==g.alertID){j.push({id:h[f].id,category:h[f].category,level:h[f].level,text:h[f].text,code:h[f].code})}}if(j.length===h.length){j=h}break;case e.REMOVE_ALL_ALERTS:break;default:j=h;break}}return j}c["default"]=b;return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-managed-data/reducer",["DS/SMAPoweredByState/ad-state-domain-managed-data/action-types","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(m,i,p,c,f){var r={};const d={uninitialized:true,objects:[],hierarchy:{}};function q(z,v,y,u){var A,w={},x,t;if(u){A={objects:z.objects.slice(),hierarchy:z.hierarchy};for(x=0;x<A.objects.length;x++){w[A.objects[x].id]=x}v.forEach(function(B){if(w[B.id]){A.objects.splice(w[B.id],1,B)}else{A.objects.push(B)}});t=c.findNodeInHierarchy(u,A.hierarchy);if(t){y.parent=t.id;if(!t.children.some(function(C,B){if(C.id===y.id){t.children.splice(B,1,y);return true}else{return false}})){t.children.push(y)}}}else{A={objects:v,hierarchy:y}}return A}function b(v,w,u){var t=c.findNodeInHierarchy(u,v.hierarchy);if(t){v.objects.push(w);t.children.push({id:w.id,parent:u,children:[]})}}function o(t,u){c.clearNodeDescendants(t,u.id,true)}function a(w,x,z){var v={},A,t,D,u=[],B,C,y;x.objects.forEach(function(E){t=E.name?E.name:E.title;if(!v[t]){v[t]=[]}v[t].push(E)});w.objects.forEach(function(E){if((E.persistenceOperation===f.PersistenceOperation.CREATING)&&(!z||(E.id!==z.id))){u.push(E)}});u.forEach(function(E){B=E.name?E.name:E.title;C=c.getNodeParent(w,E.id);if(C&&v[B]){for(y=0;y<v[B].length;y++){D=c.getNodeParent(x,v[B][y].id);if(D&&(D.id===C.id)){A=v[B][y];break}}}if(A){c.clearNodeDescendants(x,A.id,true);b(x,E,C.id)}})}function h(u,t){var v;switch(t.type){case p.CLOSE_STUDY:v=c.deepCopy(d);break;case p.CREATE_STUDY+f.AsyncStatus.SUCCESS:v=c.deepCopy(d);break;default:v=u;break}return v}function s(u,t){var v;switch(t.type){case m.REFRESH_MANAGED_DATA+f.AsyncStatus.PENDING:v={persistenceOperation:f.PersistenceOperation.READING,objects:u.objects,hierarchy:u.hierarchy};break;case m.REFRESH_MANAGED_DATA+f.AsyncStatus.SUCCESS:v=q(u,t.payload.objects,t.payload.hierarchy);a(u,v,null);break;case m.REFRESH_MANAGED_DATA+f.AsyncStatus.FAILURE:v={persistenceError:t.payload.error,objects:u.objects,hierarchy:u.hierarchy};break;case m.REFRESH_MANAGED_DATA_DOCUMENT+f.AsyncStatus.PENDING:v={persistenceOperation:f.PersistenceOperation.READING,objects:u.objects,hierarchy:u.hierarchy};break;case m.REFRESH_MANAGED_DATA_DOCUMENT+f.AsyncStatus.SUCCESS:v=q(u,t.payload.objects,t.payload.hierarchy,t.payload.containerID);a(u,v,t.payload.placeholder);break;case m.REFRESH_MANAGED_DATA_DOCUMENT+f.AsyncStatus.FAILURE:v={persistenceError:t.payload.error,objects:u.objects,hierarchy:u.hierarchy};break;default:v=u;break}return v}function e(u,t){var v;switch(t.type){case m.UPLOAD_LOCAL_FILE+f.AsyncStatus.PENDING:case m.ADD_REFERENCED_CONTENT+f.AsyncStatus.PENDING:v={objects:u.objects.slice(),hierarchy:u.hierarchy};if(t.payload&&t.payload.placeholder){b(v,t.payload.placeholder,t.payload.containerID)}break;case m.UPLOAD_WORK_DATA+f.AsyncStatus.PENDING:v={objects:u.objects,hierarchy:u.hierarchy};break;case m.UPLOAD_LOCAL_FILE+f.AsyncStatus.SUCCESS:v=q(u,t.payload.objects,t.payload.hierarchy,t.payload.containerID);o(v,t.payload.placeholder);break;case m.ADD_REFERENCED_CONTENT+f.AsyncStatus.SUCCESS:v=q(u,t.payload.objects,t.payload.hierarchy);a(u,v,t.payload.placeholder);break;case m.UPLOAD_WORK_DATA+f.AsyncStatus.SUCCESS:v={objects:u.objects,hierarchy:u.hierarchy};break;case m.UPLOAD_LOCAL_FILE+f.AsyncStatus.FAILURE:case m.ADD_REFERENCED_CONTENT+f.AsyncStatus.FAILURE:v={persistenceError:t.payload.error,objects:u.objects.slice(),hierarchy:u.hierarchy};if(t.payload&&t.payload.context){o(v,t.payload.context)}break;case m.UPLOAD_WORK_DATA+f.AsyncStatus.FAILURE:v={persistenceError:t.payload.error,objects:u.objects,hierarchy:u.hierarchy};break;default:v=u;break}return v}function g(w,v){var x,t,u;switch(v.type){case m.DELETE_MANAGED_DATA+f.AsyncStatus.PENDING:case m.REMOVE_MANAGED_DATA+f.AsyncStatus.PENDING:x={objects:w.objects.slice(),hierarchy:w.hierarchy};x.objects.forEach(function(y){if(v.payload.objectIDs.indexOf(y.id)>=0){t=c.shallowCopy(y);if(t){t.persistenceOperation=v.payload.doDelete?f.PersistenceOperation.DELETING:f.PersistenceOperation.REMOVING;if(t.persistenceError){delete t.persistenceError}c.replaceObject(x.objects,t)}}});break;case m.DELETE_MANAGED_DATA+f.AsyncStatus.FAILURE:case m.REMOVE_MANAGED_DATA+f.AsyncStatus.FAILURE:case m.DELETE_MANAGED_DATA+f.AsyncStatus.SUCCESS:case m.REMOVE_MANAGED_DATA+f.AsyncStatus.SUCCESS:x={objects:w.objects.slice(),hierarchy:w.hierarchy};if(v.payload.successes){v.payload.successes.forEach(function(y){t=c.getNodeParent(x,y.id);if(t&&(t.type===i.Types.FILE)){u=parseInt(t.latestVersion);if(!isNaN(u)){t.latestVersion=String(u-1);t.latestVersionInvalid=false}}c.clearNodeDescendants(x,y.id,true)})}if(v.payload.failures&&(v.payload.failures.length>0)){x.persistenceError=v.payload.failures[0].error.error}x.objects.forEach(function(y){if(y.persistenceOperation){t=c.shallowCopy(y);delete t.persistenceOperation;c.replaceObject(x.objects,t)}});break;default:x=w;break}return x}function l(v,u){var w,t;switch(u.type){case m.SET_FILE_VERSION_COMMENTS+f.AsyncStatus.PENDING:w={objects:v.objects.slice(),hierarchy:v.hierarchy};t=c.shallowCopy(c.getObject(w.objects,u.payload.fileVersionID));if(t){t.comments=u.payload.comments;t.persistenceOperation=f.PersistenceOperation.UPDATING;if(t.persistenceError){delete t.persistenceError}c.replaceObject(w.objects,t)}break;case m.SET_FILE_VERSION_COMMENTS+f.AsyncStatus.SUCCESS:w={objects:v.objects.slice(),hierarchy:v.hierarchy};t=c.shallowCopy(c.getObject(w.objects,u.payload.fileVersionID));if(t){if(t.persistenceOperation){delete t.persistenceOperation}t.comments=u.payload.comments;c.replaceObject(w.objects,t)}break;case m.SET_FILE_VERSION_COMMENTS+f.AsyncStatus.FAILURE:w={persistenceError:u.payload.error,objects:v.objects.slice(),hierarchy:v.hierarchy};t=c.shallowCopy(c.getObject(w.objects,u.payload.context));if(t){if(t.persistenceOperation){delete t.persistenceOperation}c.replaceObject(w.objects,t)}break;default:w=v;break}return w}function k(v,u){var w,t;switch(u.type){case m.SET_FILE_UPLOAD_PROGRESS:w={objects:v.objects.slice(),hierarchy:v.hierarchy};t=c.shallowCopy(c.getObject(w.objects,u.fileID));if(t){t.uploadProgress=u.uploadProgress;c.replaceObject(w.objects,t)}break;default:w=v;break}return w}function n(u,t){var v;switch(t.type){case m.CLEAR_MANAGED_DATA_PERSISTENCE_ERROR:v={objects:u.objects,hierarchy:u.hierarchy};break;default:v=u;break}return v}function j(u,t){var v;if(typeof u==="undefined"){v=c.deepCopy(d)}else{v=u;v=h(v,t);v=s(v,t);v=e(v,t);v=g(v,t);v=l(v,t);v=k(v,t);v=n(v,t)}return v}r["default"]=j;return r});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-impls",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-connector-definitions/selectors","UWA/Class/Promise"],function(e,b,f,c){var a={};var d=window.Promise||c;a.getConnectorDefinitions=function(){return new d(function(i,h){var j=function(l){var k=JSON.parse(l.response),n=[],m;if(k){n=k.map(function(o){m={id:o.physicalid,title:o.Title,connectorKind:o["Connector Kind"],appName:o["Application Name"],appVersion:o["Application Version"]};if(typeof o.connectoroptions!=="undefined"&&o.connectoroptions){m.options=o.connectoroptions}return m})}i(n)},g=function(k){h(e.buildError(f.ErrorCodes.CONNECTOR_DEFINITIONS_WS_ERROR,k))};b.callSMAProcService({uri:"/connectors/options/",onComplete:j,onError:g,sessionTimeoutInfo:{handler:h,context:null}})})};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study-templates/reducer",["DS/SMAPoweredByState/ad-state-domain-study-templates/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,d,e){var b={};const a={uninitialized:true,objects:[]};function c(h,g){var i;if(typeof h==="undefined"){i=d.deepCopy(a)}else{switch(g.type){case f.REFRESH_STUDY_TEMPLATES+e.AsyncStatus.PENDING:i={persistenceOperation:e.PersistenceOperation.READING,objects:h.objects};break;case f.REFRESH_STUDY_TEMPLATES+e.AsyncStatus.SUCCESS:i={objects:g.payload.slice()};break;case f.REFRESH_STUDY_TEMPLATES+e.AsyncStatus.FAILURE:i={persistenceError:g.payload.error,objects:h.objects};break;default:i=h;break}}return i}b["default"]=c;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/execution-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-utils"],function(h,c,d){var a={};function b(j,i){var k;switch(i.type){case h.SET_JOB_EXECUTION_OPTIONS:k=d.setStateProperty(j,"executionOptions",i.options,true);if(i.options.drmMode!==c.DRMMode.FIPER){k=d.setStateProperty(k,"executionOptions.station",null,true)}break;case h.SET_JOB_EXECUTION_SERVER:k=d.setStateProperty(j,"executionOptions.server",i.serverID,true);break;case h.SET_JOB_EXECUTION_DRM_MODE:k=d.setStateProperty(j,"executionOptions.drmMode",i.drmMode,true);if(i.drmMode!==c.DRMMode.FIPER){k=d.setStateProperty(k,"executionOptions.station",null,true)}break;case h.SET_JOB_EXECUTION_CREDENTIALS_ID:k=d.setStateProperty(j,"executionOptions.credentialsID",i.credentialsID,true);break;case h.SET_JOB_EXECUTION_STATION:k=d.setStateProperty(j,"executionOptions.station",i.stationID,true);if(i.stationOS){k=d.setStateProperty(k,"executionOptions.os",i.stationOS,true)}break;case h.SET_JOB_EXECUTION_OS:k=d.setStateProperty(j,"executionOptions.os",i.os,true);break;case h.SET_JOB_EXECUTION_NUM_PROCS:k=d.setStateProperty(j,"executionOptions.numProcs",i.numProcs,true);break;case h.SET_JOB_EXECUTION_CUSTOM_DRM_CORES:k=j;if((j.executionOptions.drmMode!==c.DRMMode.CLOUD)&&(j.executionOptions.drmMode!==c.DRMMode.FIPER)){k=d.setStateProperty(j,"executionOptions.drmOptions."+i.coresProperty,i.numCores,true)}break;case h.SET_JOB_EXECUTION_WORK_DIR:k=d.setStateProperty(j,"executionOptions.workDirectory",i.workDirectoryID,(j.eedJobID===null));break;case h.SET_JOB_EXECUTION_REMOVE_WORK_DIR:k=d.setStateProperty(j,"executionOptions.removeWorkDir",i.removeWorkDir,true);break;default:k=j;break}return k}function g(j,i){var k;switch(i.type){case h.SET_JOB_EXECUTION_LICENSE_OPTIONS:k=d.setStateProperty(j,"executionOptions.licenseOptions",i.licenseOptions,true);break;case h.SET_JOB_EXECUTION_SXALICENSE_TYPE:k=d.setStateProperty(j,"executionOptions.licenseOptions.licenseType",i.licenseType,true);break;case h.SET_JOB_EXECUTION_SXALICENSE_FEATURES:k=d.setStateProperty(j,"executionOptions.licenseOptions.features",i.features,true);break;case h.SET_JOB_EXECUTION_SXALICENSE_MODEL_SIZE:k=d.setStateProperty(j,"executionOptions.licenseOptions.modelSize",i.modelSize,true);break;case h.SET_JOB_EXECUTION_SXALICENSE_PERFORMANCE:k=d.setStateProperty(j,"executionOptions.licenseOptions.performance",i.performance,true);break;default:k=j;break}return k}function f(j,i){var k;switch(i.type){case h.SET_BATCH_JOB_OPTIONS:k=d.setStateProperty(j,"batchConfiguration.maxBatchSize",i.maxBatchSize,true);k=d.setStateProperty(k,"batchConfiguration.isSequential",i.isSequential,true);break;default:k=j;break}return k}function e(j,i){var k=j;k=b(k,i);k=g(k,i);k=f(k,i);return k}a["default"]=e;return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-credentials/actions",["DS/SMAPoweredByState/ad-state-app-credentials/action-types","DS/SMAPoweredByState/ad-state-app-credentials/action-impls"],function(c,b){var a={};a.saveCredentials=function(d){return{type:c.SAVE_CREDENTIALS,payload:{promise:b.encryptAndSaveCredentials(d).then(function(e){return e})}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-connector-definitions/actions",["DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-types","DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-impls"],function(c,b){var a={};a.refreshConnectorDefinitions=function(){return{type:c.REFRESH_CONNECTOR_DEFINITIONS,payload:{promise:b.getConnectorDefinitions()}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-job-types/action-impls",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","UWA/Class/Promise","text!DS/SMAPoweredByState/assets/handlers.json"],function(h,c,a,e,f){var b={};var d=JSON.parse(f);var g=window.Promise||e;b.getJobTypes=function(){return new g(function(l,k){var j,m=function(p){var o=JSON.parse(p.response),n=[];if(o){n=o.map(function(q){if(d[q.title]){if(d[q.title][q.revision]){j=d[q.title][q.revision]}else{j=d[q.title]["default"]}}else{j=d["default"]}return{id:q.id,title:q.title,description:q.description,lifecycleState:q.currentState,revision:q.revision,revisionComments:q.revisionComments,isLatestRevision:q.isLatestrevision,handler:j,options:null}})}l(n)},i=function(n){k(h.buildError(a.ErrorCodes.JOB_TYPES_WS_ERROR,n))};c.callSMAProcService({uri:"/templates?templateType=type_SimulationActivity&usage=Adhoc",onComplete:m,onError:i,sessionTimeoutInfo:{handler:k,context:null}})})};b.getJobTypeOptions=function(i){return new g(function(l,k){var m=function(o){var n=JSON.parse(o.response);l({jobTypeID:i.jobType.id,options:n})},j=function(n){k(h.buildError(a.ErrorCodes.JOB_TYPE_OPTIONS_WS_ERROR,n,i.jobType.id))};c.callSMAProcService({uri:"/templates/"+i.jobType.id+"/options",onComplete:m,onError:j,sessionTimeoutInfo:{handler:k,context:i.jobType.id}})})};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-credentials/reducer",["DS/SMAPoweredByState/ad-state-app-credentials/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(g,c,e){var a={};const b={uninitialized:true,objects:[]};function d(i,j){var h=i.filter(function(k){return !(k.domainName===j.domainName&&k.linuxUser===j.linuxUser)});h.push(j);return h}function f(j,i){var k=[];if(typeof j==="undefined"){k=c.deepCopy(b)}else{switch(i.type){case g.SAVE_CREDENTIALS+e.AsyncStatus.PENDING:k={persistenceOperation:e.PersistenceOperation.READING,objects:j.objects.slice()};break;case g.SAVE_CREDENTIALS+e.AsyncStatus.SUCCESS:var h={id:i.payload.id,domainName:i.payload.domainName,windowsUser:i.payload.windowsUser,linuxUser:i.payload.linuxUser,lengthWindows:i.payload.lengthWindows,lengthLinux:i.payload.lengthLinux,enoviaUser:i.payload.enoviaUser,encryptedString:i.payload.encryptedString?i.payload.encryptedString:[]};k={objects:d(j.objects,h)};break;default:k=j;break}}return k}a["default"]=f;return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/results-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils"],function(d,c){var b={};function a(f,e){var g;switch(e.type){case d.SET_JOB_GENERATE_RESULTS:g=c.setStateProperty(f,"resultsOptions.generateResults",e.generateResults,true);break;case d.SET_JOB_GENERATE_RESULTS_UNITS:g=c.setStateProperty(f,"resultsOptions.generateResultsUnits",e.generateResultsUnits,true);break;case d.SET_JOB_GENERATE_RESULTS_UNITS_ENABLED:g=c.setStateProperty(f,"resultsOptions.generateResultsUnitsEnabled",e.generateResultsUnitsEnabled,true);break;case d.SET_JOB_GENERATE_RESULTS_SOURCE_FILENAME:g=c.setStateProperty(f,"resultsOptions.generateResultsSourceFilename",e.generateResultsSourceFilename,true);break;case d.SET_JOB_GENERATE_RESULTS_TITLE:g=c.setStateProperty(f,"resultsOptions.generateResultsTitle",e.generateResultsTitle,true);break;default:g=f;break}return g}b["default"]=a;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app-preferences/reducer",["DS/SMAPoweredByState/ad-state-app-preferences/action-types","DS/SMAPoweredByState/ad-state-utils"],function(e,c){var b={};const a={defaultJobType:(window.widget&&window.widget.getValue("defaultJobType")?window.widget.getValue("defaultJobType").value:null)};function d(g,f){var h={};if(typeof g==="undefined"){h=c.deepCopy(a)}else{switch(f.type){case e.SET_DEFAULT_JOB_TYPE:if(g.defaultJobType!==f.id){h.defaultJobType=f.id}else{h=g}break;default:h=g;break}}return h}b["default"]=d;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/arguments-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(h,e,f){var b={};function c(l,k){var m,j,n=false,o=null;if(l.configuration.arguments){for(j=0;j<l.configuration.arguments.length;j++){if((l.configuration.arguments[j].name===k.name)&&(l.configuration.arguments[j].value===k.value)){n=true;break}}}if(!n){m=e.shallowCopy(l);if(e.isInteger(k.iterationNum)){if(!m.batchConfiguration.iterations[k.iterationNum].configuration){m.batchConfiguration.iterations[k.iterationNum].configuration={}}o=m.batchConfiguration.iterations[k.iterationNum].configuration}else{o=m.configuration}if(!o.arguments){o.arguments=[]}for(j=0;j<o.arguments.length;j++){if(o.arguments[j].name===k.name){o.arguments[j].value=k.value;break}}if(j===o.arguments.length){o.arguments.push({name:k.name,value:k.value})}m.persistenceStatus=f.PersistenceStatus.DIRTY}else{m=l}return m}function a(l,k){var m,j,n=false;switch(k.type){case h.SET_JOB_ARGUMENTS:m=e.setStateProperty(l,"configuration.arguments",k.arguments,true);break;case h.SET_JOB_ARGUMENT_VALUE:if(l.configuration.arguments){for(j=0;j<l.configuration.arguments.length;j++){if(l.configuration.arguments[j].name===k.name){m=e.shallowCopy(l);m.configuration.arguments[j].value=k.value;m.persistenceStatus=f.PersistenceStatus.DIRTY;n=true;break}}}if(!n){m=l}break;case h.REMOVE_JOB_ARGUMENT:if(l.configuration.arguments){for(j=0;j<l.configuration.arguments.length;j++){if(l.configuration.arguments[j].name===k.name){m=e.shallowCopy(l);m.configuration.arguments.splice(j,1);if(m.configuration.arguments.length===0){delete m.configuration.arguments}m.persistenceStatus=f.PersistenceStatus.DIRTY;n=true;break}}}if(!n){m=l}break;case h.REMOVE_ALL_JOB_ARGUMENTS:if(l.configuration.arguments&&(l.configuration.arguments.length>0)){m=e.shallowCopy(l);delete m.configuration.arguments;m.persistenceStatus=f.PersistenceStatus.DIRTY}else{m=l}break;case h.SET_JOB_COMMAND:m=e.setStateProperty(l,"configuration.command",k.value,false);break;default:m=l;break}return m}function g(n,m){var o,k,l,p=false,j;switch(m.type){case h.SET_JOB_ARGUMENTS:l=e.getBatchJobIteration(n,m.iterationNum,true);if(l){o=e.setStateProperty(n,"batchConfiguration.iterations["+m.iterationNum+"].configuration.arguments",m.arguments,true)}else{o=n}break;case h.SET_JOB_ARGUMENT_VALUE:l=e.getBatchJobIteration(n,m.iterationNum,true);if(l){if(l.configuration.arguments){for(k=0;k<l.configuration.arguments.length;k++){if(l.configuration.arguments[k].name===m.name){j=e.shallowCopy(l.configuration.arguments);j[k].value=m.value;o=e.setStateProperty(n,"batchConfiguration.iterations["+m.iterationNum+"].configuration.arguments",j,true);p=true;break}}}}if(!p){o=n}break;case h.SET_JOB_COMMAND:l=e.getBatchJobIteration(n,m.iterationNum,true);if(l){o=e.setStateProperty(n,"batchConfiguration.iterations["+m.iterationNum+"].configuration.command",m.value,false)}else{o=n}break;default:o=n;break}return o}function d(j,i){var k;switch(i.type){case h.ADD_JOB_ARGUMENT:k=c(j,i);break;case h.SET_JOB_ARGUMENTS:case h.SET_JOB_ARGUMENT_VALUE:case h.SET_JOB_COMMAND:if(e.isInteger(i.iterationNum)){k=g(j,i)}else{k=a(j,i)}break;case h.REMOVE_JOB_ARGUMENT:case h.REMOVE_ALL_JOB_ARGUMENTS:k=a(j,i);break;default:k=j;break}return k}b["default"]=d;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app/reducer",["DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-app/action-types","DS/SMAPoweredByState/ad-state-cos/action-types","DS/SMAPoweredByState/ad-state-domain-connector-definitions/action-types","DS/SMAPoweredByState/ad-state-domain-job-types/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-managed-data/action-types","DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-domain-study-templates/action-types","DS/SMAPoweredByState/ad-state-domain-work-data/action-types","DS/SMAPoweredByState/ad-state-app-alerts/reducer","DS/SMAPoweredByState/ad-state-app-logging/reducer","DS/SMAPoweredByState/ad-state-app-preferences/reducer","DS/SMAPoweredByState/ad-state-app-credentials/reducer","DS/SMAPoweredByTracker/ad-tracker/reducer"],function(c,i,t,g,s,d,k,h,u,q,l,r,a,o,b,p){var v={};var m=false;const e={uninitialized:true,cloudEnabled:false,transientWidget:false,spaceURL:null,dslsURL:null,licenses:[],errors:[]};function j(x,w){var y;switch(w.type){case t.REFRESH_APP+i.AsyncStatus.PENDING:y=c.shallowCopy(x);y.persistenceOperation=i.PersistenceOperation.READING;if(y.persistenceError){delete y.persistenceError}if(y.uninitialized){delete y.uninitialized}break;case t.REFRESH_APP+i.AsyncStatus.SUCCESS:y=c.shallowCopy(x);y.cloudEnabled=w.payload.cloudEnabled;y.platforms=w.payload.platforms;y.currentPlatform=w.payload.currentPlatform;y.whereUsedTenants=w.payload.whereUsedTenants;y.currentWhereUsedTenant=w.payload.currentWhereUsedTenant;y.spaceURL=w.payload.spaceURL;y.myAppsURL=w.payload.myAppsURL;y.dslsURL=w.payload.dslsURL;y.licenses=w.payload.licenses;y.transientWidget=w.payload.transientWidget;y.securityContext=w.payload.securityContext;delete y.persistenceOperation;break;case t.REFRESH_APP+i.AsyncStatus.FAILURE:y=c.shallowCopy(x);y.persistenceError=w.payload.error;delete y.persistenceOperation;if(m){y.errors.push(w.payload.error)}break;default:y=x;break}return y}function f(y,x){var z,w;switch(x.type){case t.ADD_ERROR:for(w=0;w<y.errors.length;w++){if(y.errors[w]!==x.error){break}}if(w===y.errors.length){z=c.shallowCopy(y);z.errors.push(x.error)}else{z=y}break;case t.REMOVE_ERROR:z=c.shallowCopy(y);for(w=0;w<z.errors.length;w++){if(z.errors[w]!==x.error){z.errors.splice(w,1);break}}if(z.errors.length===y.errors.length){z=y}break;case t.REMOVE_ALL_ERRORS:if(y.errors.length>0){z=c.shallowCopy(y);z.errors.splice(0)}else{z=y}break;default:z=y;break}return z}function n(A,z){var B,D,y,C,w,x;if(typeof A==="undefined"){B=c.deepCopy(e)}else{switch(z.type){case t.REFRESH_APP+i.AsyncStatus.PENDING:case t.REFRESH_APP+i.AsyncStatus.SUCCESS:case t.REFRESH_APP+i.AsyncStatus.FAILURE:B=j(A,z);break;case t.ADD_ERROR:case t.REMOVE_ERROR:case t.REMOVE_ALL_ERRORS:B=f(A,z);break;default:if(m&&z.payload&&z.payload.error){B=c.shallowCopy(A);B.errors.push(z.payload.error)}else{B=A}break}}D=r["default"]((typeof A!=="undefined")?A.alerts:undefined,z);y=a["default"]((typeof A!=="undefined")?A.logging:undefined,z);C=p["default"]((typeof A!=="undefined")?A.tracking:undefined,z);w=o["default"]((typeof A!=="undefined")?A.preferences:undefined,z);x=b["default"]((typeof A!=="undefined")?A.credentials:undefined,z);if((B===A)&&((D!==A.alerts)||(y!==A.logging)||(C!==A.tracking)||(w!==A.preferences)||(x!==A.credentials))){B=c.shallowCopy(A)}B.alerts=D;B.logging=y;B.tracking=C;B.preferences=w;B.credentials=x;return B}v["default"]=n;return v});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/job-reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/arguments-reducer","DS/SMAPoweredByState/ad-state-domain-jobs/envvars-reducer","DS/SMAPoweredByState/ad-state-domain-jobs/execution-reducer","DS/SMAPoweredByState/ad-state-domain-jobs/inputs-reducer","DS/SMAPoweredByState/ad-state-domain-jobs/outputs-reducer","DS/SMAPoweredByState/ad-state-domain-jobs/results-reducer","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(o,l,a,v,n,g,i,w,c,h){var x={};const d={uninitialized:true,persistenceStatus:h.PersistenceStatus.CLEAN,id:null,eedJobID:null,jobType:null,title:name,description:null,ready:false,started:0,ended:0,status:l.JobStatus.CONFIGURING,progress:null,inputs:[],mainInputFile:null,outputs:[],configuration:{},executionOptions:{}};function b(z,y){if(!z.progress){z.progress={claimed:false,totalSteps:0,stepsCompleted:0,currentStepProgress:0,overallProgress:0}}else{z.progress=c.shallowCopy(z.progress)}if(typeof y.claimed!=="undefined"){z.progress.claimed=y.claimed}if(typeof y.totalSteps!=="undefined"){z.progress.totalSteps=y.totalSteps}if(typeof y.stepsCompleted!=="undefined"){z.progress.stepsCompleted=y.stepsCompleted}if(typeof y.currentStepProgress!=="undefined"){z.progress.currentStepProgress=y.currentStepProgress}if(typeof y.overallProgress!=="undefined"){z.progress.overallProgress=y.overallProgress}}function t(z,y){if(y.status){z.status=y.status}if(y.started){z.started=y.started}if(y.ended){z.ended=y.ended}if(!z.owner&&y.owner){z.owner=y.owner}if(y.inputs&&y.inputs.length>0){z.inputs=y.inputs}if(y.outputs){z.outputs=y.outputs}if(y.jobType){z.jobType=y.jobType}if(y.configuration){z.configuration=y.configuration}if(y.resultsOptions){z.resultsOptions=y.resultsOptions}if(y.executionOptions){z.executionOptions=y.executionOptions}if(y.mainInputFile){z.mainInputFile=y.mainInputFile}if(y.batchConfiguration){z.batchConfiguration=y.batchConfiguration}if(y._activityID){z._activityID=y._activityID}}function p(z,y){z.batchConfiguration.iterations.forEach(function(B,A){if(A<y.length){if(typeof y[A].started!=="undefined"){B.started=y[A].started}if(typeof y[A].ended!=="undefined"){B.ended=y[A].ended}if(typeof y[A].status!=="undefined"){B.status=y[A].status}if(y[A].progress){B.progress=y[A].progress}}})}function u(z,y){var A;switch(y.type){case o.REFRESH_JOB_DATA+h.AsyncStatus.PENDING:A=c.shallowCopy(z);A.persistenceOperation=h.PersistenceOperation.READING;break;case o.REFRESH_JOB_DATA+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);if(A.uninitialized){delete A.uninitialized}t(A,y.payload);if(y.payload.progress){b(A,y.payload.progress)}if(y.payload.iterationData){p(A,y.payload.iterationData)}if(A.progress&&(typeof A.progress.stepsCompleted!=="undefined")&&y.payload.refreshedContent){if(A.stepsCompletedAtLastRefresh!==A.progress.stepsCompleted){A.refreshesForCurrentStep=0}else{A.refreshesForCurrentStep=(typeof A.refreshesForCurrentStep!=="undefined")?++A.refreshesForCurrentStep:1}A.stepsCompletedAtLastRefresh=A.progress.stepsCompleted}delete A.persistenceOperation;break;case o.REFRESH_JOB_DATA+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload;delete A.persistenceOperation;break;default:A=z;break}return A}function e(z,y){var A;switch(y.type){case o.CREATE_JOB+h.AsyncStatus.PENDING:case o.CREATE_BATCH_JOB+h.AsyncStatus.PENDING:A=c.deepCopy(d);A.id=y.payload.pendingJobID;A.kind=l.JobKind.TOOL;A.jobType=y.payload.jobTypeID;A.title=y.payload.title;A.persistenceOperation=h.PersistenceOperation.CREATING;break;case o.CLONE_JOB+h.AsyncStatus.PENDING:A=c.deepCopy(d);A.id=y.payload.pendingJobID;A.kind=l.JobKind.TOOL;A.jobType=y.payload.jobTypeID;A.title=y.payload.title;A.inputs=c.deepCopy(y.payload.originalJob.inputs);A.mainInputFile=c.deepCopy(y.payload.originalJob.mainInputFile);A.configuration=c.deepCopy(y.payload.originalJob.configuration);A.resultsOptions=c.deepCopy(y.payload.originalJob.resultsOptions);A.executionOptions=c.deepCopy(y.payload.originalJob.executionOptions);A.persistenceOperation=h.PersistenceOperation.CREATING;break;case o.CREATE_JOB+h.AsyncStatus.SUCCESS:case o.CREATE_BATCH_JOB+h.AsyncStatus.SUCCESS:case o.CLONE_JOB+h.AsyncStatus.SUCCESS:A=c.shallowCopy(y.payload.job);A.jobType=z.jobType;A.title=z.title;delete A.persistenceOperation;break;default:A=z;break}return A}function f(z,y){var A;switch(y.type){case o.START_JOB+h.AsyncStatus.PENDING:A=c.setStateProperty(z,"status",l.JobStatus.ATTEMPTING_RUN,false);if(A.persistenceError){delete A.persistenceError}break;case o.START_JOB+h.AsyncStatus.SUCCESS:A=c.setStateProperty(z,"status",l.JobStatus.RUN_ACCEPTED,false);A.eedJobID=y.payload.eedJobID;A.id=y.payload.mcsJobID;break;case o.START_JOB+h.AsyncStatus.FAILURE:A=c.setStateProperty(z,"status",l.JobStatus.CONFIGURING,false);A.persistenceError=y.payload.error;delete A.persistenceOperation;break;case o.ABORT_JOB+h.AsyncStatus.PENDING:A=z;break;case o.ABORT_JOB+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);A.status=l.JobStatus.STOPPING;break;case o.ABORT_JOB+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload.error;break;default:A=z;break}return A}function s(z,y){var A;switch(y.type){case o.STORE_JOB_CONFIGURATION+h.AsyncStatus.PENDING:A=c.shallowCopy(z);A.persistenceOperation=h.PersistenceOperation.UPDATING;if(A.persistenceError){delete A.persistenceError}break;case o.STORE_JOB_CONFIGURATION+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);delete A.persistenceOperation;break;case o.STORE_JOB_CONFIGURATION+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload.error;delete A.persistenceOperation;break;default:A=z;break}return A}function r(z,y){var A;switch(y.type){case o.SET_JOB_TITLE:A=c.setStateProperty(z,"title",y.title,true);break;case o.SET_JOB_TITLE+h.AsyncStatus.PENDING:A=c.shallowCopy(z);A=c.setStateProperty(z,"title",y.payload.title,false);A.persistenceOperation=h.PersistenceOperation.UPDATING;break;case o.SET_JOB_TITLE+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);delete A.persistenceOperation;break;case o.SET_JOB_TITLE+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload.error;delete A.persistenceOperation;break;default:A=z;break}return A}function j(z,y){var A;switch(y.type){case o.SET_JOB_DESCRIPTION:A=c.setStateProperty(z,"description",y.description,true);break;case o.SET_JOB_DESCRIPTION+h.AsyncStatus.PENDING:A=c.shallowCopy(z);A=c.setStateProperty(z,"description",y.payload.description,false);A.persistenceOperation=h.PersistenceOperation.UPDATING;break;case o.SET_JOB_DESCRIPTION+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);delete A.persistenceOperation;break;case o.SET_JOB_DESCRIPTION+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload.error;delete A.persistenceOperation;break;default:A=z;break}return A}function k(z,y){var A;switch(y.type){case o.SET_JOB_READY:A=c.setStateProperty(z,"ready",y.ready,false);break;case o.SET_JOB_STATUS:A=c.setStateProperty(z,"status",y.status,false);break;default:A=z;break}return A}function q(z,y){var A;switch(y.type){case o.SET_JOB_3DX_PARAMETERS+h.AsyncStatus.PENDING:A=c.shallowCopy(z);A.persistenceOperation=h.PersistenceOperation.UPDATING;break;case o.SET_JOB_3DX_PARAMETERS+h.AsyncStatus.SUCCESS:A=c.shallowCopy(z);delete A.persistenceOperation;break;case o.SET_JOB_3DX_PARAMETERS+h.AsyncStatus.FAILURE:A=c.shallowCopy(z);A.persistenceError=y.payload.error;delete A.persistenceOperation;break;default:A=z;break}return A}function m(z,y){var A;if(typeof z==="undefined"){A=c.deepCopy(d)}else{A=z;A=e(A,y);A=f(A,y);A=u(A,y);A=s(A,y);A=r(A,y);A=j(A,y);A=k(A,y);A=q(A,y);A=g["default"](A,y);A=a["default"](A,y);A=v["default"](A,y);A=i["default"](A,y);A=w["default"](A,y);A=n["default"](A,y)}return A}x["default"]=m;return x});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/reducer",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/job-reducer","DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs"],function(f,i,d,j,k){var h={};const e={uninitialized:true,objects:[]};function a(o,p){if(o&&o.batchConfiguration&&o.batchConfiguration.iterations){o.batchConfiguration.iterations.forEach(function(q){if(q.inputs){q.inputs.forEach(function(r){if(!r.relID&&p[r.inputID]){r.relID=p[r.inputID]}})}})}}function n(r,q){var o=null,p,s=r;if(q.payload&&q.payload.pendingJobID){o=j.getObject(r.objects,q.payload.pendingJobID)}else{if(q.payload&&q.payload.jobID){o=j.getObject(r.objects,q.payload.jobID)}else{if(q.payload&&q.payload.context&&q.payload.context.jobID){o=j.getObject(r.objects,q.payload.context.jobID)}else{if(q.payload&&q.payload.context){o=j.getObject(r.objects,q.payload.context)}else{if(q.jobID){o=j.getObject(r.objects,q.jobID)}}}}}p=i["default"](o,q);if(p!==o){s={objects:r.objects.slice()};if(o!==null){j.replaceObject(s.objects,p,o)}else{s.objects.push(p)}}return s}function g(p,o){var q;switch(o.type){case d.CREATE_STUDY+k.AsyncStatus.PENDING:q=j.deepCopy(e);if(q.uninitialized){delete q.uninitialized}break;case d.CLOSE_STUDY:q=j.deepCopy(e);break;case f.CREATE_JOB+k.AsyncStatus.FAILURE:case f.CLONE_JOB+k.AsyncStatus.FAILURE:q={persistenceError:o.payload.error,objects:p.objects.slice()};j.removeObject(q.objects,o.payload.context);break;default:q=p;break}return q}function m(q,p){var r,o;switch(p.type){case f.UPDATE_JOB+k.AsyncStatus.PENDING:case f.UPDATE_BATCH_JOB+k.AsyncStatus.PENDING:r={objects:q.objects.slice()};o=j.getObject(r.objects,p.payload.jobID);o.persistenceOperation=k.PersistenceOperation.UPDATING;if(o.persistenceError){delete o.persistenceError}break;case f.UPDATE_JOB+k.AsyncStatus.SUCCESS:r={objects:q.objects.slice()};o=j.getObject(r.objects,p.payload.jobID);o.persistenceStatus=k.PersistenceStatus.CLEAN;delete o.persistenceOperation;break;case f.UPDATE_BATCH_JOB+k.AsyncStatus.SUCCESS:r={objects:q.objects.slice()};o=j.getObject(r.objects,p.payload.jobID);o.persistenceStatus=k.PersistenceStatus.CLEAN;a(o,p.payload.inputRelMap);delete o.persistenceOperation;break;case f.UPDATE_JOB+k.AsyncStatus.FAILURE:case f.UPDATE_BATCH_JOB+k.AsyncStatus.FAILURE:r={objects:q.objects.slice()};o=j.getObject(r.objects,p.payload.context);o.persistenceError=p.payload.error;delete o.persistenceOperation;break;default:r=q;break}return r}function c(q,p){var r,o;switch(p.type){case f.DELETE_JOBS+k.AsyncStatus.PENDING:r={objects:q.objects.slice()};p.payload.forEach(function(s){o=j.getObject(r.objects,s);o.persistenceOperation=k.PersistenceOperation.DELETING;if(o.persistenceError){delete o.persistenceError}});break;case f.DELETE_JOBS+k.AsyncStatus.SUCCESS:case f.DELETE_JOBS+k.AsyncStatus.FAILURE:r={objects:q.objects.slice()};if(p.payload.successes){p.payload.successes.forEach(function(s){j.removeObject(r.objects,s)})}if(p.payload.failures&&(p.payload.failures.length>0)){p.payload.failures.forEach(function(s){s.ids.forEach(function(t){o=j.shallowCopy(j.getObject(r.objects,t));if(o.persistenceOperation){delete o.persistenceOperation}o.persistenceError=s.error.error;j.replaceObject(r.objects,o)})})}break;default:r=q;break}return r}function l(p,o){var q;switch(o.type){case f.REFRESH_JOBS+k.AsyncStatus.PENDING:q={persistenceOperation:k.PersistenceOperation.READING,objects:p.objects};break;case f.REFRESH_JOBS+k.AsyncStatus.SUCCESS:q={objects:o.payload.slice()};break;case f.REFRESH_JOBS+k.AsyncStatus.FAILURE:q={persistenceError:o.payload.error,objects:p.objects};break;default:q=p;break}return q}function b(p,o){var q;if(typeof p==="undefined"){q=j.deepCopy(e)}else{switch(o.type){case d.CREATE_STUDY+k.AsyncStatus.PENDING:case d.CLOSE_STUDY:case f.CREATE_JOB+k.AsyncStatus.FAILURE:case f.CLONE_JOB+k.AsyncStatus.FAILURE:q=g(p,o);break;case f.UPDATE_JOB+k.AsyncStatus.PENDING:case f.UPDATE_BATCH_JOB+k.AsyncStatus.PENDING:case f.UPDATE_JOB+k.AsyncStatus.SUCCESS:case f.UPDATE_BATCH_JOB+k.AsyncStatus.SUCCESS:case f.UPDATE_JOB+k.AsyncStatus.FAILURE:case f.UPDATE_BATCH_JOB+k.AsyncStatus.FAILURE:q=m(p,o);break;case f.DELETE_JOBS+k.AsyncStatus.PENDING:case f.DELETE_JOBS+k.AsyncStatus.SUCCESS:case f.DELETE_JOBS+k.AsyncStatus.FAILURE:q=c(p,o);break;case f.REFRESH_JOBS+k.AsyncStatus.PENDING:case f.REFRESH_JOBS+k.AsyncStatus.SUCCESS:case f.REFRESH_JOBS+k.AsyncStatus.FAILURE:q=l(p,o);break;default:q=n(p,o);break}}return q}h["default"]=b;return h});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-reducer",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-action-types","DS/SMAPoweredByState/ad-state-domain-connector-definitions/reducer","DS/SMAPoweredByState/ad-state-domain-job-types/reducer","DS/SMAPoweredByState/ad-state-domain-study-templates/reducer","DS/SMAPoweredByState/ad-state-domain-study/reducer","DS/SMAPoweredByState/ad-state-domain-jobs/reducer","DS/SMAPoweredByState/ad-state-domain-managed-data/reducer","DS/SMAPoweredByState/ad-state-domain-work-data/reducer","DS/SMAPoweredByState/ad-state-cos/reducer","DS/SMAPoweredByState/ad-state-app/reducer"],function(e,m,d,n,h,o,a,j,i,b,l,c){var g={};var f=e.combineReducers({domain:e.combineReducers({connectorDefinitions:n["default"],jobTypes:h["default"],studyTemplates:o["default"],study:a["default"],jobs:j["default"],managedData:i["default"],workData:b["default"]}),cos:l["default"],app:c["default"]});function k(q,p){var r;if((typeof q!=="undefined")&&(p.type===d.SET_STATE_ITEM)){if(p.path){r=m.setStateProperty(q,p.path,p.value,false)}else{r=p.value}}else{r=f(q,p)}return r}g["default"]=k;return g});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-store",["DS/Redux/Redux","DS/SMAPoweredByState/ad-state-reducer","DS/SMAPoweredByState/ad-state-middleware"],function(a,e,d){var b={};var c=null;b.createStoreFromState=function(f){var g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.compose;c=a.createStore(e["default"],f,g(d["default"]))};b.getStore=function(){if(!c){b.createStoreFromState()}return c};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/batch-action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAProcWebCMMUtils/SMAJSCMMAuthoringUtils","DS/SMAProcWebCMMUtils/SMAJSCMMParameterUtils","DS/SMAProcWebCMMUtils/SMAJSCMMDataFlowUtils","DS/JSCMM/SMAJSCMMUtils","DS/JSCMM/SMAJSCMMExtensionConfig","DS/JSCMM/SMAJSCMMParameter","DS/SMAProcWebAsyncUtils/SMAProcWebTransactionManager","DS/SMAProcWebAsyncUtils/Activity/Connect","DS/SMAProcWebAsyncUtils/Activity/Disconnect","DS/SMAPoweredByHandler/ADHandlerFactory","UWA/Class/Promise"],function(U,S,P,aa,G,r,T,W,i,B,L,p,f,C,o,y,l,z){var V={};var w="com.dassault_systemes.sma.adapter.Task",E="com.dassault_systemes.sma.adapter.Loop",x="com.dassault_systemes.sma.adapter.Calculator",X="RunSubflow",d="-Loop",O="Loop",R="type",k="sequential",c="from",v="to",F="incr",h="conditionParam",ab="SetIterationData",j="<![CDATA]>",a="Simulation Category - Internal Data",M=3;var Z={ITERATION_START:"ITERATION_START",ITERATION_STOP:"ITERATION_STOP",STEP_STOP:"STEP_STOP"};var I=window.Promise||z;function g(ai){var ak=U.getStore(),ah=r.managedDataWithID(ak.getState(),ai),aj,al=ai;if(ah.type==="file"){aj=r.managedDataParent(ak.getState(),ah.id,false);al=aj.id}else{if(ah.type==="fileversion"){aj=r.managedDataParent(ak.getState(),ah.id,false);aj=r.managedDataParent(ak.getState(),aj.id,false);al=aj.id}}return al}function q(){var aj=W.currentProcess;var ai=aj.getAllActivities();for(var ah=ai.length-1;ah>=0;ah--){if(!ai[ah].isActivity()){ai.splice(ah,1)}else{ai[ah].setPosition({connected:true})}}return ai}function K(ak){var ai=null,aj=q(),ah;for(ah=0;ah<aj.length;ah++){if(aj[ah].getPhysicalId()===ak){ai=aj[ah];break}}return ai}function e(aj){var ah=null,ai=K(aj);if(ai){ah=ai.getParent()}return ah}function s(aj){var ai=null,ah=e(aj);if(ah){ai=ah.getParent()}return ai}function Q(aj,ah,ak,al,am,ap,ao,an){var ai=new f();ai.setName(ah);ai.setStructure(ak);ai.setMode(al);ai.setDataType(am);if(ak===L.Structure.Array){ai.setDimensions(ap);ai.setSizable(ao);ai.setValues(an)}i.addParameter(ai,aj);return ai}function H(ah){return new I(function(al,ak){var ai=ah.dashboard.getCurrentPlatform(),aj=ah.dashboard.getCurrentSecurityContext();W.initialize(ai,{onSuccess:function(){W.setCurrentContext(aj);al(ah)},onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,null))}})})}function u(ah){return new I(function(aj,ai){W.openProcess(ah.studyID,{onSuccess:function(ak){W.currentProcess=ak;ah.process=ak;aj(ah)},onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.studyID))}})})}function af(ah){return new I(function(aj,ai){W.createActivity(ah.process,ah.jobTitle,null,null,true,{onSuccess:function(ak){ah.mainActivity=ak;aj(ah)},onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobTitle))}})})}function ae(ah){return new I(function(ak,aj){var ai=function(){W.saveStep(ah.mainStep,{onSuccess:function(){ak(ah)},onFailure:function(){aj(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})};W.createStep(ah.mainActivity,null,null,X,w,{onSuccess:function(al){ah.mainStep=al;ai()},onFailure:function(){aj(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})})}function J(ah){return new I(function(al,ak){var ai=function(){W.getParametersInPLM(ah.loopActivity,{onSuccess:function(){al(ah)},onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},aj=function(){Q(ah.loopActivity,P.BATCH_JOB_ITERATION_PARAMETER_NAME,L.Structure.Scalar,L.Mode.InOut,L.DataType.Integer);i.saveParameters(ah.loopActivity,{onSuccess:ai,onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})};W.createActivity(ah.mainActivity,ah.jobTitle+d,null,null,true,{onSuccess:function(am){ah.loopActivity=am;aj()},onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})})}function A(ah){return new I(function(aj,ai){var ak=function(){var al=ah.loopStep.getExtensionConfig(),am;am=al.getPropertyByName(R);am.setValueKey(j);al.setPropertyValue(am,"For");am=al.getPropertyByName(k);am.setValueKey(j);al.setPropertyValue(am,"false");am=al.getPropertyByName(c);am.setValueKey(j);al.setPropertyValue(am,"C0");am=al.getPropertyByName(v);am.setValueKey(j);al.setPropertyValue(am,"PSize");am=al.getPropertyByName(F);am.setValueKey(j);al.setPropertyValue(am,"C1");am=al.getPropertyByName(h);al.setPropertyValue(am,"Iteration");al.propertiesToJSON();W.saveStep(ah.loopStep,{onSuccess:function(){aj(ah)},onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})};W.createStep(ah.loopActivity,null,null,O,E,{onSuccess:function(al){ah.loopStep=al;ak()},onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})})}function ag(ah){return new I(function(ap,ar){var aq=K(ah.jobID),am=e(ah.jobID),ao=aq.getSteps(),al=function(){var at=B.createDataFlowObject(am.findParameterByName(P.BATCH_JOB_ITERATION_PARAMETER_NAME),aq.findParameterByName(P.BATCH_JOB_ITERATION_PARAMETER_NAME));B.addDataflow(at,am);B.saveDataflows(am,{onSuccess:function(){ap(ah)},onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},ak=function(){W.getParametersInPLM(am,{onSuccess:al,onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},ai=function(){W.getParametersInPLM(aq,{onSuccess:ak,onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},aj=function(){Q(aq,P.BATCH_JOB_ITERATION_PARAMETER_NAME,L.Structure.Scalar,L.Mode.In,L.DataType.Integer);i.saveParameters(aq,{onSuccess:ai,onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},an=function(){W.saveStep(ah.calcStep,{onSuccess:aj,onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})};W.createStep(aq,null,ao[0],ab,x,{onSuccess:function(at){ah.calcStep=at;an()},onFailure:function(){ar(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})})}function Y(ah){return new I(function(al,ak){var ai=K(ah.jobID),aj=G.jobExecutionOptions(U.getStore().getState(),ah.jobID);if(ai){W.getActivityExecOptions(ai,{onSuccess:function(){ah.execOptions=ai.getExecutionOptions();if(aj.drmMode){ah.execOptions.setPropertyValue("drmMode",aj.drmMode)}if((aj.drmMode===T.DRMMode.FIPER)&&aj.station){ah.execOptions.setPropertyValue("Host",aj.station)}else{ah.execOptions.setPropertyValue("Host","")}if(aj.os){ah.execOptions.setPropertyValue("OS",aj.os)}else{ah.execOptions.setPropertyValue("OS","")}al(ah)},onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}function m(ah){return new I(function(aj,ai){var ak=s(ah.jobID);if(ak){ak.setExecutionOptions(ah.execOptions);W.modifyActivityExecOptions(ak,{onSuccess:function(){aj(ah)},onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}function ad(ah){return new I(function(an,aq){var ai=G.jobWithID(U.getStore().getState(),ah.jobID),am,aj,ap=function(){aj=Q(am,P.BATCH_JOB_SIZE_PARAMETER_NAME,L.Structure.Scalar,L.Mode.In,L.DataType.Integer);if(aj){aj.setValue(((ai.batchConfiguration.iterations.length>0)?(ai.batchConfiguration.iterations.length-1):0));i.saveParameters(am,{onSuccess:function(){an(ah)},onFailure:function(){aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{aq(new Error("Could not create loop size parameter"))}},al=function(){W.getParametersInPLM(am,{onSuccess:ap,onFailure:function(){aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})},ao=function(){var at=am.getMainStep(),ar,au;if(at){ar=at.getExtensionConfig();au=ar.getPropertyByName(k);au.setValueKey(j);ar.setPropertyValue(au,ai.batchConfiguration.isSequential?"true":"false");ar.propertiesToJSON();W.saveStep(at,{onSuccess:al,onFailure:function(){aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}},ak=function(){var ar=am.getMainStep();if(ar){W.updateStep(ar,{onSuccess:ao,onFailure:function(){aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}};am=e(ah.jobID);if(am){ah.execOptions.setPropertyValue("maxbatchsize",ai.batchConfiguration.maxBatchSize);am.setExecutionOptions(ah.execOptions);W.modifyActivityExecOptions(am,{onSuccess:ak,onFailure:function(){aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{aq(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}function N(ah){return new I(function(an,am){var ai=g(ah.inputID),ak=function(){am(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))},aj=function(){W.addSimulationData(ah.activity,ai,{onSuccess:function(){an(ah)},onFailure:ak})},al=function(){var ao=ah.activity.getContentChildren(),ap,aq;if(ao){for(ap=0;ap<ao.length;ap++){if(ao[ap].getObjectType()===a){aq=ao[ap];break}}}if(aq){W.addReferencedContent(ah.activity,aq,ai,{onSuccess:aj,onFailure:ak})}else{ak({error:"Category "+a+" does not exist."})}};W.getContent(ah.activity,ah.activity,{onSuccess:al,onFailure:ak})})}function b(ah){return new I(function(am,al){var ak=U.getStore(),ai=G.batchJobIterationInputData(ak.getState(),ah.jobID),aj=[];ai.forEach(function(an){aj.push(I.resolve({activity:ah.activity,inputID:an.inputID}).then(N))});I.all(aj).then(function(){am(ah)})["catch"](function(){al(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))})})}function ac(ah){return new I(function(aj,ai){var ak=function(an){var ap=G.batchJobIterationInputData(U.getStore().getState(),ah.jobID),ao=an.getAllSimulationData(),am,al={};ap.forEach(function(aq){if(!al[aq.inputID]){for(am=0;am<ao.length;am++){if(ao[am].getPhysicalId()===g(aq.inputID)){al[aq.inputID]=ao[am].getFieldValue("simDataRelationshipUUID");break}}}});aj(al)};W.getAllSimulationData(ah.activity,{onSuccess:ak,onFailure:function(){ai(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})})}function D(ah){return new I(function(al,ak){var ai=K(ah.jobID),am,aj,an=function(){ah.parameterData.forEach(function(ao){am=new f();i.addParameter(am,ai);am.setName(ao.name);if(ao.name===P.BATCH_JOB_DATA_PARAMETER_NAME){am.setStructure(L.Structure.Array);am.setMode(L.Mode.Neutral);am.setDataType(L.DataType.String);if((ao.value.length>0)&&(ao.value[0].length>0)){am.setDimensions("["+ao.value.length+"]["+ao.value[0].length+"]");aj=[];ao.value.forEach(function(ap){ap.forEach(function(aq){aj.push(aq)})});am.setValues(aj)}else{am.setDimensions("[0]");am.setValues([])}}else{am.setStructure(L.Structure.Scalar);am.setMode(L.Mode.Neutral);am.setDataType(L.DataType.String);am.setValue(ao.value?ao.value:"")}});i.saveParameters(ai,{onSuccess:function(){al(ah)},onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})};if(ai){W.getParametersInPLM(ai,{onSuccess:an,onFailure:function(){ak(S.buildError(G.ErrorCodes.JSCMM_ERROR,null,ah.jobID))}})}else{ak(S.buildError(G.ErrorCodes.JOB_UPDATE_WS_ERROR,null,ah.jobID))}})}function t(al,ai,ap){var ak=null,aq=false,am=false,ah,aj,ao=true,an=null;if(al&&ai&&ap){ah=al.split(".");aq=(ah.length===4);am=(ah.length===5);if(aq||am){aj=parseInt(ah[3])-1}if(aq){if(ap.indexOf("Starting")===0){an=Z.ITERATION_START}else{if(ap.indexOf("Completed")===0){an=Z.ITERATION_STOP;ao=(ap.lastIndexOf('status "OK".')===(ap.length-12))}}}else{if(am){if(ap.indexOf("Completed")===0){an=Z.STEP_STOP}}}if(an){ak={type:an,iteration:aj,time:(ai&&(ai.length>0))?parseInt(ai):0,success:ao}}}return ak}function n(ai,ap,ao){var ah=[],ak,aq,ar,am,aj,an,al;if(ap){for(an=0;an<ap.iterations.length;an++){ak=false;aq=0;ar=0;am=G.JobStatus.CREATED;aj=0;for(al=0;al<ao.length;al++){if(ao[al].iteration===an){if(ao[al].type===Z.ITERATION_START){aq=ao[al].time;am=G.JobStatus.RUNNING;ak=true}else{if(ao[al].type===Z.ITERATION_STOP){ar=ao[al].time;am=ao[al].success?G.JobStatus.COMPLETED:G.JobStatus.FAILED}else{if(ao[al].type===Z.STEP_STOP){aj++}}}}}if(aj){aj--}if((ai.status===G.JobStatus.ABORTED)&&(am!==G.JobStatus.COMPLETED)&&(am!==G.JobStatus.FAILED)){am=G.JobStatus.ABORTED}ah.push({started:aq,ended:ar,status:am,progress:{claimed:ak,totalSteps:M,stepsCompleted:aj,currentStepProgress:0,overallProgress:Math.round((aj/M)*100)}})}}return ah}V.createBatchJobWrapper=function(ah){return new I(function(ak,aj){var ai={studyID:ah.studyID,jobTitle:ah.jobTitle};aa.getDashboard().then(function(al){ai.dashboard=al;return ai}).then(H).then(u).then(af).then(ae).then(J).then(A).then(function(al){ak({mainActivityID:al.mainActivity.getPhysicalId(),loopActivityID:al.loopActivity.getPhysicalId()})})["catch"](function(al){aj(al)})})};V.configureBatchJobToolActivity=function(ah){return new I(function(aj,ai){aa.getDashboard().then(function(ak){ah.dashboard=ak;return ah}).then(H).then(u).then(ag).then(function(){aj(ah)})["catch"](function(ak){ai(ak)})})};V.updateBatchJobInputs=function(ah){return new I(function(ak,aj){var ai={studyID:ah.studyID,jobID:ah.jobID,activity:K(ah.jobID)};aa.getDashboard().then(function(al){ai.dashboard=al;return ai}).then(H).then(u).then(b).then(ac).then(function(al){ah.inputRelMap=al;ak(ah)})["catch"](function(al){aj(al)})})};V.updateBatchJobActivities=function(ah){return new I(function(al,ak){var aj=U.getStore(),ai={studyID:ah.studyID,jobID:ah.jobID,inputRelMap:ah.inputRelMap};l.getHandler({jobId:ah.jobID,store:aj}).then(function(am){ai.parameterData=am.getPLMParametersFromJobConfiguration(ah.jobID,ai.inputRelMap);return ai}).then(aa.getDashboard).then(function(am){ai.dashboard=am;return ai}).then(H).then(u).then(Y).then(m).then(ad).then(D).then(function(){al(ah)})["catch"](function(am){ak(am)})})};V.getBatchJobMainID=function(ai){var aj=s(ai.id),ah=null;if(aj){ah=aj.getPhysicalId()}return ah};V.getBatchJobIterationProgress=function(ah){return new I(function(ar,at){var au,aj=G.jobWithID(U.getStore().getState(),ah.jobID),ak,ao,al,an,ap=function(av){ak=JSON.parse(av.response);if(ak&&(ak.length>0)){an=[];ak.forEach(function(aw){ao=aw.CompIterRunId?aw.CompIterRunId:"";al=t(ao,aw.timeMillis,aw.Msg);if(al){an.push(al)}});ah.iterationData=n(aj,ah.batchConfiguration,an);ar(ah)}else{at(S.buildError(G.ErrorCodes.JOB_PROGRESS_WS_ERROR,av,ah.jobID))}},aq=function(av){at(S.buildError(G.ErrorCodes.JOB_PROGRESS_WS_ERROR,av))},am=function(av){ak=JSON.parse(av.response);if(ak&&ak.LogEntries&&ak.LogEntries.LogEntry&&(ak.LogEntries.LogEntry.length>0)){an=[];ak.LogEntries.LogEntry.forEach(function(aw){ao=aw.CompIterRunId?String(aw.CompIterRunId):"";al=t(ao,aw.Time["@millis"],aw.Msg);if(al){an.push(al)}});ah.iterationData=n(aj,ah.batchConfiguration,an);ar(ah)}else{at(S.buildError(G.ErrorCodes.JOB_PROGRESS_WS_ERROR,av,ah.jobID))}},ai=function(){aa.call3DSpaceService({uri:"jobs/"+ah.jobID+"/log",onComplete:ap,onError:aq,sessionTimeoutInfo:{handler:at,context:ah.jobID}})};au={objectId:ah.jobID,onComplete:am,onError:ai};au.uri="job/"+ah.eedJobID+"/log";if(ah.executionOptions&&ah.executionOptions.server){au.serverId=ah.executionOptions.server}aa.callCOSService(au)})};return V});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-jobs/batch-action-impls","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByHandler/ADHandlerFactory","UWA/Class/Promise"],function(t,c,j,A,k,s,v,m,l,n,x,q,h,i){var z={};var o="Pending",w="com.dassault_systemes.sma.adapter.Task";var d=window.Promise||i;function a(F){var E=false,C,B,D=[];if(F&&F.WorkItemSummaries&&F.WorkItemSummaries.WorkItemSummary){if(Array.isArray(F.WorkItemSummaries.WorkItemSummary)){for(C=0;C<F.WorkItemSummaries.WorkItemSummary.length;C++){if(F.WorkItemSummaries.WorkItemSummary[C]["@type"]!==w){D.push(F.WorkItemSummaries.WorkItemSummary[C].WorkItemSummaryDetails)}}}else{if(F.WorkItemSummaries.WorkItemSummary["@type"]!==w){D.push(F.WorkItemSummaries.WorkItemSummary.WorkItemSummaryDetails)}}}for(C=0;C<D.length;C++){if(Array.isArray(D[C].WorkItemSummaryDetail)){for(B=0;B<D[C].WorkItemSummaryDetail.length;B++){if(D[C].WorkItemSummaryDetail[B]["@status"]!==o){E=true;break}}}else{if(D[C].WorkItemSummaryDetail["@status"]!==o){E=true;break}}if(E){break}}return E}function b(B){return new d(function(E,D){var F=function(H){var G=JSON.parse(H.response);E(G)},C=function(G){D(c.buildError(v.ErrorCodes.JOBS_WS_ERROR,G))};A.callSMAProcService({uri:"/simulations/"+B.studyID+"/jobs",onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:null}})})}function p(B){return new d(function(E,D){var F=function(H){var G=JSON.parse(H.response);E(G)},C=function(G){D(c.buildError(v.ErrorCodes.JOBS_WS_ERROR,G))};A.callSMAProcService({uri:"/jobs/"+B.job.id+"/contents",onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:null}})})}function f(B){return new d(function(E,D){var F=function(I){var J=null,H,G={};if(I.response&&(I.response.length>0)){J=JSON.parse(I.response)}if(J&&J.jobType&&J.activityDefinition){h.getHandler({jobTypeId:J.jobType,store:t.getStore()}).then(function(K){H=K.createJobFromPLMActivity(J.activityDefinition,t.getStore().getState());if(H){G.jobType=J.jobType;G.inputs=H.inputs;G.configuration=H.configuration;G.resultsOptions=H.resultsOptions;G.executionOptions=H.executionOptions;G.mainInputFile=H.mainInputFile;if(H._plmActivity&&H._plmActivity.attributes&&H._plmActivity.attributes.definition&&H._plmActivity.attributes.definition.flowItem){G._activityID=H._plmActivity.attributes.definition.flowItem.id}if(J.plmParameters){G.batchConfiguration=H.batchConfiguration;K.updateJobConfigurationFromPLMParameters(J.plmParameters,G)}}E(G)})}else{if(I.response===""){E({jobType:m.UNKNOWN_JOB_TYPE,inputs:[],configuration:{},resultsOptions:{},executionOptions:{},mainInputFile:null})}else{D(c.buildError(v.ErrorCodes.JOB_FILE_CHECKOUT_WS_ERROR,null,B.job.id))}}},C=function(G){D(c.buildError(v.ErrorCodes.JOB_FILE_CHECKOUT_WS_ERROR,G,B.job.id))};A.callSMAProcService({uri:"/jobs/"+B.job.id+"/file/"+v.TOOL_JOB_CONFIG_FILENAME,headers:{Accept:"*/*"},onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:B.job.id}})})}function r(B){return new d(function(E,D){var F=function(G){var H=null;if(G.response&&(G.response.length>0)){H=JSON.parse(G.response)}if(H&&H.attachToJobID&&H.managedDataProjections){E(H)}else{D(c.buildError(v.ErrorCodes.JOB_FILE_CHECKOUT_WS_ERROR,null,B.job.id))}},C=function(G){D(c.buildError(v.ErrorCodes.JOB_FILE_CHECKOUT_WS_ERROR,G,B.job.id))};A.callSMAProcService({uri:"/jobs/"+B.job.id+"/file/"+v.UPLOAD_JOB_CONFIG_FILENAME,headers:{Accept:"*/*"},onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:B.job.id}})})}function y(B){return new d(function(N,O){var P,E,J=null,Q,K=0,L=0,H,G=null,D={claimed:false},I=function(R){E=JSON.parse(R.response);if(E.datarecords&&E.datarecords.datagroups&&(E.datarecords.datagroups.length>0)&&E.datarecords.datagroups[0].dataelements){Q=E.datarecords.datagroups[0].dataelements.startDate;if(Q&&Q.value&&(Q.value.length>0)&&Q.value[0].actualValue){K=parseInt(Q.value[0].actualValue)}Q=E.datarecords.datagroups[0].dataelements.endDate;if(Q&&Q.value&&(Q.value.length>0)&&Q.value[0].actualValue){L=parseInt(Q.value[0].actualValue)}H=E.datarecords.datagroups[0].dataelements.status;if(H&&H.value&&(H.value.length>0)&&H.value[0].value){G=H.value[0].value}D=h.createProgressFromMCSJobSummary(E);D.claimed=true}N({job:B.job,status:G,progress:D,started:K,ended:L,owner:E.user})},M=function(R){O(c.buildError(v.ErrorCodes.JOB_PROGRESS_WS_ERROR,R))},F=function(R){E=JSON.parse(R.response);if(E&&E.JobInfo){J=E.JobInfo}else{if(E&&E.JobInfoBrief){J=E.JobInfoBrief}}if(J){Q=J.Started;if(Q&&Q["@millis"]&&(Q["@millis"].length>0)&&(Q["@millis"]!=="0")){K=parseInt(Q["@millis"])}Q=J.Ended;if(Q&&Q["@millis"]&&(Q["@millis"].length>0)&&(Q["@millis"]!=="0")){L=parseInt(Q["@millis"])}G=J["@status"];if((G===v.JobStatus.DONE)&&(J["@completionCode"])){if((J["@completionCode"]===v.JobCompletionCode.FAILED)||(J["@completionCode"]===v.JobCompletionCode.SYSTEM_FAILED)){G=v.JobStatus.FAILED}else{if(J["@completionCode"]===v.JobCompletionCode.CANCELED){G=v.JobStatus.ABORTED}else{G=v.JobStatus.COMPLETED}}}if(J.JobSummary){D=h.createProgressFromCOSJobSummary(J.JobSummary);if(!B.job.progress||!B.job.progress.claimed){D.claimed=a(J.JobSummary)}else{D.claimed=B.job.progress.claimed}}N({job:B.job,status:G,progress:D,started:K,ended:L,owner:J.User})}else{O(c.buildError(v.ErrorCodes.JOB_PROGRESS_WS_ERROR,R,B.job.id))}},C=function(){A.call3DSpaceService({uri:"/resources/e6w/service/SMA_JobDetails?jobId="+B.job.id,onComplete:I,onError:M,sessionTimeoutInfo:{handler:O,context:B.job.id}})};P={objectId:B.job.id,onComplete:F,onError:C};if(B.job.progress&&B.job.progress.claimed){P.uri="job/"+B.job.eedJobID+"/summary/brief"}else{P.uri="job/"+B.job.eedJobID+"/summary/full"}if(B.job.executionOptions&&B.job.executionOptions.server){P.serverId=B.job.executionOptions.server}A.callCOSService(P)})}function g(B){return new d(function(F,E){var C={successes:[],failures:[]},G=function(){C.successes=C.successes.concat(B.activityIDs);F(C)},D=function(H){C.failures.push({ids:B.activityIDs,error:c.buildError(v.ErrorCodes.ACTIVITY_DELETE_WS_ERROR,H)});F(C)};A.callSMAProcService({uri:"/activity?simId="+B.studyID,verb:"DELETE",data:JSON.stringify(B.activityIDs),onComplete:G,onError:D,sessionTimeoutInfo:{handler:E,context:B.activityIDs}})})}function e(B){return new d(function(F,E){var C={successes:[],failures:[]},G=function(){C.successes=C.successes.concat(B.jobIDs);F(C)},D=function(H){C.failures.push({ids:B.jobIDs,error:c.buildError(v.ErrorCodes.JOB_DELETE_WS_ERROR,H)});F(C)};A.callSMAProcService({uri:"/jobs",verb:"DELETE",data:JSON.stringify(B.jobIDs),onComplete:G,onError:D,sessionTimeoutInfo:{handler:E,context:B.jobIDs}})})}function u(C,B){var D=true,F,E;if(C&&B&&(Object.keys(C).length===Object.keys(B).length)){F=Object.keys(C);for(E=0;E<F.length;E++){if(!(C[F[E]]&&B[F[E]])||(C[F[E]].toLowerCase()!==B[F[E]].toLowerCase())){D=false;break}}}else{D=false}return D}z.getExecutedJobs=function(D){var G={},F=[],E=[],H=[],B,C;return b(D).then(function(I){if(I&&(I.length>0)){I.forEach(function(J){G[J.physicalId]=J});v.executedJobs(t.getStore().getState()).forEach(function(J){if(G.hasOwnProperty(J.id)){J.status=G[J.id].status;E.push(J.id);H.push(J)}});Object.keys(G).forEach(function(J){if(J&&(E.indexOf(J)===-1)){F.push(G[J])}})}}).then(function(){for(C=0;C<F.length;C++){B=h.createTempJobFromPLMJob(F[C]);B.uninitialized=true;H.push(B)}return H})};z.getConfiguringJobs=function(B){return new d(function(E,D){var F=function(J){var H=JSON.parse(J.response),I,L=[],M=[],G=[],N=[],K;if(H&&(H.length>0)){I=H.map(function(O){return O.id});v.configuringJobs(t.getStore().getState()).forEach(function(O){if(I.indexOf(O.id)!==-1){L.push(O.id);N.push(O)}});H.forEach(function(O){if(O.id&&(L.indexOf(O.id)===-1)){M.push(O)}});G=M.map(function(O){return h.getHandler({plmActivity:O,store:t.getStore()})});d.all(G).then(function(O){for(K=0;K<M.length;K++){N.push(O[K].createJobFromPLMActivity(M[K],t.getStore().getState()))}E(N)})}else{E(N)}},C=function(G){D(c.buildError(v.ErrorCodes.ACTIVITIES_WS_ERROR,G))};A.callSMAProcService({uri:"/activity?simId="+B.studyID,onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:null}})})};z.combineJobs=function(B){return new d(function(H){var D=t.getStore(),G=[],F={},C={},E;if(B.jobSets&&(B.jobSets.length>0)){B.jobSets.forEach(function(I){if((I.length>0)&&v.isJobConfiguring(D.getState(),I[0])){I.forEach(function(J){F[J.id]=J})}else{I.forEach(function(J){if((typeof J._activityID!=="undefined")&&J._activityID){C[J._activityID]=J}else{C[J.id]=J}})}})}Object.keys(C).forEach(function(I){if(F.hasOwnProperty(I)){C[I].mainInputFile=F[I].mainInputFile;C[I].configuration=F[I].configuration;C[I].resultsOptions=F[I].resultsOptions;C[I].executionOptions.drmMode=F[I].executionOptions.drmMode;C[I].executionOptions.removeWorkDir=F[I].executionOptions.removeWorkDir;C[I].executionOptions.licenseOptions=F[I].executionOptions.licenseOptions;C[I].executionOptions.station=F[I].executionOptions.station;if(!F[I].executionOptions.workDirectory){E=x.workDirForJob(D.getState(),C[I].id);if(E){C[I].executionOptions.workDirectory=E.id}}else{C[I].executionOptions.workDirectory=F[I].executionOptions.workDirectory}delete F[I]}G.push(C[I])});Object.keys(F).forEach(function(I){G.push(F[I])});H(G)})};z.refreshConfiguringJob=function(B){return new d(function(E,D){var F=function(H){var J=null,I,G=JSON.parse(H.response),L=null,K=null;if(G){for(I=0;I<G.length;I++){if(G[I].id===B.jobID){L=G[I];J=h.getHandler({jobTypeId:B.jobTypeID,store:t.getStore()})}if(G[I].id===B.parentID){K=G[I]}if(L!==null&&((B.parentID===B.studyID)||(K!==null))){break}}}if(L){if(J){J.then(function(M){E({job:M.createJobFromPLMActivity(L,t.getStore().getState(),K)})})}else{D(c.buildError(v.ErrorCodes.JOB_HANDLER_NOT_FOUND,null,B.jobID))}}else{D(c.buildError(v.ErrorCodes.ACTIVITY_NOT_FOUND,null,B.jobID))}},C=function(G){D(c.buildError(v.ErrorCodes.ACTIVITIES_WS_ERROR,G,B.jobID))};A.callSMAProcService({uri:"/activity?simId="+B.studyID,onComplete:F,onError:C,sessionTimeoutInfo:{handler:D,context:B.jobID}})})};z.refreshExecutedJob=function(D){var B={jobID:D.job.id,eedJobID:D.job.eedJobID},E=null,G=(typeof D.job.batchConfiguration!=="undefined"),F=(D.refreshConfiguration&&D.job.uninitialized),C=D.refreshContent;if(D.job.executionOptions&&D.job.executionOptions.server){E=D.job.executionOptions.server}return(C?p(D):d.resolve(D)).then(function(H){if(C){B.inputs=[];B.outputs=[];if(H){H.forEach(function(I){if(I.type===x.Types.SIMOBJECT&&I.objectId){if(I.purpose&&(("both"===I.purpose.toLowerCase())||("output"===I.purpose.toLowerCase()))){B.outputs.push(I.objectId)}}else{if(I.fileInfo&&(I.fileInfo.length>0)){I.fileInfo.forEach(function(J){if(J.versionId&&J.purpose){if("input"===J.purpose.toLowerCase()){B.inputs.push(J.versionId)}else{if("output"===J.purpose.toLowerCase()){B.outputs.push(J.versionId)}}}})}}})}}return D}).then(F?f:function(){return D}).then(function(H){if(F){B.jobType=H.jobType;B.inputs=H.inputs;B.configuration=H.configuration;B.mainInputFile=H.mainInputFile;B.resultsOptions=H.resultsOptions;B.executionOptions=H.executionOptions;B._activityID=H._activityID;if(!B.executionOptions.server&&E){B.executionOptions.server=E}if(H.batchConfiguration){B.batchConfiguration=H.batchConfiguration;G=true}}return D}).then(y).then(function(H){B.status=H.status;B.progress=H.progress;B.started=H.started;B.ended=H.ended;B.owner=H.owner;B.refreshedContent=C;if(G){if(!B.batchConfiguration&&H.job.batchConfiguration){B.batchConfiguration=H.job.batchConfiguration}return k.getBatchJobIterationProgress(B)}else{return H}}).then(function(H){if(H.iterationData){B.iterationData=H.iterationData}return B})};z.refreshUploadJob=function(C){var B={jobID:C.job.id,configuration:{}};return r(C).then(function(D){if(D){B.configuration.attachToJobID=D.attachToJobID;B.configuration.managedDataProjections=D.managedDataProjections}return C}).then(y).then(function(D){B.status=D.status;B.progress=D.progress;B.started=D.started;B.ended=D.ended;B.refreshedContent=false;return B})};z.storeJobConfiguration=function(B){return new d(function(G,F){var D={},C,H=function(){G({jobID:B.job.id})},E=function(I){F(c.buildError(v.ErrorCodes.JOB_FILE_CHECKIN_WS_ERROR,I,B.job.id))};h.getHandler({jobTypeId:B.job.jobType,store:t.getStore()}).then(function(I){D.jobType=B.job.jobType;D.activityDefinition=I.createPLMActivityFromJob(B.job,t.getStore().getState());if(v.isBatchJob(t.getStore().getState(),B.job)){D.plmParameters=I.getPLMParametersFromJobConfiguration(B.job.id)}C=new Blob([JSON.stringify(D)]);C.name=v.TOOL_JOB_CONFIG_FILENAME;A.callUploadLocalFile({file:C,createURL:"/fcs/checkin?oid="+B.job.id+"&dname="+v.TOOL_JOB_CONFIG_FILENAME,createMethod:"PUT",onComplete:H,onFailure:E})})})};z.startJob=function(B){return new d(function(K,M){var J=t.getStore(),H=true,I=null,D,G,E,F=function(N){var O=c.formatCredForDirUpdate(B.credentials);K({eedJobID:N.eedJobID,mcsJobID:N.mcsJobID,serverID:N.serverID,credentials:O,needNewExecDir:H,removeExecDir:I})},C=function(N){var O=v.ErrorCodes.START_JOB_RUNTIME_ERROR;if(N.code===j.ErrorCodes.UNAUTHORIZED_ACCESS_ERROR){O=v.ErrorCodes.JOB_CREATION_UNAUTHORIZED}else{if(N.code===A.ErrorCodes.COS_WS_NOT_FOUND){O=v.ErrorCodes.START_JOB_WS_NOT_FOUND}else{if(N.code===A.ErrorCodes.COS_PRIVATE_STATION_USER_MISMATCH){O=v.ErrorCodes.START_JOB_PRIVATE_STATION_USER_MISMATCH}else{if(N.code===A.ErrorCodes.COS_PRIVATE_STATION_SERVER_MISMATCH){O=v.ErrorCodes.START_JOB_PRIVATE_STATION_SERVER_MISMATCH}else{if(N.code===A.ErrorCodes.COS_PRIVATE_STATION_NOT_FOUND){O=v.ErrorCodes.START_JOB_PRIVATE_STATION_NOT_FOUND}else{if(N.code===A.ErrorCodes.COS_BUILD_JOB_ERROR){O=v.ErrorCodes.START_JOB_BUILD_JOB_ERROR}else{if(N.code===A.ErrorCodes.COS_SSO_LOGIN_REQUEST_ERROR){O=v.ErrorCodes.START_JOB_SSO_LOGIN_REQUEST_ERROR}}}}}}}M(c.buildError(O,{status:500,response:(N.message)?N.message:null},{jobID:B.jobID,credentials:(typeof B.credentials!=="undefined")?B.credentials:null}))},L;D=v.jobWithID(J.getState(),B.jobID);G=v.isBatchJob(J.getState(),D);E=G?k.getBatchJobMainID(D):D.id;if(((typeof D.executionOptions.workDirectory!=="undefined")&&D.executionOptions.workDirectory)||B.workDirID){H=false;if(D.executionOptions.removeWorkDir){I=B.workDirID?B.workDirID:D.executionOptions.workDirectory}}L={jobID:E,onComplete:F,onFailure:C};if(B.serverID){L.serverID=B.serverID}else{if(D.executionOptions.server){L.serverID=D.executionOptions.server}}if(D.executionOptions.drmMode&&(D.executionOptions.drmMode===q.DRMMode.CLOUD)){L.disablePrivateStationCheck=true}if(B.credentials){L.credentials=c.formatCredentials(B.credentials)}if(s.isCloudEnabled(J.getState())){L.tenantID=s.currentWhereUsedTenantID(J.getState())}A.callRunJob(L)})};z.createJobActivity=function(B){return new d(function(H,G){var I=function(J){H({pendingJobID:B.pendingJobID,id:J.response,parentID:B.parentID})},E=function(J){G(c.buildError(v.ErrorCodes.ACTIVITY_CREATE_WS_ERROR,J,B.pendingJobID))},C,F=[],D;C=m.jobTypeWithID(t.getStore().getState(),B.jobTypeID);if(C&&C.options){F=c.deepCopy(C.options);for(D=0;D<F.length;D++){if(F[D].title==="Title"){F[D].value=B.jobTitle;F[D].modified="true"}else{if(B.jobDescription&&F[D].title==="Description"){F[D].value=B.jobDescription;F[D].modified="true"}}}}A.callSMAProcService({uri:"/templates/"+B.jobTypeID+"/instantiate?pid="+B.parentID,verb:"POST",headers:{"Content-Type":"application/ds-json",Accept:"*/*"},data:JSON.stringify(F),onComplete:I,onError:E,sessionTimeoutInfo:{handler:G,context:B.pendingJobID}})})};z.updateJobActivity=function(B){return new d(function(F,E){var G=function(){F({jobID:B.jobID})},C=function(H){E(c.buildError(v.ErrorCodes.ACTIVITY_UPDATE_WS_ERROR,H,B.jobID))},D=v.jobWithID(t.getStore().getState(),B.jobID);h.getHandler({jobId:B.jobID,store:t.getStore()}).then(function(H){A.callSMAProcService({uri:"/activity/"+B.jobID+"?simId="+B.studyID,verb:"PUT",data:H.createPLMActivityFromJob(D,t.getStore().getState()),onComplete:G,onError:C,sessionTimeoutInfo:{handler:E,context:B.jobID}})})})};z.updateJob=function(B){return new d(function(F,E){var G=function(){F({jobID:B.jobID})},C=function(H){E(c.buildError(v.ErrorCodes.JOB_UPDATE_WS_ERROR,H,B.jobID))},D=v.jobWithID(t.getStore().getState(),B.jobID);h.getHandler({jobId:B.jobID,store:t.getStore()}).then(function(H){A.callSMAProcService({uri:"/jobs/"+B.jobID,verb:"PUT",data:H.createPLMJobFromJob(D),onComplete:G,onError:C,sessionTimeoutInfo:{handler:E,context:B.jobID}})})})};z.updateJobClone=function(B){return new d(function(E){var D,C;B.cloneJob.inputs=c.deepCopy(B.originalJob.inputs);B.cloneJob.mainInputFile=c.deepCopy(B.originalJob.mainInputFile);B.cloneJob.configuration=c.deepCopy(B.originalJob.configuration);B.cloneJob.executionOptions=c.deepCopy(B.originalJob.executionOptions);B.cloneJob.jobType=B.originalJob.jobType;D=B.cloneJob.resultsOptions.generateResultsUnitsDefault;B.cloneJob.resultsOptions=c.deepCopy(B.originalJob.resultsOptions);B.cloneJob.resultsOptions.generateResultsUnitsDefault=D;C=B.cloneJob.resultsOptions.generateResultsUnits?!u(B.cloneJob.resultsOptions.generateResultsUnits,D):false;B.cloneJob.resultsOptions.generateResultsUnitsEnabled=C;E({cloneJob:B.cloneJob})})};z.abortJob=function(B){return new d(function(G,F){var C=t.getStore(),E,H=function(){G({jobID:B.jobID})},D=function(I){F(c.buildError(v.ErrorCodes.JOB_ABORT_WS_ERROR,I,B.jobID))};E=v.jobWithID(C.getState(),B.jobID);if(E&&E.eedJobID&&E.executionOptions.server&&v.isJobRunning(C.getState(),E)){A.callCOSService({uri:"execution/"+E.eedJobID+"/cancel",verb:"PUT",headers:{Accept:"text/plain"},serverId:E.executionOptions.server,objectId:E.id,onComplete:H,onError:D})}else{F(c.buildError(v.ErrorCodes.JOB_ACTION_NOT_ALLOWED_ERROR,null,{jobID:B.jobID}))}})};z.deleteJobs=function(D){var F,C=[],E=[],G=[],B=t.getStore();D.jobIDs.forEach(function(H){F=v.jobWithID(B.getState(),H);if(v.JobStatus.CONFIGURING===F.status){C.push(v.isBatchJob(B.getState(),F)?k.getBatchJobMainID(F):H)}else{E.push(H)}});if(C.length>0){G.push(d.resolve({studyID:D.studyID,activityIDs:C}).then(g))}if(E.length>0){G.push(d.resolve({studyID:D.studyID,jobIDs:E}).then(e))}return d.all(G).then(function(H){var I={successes:[],failures:[]};H.forEach(function(J){I.successes=I.successes.concat(J.successes);I.failures=I.failures.concat(J.failures)});return I})};z.setJobDetails=function(B){return new d(function(F,E){var C,G=function(){F({jobID:B.jobID,description:B.description})},D=function(H){E(c.buildError(v.ErrorCodes.JOB_DETAILS_WS_ERROR,H,B.jobID))};C={datarecords:{datagroups:[{updateAction:"MODIFY",objectId:B.jobID,dataelements:{title:{value:[{value:B.title}]},description:{value:[{value:B.description}]}}}],name:"SMA_JobDetails"},name:"SMA_JobDetails"};A.call3DSpaceService({uri:"/resources/e6w/service/SMA_JobDetails",verb:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},data:"updateWidget="+JSON.stringify(C),onComplete:G,onError:D,sessionTimeoutInfo:{handler:E,context:B.jobID}})})};z.setJob3DXParameters=function(B){return new d(function(F,E){var D,G=function(){F({jobID:B.jobID,tenantID:B.tenantID,myAppsURL:B.myAppsURL})},C=function(H){E(c.buildError(v.ErrorCodes.JOB_PARAMETERS_WS_ERROR,H,B.jobID))};if(v.isJobConfiguring(t.getStore().getState(),B.jobID)){D={datarecords:{datagroups:[{updateAction:"CREATE",objectId:B.jobID,dataelements:{type:{value:[{value:"string"}]},name:{value:[{value:"MX_ONLINE_INSTANCE"}]},mode:{value:[{value:"input"}]},valuetype:{value:[{value:"single"}]},Value:{value:[{value:B.tenantID}]}}},{updateAction:"CREATE",objectId:B.jobID,dataelements:{type:{value:[{value:"string"}]},name:{value:[{value:"MyAppsUrl"}]},mode:{value:[{value:"input"}]},valuetype:{value:[{value:"single"}]},Value:{value:[{value:B.myAppsURL}]}}}],name:"SMA_Parameter"},name:"SMA_Parameter"};A.call3DSpaceService({uri:"/resources/e6w/service/SMA_Parameter?objectId="+B.jobID,verb:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},data:"updateWidget="+JSON.stringify(D),onComplete:G,onError:C,sessionTimeoutInfo:{handler:E,context:B.jobID}})}else{E(c.buildError(v.ErrorCodes.JOB_ACTION_NOT_ALLOWED_ERROR,null,{jobID:B.jobID}))}})};z.getFileSpecArray=function(C){var H,F=-1,B,E,G,D=[];C=C.trim().replace(/'/g,'"');do{H=C.indexOf('"');if(H>=0){F=C.indexOf('"',H+1);if(F>=0){G=C.slice(H,F+1);C=C.substr(0,H)+C.substr(F+1);if(G.length>2){D.push(G)}H=F+1}}}while(H>=0&&F>=0);B=C.split(/[;,\s]/);for(E=0;E<B.length;E++){G=B[E].trim();if(G.length>0){D.push(G)}}return D};z.addJobOutput=function(B){return new d(function(I,H){var C=t.getStore(),J=function(){I({jobID:B.jobID,outputID:B.outputID})},E=function(K){H(c.buildError(v.ErrorCodes.JOB_ADD_OUTPUT_WS_ERROR,K,{jobID:B.jobID,outputID:B.outputID}))},G,D,F;G=v.jobWithID(C.getState(),B.jobID);D=l.managedDataWithID(C.getState(),B.outputID);if(G&&v.isJobExecuted(C.getState(),G)&&D&&((l.Types.FILEVERSION===D.type)||(l.Types.SIMULATION_OBJECT===D.type))){F={simulationId:n.studyObject(C.getState()).id,objectId:B.outputID};if(l.Types.FILEVERSION===D.type){F.objectId=l.managedDataParent(C.getState(),l.managedDataParent(C.getState(),D.id,false).id,false).id;F.fileName=l.managedDataParent(C.getState(),D.id,false).name;F.fileVersion=D.version}A.callSMAProcService({uri:"/jobs/"+B.jobID+"/outputs",verb:"POST",data:F,onComplete:J,onError:E,sessionTimeoutInfo:{handler:H,context:{jobID:B.jobID,outputID:B.outputID}}})}else{H(c.buildError(v.ErrorCodes.JOB_ACTION_NOT_ALLOWED_ERROR,null,{jobID:B.jobID,outputID:B.outputID}))}})};return z});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/execution-actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-cos/selectors"],function(c,e,d,b){var a={};a.setJobExecutionOptions=function(g,f){return{type:e.SET_JOB_EXECUTION_OPTIONS,jobID:g,options:f}};a.setJobExecutionServer=function(g,f){return{type:e.SET_JOB_EXECUTION_SERVER,jobID:g,serverID:f}};a.setJobExecutionDRMMode=function(g,f){return{type:e.SET_JOB_EXECUTION_DRM_MODE,jobID:g,drmMode:f}};a.setCredentialsID=function(g,f){return{type:e.SET_JOB_EXECUTION_CREDENTIALS_ID,jobID:g,credentialsID:f}};a.setJobExecutionStation=function(k,j){var g=d.jobExecutionOptions(c.getStore().getState(),k),f=g?g.server:null,i=b.stationWithID(c.getStore().getState(),{id:f},j),h=i?i.os:null;return{type:e.SET_JOB_EXECUTION_STATION,jobID:k,stationID:j,stationOS:h}};a.setJobExecutionOS=function(g,f){return{type:e.SET_JOB_EXECUTION_OS,jobID:g,os:f}};a.setJobExecutionNumProcs=function(g,f){return{type:e.SET_JOB_EXECUTION_NUM_PROCS,jobID:g,numProcs:f}};a.setJobExecutionCustomDRMCores=function(h,f,g){return{type:e.SET_JOB_EXECUTION_CUSTOM_DRM_CORES,jobID:h,numCores:f,coresProperty:g}};a.setJobExecutionLicenseOptions=function(g,f){return{type:e.SET_JOB_EXECUTION_LICENSE_OPTIONS,jobID:g,licenseOptions:f}};a.setJobExecutionSXALicenseType=function(g,f){return{type:e.SET_JOB_EXECUTION_SXALICENSE_TYPE,jobID:g,licenseType:f}};a.setJobExecutionSXALicenseFeatures=function(g,f){return{type:e.SET_JOB_EXECUTION_SXALICENSE_FEATURES,jobID:g,features:f}};a.setJobExecutionSXALicenseModelSize=function(g,f){return{type:e.SET_JOB_EXECUTION_SXALICENSE_MODEL_SIZE,jobID:g,modelSize:f}};a.setJobExecutionSXALicensePerformance=function(g,f){return{type:e.SET_JOB_EXECUTION_SXALICENSE_PERFORMANCE,jobID:g,performance:f}};a.setJobExecutionWorkDirectory=function(g,f){return{type:e.SET_JOB_EXECUTION_WORK_DIR,jobID:g,workDirectoryID:f}};a.setJobExecutionRemoveWorkDirectory=function(g,f){return{type:e.SET_JOB_EXECUTION_REMOVE_WORK_DIR,jobID:g,removeWorkDir:f}};a.setBatchJobOptions=function(h,g,f){return{type:e.SET_BATCH_JOB_OPTIONS,jobID:h,maxBatchSize:g,isSequential:f}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-work-data/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-app-alerts/selectors","UWA/Class/Promise"],function(f,g,j,a,e,d,m,h){var c={};var i=window.Promise||h;function b(n){var o=null;if(n){o={};o.windowsUser=n.windowsUser;o.linuxUser=n.linuxUser;o.domainName=n.domainName}return o}function l(r,p,n){var t,s,o,q=function(x,y,v){if((typeof x.isDirectory!=="undefined")&&x.isDirectory){for(var w=0;w<x.fileList.length;w++){t=(v&&v.id)?(v.id+"/"):"";t+=x.fileList[w].name;s={persistenceStatus:j.PersistenceStatus.CLEAN,id:t,type:d.Types.FILE,name:x.fileList[w].name,size:x.fileList[w].fileSize,modified:g.getTimestamp(x.fileList[w].modified)};o={id:t,parent:v.id,children:[]};y.push(s);v.children.push(o)}for(var u=0;u<x.directoryList.length;u++){t=(v&&v.id)?(v.id+"/"):"";t+=x.directoryList[u].name;s={persistenceStatus:j.PersistenceStatus.CLEAN,id:t,type:d.Types.FOLDER,name:x.directoryList[u].name,modified:g.getTimestamp(x.directoryList[u].lastModified)};o={id:t,parent:v.id,children:[]};y.push(s);v.children.push(o);q(x.directoryList[u],y,o)}}};q(r,p,n)}function k(n){var o={};o.msg=d.ErrorCodes.REFRESH_WORK_DATA_ERROR;switch(n.error){case 2:o.msg=d.ErrorCodes.COS_JOB_NOT_DISPATCHED;break;case 3:o.msg=d.ErrorCodes.EXE_DIR_PATH_NOT_FOUND;break;case 4:o.msg=d.ErrorCodes.FILE_MON_JOB_USR_MISMATCH;break;case 5:o.msg=d.ErrorCodes.FILE_MON_JOB_NOT_STARTED;break;case 6:o.msg=d.ErrorCodes.TRANSIENT_MON_FINISHED;o.level=m.Level.INFO;break;case 7:o.msg=d.ErrorCodes.FILE_MON_URL_NOT_FOUND;break;case 8:o.msg=d.ErrorCodes.CREDENTILAS_NOT_SUPPIED;break;case 9:o.msg=d.ErrorCodes.EXE_DIR_CONTENT_NOT_FOUND;break;case 10:o.msg=d.ErrorCodes.REFRESH_WORK_DATA_ERROR;break;default:o.msg=d.ErrorCodes.REFRESH_WORK_DATA_ERROR}return o}c.initializeExecDir=function(n){return new i(function(u,t){var q,p,s=null,o=null,v=function(w){u({execDirID:n.execDirID,path:w})},r=function(){if(e.isJobClaimed(f.getStore().getState(),q.mcsJobID)){t(g.buildError(d.ErrorCodes.INITIALIZE_EXEC_DIR_ERROR,null,n.execDirID))}else{u()}};q=d.workDataWithID(f.getStore().getState(),n.execDirID);p={execDir:q,onComplete:v,onFailure:r,iteration:n.iteration};if(q.server&&(q.server.length>0)){p.serverID=q.server}if(q.station&&(q.station.length>0)){p.station=q.station}if(e.isBatchJob(f.getStore().getState(),q.mcsJobID)){s=e.jobWithID(f.getStore().getState(),q.mcsJobID);if(s._plmActivity&&s._plmActivity.attributes&&s._plmActivity.attributes.definition&&s._plmActivity.attributes.definition.flowItem){o=s._plmActivity.attributes.definition.flowItem.id}else{o=s._activityID}p.activityID=o;p.iteration=q.iteration}a.callInitExecDir(p)})};c.refreshWorkData=function(n){return new i(function(s,r){var p,u,o,t=function(y){var x=[],w={},v;w={id:n.workDataID,children:[]};l(y.data,x,w);v={workDataID:n.workDataID,modified:g.getTimestamp(y.data.lastModified),descendants:x,descendantHierarchy:w,execDirID:p.id,credentials:b(n.credentials)};if(y.filemonJobID){v.filemonJobID=y.filemonJobID}if(y.filemonURL){v.filemonURL=y.filemonURL}s(v)},q=function(x){var v={workDataID:n.workDataID,execDirID:p.id,credentials:b(n.credentials)},w=k(x.error);if(x.filemonJobID){v.filemonJobID=x.filemonJobID}if(x.filemonURL){v.filemonURL=x.filemonURL}r(g.buildError(w.msg,null,v,w.level))};if(d.workDataType(f.getStore().getState(),n.workDataID)===d.Types.FILE){s({workDataID:n.workDataID,objects:[]})}else{p=d.workDataExecDir(f.getStore().getState(),n.workDataID);u=d.workDataRelPath(f.getStore().getState(),n.workDataID);o={execDir:p,credentials:n.credentials,subdirPath:u,onComplete:t,onFailure:q};a.callLs(o)}})};return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/outputs-actions",["DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/action-impls"],function(c,b){var a={};a.setJobOutputFileSpecs=function(f,e){var d=null;if(Array.isArray(e)){d=e.slice()}else{d=b.getFileSpecArray(e)}return{type:c.SET_JOB_OUTPUT_FILE_SPECS,jobID:f,outputFileSpecs:d}};a.setJobOutputFileSpecsEnabled=function(e,d){return{type:c.SET_JOB_OUTPUT_FILE_SPECS_ENABLED,jobID:e,outputFileSpecsEnabled:d}};a.addJobOutput=function(e,d){return{type:c.ADD_JOB_OUTPUT,payload:{promise:b.addJobOutput({jobID:e,outputID:d}),data:{jobID:e,outputID:d}}}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/job-actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-domain-jobs/action-types","DS/SMAPoweredByState/ad-state-domain-jobs/action-impls","DS/SMAPoweredByState/ad-state-domain-jobs/batch-action-impls","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","UWA/Class/Promise"],function(e,f,b,l,j,d,k,a,i,g){var c={};var h=window.Promise||g;c.refreshJobs=function(n,m){var o=[];o.push(l.getExecutedJobs({studyID:n}));if(m){o.push(l.getConfiguringJobs({studyID:n}))}return{type:b.REFRESH_JOBS,payload:{promise:h.all(o).then(function(p){return{jobSets:p}}).then(l.combineJobs)}}};c.refreshJobData=function(p,m,o){var n=d.jobWithID(e.getStore().getState(),p);return{type:b.REFRESH_JOB_DATA,payload:{promise:(n.kind===d.JobKind.UPLOAD)?l.refreshUploadJob({job:n,refreshConfiguration:m,refreshContent:o}):l.refreshExecutedJob({job:n,refreshConfiguration:m,refreshContent:o}),data:{jobID:p}}}};c.storeJobConfiguration=function(n){var m=d.jobWithID(e.getStore().getState(),n);return{type:b.STORE_JOB_CONFIGURATION,payload:{promise:l.storeJobConfiguration({job:m}),data:{jobID:n}}}};c.createJob=function(r,q,s,u){var t=e.getStore(),n=f.generateID(),m,v,p,o;m=k.jobTypeWithID(t.getState(),q);v=s?s:m.title;p=u?u:null;o={type:b.CREATE_JOB,payload:{promise:l.createJobActivity({parentID:r,jobTypeID:q,jobTitle:v,jobDescription:p,pendingJobID:n}).then(function(w){return{studyID:r,jobID:w.id,jobTypeID:q}}).then(l.refreshConfiguringJob).then(function(w){w.job.executionOptions.drmMode=a.isCloudEnabled(t.getState())?i.DRMMode.CLOUD:i.DRMMode.FIPER;return{pendingJobID:n,job:w.job}}),data:{pendingJobID:n,jobTypeID:q,title:v}}};return o};c.createBatchJob=function(r,q,s,u){var t=e.getStore(),n=f.generateID(),m,v,p,o;m=k.jobTypeWithID(t.getState(),q);v=s?s:m.title;p=u?u:null;o={type:b.CREATE_BATCH_JOB,payload:{promise:j.createBatchJobWrapper({studyID:r,jobTitle:v}).then(function(w){return{parentID:w.loopActivityID,jobTypeID:q,jobTitle:v,jobDescription:p,pendingJobID:n}}).then(l.createJobActivity).then(function(w){return{studyID:r,jobID:w.id,jobTypeID:q,parentID:w.parentID}}).then(j.configureBatchJobToolActivity).then(l.refreshConfiguringJob).then(function(w){w.job.executionOptions.drmMode=a.isCloudEnabled(t.getState())?i.DRMMode.CLOUD:i.DRMMode.FIPER;return{pendingJobID:n,job:w.job}}),data:{pendingJobID:n,jobTypeID:q,title:v}}};return o};c.cloneJob=function(q,p,r,s){var m=f.generateID(),u,t,o,n;u=d.jobWithID(e.getStore().getState(),p);t=r?r:u.title;o=s?s:(u.description?u.description:null);n={type:b.CLONE_JOB,payload:{promise:l.createJobActivity({studyID:q,parentID:q,jobTypeID:u.jobType,jobTitle:t,jobDescription:o,pendingJobID:m}).then(function(v){return{studyID:q,jobID:v.id,jobTypeID:u.jobType}}).then(l.refreshConfiguringJob).then(function(v){return{studyID:q,originalJob:u,cloneJob:v.job}}).then(l.updateJobClone).then(function(v){return{pendingJobID:m,job:v.cloneJob}}),data:{pendingJobID:m,jobTypeID:u.jobType,originalJob:u,title:t}}};return n};c.startJob=function(p,q,m,o,n){return function(r){return r({type:b.START_JOB,payload:{promise:l.startJob({jobID:q,serverID:m,workDirID:o,credentials:(typeof n!=="undefined")?n:null}).then(function(s){return{jobID:q,eedJobID:s.eedJobID,mcsJobID:s.mcsJobID,serverID:m,credentials:(typeof s.credentials!=="undefined")?s.credentials:null,needNewExecDir:s.needNewExecDir,removeExecDir:s.removeExecDir}}),data:{jobID:q}}})}};c.updateJob=function(n,o){var m=d.jobWithID(e.getStore().getState(),o);return{type:b.UPDATE_JOB,payload:{promise:(d.JobStatus.CONFIGURING===m.status)?l.updateJobActivity({studyID:n,jobID:o}):l.updateJob({jobID:o}),data:{jobID:o}}}};c.updateBatchJob=function(n,o){var m={studyID:n,jobID:o};if(d.isJobConfiguring(e.getStore().getState(),o)){return{type:b.UPDATE_BATCH_JOB,payload:{promise:l.updateJobActivity(m).then(function(){return m}).then(j.updateBatchJobInputs).then(j.updateBatchJobActivities),data:{jobID:o}}}}else{return{type:b.UPDATE_BATCH_JOB,payload:{promise:l.updateJob(m),data:{jobID:o}}}}};c.abortJob=function(m){return{type:b.ABORT_JOB,payload:{promise:l.abortJob({jobID:m}),data:{jobID:m}}}};c.deleteJobs=function(n,m){return{type:b.DELETE_JOBS,payload:{promise:l.deleteJobs({studyID:n,jobIDs:m}),data:m}}};c.setJobTitle=function(o,n){var m=d.jobWithID(e.getStore().getState(),o);if(d.JobStatus.CONFIGURING===m.status){return{type:b.SET_JOB_TITLE,jobID:o,title:n}}else{return{type:b.SET_JOB_TITLE,payload:{promise:l.setJobDetails({jobID:o,title:n,description:m.description}),data:{jobID:o,title:n}}}}};c.setJobDescription=function(o,m){var n=d.jobWithID(e.getStore().getState(),o);if(d.JobStatus.CONFIGURING===n.status){return{type:b.SET_JOB_DESCRIPTION,jobID:o,description:m}}else{return{type:b.SET_JOB_DESCRIPTION,payload:{promise:l.setJobDetails({jobID:o,title:n.title,description:m}),data:{jobID:o,description:m}}}}};c.setJobWorkDirectory=function(n,m){return{type:b.SET_JOB_WORK_DIRECTORY,jobID:n,execDirID:m}};c.setJobReady=function(n,m){return{type:b.SET_JOB_READY,jobID:n,ready:m}};c.setJobStatus=function(n,m){return{type:b.SET_JOB_STATUS,jobID:n,status:m}};c.setJob3DXParameters=function(o,n,m){return{type:b.SET_JOB_3DX_PARAMETERS,payload:{promise:l.setJob3DXParameters({jobID:o,tenantID:n,myAppsURL:m}),data:{jobID:o,tenantID:n,myAppsURL:m}}}};c.markHiddenJobProcessing=function(o){var m=d.jobWithID(e.getStore().getState(),o),n=m.title+d.HIDDEN_JOB_PROCESSING_MARKER;return{type:b.SET_JOB_TITLE,payload:{promise:l.setJobDetails({jobID:o,title:n,description:m.description}),data:{jobID:o,title:n}}}};c.markHiddenJobProcessed=function(o){var m=d.jobWithID(e.getStore().getState(),o),n=m.title+d.HIDDEN_JOB_PROCESSED_MARKER;return{type:b.SET_JOB_TITLE,payload:{promise:l.setJobDetails({jobID:o,title:n,description:m.description}),data:{jobID:o,title:n}}}};return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-job-types/actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-job-types/action-types","DS/SMAPoweredByState/ad-state-domain-job-types/action-impls","DS/SMAPoweredByState/ad-state-domain-job-types/selectors"],function(d,e,c,a){var b={};b.refreshJobTypes=function(){return{type:e.REFRESH_JOB_TYPES,payload:{promise:c.getJobTypes()}}};b.refreshJobTypeOptions=function(g){var f=a.jobTypeWithID(d.getStore().getState(),g);return{type:e.REFRESH_JOB_TYPE_OPTIONS,payload:{promise:c.getJobTypeOptions({jobType:f}),data:{jobTypeID:g}}}};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-jobs/actions",["DS/SMAPoweredByState/ad-state-domain-jobs/job-actions","DS/SMAPoweredByState/ad-state-domain-jobs/inputs-actions","DS/SMAPoweredByState/ad-state-domain-jobs/arguments-actions","DS/SMAPoweredByState/ad-state-domain-jobs/envvars-actions","DS/SMAPoweredByState/ad-state-domain-jobs/outputs-actions","DS/SMAPoweredByState/ad-state-domain-jobs/results-actions","DS/SMAPoweredByState/ad-state-domain-jobs/execution-actions"],function(g,h,c,e,f,a,d){var b={};b.refreshJobs=g.refreshJobs;b.refreshJobData=g.refreshJobData;b.storeJobConfiguration=g.storeJobConfiguration;b.createJob=g.createJob;b.createBatchJob=g.createBatchJob;b.cloneJob=g.cloneJob;b.startJob=g.startJob;b.updateJob=g.updateJob;b.updateBatchJob=g.updateBatchJob;b.abortJob=g.abortJob;b.deleteJobs=g.deleteJobs;b.setJobTitle=g.setJobTitle;b.setJobDescription=g.setJobDescription;b.setJobReady=g.setJobReady;b.setJobStatus=g.setJobStatus;b.setJob3DXParameters=g.setJob3DXParameters;b.markHiddenJobProcessing=g.markHiddenJobProcessing;b.markHiddenJobProcessed=g.markHiddenJobProcessed;b.setJobInputs=h.setJobInputs;b.populateBatchIterationJobInputs=h.populateBatchIterationJobInputs;b.setJobMainInput=h.setJobMainInput;b.populateBatchIterationJobMainInput=h.populateBatchIterationJobMainInput;b.addJobInput=h.addJobInput;b.removeJobInput=h.removeJobInput;b.removeAllJobInputs=h.removeAllJobInputs;b.setJobArguments=c.setJobArguments;b.addJobArgument=c.addJobArgument;b.setJobArgumentValue=c.setJobArgumentValue;b.removeJobArgument=c.removeJobArgument;b.removeAllJobArguments=c.removeAllJobArguments;b.setJobCommandValue=c.setJobCommandValue;b.setJobEnvironmentVariables=e.setJobEnvironmentVariables;b.addJobEnvironmentVariable=e.addJobEnvironmentVariable;b.setJobEnvironmentVariableValue=e.setJobEnvironmentVariableValue;b.removeJobEnvironmentVariable=e.removeJobEnvironmentVariable;b.removeAllJobEnvironmentVariables=e.removeAllJobEnvironmentVariables;b.setJobOutputFileSpecs=f.setJobOutputFileSpecs;b.setJobOutputFileSpecsEnabled=f.setJobOutputFileSpecsEnabled;b.addJobOutput=f.addJobOutput;b.setJobGenerateResults=a.setJobGenerateResults;b.setJobGenerateResultsUnits=a.setJobGenerateResultsUnits;b.setJobGenerateResultsUnitsEnabled=a.setJobGenerateResultsUnitsEnabled;b.setJobGenerateResultsSourceFilename=a.setJobGenerateResultsSourceFilename;b.setJobGenerateResultsTitle=a.setJobGenerateResultsTitle;b.setJobExecutionOptions=d.setJobExecutionOptions;b.setJobExecutionServer=d.setJobExecutionServer;b.setJobExecutionDRMMode=d.setJobExecutionDRMMode;b.setCredentialsID=d.setCredentialsID;b.setJobExecutionStation=d.setJobExecutionStation;b.setJobExecutionOS=d.setJobExecutionOS;b.setJobExecutionNumProcs=d.setJobExecutionNumProcs;b.setJobExecutionCustomDRMCores=d.setJobExecutionCustomDRMCores;b.setJobExecutionLicenseOptions=d.setJobExecutionLicenseOptions;b.setJobExecutionSXALicenseType=d.setJobExecutionSXALicenseType;b.setJobExecutionSXALicenseFeatures=d.setJobExecutionSXALicenseFeatures;b.setJobExecutionSXALicenseModelSize=d.setJobExecutionSXALicenseModelSize;b.setJobExecutionSXALicensePerformance=d.setJobExecutionSXALicensePerformance;b.setJobExecutionWorkDirectory=d.setJobExecutionWorkDirectory;b.setJobExecutionRemoveWorkDirectory=d.setJobExecutionRemoveWorkDirectory;b.setBatchJobOptions=d.setBatchJobOptions;return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-work-data/actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-domain-work-data/action-types","DS/SMAPoweredByState/ad-state-domain-work-data/action-impls","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors"],function(e,d,g,c,a,f){var b={};b.createExecDir=function(o,k,l){var n=e.getStore().getState(),m=f.jobWithID(n,o),j=(parseInt(l)===l)?"iteration"+l.toString():"",h=f.batchJobIterationCount(n,o),i=new Date();return{type:g.CREATE_EXEC_DIR,execDir:{persistenceStatus:d.PersistenceStatus.CLEAN,id:"execdir"+m.id+j,name:m.title+" "+i.toLocaleString().replace(/\u200E/g,"").replace(/\u200F/g,""),type:a.Types.EXECDIR,server:(typeof m.executionOptions.server!=="undefined")?m.executionOptions.server:null,station:(typeof m.executionOptions.station!=="undefined")?m.executionOptions.station:null,path:null,modified:i.getTime(),eedJobID:m.eedJobID,mcsJobID:m.id,credentials:(typeof k!=="undefined")?k:null,accessDisabled:false,removeAfterExecution:(typeof m.executionOptions.removeWorkDir!=="undefined")?m.executionOptions.removeWorkDir:false,iteration:parseInt(l)===l?l:null,iterationCount:h}}};b.initializeExecDir=function(i,h){return{type:g.INITIALIZE_EXEC_DIR,payload:{promise:c.initializeExecDir({execDirID:i,iteration:h}),data:{execDirID:i}}}};b.setExecDirCredentials=function(i,h){return{type:g.SET_EXEC_DIR_CREDENTIALS,execDirID:i,credentials:h}};b.clearExecDirFileMonitor=function(h){return{type:g.CLEAR_EXEC_DIR_FILEMONITOR,execDirID:h}};b.removeExecDir=function(h){return{type:g.REMOVE_EXEC_DIR,execDirID:h}};b.markForRemoval=function(h){return{type:g.MARK_FOR_REMOVAL,execDirID:h}};b.refreshWorkData=function(i,j,h){return{type:g.REFRESH_WORK_DATA,payload:{promise:c.refreshWorkData({workDataID:i,credentials:(typeof h!=="undefined")?h:null,iteration:(typeof j!=="undefined")?j:null}),data:{workDataID:i}}}};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors"],function(c,d){var a={};function b(n,k,h,l){var m=c.getStore(),f=null,e,g,j;e=d.managedDataFilesWithName(m.getState(),h,(k?k:n));if(e.length===1){g=d.managedDataChildren(m.getState(),e[0].id);for(j=0;j<g.length;j++){if(g[j].version===l){f=g[j].id;break}}}return f}a.getAvailableUploadedManagedData=function(f){var e=[],g;f.projections.forEach(function(h){g=b(h.containerID,h.documentID,h.fileName,h.version);if(g){e.push(g)}});return e};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-app/selectors","UWA/Class/Promise"],function(d,e,h,a,b,f){var c={};var i="OnPremise";var g=window.Promise||f;c.getMyAppsURL=function(){return a.getDashboard().then(function(j){return j.fetchMyappsUri()})};c.initPlatformInfo=function(){var j;return a.getDashboard().then(function(k){j=k;return j.getPlatforms(true)}).then(function(k){var l=j.getCurrentPlatform();return{spaceURL:j.getMcsUri(),platforms:k,currentPlatform:l,cloudEnabled:(l&&(l.toLowerCase()!==i.toLowerCase()))}})};c.initWhereUsedTenantInfo=function(){var j;return a.getDashboard().then(function(k){j=k;return j.getWhereUsedTenantInfo(true)}).then(function(k){return({whereUsedTenants:k,currentWhereUsedTenant:(k&&(k.length>0))?k[0]:null,dslsURL:j.getDslsUrl()})})};c.getLicenses=function(){return new g(function(n,m){var o=function(p){var q=JSON.parse(p.response),r=[];Object.keys(b.AppLicenses).forEach(function(s){if((typeof q[b.AppLicenses[s]]!=="undefined")&&(q[b.AppLicenses[s]].toLowerCase()==="true")){r.push(b.AppLicenses[s])}});n({licenses:r})},k=function(p){m(e.buildError(b.ErrorCodes.APPS_LICENSE_WS_ERROR,p))},l,j=true;l="/resources/slmservices/license?appNames=";Object.keys(b.AppLicenses).forEach(function(p){if(!j){l+=","}else{j=false}l+=b.AppLicenses[p]});a.call3DSpaceService({uri:l,onComplete:o,onError:k,sessionTimeoutInfo:{handler:m,context:null}})})};c.initSecurityContextInfo=function(){return a.getDashboard().then(function(j){return j.addSecurityContextPreference()})};return c});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-app/actions",["DS/SMAPoweredByState/ad-state-app/action-types","DS/SMAPoweredByState/ad-state-app/action-impls","DS/SMAPoweredByState/ad-state-app/selectors"],function(c,b,d){var a={};a.refreshApp=function(){var e={};e.transientWidget=(window.widget&&window.widget.id&&(window.widget.id.indexOf(d.TRANSIENT_WIDGET_PREFIX)===0));return{type:c.REFRESH_APP,payload:{promise:b.getMyAppsURL().then(function(f){e.myAppsURL=f;return e}).then(b.initPlatformInfo).then(function(f){e.spaceURL=f.spaceURL;e.platforms=f.platforms;e.currentPlatform=f.currentPlatform;e.cloudEnabled=f.cloudEnabled;return e}).then(function(){if(e.cloudEnabled){return b.initWhereUsedTenantInfo()}else{return null}}).then(function(f){if(e.cloudEnabled){e.whereUsedTenants=f.whereUsedTenants;e.currentWhereUsedTenant=f.currentWhereUsedTenant;e.dslsURL=f.dslsURL}else{e.whereUsedTenants=null;e.currentWhereUsedTenant=null;e.dslsURL=null}return e}).then(b.getLicenses).then(function(f){e.licenses=f.licenses;return e}).then(b.initSecurityContextInfo).then(function(f){e.securityContext=f;return e})}}};a.addError=function(e){return{type:c.ADD_ERROR,error:e}};a.removeError=function(e){return{type:c.REMOVE_ERROR,error:e}};a.removeAllErrors=function(){return{type:c.REMOVE_ALL_ERRORS}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-managed-data/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-app-credentials/selectors","UWA/Class/Promise"],function(o,j,c,z,k,r,l,v,m,n,g){var y={};var q={FILE:"File",FILEVERSION:"File Version",FOLDER:"Simulation Folder",CATEGORY_INTERNALDATA:"Simulation Category - Internal Data"};var d="failed to commit";var e=window.Promise||g;function f(D,C){var B=null,A=function(G,H){var E=null,F;if(G.info.objId===H){E=G}else{for(F=0;F<G.children.length;F++){E=A(G.children[F],H);if(E){break}}}return E};if(D&&D.hasOwnProperty("ROOT")){B=A(D.ROOT,C)}return B}function h(C,D){var B=null,A=function(H,G){var E=null,F;if(H.info.type===D){E=H}else{for(F=0;F<H.children.length;F++){E=A(H.children[F],G);if(E){break}}}return E};if(C&&C.hasOwnProperty("ROOT")){B=A(C.ROOT,D)}return B}function t(C,B){var A={};A.persistenceStatus=j.PersistenceStatus.CLEAN;if(q.FILE===C.info.type){A.id=B+C.info.fileName;A.type=k.Types.FILE;A.name=C.info.fileName;A.size=null;A.modified=C.info.fileModifiedMillis?c.parseTimestamp(C.info.fileModifiedMillis):0;A.latestVersion=C.info.fileLatestVer;A.latestVersionInvalid=((typeof C.info.isFileLtstVerUncommitted!=="undefined")&&C.info.isFileLtstVerUncommitted&&(C.info.isFileLtstVerUncommitted.toUpperCase()==="TRUE"))}else{if(q.FILEVERSION===C.info.type){A.id=C.info.fileContainerDocId;A.type=k.Types.FILEVERSION;A.name=C.info.fileName;A.size=C.info.fileSize;if(C.info.fileModifiedMillis&&(C.info.fileModifiedMillis!=="0")){A.modified=c.parseTimestamp(C.info.fileModifiedMillis)}else{A.modified=c.parseTimestamp(C.info.fileContainerDocOrigMillis)}A.version=C.info.fileVersion;A.comments=C.info.fileCheckinReason}else{if(C.info.hasOwnProperty("fileName")){A.id=C.info.fileId;A.type=k.Types.FILE;A.name=C.info.fileName;A.size=C.info.fileSize;A.modified=c.parseTimestamp(C.info.fileModifiedMillis);A.latestVersion=null}else{if(q.CATEGORY_INTERNALDATA===C.info.type){A.id=C.info.objId;A.type=k.Types.CATEGORY;A.title=C.info.objDispName;A.description=C.info.objDesc;A.created=c.parseTimestamp(C.info.objOrigMillis);A.modified=c.parseTimestamp(C.info.objModifiedMillis);A.locked=(C.info.objLocked.toUpperCase()==="TRUE")}else{if(q.FOLDER===C.info.type){A.id=C.info.objId;A.type=k.Types.FOLDER;A.title=C.info.objDispName;A.description=C.info.objDesc;A.created=c.parseTimestamp(C.info.objOrigMillis);A.modified=c.parseTimestamp(C.info.objModifiedMillis);A.locked=(C.info.objLocked.toUpperCase()==="TRUE");A.referenced=((typeof C.info.isReferenced!=="undefined")&&C.info.isReferenced)}else{A.id=C.info.objId;A.type=C.info.type;A.title=C.info.objDispName;A.description=C.info.objDesc;A.created=c.parseTimestamp(C.info.objOrigMillis);A.modified=c.parseTimestamp(C.info.objModifiedMillis);A.locked=(C.info.objLocked.toUpperCase()==="TRUE");A.referenced=((typeof C.info.isReferenced!=="undefined")&&C.info.isReferenced)}}}}}return A}function x(A,D,C,E){var B=function(L,J,F){var G,I,H,K=null;if(F.id){K=F.id}I=t(L,K);if(E&&(typeof I.referenced!=="undefined")){I.referenced=E}J.push(I);H={id:I.id,parent:K,children:[]};if(F.children){F.children.push(H)}else{F.id=H.id;F.parent=H.parent;F.children=H.children;H=F}if(L.children){for(G=0;G<L.children.length;G++){B(L.children[G],J,H)}}};B(A,D,C)}function u(F,C,A,B){var G,E=null,D;G=c.getNodeChildren({objects:F,hierarchy:C},A);if(G){for(D=0;D<G.length;D++){if(G[D].version===B){E=G[D];break}}}return E}function p(D,A){var C,B;for(C=0;C<D.length;C++){if((D[C].type===k.Types.FILE)&&!D[C].size&&!D[C].modified&&D[C].latestVersion){B=u(D,A,D[C].id,D[C].latestVersion);if(B){D[C].size=B.size;D[C].modified=B.modified}}}}function b(D,I,J){var G=o.getStore(),B={attachToJobID:D,managedDataProjections:[]},A=[],C,F,E,H;if(J){J.forEach(function(K){C=v.workDataWithID(G.getState(),K);if(C&&C.name&&(C.type===v.Types.FILE)){A.push(C.name)}})}A.forEach(function(K){E={containerID:I,documentID:null,fileName:K,version:"1"};F=k.managedDataFilesWithName(G.getState(),K,I);if(F.length===1){E.documentID=k.managedDataParent(G.getState(),F[0].id,false).id;if(F[0].latestVersion){H=parseInt(F[0].latestVersion);E.version=isNaN(H)?"":(String(++H))}}B.managedDataProjections.push(E)});return B}function a(A){return new e(function(J,K){var I=o.getStore(),F,E,H,C,G={successes:[],failures:[]},D=function(){G.successes.push({id:A.id});J(G)},B=function(L){G.failures.push({id:A.id,error:c.buildError(k.ErrorCodes.DELETE_CONTENT_WS_ERROR,L)});J(G)};F=k.managedDataWithID(I.getState(),A.id);E=k.managedDataParent(I.getState(),A.id,false);H=k.managedDataParent(I.getState(),E.id,false);if(E.latestVersionInvalid&&(E.latestVersion===F.version)){C="/simulationdocuments/"+H.id+"/"+F.id}else{C="/simulationdocuments/"+H.id+"/fileversion?fileName="+E.name}z.callSMAProcService({verb:"DELETE",uri:C,headers:{"Content-Type":"application/ds-json",Accept:"*/*"},onComplete:D,onError:B,sessionTimeoutInfo:{handler:K,context:null}})})}function w(A){return new e(function(G,F){var C=o.getStore(),B,D={successes:[],failures:[]},H=function(){D.successes.push({id:A.id});G(D)},E=function(I){D.failures.push({id:A.id,error:c.buildError(k.ErrorCodes.DELETE_CONTENT_WS_ERROR,I)});G(D)};B=k.managedDataParent(C.getState(),A.id,false);z.callSMAProcService({verb:"DELETE",uri:"/simulationdocuments/"+B.id+"/fileversion?fileName="+A.name+((A.latestVersion)?"&version=all":"&version=none"),headers:{"Content-Type":"application/ds-json",Accept:"*/*"},onComplete:H,onError:E,sessionTimeoutInfo:{handler:F,context:null}})})}function i(A){return new e(function(G,F){var E="",C,B={successes:[],failures:[]},H=function(){for(C=0;C<A.objects.length;C++){B.successes.push({id:A.objects[C].id})}G(B)},D=function(I){for(C=0;C<A.objects.length;C++){B.failures.push({id:A.objects[C].id,error:c.buildError(k.ErrorCodes.DELETE_CONTENT_WS_ERROR,I)})}G(B)};for(C=0;C<A.objects.length;C++){E+=A.objects[C].id;if(C<(A.objects.length-1)){E+=","}}z.callSMAProcService({verb:"DELETE",uri:"/simulations/content/owned"+(A.deleteRules?"?delRules=true":""),headers:{"Content-Type":"application/ds-json",Accept:"*/*"},data:E,onComplete:H,onError:D,sessionTimeoutInfo:{handler:F,context:null}})})}function s(A){return new e(function(F,E){var B=o.getStore(),C={successes:[],failures:[]},G=function(){C.successes.push({id:A.id});F(C)},D=function(H){C.failures.push({id:A.id,error:c.buildError(k.ErrorCodes.DELETE_CONTENT_WS_ERROR,H)});F(C)};z.callSMAProcService({verb:"POST",uri:"/simulations/"+l.studyID(B.getState())+"/referencedContent?contentId="+A.id+"&operation=delete",onComplete:G,onError:D,sessionTimeoutInfo:{handler:E,context:null}})})}y.createManagedData=function(C,G){var E=[],D={},B=null,F=false,A=k.managedDataWithID(o.getStore().getState(),G);if(G){B=f(C,G)}else{B=h(C,q.CATEGORY_INTERNALDATA)}if(B){if(G){c.clearNodeDescendants(o.getStore().getState().domain.managedData,G)}if(A&&A.referenced){F=A.referenced}x(B,E,D,F);p(E,D)}return{objects:E,hierarchy:D}};y.refreshManagedData=function(){return new e(function(C,B){var D=function(G){var E=null,F=JSON.parse(G.response);if(F){E=y.createManagedData(F)}C(E)},A=function(E){B(c.buildError(k.ErrorCodes.GET_CONTENT_WS_ERROR,E))};z.callSMAProcService({uri:"/simulations/"+l.studyID(o.getStore().getState())+"/getDetailedContents",onComplete:D,onError:A,sessionTimeoutInfo:{handler:B,context:null}})})};y.refreshManagedDataDocument=function(A){return new e(function(D,C){var E=function(H){var F=null,G=JSON.parse(H.response);if(G){F=y.createManagedData(G,A.documentID);F.containerID=A.containerID}D(F)},B=function(F){C(c.buildError(k.ErrorCodes.GET_FILE_VERSIONS_WS_ERROR,F))};z.callSMAProcService({uri:"/simulationdocuments/fileVersionsInfo/"+A.documentID,onComplete:E,onError:B,sessionTimeoutInfo:{handler:C,context:null}})})};y.uploadLocalFile=function(A){return new e(function(I,J){var K,B=0,E=0,F,G,D=function(L){I({documentID:L.objectID,containerID:A.containerID})},C=function(L){if((L.status===403)||((L.status===500)&&(L.response&&(L.response.toLowerCase().indexOf(d)!==-1)))){G=k.ErrorCodes.UPLOAD_FILE_UNAUTHORIZED}else{G=k.ErrorCodes.UPLOAD_FILE_WS_ERROR}J(c.buildError(G,L,A.placeholder))},H=function(L){if(L.lengthComputable){if(A.progressIncrement&&(L.loaded>0)&&(L.total>0)){E=Math.round((L.loaded/L.total)*100);F=(((E-B)>=A.progressIncrement)||(L.loaded===L.total));if(F){B=E}}else{F=true}if(F){o.getStore().dispatch(A.progressHandler(A.placeholder.id,{uploaded:L.loaded,total:L.total}))}}};K={file:A.file,onComplete:D,onFailure:C,sessionTimeoutInfo:{handler:J,context:A.placeholder}};if(A.placeholder){K.onProgress=H}if((k.Types.CATEGORY===A.containerObject.type)||(k.Types.FOLDER===A.containerObject.type)){K.createMethod="POST";K.createURL="/simulations/content?pid="+A.containerObject.id+"&name="+A.file.name}else{K.createMethod="PUT";K.createURL="/fcs/checkin?oid="+A.containerObject.id;if(A.containerFile&&(A.containerFile.name!==A.file.name)){K.createURL+="&dname="+A.containerFile.name+"&newdname="}else{K.createURL+="&dname="}K.createURL+=A.file.name}z.callUploadLocalFile(K)})};y.addReferencedContent=function(A){return new e(function(F,E){var C,D=l.studyObject(o.getStore().getState()),G=function(I){var H,J=false;try{H=JSON.parse(I.response);if(H&&H.errorMessage){J=true}}catch(K){J=false}if(J){E(c.buildError(k.ErrorCodes.ADD_REF_CONTENT_UNAUTHORIZED,I,A.placeholder))}else{F(A)}},B=function(H){E(c.buildError(k.ErrorCodes.ADD_REF_CONTENT_WS_ERROR,H,A.placeholder))};C="/simulations/"+D.id+"/referencedContent?contentId="+A.objectID;if(A.containerID!==D.managedDataRootID){C=C+"&folderId="+A.containerID}z.callSMAProcService({verb:"POST",uri:C,onComplete:G,onError:B,sessionTimeoutInfo:{handler:E,context:A.placeholder}})})};y.setFileVersionComments=function(A){return new e(function(G,F){var D,C,B,H=function(){G({fileVersionID:A.fileVersionID,comments:A.comments})},E=function(I){F(c.buildError(k.ErrorCodes.SET_FILE_VERSION_COMMENTS_WS_ERROR,I,A.fileVersionID))};D=k.managedDataWithID(o.getStore().getState(),A.fileVersionID);C=k.managedDataParent(o.getStore().getState(),A.fileVersionID);B=k.managedDataParent(o.getStore().getState(),C.id,false);z.callSMAProcService({verb:"PUT",uri:"/simulationdocuments/"+B.id+"/versioncomment?fileName="+C.name+"&version="+D.version,headers:{"Content-Type":"text/plain"},data:A.comments,onComplete:H,onError:E,sessionTimeoutInfo:{handler:F,context:A.fileVersionID}})})};y.storeUploadJobInfo=function(A){return new e(function(D,C){var G,F,E=function(){D()},B=function(H){C(c.buildError(k.ErrorCodes.UPLOAD_JOB_FILE_CHECKIN_WS_ERROR,H,A.uploadJobID))};G=b(A.attachToJobID,A.containerID,A.workDataIDs);F=new Blob([JSON.stringify(G)]);F.name=r.UPLOAD_JOB_CONFIG_FILENAME;z.callUploadLocalFile({file:F,createURL:"/fcs/checkin?oid="+A.uploadJobID+"&dname="+r.UPLOAD_JOB_CONFIG_FILENAME,createMethod:"PUT",onComplete:E,onFailure:B,sessionTimeoutInfo:{handler:C,context:A.uploadJobID}})})};y.startUploadWorkDataJob=function(A){return new e(function(P,R){var N=o.getStore(),M,L,K=null,G,B,J,I,F=[],O=[],C=l.studyObject(o.getStore().getState()),H,Q,E=function(S){P({jobID:S.mcsJobID,containerID:A.containerID})},D=function(){R(c.buildError(k.ErrorCodes.UPLOAD_WORK_DATA_ERROR,null,A.placeholders))};if(A.containerID===C.managedDataRootID){M=k.Types.CATEGORY}else{M=k.managedDataWithID(o.getStore().getState(),A.containerID).type}for(I=0;I<A.workDataIDs.length;I++){J=v.workDataWithID(o.getStore().getState(),A.workDataIDs[I]);if(J){if(v.Types.FOLDER===J.type){if((k.Types.FOLDER===M)||(k.Types.CATEGORY===M)){F.push(A.containerID);O.push(J.name+"/*");if(!K){K=k.Types.FOLDER}}}else{L=k.managedDataFilesWithName(N.getState(),J.name,A.containerID);if(L.length===1){F.push(k.managedDataParent(N.getState(),L[0].id,false).id)}else{F.push(A.containerID)}O.push(J.name);if(!K){K=k.Types.DOCUMENT}}}}G=v.workDataExecDir(o.getStore().getState(),A.workDataIDs[0]);B=v.workDataParent(o.getStore().getState(),A.workDataIDs[0]).path;B=B.replace(/(\\)/gm,"\\\\\\\\");H={REPLACE_VERSION:"6.417.0",REPLACE_PROCESS_ID:C.id,REPLACE_DYNAMIC_ACTIVITY:"ACT#",KEEP_DIR:"1",REPLACE_STEP_ID:"FunctionStep8b6066d6-ea38-4dbe-89ab-dce498b0f63d",REPLACE_WORKING_DIR:B,REPLACE_LAST_ID:"1",REPLACE_HOST:G.station,ADD_RULE_TITLE:O.join(","),ADD_RULE_CATEGORY:C.managedDataRootID,ADD_RULE_TYPE:K,REF_ID:F.join(",")};H.model_key="UploadModel";Q={studyID:C.id,data:H,serverID:G.server,onComplete:E,onFailure:D,sessionTimeoutInfo:{handler:R,context:A.placeholders}};if(G.credentials){Q.credentials=n.getCredentials(o.getStore().getState(),G.credentials.domainName,G.credentials.windowsUser,G.credentials.linuxUser);Q.credentials=c.formatCredentials(Q.credentials)}if(m.LOCALSTATIONNAME===G.station){Q.isLocalStation=true}z.callRunUpload(Q)})};y.deleteManagedData=function(C){var B=o.getStore(),A,F=[],E=[],D=[];C.objectIDs.forEach(function(G){A=k.managedDataWithID(B.getState(),G);if(A.type===k.Types.FILEVERSION){F.push(e.resolve(A).then(a))}else{if(A.type===k.Types.FILE){F.push(e.resolve(A).then(w))}else{if(A.referenced){F.push(e.resolve(A).then(s))}else{if((A.type===k.Types.DOCUMENT)||(A.type===k.Types.NVDOCUMENT)){E.push(A)}else{D.push(A)}}}}});if(E.length>0){F.push(e.resolve({objects:E,deleteRules:true}).then(i))}if(D.length>0){F.push(e.resolve({objects:D,deleteRules:false}).then(i))}return e.all(F).then(function(G){var H={successes:[],failures:[]};G.forEach(function(I){H.successes=H.successes.concat(I.successes);H.failures=H.failures.concat(I.failures)});return H})};return y});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-managed-data/actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-domain-managed-data/action-types","DS/SMAPoweredByState/ad-state-domain-managed-data/action-impls","DS/SMAPoweredByState/ad-state-domain-managed-data/selectors"],function(f,d,e,g,c,h){var b={};function a(m){var q=f.getStore(),p={specificObjectIDs:[],descendantIDs:[]},j,l,n,o,i,k,r={},s={};m.forEach(function(t){j=h.managedDataWithID(q.getState(),t);if(j){if((j.type===h.Types.FILE)||(j.type===h.Types.FILEVERSION)){l=(j.type===h.Types.FILEVERSION)?j:null;n=(j.type===h.Types.FILE)?j:h.managedDataParent(q.getState(),l.id,false);o=h.managedDataParent(q.getState(),n.id,false);if(l&&(h.managedDataChildren(q.getState(),n.id,false).length>1)){r[l.id]=true}else{if(h.managedDataChildren(q.getState(),o.id,false).length>1){r[n.id]=true;if(l){s[l.id]=true}else{k=h.managedDataChildren(q.getState(),n.id);k.forEach(function(u){s[u.id]=true})}}else{r[o.id]=true;s[n.id]=true;if(l){s[l.id]=true}else{k=h.managedDataChildren(q.getState(),n.id);k.forEach(function(u){s[u.id]=true})}}}}else{if((j.type===h.Types.DOCUMENT)||(j.type===h.Types.NVDOCUMENT)){r[j.id]=true;i=h.managedDataChildren(q.getState(),j.id);i.forEach(function(u){s[u.id]=true;k=h.managedDataChildren(q.getState(),u.id);k.forEach(function(v){s[v.id]=true})})}else{r[j.id]=true}}}});Object.keys(r).forEach(function(t){p.specificObjectIDs.push(t)});Object.keys(s).forEach(function(t){p.descendantIDs.push(t)});return p}b.refreshManagedData=function(){return{type:g.REFRESH_MANAGED_DATA,payload:{promise:c.refreshManagedData()}}};b.refreshManagedDataDocument=function(j){var i=h.managedDataParent(f.getStore().getState(),j);return{type:g.REFRESH_MANAGED_DATA_DOCUMENT,payload:{promise:c.refreshManagedDataDocument({documentID:j,containerID:i?i.id:null})}}};b.uploadLocalFile=function(u,k,m){var r=f.getStore(),j=h.managedDataWithID(f.getStore().getState(),u),t=u,n,p,l=null,q={persistenceStatus:e.PersistenceStatus.CLEAN,persistenceOperation:e.PersistenceOperation.CREATING,id:d.generateID(),type:(h.Types.FILE===j.type)?h.Types.FILEVERSION:h.Types.FILE,name:k.name,size:k.size},o,s;if(h.Types.FILE===j.type){l=j;p=h.managedDataParent(r.getState(),j.id,false)}else{p=j}if((h.Types.DOCUMENT===p.type)||(h.Types.NVDOCUMENT===p.type)){n=h.managedDataChildren(r.getState(),p.id);for(o=0;o<n.length;o++){if(n[o].name===q.name){q.type=h.Types.FILEVERSION;s=parseInt(n[o].latestVersion);q.version=isNaN(s)?"":(String(++s));t=n[o].id;break}}}return{type:g.UPLOAD_LOCAL_FILE,payload:{promise:c.uploadLocalFile({containerObject:p,containerFile:l,file:k,placeholder:q,progressHandler:b.setFileUploadProgress,progressIncrement:m?m:null}).then(function(i){return{documentID:i.documentID,containerID:(h.Types.FILE===j.type)?h.managedDataParent(r.getState(),i.documentID,false).id:u}}).then(c.refreshManagedDataDocument).then(function(i){return{placeholder:q,objects:i.objects,hierarchy:i.hierarchy,containerID:i.containerID}}),data:{containerID:t,placeholder:q}}}};b.uploadWorkData=function(i,j,k){return{type:g.UPLOAD_WORK_DATA,payload:{promise:c.startUploadWorkDataJob({containerID:i,workDataIDs:j}).then(function(l){if((typeof k!=="undefined")&&k){c.storeUploadJobInfo({attachToJobID:k,uploadJobID:l.jobID,workDataIDs:j,containerID:i})}})}}};b.addReferencedContent=function(i,m,k,j){if(!h.managedDataWithID(f.getStore().getState(),m)){var l={persistenceStatus:e.PersistenceStatus.CLEAN,persistenceOperation:e.PersistenceOperation.CREATING,id:m,type:((typeof j!=="undefined")&&j)?j:h.Types.UNKNOWN,title:((typeof k!=="undefined")&&k)?k:"Referenced content"};return{type:g.ADD_REFERENCED_CONTENT,payload:{promise:c.addReferencedContent({containerID:i,objectID:m,placeholder:l}).then(c.refreshManagedData).then(function(n){return{placeholder:l,objects:n.objects,hierarchy:n.hierarchy}}),data:{containerID:i,placeholder:l}}}}else{return{type:g.ADD_REFERENCED_CONTENT+e.AsyncStatus.FAILURE,payload:{error:{code:h.ErrorCodes.ADD_REF_CONTENT_EXISTS_ERROR}}}}};b.deleteManagedData=function(j){var i=a(j);return{type:g.DELETE_MANAGED_DATA,payload:{promise:c.deleteManagedData({objectIDs:i.specificObjectIDs,doDelete:true}),data:{objectIDs:i.specificObjectIDs.concat(i.descendantIDs),doDelete:true}}}};b.removeManagedData=function(j){var i=a(j);return{type:g.REMOVE_MANAGED_DATA,payload:{promise:c.deleteManagedData({objectIDs:i.specificObjectIDs,doDelete:false}),data:{objectIDs:i.specificObjectIDs.concat(i.descendantIDs),doDelete:false}}}};b.setFileVersionComments=function(i,j){return{type:g.SET_FILE_VERSION_COMMENTS,payload:{promise:c.setFileVersionComments({fileVersionID:i,comments:j}),data:{fileVersionID:i,comments:j}}}};b.setFileUploadProgress=function(i,j){return{type:g.SET_FILE_UPLOAD_PROGRESS,fileID:i,uploadProgress:j}};b.clearManagedDataPersistenceError=function(){return{type:g.CLEAR_MANAGED_DATA_PERSISTENCE_ERROR}};return b});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study/action-impls",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-utils","DS/SMAPoweredByState/ad-state-defs","DS/SMAPoweredByState/ad-state-wc-adapter","DS/SMAPoweredByState/ad-state-domain-study/selectors","DS/SMAPoweredByState/ad-state-domain-study-templates/selectors","DS/SMAPoweredByState/ad-state-domain-work-data/selectors","UWA/Class/Promise"],function(o,e,k,x,m,s,r,h){var w={};var u="__AdHoc_RemoveAfterJob",t="__AdHoc_Disabled",n="__AdHoc_EEDJobID=",a="__AdHoc_MCSJobID=",f="__AdHoc_ServerID=",p="__AdHoc_IterationCount=",b="|";var g=window.Promise||h;function v(C){var B={name:"",accessDisabled:false,removeAfterExecution:false,eedJobID:null,mcsJobID:null,server:null,iterationCount:null},A=C.name.split(b),y=false,z;for(z=0;z<A.length;z++){if(A[z]===t){y=true;B.accessDisabled=true}else{if(A[z]===u){y=true;B.removeAfterExecution=true}else{if(A[z].indexOf(n)===0){y=true;B.eedJobID=A[z].substring(n.length)}else{if(A[z].indexOf(a)===0){y=true;B.mcsJobID=A[z].substring(a.length)}else{if(A[z].indexOf(f)===0){y=true;B.server=A[z].substring(f.length)}else{if(A[z].indexOf(p)===0){y=true;B.iterationCount=parseInt(A[z].substring(p.length))}else{if(!y){if(z>0){B.name+=b}B.name+=A[z]}}}}}}}}return B}function d(y){var z=y.name;if(y.accessDisabled){z+=b;z+=t}if(y.removeAfterExecution){z+=b;z+=u}if(y.eedJobID&&y.eedJobID.length>0){z+=b;z+=n;z+=y.eedJobID}if(y.mcsJobID&&y.mcsJobID.length>0){z+=b;z+=a;z+=y.mcsJobID}if(y.server&&y.server.length>0){z+=b;z+=f;z+=y.server}if(y.iteration===0){z+=b;z+=p;z+=y.iterationCount}return z}function j(A){var y=null,z;if(A.user&&(A.user.length>0)){z=A.user.split("\\");if(z.length===2){y={domainName:z[0],windowsUser:z[1],linuxUser:null}}else{if(z.length===1){y={domainName:null,windowsUser:null,linuxUser:z[0]}}}}return y}function c(z){var y="";if(z.credentials){if(z.credentials.domainName&&z.credentials.domainName.length>0&&z.credentials.windowsUser&&z.credentials.windowsUser.length>0){y=z.credentials.domainName+"\\"+z.credentials.windowsUser}else{if(z.credentials.linuxUser&&z.credentials.linuxUser.length>0){y=z.credentials.linuxUser}}}return y}function q(A){var B=[],y,z,C;y=A.attributes.definition.process.ExecutionConfig.properties.SCExecutionDirectories;if(y&&Array.isArray(y)){y.forEach(function(E){C=v(E);if(C.iterationCount===null){z={persistenceStatus:k.PersistenceStatus.CLEAN,id:"execdir"+C.mcsJobID,name:C.name,type:"execdir",server:C.server,station:(E.station?E.station:""),path:(E.path?E.path:""),credentials:j(E),modified:e.getTimestamp(E.lastModified),eedJobID:C.eedJobID,mcsJobID:C.mcsJobID,accessDisabled:C.accessDisabled,removeAfterExecution:C.removeAfterExecution,iteration:null,iterationCount:null};B.push(z)}else{for(var D=0;D<C.iterationCount;D++){z={persistenceStatus:k.PersistenceStatus.CLEAN,id:"execdir"+C.mcsJobID+"iteration"+D,name:C.name,type:"execdir",server:C.server,station:(E.station?E.station:""),path:(E.path?E.path+(D+1):null),credentials:j(E),modified:e.getTimestamp(E.lastModified),eedJobID:C.eedJobID,mcsJobID:C.mcsJobID,accessDisabled:C.accessDisabled,removeAfterExecution:C.removeAfterExecution,iteration:D,iterationCount:C.iterationCount};B.push(z)}}})}return B}function l(z){var y={};if(z.basics.fromconnectMask){y.fromconnectMask=z.basics.fromconnectMask}if(z.basics.fromdisconnectMask){y.fromdisconnectMask=z.basics.fromdisconnectMask}if(z.basics.locked){y.locked=z.basics.locked}if(z.basics.lockedByCurrentUser){y.lockedByCurrentUser=z.basics.lockedByCurrentUser}if(z.basics.modifyMask){y.modifyMask=z.basics.modifyMask}return y}function i(y,A){var B=[],C,z;if(y){B=y.filter(function(D){return(D.type==="execdir")&&(D.iteration===null||D.iteration===0)})}A.attributes.definition.process.ExecutionConfig.properties.SCExecutionDirectories=[];B.forEach(function(D){z=new Date(D.modified);C={lastModified:z.toUTCString(),name:d(D),path:(D.path?D.path:""),station:(D.station?D.station:""),user:c(D)};if(D.station){C.station=D.station}if(D.iteration===0){C.path=C.path.substring(0,C.path.length-1)}A.attributes.definition.process.ExecutionConfig.properties.SCExecutionDirectories.push(C)})}w.createStudyFromPLMProcess=function(y){var z={persistenceStatus:k.PersistenceStatus.CLEAN,id:y.id,title:y.attributes.title,description:y.attributes.description,created:e.getTimestamp(y.basics.originated),modified:e.getTimestamp(y.basics.modified),owner:y.basics.owner,managedDataRootID:y.connections.SimulationCategory["Internal Data"],masks:l(y)};z._plmProcess=y;return z};w.createExecDirsFromPLMProcess=function(y){return q(y)};w.createPLMProcessFromStudy=function(A,y){var z=A._plmProcess;z.attributes.title=A.title;z.attributes.description=A.description;i(y,z);return z};w.createStudy=function(y){return new g(function(E,D){var F=function(H){var I=null,G=JSON.parse(H.response);if(G&&(G.length>0)){I={persistenceStatus:k.PersistenceStatus.CLEAN,id:G[0]["Instantiated Process"],title:y.title,description:y.description,created:null,modified:null,owner:null,managedDataRootID:null}}E(I)},A=function(G){D(e.buildError(m.ErrorCodes.STUDY_CREATE_WS_ERROR,G))},C,B=[],z;C=s.studyTemplateWithID(o.getStore().getState(),y.studyTemplateID);if(C){B=C.options.slice();for(z=0;z<B.length;z++){if(B[z].title==="Title"){B[z].value=y.title?y.title:C.title;B[z].modified="true"}else{if(y.description&&B[z].title==="Description"){B[z].value=y.description;B[z].modified="true"}}}}x.callSMAProcService({uri:"/templates/"+y.studyTemplateID+"/instantiate",verb:"POST",data:JSON.stringify(B),onComplete:F,onError:A,sessionTimeoutInfo:{handler:D,context:null}})})};w.updateStudy=function(y){return new g(function(C,B){var A=m.studyObject(o.getStore().getState()),D=function(){C(A)},z=function(E){if(E&&(E.status===403)){B(e.buildError(m.ErrorCodes.STUDY_UPDATE_ACCESS_ERROR,E,A.id))}else{B(e.buildError(m.ErrorCodes.STUDY_UPDATE_WS_ERROR,E,A.id))}};x.callSMAProcService({uri:"/simulations/"+y.studyID,verb:"PUT",data:w.createPLMProcessFromStudy(A,r.allWorkData(o.getStore().getState())),onComplete:D,onError:z,sessionTimeoutInfo:{handler:B,context:A.id}})})};w.refreshStudy=function(y){return new g(function(B,A){var C=function(E){var F={},D=JSON.parse(E.response);if(D){F.study=w.createStudyFromPLMProcess(D);F.execDirs=w.createExecDirsFromPLMProcess(D)}B(F)},z=function(D){A(e.buildError(m.ErrorCodes.STUDY_WS_ERROR,D))};x.callSMAProcService({uri:"/simulations/"+y.studyID,onComplete:C,onError:z,sessionTimeoutInfo:{handler:A,context:null}})})};w.deleteStudy=function(y){return new g(function(B,A){var C=function(){B()},z=function(D){A(e.buildError(m.ErrorCodes.STUDY_WS_ERROR,D))};x.callSMAProcService({uri:"/simulations/"+y.studyID,verb:"DELETE",onComplete:C,onError:z,sessionTimeoutInfo:{handler:A,context:y.studyID}})})};return w});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain-study/actions",["DS/SMAPoweredByState/ad-state-domain-study/action-types","DS/SMAPoweredByState/ad-state-domain-study/action-impls","DS/SMAPoweredByState/ad-state-domain-managed-data/actions"],function(d,c,b){var a={};a.createStudy=function(g,f,e){return function(h){return h({type:d.CREATE_STUDY,payload:{promise:c.createStudy({studyTemplateID:g,title:f,description:e}).then(function(i){return{studyID:i.id}}).then(c.refreshStudy)}}).then(function(){return h(b.refreshManagedData())})}};a.updateStudy=function(e){return{type:d.UPDATE_STUDY,payload:{promise:c.updateStudy({studyID:e})}}};a.refreshStudy=function(e){return{type:d.REFRESH_STUDY,payload:{promise:c.refreshStudy({studyID:e})}}};a.closeStudy=function(){return{type:d.CLOSE_STUDY}};a.setStudyTitle=function(e){return{type:d.SET_STUDY_TITLE,title:e}};a.setStudyDescription=function(e){return{type:d.SET_STUDY_DESCRIPTION,description:e}};return a});
/*!  Copyright 2017 Dassault Systemes. All rights reserved. */
define("DS/SMAPoweredByState/ad-state-domain/actions",["DS/SMAPoweredByState/ad-state-store","DS/SMAPoweredByState/ad-state-domain/action-impls","DS/SMAPoweredByState/ad-state-domain-connector-definitions/actions","DS/SMAPoweredByState/ad-state-app/selectors","DS/SMAPoweredByState/ad-state-cos/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/selectors","DS/SMAPoweredByState/ad-state-domain-jobs/actions","DS/SMAPoweredByState/ad-state-domain-job-types/selectors","DS/SMAPoweredByState/ad-state-domain-job-types/actions","DS/SMAPoweredByState/ad-state-domain-managed-data/actions","DS/SMAPoweredByState/ad-state-domain-study/actions","DS/SMAPoweredByState/ad-state-domain-work-data/actions","DS/SMAPoweredByState/ad-state-app-credentials/actions","DS/SMAPoweredByState/ad-state-app-credentials/selectors"],function(j,q,c,d,l,i,o,p,b,n,m,a,k,h){var f={};function e(s,r,u){var t=r.getState();if(d.isCloudEnabled(t)&&i.jobGenerateResults(t,u)){return s(o.setJob3DXParameters(u,d.currentPlatformID(t),d.myAppsURL(t)))}else{return Promise.resolve()}}function g(s,w){var u=s.getState();var t=i.jobWithID(u,w),r=l.isRunAsJob(u,t),v=null;if(r){return new Promise(function(y){var x=i.jobExecutionOptions(s.getState(),w);if(x.credentialsID){v=h.getCredentialsByID(s.getState(),x.credentialsID)}y(v)})}else{return Promise.resolve()}}f.openStudy=function(r){return function(s){return s(m.refreshStudy(r)).then(function(){return s(n.refreshManagedData())}).then(function(){return s(o.refreshJobs(r))}).then(function(){return s(b.refreshJobTypes())}).then(function(){return s(c.refreshConnectorDefinitions())})}};f.saveCredentials=function(r){var t=j.getStore().getState();var s=i.jobDRMMode(t,r.jobId);return function(u){return u(k.saveCredentials(r)).then(function(v){var w=v.value.id;if(s&&s!==l.DRMMode.CLOUD&&s!==l.DRMMode.FIPER){w="drmMode"}return u(o.setCredentialsID(r.jobId,w))})}};f.reloadStudy=function(r){return function(s){return s(m.refreshStudy(r)).then(function(){return s(n.refreshManagedData())}).then(function(){return s(o.refreshJobs(r))})}};f.createJob=function(v,s,u,t){var r=p.jobTypeWithID(j.getStore().getState(),s);return function(w){if(!r.options||(r.options.length===0)){return w(b.refreshJobTypeOptions(s)).then(function(){return w(o.createJob(v,s,u,t))})}else{return w(o.createJob(v,s,u,t))}}};f.createBatchJob=function(v,s,u,t){var r=p.jobTypeWithID(j.getStore().getState(),s);return function(w){if(!r.options||(r.options.length===0)){return w(b.refreshJobTypeOptions(s)).then(function(){return w(o.createBatchJob(v,s,u,t))})}else{return w(o.createBatchJob(v,s,u,t))}}};f.cloneJob=function(v,w,u,s){var t=i.jobWithID(j.getStore().getState(),w),r=p.jobTypeWithID(j.getStore().getState(),t.jobType);return function(x){if(!r.options||(r.options.length===0)){return x(b.refreshJobTypeOptions(r.id)).then(function(){return x(o.cloneJob(v,w,u,s))})}else{return x(o.cloneJob(v,w,u,s))}}};f.refreshJob=function(x,y,s,r){var t=j.getStore(),v=i.jobWorkDirectory(t.getState(),y),u=s?s:false,w=r?r:false;return function(z){return z(o.refreshJobData(y,u,w)).then(function(){if(i.isJobDone(t.getState(),y)&&v&&v.removeAfterExecution){return Promise.resolve().then(function(){z(a.removeExecDir(v.id))}).then(function(){z(o.setJobExecutionWorkDirectory(y,null))}).then(function(){return z(m.updateStudy(x))})}else{return null}})}};f.runJob=function(y,x,A,u){var z=j.getStore(),s={eedJobID:null,mcsJobID:null,credentials:null,needNewExecDir:false,removeExecDir:null},w=i.isBatchJob(z.getState(),x),v=i.batchJobIterationCount(z.getState(),x),r=[],t=null;return function(B){return e(B,z,x).then(function(){return g.apply(this,arguments)}.bind(null,z,x)).then(function(C){if(C){t=C}return B(o.startJob(y,x,A,u,t))}).then(function(C){var E=[];s.eedJobID=C.value.eedJobID;s.mcsJobID=C.value.mcsJobID;s.credentials=C.value.credentials;s.needNewExecDir=C.value.needNewExecDir;s.removeExecDir=C.value.removeExecDir;if(s.needNewExecDir&&!w){E.push(B(a.createExecDir(s.mcsJobID,s.credentials)))}else{if(w){for(var D=0;D<v;D++){E.push(B(a.createExecDir(s.mcsJobID,s.credentials,D)))}}else{if(!w&&s.removeExecDir){E.push(B(a.markForRemoval(s.removeExecDir)))}else{E.push(C)}}}return E}).then(function(C){if(s.needNewExecDir){for(var D=0;D<C.length;D++){r.push(C[D].execDir.id)}}}).then(function(){return B(o.storeJobConfiguration(s.mcsJobID))}).then(function(){if(s.needNewExecDir){return B(m.updateStudy(y))}else{return null}}).then(function(){var E=[];if(s.needNewExecDir){for(var D=0;D<r.length;D++){E.push(B(a.initializeExecDir(r[D],D)))}}else{if(t){for(var C=0;C<r.length;C++){E.push(B(a.setExecDirCredentials(r[C],t)))}}else{return null}}return E}).then(function(){if(s.needNewExecDir||s.removeExecDir||t){return B(m.updateStudy(y))}else{return null}})}};f.uploadWorkData=function(u,r,s,t){return function(v){return v(n.uploadWorkData(r,s,t)).then(function(){return v(o.refreshJobs(u))})}};f.processUploadJob=function(s){var r=[];if(!i.isHiddenJobProcessed(j.getStore().getState(),s)){return function(t){return t(o.refreshJobData(s,true,true)).then(function(u){return{jobID:u.value.configuration.attachToJobID,managedData:q.getAvailableUploadedManagedData({projections:u.value.configuration.managedDataProjections})}}).then(function(u){u.managedData.forEach(function(v){r.push(Promise.resolve().then(function(){return t(o.addJobOutput(u.jobID,v))}))});return Promise.all(r)}).then(function(){return t(o.markHiddenJobProcessed(s))})}}else{return null}};return f});