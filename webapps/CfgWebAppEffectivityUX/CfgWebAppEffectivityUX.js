define("DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityUtility",["DS/CfgBaseUX/scripts/CfgUtility"],function(a){var b={getEffectivityJSON:function(k){var j=k.InstanceID;var f=k.InstanceLength;var c=k.Version;var e=k.TargetFormat;var d=k.View;var g=k.Domains;var i=k.withDescription;var h=new Promise(function(r,q){var p={version:c,output:{targetFormat:e,withDescription:i,view:d,domains:g},pidList:"["+j+"]"};if(c=="1.2"){p={version:c,pidList:j}}var n="/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo";var o=JSON.stringify(p);var l=function(s){r(s)};var m=60000;a.makeWSCall(n,"POST","enovia","application/json",o,l,q,true,null,m)});return h}};return b});define("DS/CfgWebAppEffectivityUX/facets/EffectivityFacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask"],function(f,d,b,c,e){var a=d.extend({init:function(){this._parent.apply(this,arguments);if(!this.elements.container){this.elements.container=f.createElement("div",{styles:{height:"100%"}})}},updateFacet:function(){var g=this;e.mask(this.elements.container);require(["DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityView","DS/CfgBaseUX/scripts/CfgController"],function(k,i){if(g.elements&&g.elements.container){var j=g.getModel();var l="";var m=g.getOccurrence().getOptions("Effectivity");if(m){l=m.targets[0].id}else{l=j.get("objectId")}var h=j.getTenant();if(!j){return false}i.init(null,"","3DDashboard");g.elements.container.setContent("");k.displayEffectivity(g.elements.container,l,h)}})},destroyComponent:function(){if(f.is(this.destroy,"function")){this.destroy()}}});return a});define("DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityView",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Alert","UWA/Controls/Popup","css!DS/CfgWebAppEffectivityUX/CfgWebAppEffectivityUX","DS/CfgEvolutionUX/CfgFilterView","DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityUtility","i18n!DS/CfgWebAppEffectivityUX/assets/nls/CfgEffectivityNLS","DS/CfgBaseUX/scripts/CfgUtility","DS/UIKIT/Mask"],function(f,a,i,d,l,e,h,g,k,j,c){var b={displayEffectivity:function(s,u,o){this.renderDiv=s;this.instanceId=u;this.ofcExpression="";this.projExpression="";var q=this;window.enoviaServerEffectivityWidget={instanceIDcheck:this.instanceId,ofcExpression:this.ofcExpression,projExpression:this.projExpression};var n=document.querySelector("#mainContainer");if(!n){this.MainContainer=new UWA.Element("div",{id:"mainContainer",styles:{width:"100%",height:"100%",overflow:"auto"}});this.viewPanel=new UWA.Element("div",{className:"filter-dialog-viewpanel",id:"viewPanel",styles:{"float":"right",display:"table-row"}});this.evolutionHeaderDiv=new UWA.Element("div",{id:"evolutionHeaderDiv",html:"<h5>"+k.CFG_Label_Evolution+"</h5>",styles:{display:"table-row"}});this.evolutionContainer=new UWA.Element("div",{id:"evolutionContainer",styles:{width:"100%","float":"left",display:"table-row","margin-bottom":"20px"}});this.variantHeaderDiv=new UWA.Element("div",{id:"variantHeaderDiv",html:"<h5>"+k.CFG_Label_Variant+"</h5>",styles:{}});this.variantContainer=new UWA.Element("div",{id:"variantContainer",styles:{width:"100%",display:"table-row","float":"left",overflow:"auto","margin-top":"10px"}});var r={};r.parentElement=this.viewPanel;var m=new h(r);this.MainContainer.appendChild(this.viewPanel);enoviaServerFilterWidget.tenant=o;var v={InstanceID:q.instanceId,InstanceLength:1,Version:"1.0",TargetFormat:"TXT",withDescription:"YES",View:"ALL",Domains:"ALL"};j.populate3DSpaceURL().then(function(w){j.populateSecurityContext().then(function(x){g.getEffectivityJSON(v).then(function(D){var z=document.querySelector("#variantContainer");var y=document.querySelector("#evolutionContainer");var H=document.querySelector("#variantHeaderDiv");var E=document.querySelector("#evolutionHeaderDiv");var A=document.querySelector("#prjView");var F=document.querySelector("#ofcView");var B=enoviaServerEffectivityWidget.instanceIDcheck;var C=D.expressions;var G="";var I="";if(C[B].status==="ERROR"){j.showwarning(k.CFG_Service_Fail,"error");return Promise.reject(D)}if(C[B].hasEffectivity==="YES"){if((C[B].content.Variant!=null)){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";G=C[B].content.Variant}else{G=k.CFG_Blank_VariantExpr}if((C[B].content.Evolution!=null)){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";if((C[B].content.Evolution.Current!=null)){I=C[B].content.Evolution.Current;enoviaServerEffectivityWidget.ofcExpression=C[B].content.Evolution.Current;y.innerText=enoviaServerEffectivityWidget.ofcExpression}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Blank_EvolutionExpr}if((C[B].content.Evolution.Projected!=null)){I=C[B].content.Evolution.Projected;enoviaServerEffectivityWidget.projExpression=C[B].content.Evolution.Projected}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Blank_EvolutionExpr}}else{y.innerText=k.CFG_Blank_EvolutionExpr}if((C[B].content.ConfigChange!=null)){if((C[B].content.ConfigChange.Current!=null)){I=C[B].content.ConfigChange.Current;enoviaServerEffectivityWidget.ofcExpression=C[B].content.ConfigChange.Current;y.innerText=enoviaServerEffectivityWidget.ofcExpression}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Blank_EvolutionExpr}if((C[B].content.ConfigChange.Projected!=null)){I=C[B].content.ConfigChange.Projected;enoviaServerEffectivityWidget.projExpression=C[B].content.ConfigChange.Projected}else{y.innerText=k.CFG_Blank_EvolutionExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Blank_EvolutionExpr}}z.innerText=G}if(C[B].hasEffectivity==="NO"){H.style.visibility="visible";E.style.visibility="visible";z.style.visibility="visible";y.innerText=k.CFG_Valid_EvolutionExpr;z.innerText=k.CFG_Valid_VariantExpr;enoviaServerEffectivityWidget.projExpression=k.CFG_Valid_EvolutionExpr;enoviaServerEffectivityWidget.ofcExpression=k.CFG_Valid_EvolutionExpr}c.unmask(q.renderDiv)},function(y){console.log(y);return Promise.reject(y)})},function(x){return Promise.reject(x)})},function(w){return Promise.reject(w)});this.MainContainer.appendChild(this.evolutionHeaderDiv);this.MainContainer.appendChild(this.evolutionContainer);this.MainContainer.appendChild(this.variantHeaderDiv);this.MainContainer.appendChild(this.variantContainer);this.renderDiv.appendChild(this.MainContainer);this.variantHeaderDiv.style.visibility="hidden";this.evolutionHeaderDiv.style.visibility="hidden";this.variantContainer.style.visibility="hidden";var p=document.querySelector("#prjView");if(p){p.addEventListener("click",function(){var w=document.querySelector("#evolutionContainer");w.innerText=enoviaServerEffectivityWidget.projExpression})}var t=document.querySelector("#ofcView");if(t){t.addEventListener("click",function(){var w=document.querySelector("#evolutionContainer");w.innerText=enoviaServerEffectivityWidget.ofcExpression})}}else{c.unmask(q.renderDiv)}}};return b});define("DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns",["UWA/Core","UWA/Class","DS/UIKIT/Spinner","DS/Utilities/Dom","DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityUtility","DS/EffectivityInlineEditor/EffectivityInlineEditor","i18n!DS/CfgWebAppEffectivityUX/assets/nls/CfgEffectivityNLS","DS/CfgBaseUX/scripts/CfgController","DS/CfgBaseUX/scripts/CfgUtility","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/CfgBaseUX/scripts/CfgDialog","DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgData","DS/ApplicationFrame/CommandsManager","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/PADUtils/PADContext","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json"],function(g,v,j,w,p,e,o,t,n,l,u,i,d,y,b,f,z,r,q){var c="E";var h=true;var k={};function s(C,D,A){if(!C.isHeader){if(C.cellModel.options.value){var B=C.cellView.reuseCellContent(D);if(B){B.innerText=C.cellModel.options.value}}else{C.cellView.reuseCellContent(A)}}}function m(A){if(A.nodeModel){if(A.cellModel){return"string"}else{return"configLoading"}}}function x(B){var A=function(J){if(h){k.Effectivity=o.CFG_EFFECTIVITY_HEADER;var G={dataIndex:"Effectivity",text:o.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,isHidden:true,onCellRequest:function(N){s(N,"effecivity_col_value","effecivity_col_colloader")},xnav_options:{layout:{width:100,minWidth:80,maxWidth:200,removable:true,hidden:true},exportable:{lock:true,value:false}}};var C={dataIndex:"Effectivity",text:o.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,visibleFlag:false,isAdditionalColumn:true,getCellTypeRepresentation:function(N){m(N)},customisation:{dataIndex:"Effectivity",exportable:{lock:true,value:false},layout:{removable:false}}};k.VariantEffectivity=o.CFG_VARIANT_HEADER;var F={dataIndex:"VariantEffectivity",text:o.CFG_VARIANT_HEADER,width:300,minWidth:200,maxWidth:500000,isHidden:true,onCellRequest:function(N){s(N,"variant_effecivity_col_value","variant_effecivity_col_colloader")},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:true,value:false}}};var H={dataIndex:"VariantEffectivity",text:o.CFG_VARIANT_HEADER,width:300,minWidth:200,maxWidth:500000,visibleFlag:false,isAdditionalColumn:true,getCellTypeRepresentation:function(N){m(N)},customisation:{dataIndex:"Effectivity",exportable:{lock:true,value:false},layout:{removable:false}}};k.CurrentEvolutionEffectivity=o.CFG_CURRENT_EVOLUTION_HEADER;var M={dataIndex:"CurrentEvolutionEffectivity",text:o.CFG_CURRENT_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,isHidden:true,onCellRequest:function(N){s(N,"current_evolution_effecivity_col_value","current_evolution_effecivity_col_colloader")},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:true,value:false}}};var D={dataIndex:"CurrentEvolutionEffectivity",text:o.CFG_CURRENT_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,visibleFlag:false,isAdditionalColumn:true,getCellTypeRepresentation:function(N){m(N)},customisation:{dataIndex:"Effectivity",exportable:{lock:true,value:false},layout:{removable:false}}};k.ProjectedEvolutionEffectivity=o.CFG_PROJECTED_EVOLUTION_HEADER;var K={dataIndex:"ProjectedEvolutionEffectivity",text:o.CFG_PROJECTED_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,isHidden:true,onCellRequest:function(N){s(N,"projected_evolution_effecivity_col_value","projected_evolution_effecivity_col_colloader")},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:true,value:false}}};var L={dataIndex:"ProjectedEvolutionEffectivity",text:o.CFG_PROJECTED_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,visibleFlag:false,isAdditionalColumn:true,getCellTypeRepresentation:function(N){m(N)},customisation:{dataIndex:"Effectivity",exportable:{lock:true,value:false},layout:{removable:false}}};k.EvolutionEffectivity=o.CFG_EVOLUTION_HEADER;var I={dataIndex:"EvolutionEffectivity",text:o.CFG_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,isHidden:true,onCellRequest:function(N){s(N,"evolution_effecivity_col_value","evolution_effecivity_col_colloader")},xnav_options:{layout:{width:300,minWidth:200,maxWidth:500,removable:true,hidden:true},exportable:{lock:true,value:false}}};var E={dataIndex:"EvolutionEffectivity",text:o.CFG_EVOLUTION_HEADER,width:300,minWidth:200,maxWidth:500000,visibleFlag:false,isAdditionalColumn:true,getCellTypeRepresentation:function(N){m(N)},customisation:{dataIndex:"Effectivity",exportable:{lock:true,value:false},layout:{removable:false}}};if(J.isCHGRoleAvail==true){c="EE";a._columnDataIndex=["Effectivity","VariantEffectivity","CurrentEvolutionEffectivity","ProjectedEvolutionEffectivity"];a._columnDef={Effectivity:G,VariantEffectivity:F,CurrentEvolutionEffectivity:M,ProjectedEvolutionEffectivity:K};a._columnDefDGV={Effectivity:C,VariantEffectivity:H,CurrentEvolutionEffectivity:D,ProjectedEvolutionEffectivity:L}}else{if(J.isCFGRoleAvail==true||J.isCSVRoleAvail==true){c="VE";a._columnDataIndex=["Effectivity","VariantEffectivity","EvolutionEffectivity"];a._columnDef={Effectivity:G,VariantEffectivity:F,EvolutionEffectivity:I};a._columnDefDGV={Effectivity:C,VariantEffectivity:H,EvolutionEffectivity:E}}}B()}};n.rolesAvailable(A)}var a=v.singleton({_columnDataIndex:["Effectivity"],_columnDef:{Effectivity:{dataIndex:"Effectivity",text:o.CFG_EFFECTIVITY_HEADER,width:100,minWidth:80,maxWidth:200,isHidden:true,onCellRequest:function(A){s(A,"effecivity_col_value","effecivity_col_colloader")},xnav_options:{layout:{width:100,minWidth:80,maxWidth:200,removable:true,hidden:true},exportable:{lock:true,value:false}}}},_columnDefDGV:{},init:function(A){this._parent(A);t.init(null,"","3DDashboard")},isAdditionalColumnsAvailable:function(A){if(g.is(A,"function")===false){throw new Error("A callback function should be defined")}x(function(){A(true)})},getName:function(){return"CfgEffectivityColumns"},getManagedColumnNames:function(){return this._columnDataIndex},toBeUpdated:function(A){var B=false;if(c==="EE"){if(A.Effectivity===undefined||A.Effectivity===""||A.VariantEffectivity===undefined||A.VariantEffectivity===""||A.CurrentEvolutionEffectivity===undefined||A.CurrentEvolutionEffectivity===""||A.ProjectedEvolutionEffectivity===undefined||A.ProjectedEvolutionEffectivity===""){B=true}}else{if(c==="VE"){if(A.Effectivity===undefined||A.Effectivity===""||A.VariantEffectivity===undefined||A.VariantEffectivity===""||A.EvolutionEffectivity===undefined||A.EvolutionEffectivity===""){B=true}}else{if(c==="E"){if(A.Effectivity===undefined||A.Effectivity===""){B=true}}}}return B},updateAttributes:function(B,A){if(g.is(B,"object")===false){throw new Error("The object ids to modify must be specify")}if(g.is(A,"function")===false){throw new Error("A callback function should be defined")}setTimeout(function(){var E={pids:{},relids:{}},C=0;var D=B.relids;if(c==="EE"){if(B.pids.length>0){for(C=0;C<B.pids.length;C++){E.pids[B.pids[C]]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}localStorage.setItem("rootDetails",B.pids);if(D.length==0){A(E)}}}else{if(c==="VE"){if(B.pids.length>0){for(C=0;C<B.pids.length;C++){E.pids[B.pids[C]]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}localStorage.setItem("rootDetails",B.pids);if(D.length==0){A(E)}}}else{if(c==="E"){if(B.pids.length>0){for(C=0;C<B.pids.length;C++){E.pids[B.pids[C]]={Effectivity:" "}}localStorage.setItem("rootDetails",B.pids);if(D.length==0){A(E)}}}}}if(D.length>0){if(widget.getValue("x3dPlatformId")){enoviaServerFilterWidget.tenant=widget.getValue("x3dPlatformId")}else{enoviaServerFilterWidget.tenant="OnPremise"}n.populate3DSpaceURL().then(function(F){n.populateSecurityContext().then(function(I){var K="";var L=100;var G=0;var J=G+L;while(D.length>=G){K=D.slice(G,J);G+=L;J+=L;var H={InstanceID:K,InstanceLength:D.length,Version:"1.0",TargetFormat:"TXT",withDescription:"YES",View:"ALL",Domains:"ALL"};if(K.length>0){p.getEffectivityJSON(H).then(function(N){if(c==="EE"){var M=localStorage.getItem("rootDetails")?localStorage.getItem("rootDetails").split(","):[];for(C=0;C<M.length;C++){E.pids[M[C]]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}for(var P in N.expressions){if(N.expressions.hasOwnProperty(P)){if(N.expressions[P].hasEffectivity=="NO"){E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_NO,VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}else{if(N.expressions[P].hasEffectivity=="YES"){var Q=" ";var S=" ";var R=" ";if(N.expressions[P].content!==null&&N.expressions[P].content.Variant!==null&&N.expressions[P].content.Variant!==undefined&&N.expressions[P].content.Variant!==""){Q=N.expressions[P].content.Variant;Q=Q.replace(/[\r\n]+/g," ")}if(N.expressions[P].content!==null&&N.expressions[P].content.Evolution!==null&&N.expressions[P].content.Evolution!==undefined&&N.expressions[P].content.Evolution!==""){S=N.expressions[P].content.Evolution.Current;R=N.expressions[P].content.Evolution.Projected;if(S!==undefined&&S!==null&&S!==""){S=S.replace(/[\r\n]+/g," ")}else{S=" "}if(R!==undefined&&R!=null&&R!==""){R=R.replace(/[\r\n]+/g," ")}else{R=" "}}E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_YES,VariantEffectivity:Q,CurrentEvolutionEffectivity:S,ProjectedEvolutionEffectivity:R}}else{if(N.expressions[P].hasEffectivity=="ERROR"||N.expressions[P].status!="SUCCESS"){E.relids[P]={Effectivity:" ",VariantEffectivity:" ",CurrentEvolutionEffectivity:" ",ProjectedEvolutionEffectivity:" "}}}}}}}else{if(c==="VE"){var M=localStorage.getItem("rootDetails")?localStorage.getItem("rootDetails").split(","):[];for(C=0;C<M.length;C++){E.pids[M[C]]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}for(var P in N.expressions){if(N.expressions.hasOwnProperty(P)){if(N.expressions[P].hasEffectivity=="NO"){E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_NO,VariantEffectivity:" ",EvolutionEffectivity:" "}}else{if(N.expressions[P].hasEffectivity=="YES"){var Q=" ";var O=" ";if(N.expressions[P].content!==null&&N.expressions[P].content.Variant!==null&&N.expressions[P].content.Variant!==undefined&&N.expressions[P].content.Variant!==""){Q=N.expressions[P].content.Variant;Q=Q.replace(/[\r\n]+/g," ")}if(N.expressions[P].content!==null&&N.expressions[P].content.Evolution!==null&&N.expressions[P].content.Evolution!==undefined&&N.expressions[P].content.Evolution!==""){O=N.expressions[P].content.Evolution.Current;if(O!==undefined&&O!==null&&O!==""){O=O.replace(/[\r\n]+/g," ")}else{O=" "}}E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_YES,VariantEffectivity:Q,EvolutionEffectivity:O}}else{if(N.expressions[P].hasEffectivity=="ERROR"||N.expressions[P].status!="SUCCESS"){E.relids[P]={Effectivity:" ",VariantEffectivity:" ",EvolutionEffectivity:" "}}}}}}}else{if(c==="E"){var M=localStorage.getItem("rootDetails").split(",");for(C=0;C<M.length;C++){E.pids[M[C]]={Effectivity:" "}}for(var P in N.expressions){if(N.expressions.hasOwnProperty(P)){if(N.expressions[P].hasEffectivity=="NO"){E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_NO}}else{if(N.expressions[P].hasEffectivity=="YES"){E.relids[P]={Effectivity:o.CFG_EFFECTIVITY_YES}}else{if(N.expressions[P].hasEffectivity=="ERROR"||N.expressions[P].status!="SUCCESS"){E.relids[P]={Effectivity:" "}}}}}}}}}A(E)},function(M){return Promise.reject(M)})}}},function(G){return Promise.reject(G)})},function(F){return Promise.reject(F)})}},200)},getAdditionalColumnsUX:function(D){var C=[];for(var B=0;B<D.length;B++){C.push(D[B].dataIndex)}for(var F=0;F<this._columnDataIndex.length;F++){var G=this._columnDataIndex[F];var E=g.clone(this._columnDef[G]);var A=C.indexOf(G);if(A===-1){D.push(E)}else{D[A]=g.extend(D[A],E,true)}}},getAdditionalColumnsUXDGV:function(D){var C=[];for(var B=0;B<D.length;B++){C.push(D[B].dataIndex)}for(var F=0;F<this._columnDataIndex.length;F++){var G=this._columnDataIndex[F];var E=g.clone(this._columnDefDGV[G]);var A=C.indexOf(G);if(A===-1){D.push(E)}else{D[A]=g.extend(D[A],E,true);D[A].text=k[D[A].dataIndex]}}},getTypeRepresentations:function(){return{configLoading:{stdTemplate:"functionIcon",semantics:{className:"relationRefresh",icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}}}},provideDisplayTooltip:function(B){var A=null;switch(B.dataIndex){case"Effectivity":case"VariantEffectivity":case"CurrentEvolutionEffectivity":case"ProjectedEvolutionEffectivity":if((B.cellModel&&B.cellModel.options&&B.cellModel.options.value==" ")||B.cellModel==" "){A=""}break;default:break}return A},registerReusableCellContent:function(A){if(c==="EE"){A.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"variant_effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"current_evolution_effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"projected_evolution_effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return w.createElement("span")}});A.getManager().registerReusableCellContent({id:"variant_effecivity_col_value",buildContent:function(){return w.createElement("span")}});A.getManager().registerReusableCellContent({id:"current_evolution_effecivity_col_value",buildContent:function(){return w.createElement("span")}});A.getManager().registerReusableCellContent({id:"projected_evolution_effecivity_col_value",buildContent:function(){return w.createElement("span")}})}else{if(c==="VE"){A.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"variant_effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"evolution_effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return w.createElement("span")}});A.getManager().registerReusableCellContent({id:"variant_effecivity_col_value",buildContent:function(){return w.createElement("span")}});A.getManager().registerReusableCellContent({id:"evolution_effecivity_col_value",buildContent:function(){return w.createElement("span")}})}else{if(c==="E"){A.getManager().registerReusableCellContent({id:"effecivity_col_colloader",buildContent:function(){return w.createElement("div",{"class":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-reload wux-ui-3ds-spin"})}});A.getManager().registerReusableCellContent({id:"effecivity_col_value",buildContent:function(){return w.createElement("span")}})}}}},cancelVariantDialog:function(){a.cfgVarDialog.closeDialog()},setVariantEffectivity:function(){var B=null;var A=a.cfgVarEffectivityInlineEditor.getExpressions();this.CfgUXEnvVariables=JSON.parse(q);var G=this.CfgUXEnvVariables.isVariantSplitEnabled;if(A.effectivity=="ERROR"){n.showwarning(o.Syntax_Error,"error");return}else{if(A.effectivity.length==0){B=""}else{B=d.VariantJSONtoXMLConverter(A)}}var F=null;if(a.ite_options.auth.headers.length>0){F={operationheader:{key:a.ite_options.auth.headers[0].key,value:a.ite_options.auth.headers[0].value}}}var C=function(K){var J=new Array();J.push(a.ite_options.node);var M=" ";if(K.GlobalStatus!=undefined&&K.GlobalStatus=="SUCCESS"){var H=K.results[0];var N=H.existing;var I=H["new"];if(N!=undefined&&N.id!=undefined){M=N.id}if(I!=undefined&&I.id!=undefined){M=I.id}}if(G==false){r.get().getPADTreeDocument().withTransactionUpdate(function(){n.refreshEffectvity(J,"Variant","All")})}else{if(G==true){if(M!=" "){var L=[];L.push(M)}r.get().getPADTreeDocument().withTransactionUpdate(function(){n.refreshSplitEffectivity(J,"All","All",L)})}}a.cfgVarDialog.closeDialog();if((G==false)&&((K.expressions!==undefined&&K.expressions[a.ite_options.instanceID].status.toUpperCase()==="SUCCESS"&&K.expressions[a.ite_options.instanceID].hasEffectivity.toUpperCase()!=="ERROR")||(K.unset!==undefined&&(K.unset.Variant.status.toUpperCase()==="SUCCESS"||K.unset.Variant.status.toUpperCase()==="WARNING")))){n.showwarning(o.Service_OK,"success")}else{if((G==true)&&((K.GlobalStatus!==undefined&&K.GlobalStatus=="SUCCESS")||(K.unset!==undefined&&(K.unset.Variant.status.toUpperCase()==="SUCCESS"||K.unset.Variant.status.toUpperCase()==="WARNING")))){n.showwarning(o.Service_OK,"success")}else{n.showwarning(o.Service_Fail,"error")}}};var E=function(H){a.cfgVarDialog.closeDialog();n.showwarning(o.Service_Fail,"error")};if(B==""){var D={wsOptions:F,instanceID:a.ite_options.instanceID,domain:"Variant"};n.unsetEffectivity(D).then(function(H){C(H)},function(H){E(H)})}else{if(G==false){D={wsOptions:F,version:"1.1",domain:"Variant",view:"All",expressionList:[{pid:a.ite_options.instanceID,expressions:[{domain:"Variant",content:B}]}]};n.setMultipleFilterableObjectInfo(D).then(function(H){C(H)},function(H){E(H)})}else{if(G==true){D={wsOptions:F,version:"1.0",domain:"Variant",view:"All",expressionList:[{pid:a.ite_options.instanceID,VariantContent:B}]};n.setVariantEffectivities(D).then(function(H){C(H)},function(H){E(H)})}}}},initVariantDialog:function(C){var B=C.options.relationid;var A=C.options.label;var E=C._parentNode.options.resourceid;if(B&&B!==""&&window.cfgCmdWidgetData&&window.cfgCmdWidgetData._isDecouplingActivated===true&&window.cfgCmdWidgetData._isConfigAvailable===true){a.ite_options={node:C,contextData:null,varEffJsonWithLabel:null,parentDiv:null,parentID:E,instanceID:B,mode:"ITEOnDashboard",iconModelURL:null,auth:{headers:[]},dialogue:{header:o.CFG_EDIT_VARIANT_HEADER+" - "+A,target:widget.body,buttonArray:null}};a.ite_options.dialogue.buttonArray=[{label:o.Edit_Var_OK,handler:a.setVariantEffectivity,className:"primary"},{label:o.Edit_Var_Cancel,handler:a.cancelVariantDialog,className:"default"}];y.clear();a.cfgVarDialog=new u(a.ite_options);a.ite_options.parentDiv=a.cfgVarDialog.container;a.cfgVarDialog.render();z.mask(a.cfgVarDialog.container);var D=function(){a.ite_options.contextData=null;var F={parentID:a.ite_options.parentID};var G=n.getConfiguredObjectInfo(F);G.then(function(I){if(I==null||I=="undefined"){a.ite_options.contextData=null}else{if(I.version=="1.0"){a.ite_options.contextData=I.Contexts.Content.results}else{if(I.version=="1.1"){a.ite_options.contextData=I.contexts.content.results}}}if(a.ite_options.contextData==null||a.ite_options.contextData==0){n.showwarning(o.No_Model_Error,"error");a.cancelVariantDialog();return}if(I.version=="1.1"&&I.enabledCriterias.feature=="false"){n.showwarning(o.No_Variant_Crit_Error,"error");a.cancelVariantDialog();return}a.ite_options.varEffJsonWithLabel=null;var J={version:"1.0",targetFormat:"XML",withDescription:"YES",view:"All",domains:"All",pidList:"["+a.ite_options.instanceID+"]"};var H=n.getMultipleFilterableObjectInfo(J);H.then(function(L){var K=n.isChangeControlled(a.ite_options.parentID);K.then(function(V){var P=null;var Q="";var W=a.ite_options.instanceID;var R=L.expressions;if(R[W].status==="ERROR"||R[W].hasEffectivity==="ERROR"){n.showwarning(o.Service_Fail,"error");a.cancelVariantDialog();return}if(R[W].hasEffectivity==="NO"){P=false}else{if(R[W].content.ConfigChange!=null&&R[W].content.ConfigChange!="undefined"){n.showwarning(o.Legacy_Eff_Error,"error");a.cancelVariantDialog();return}else{if(R[W].content.Variant==null||R[W].content.Variant==""||R[W].content.Variant=="undefined"){console.log("Evolution Effectivity might be set hence Variant would be null or undefined");P=false}else{console.log("Decoupled Variant Effectivity");P=true;Q=R[W].content.Variant}}if(V=="none"){a.ite_options.evoEffXML=R[W].content.Evolution.Current}else{a.ite_options.evoEffXML=R[W].content.Evolution.Projected}if(a.ite_options.evoEffXML&&a.ite_options.evoEffXML.indexOf("OperationHandler")>=0){a.ite_options.evoEffXML=""}a.ite_options.evoExpJson=d.EvolutionXMLtoJSONforFilterVariant(a.ite_options.evoEffXML)}var U=null;var T=null;var N={effectivity:[]};if(P==true){U=d.VariantXMLToJSONConverter(Q);T=d.VariantDescXMLtoJSONConverter(Q)}for(var Y=0;Y<a.ite_options.contextData.length;Y++){var ac=a.ite_options.contextData[Y];var ab=n.getAttributeValue(ac.basicData,"name");if(Array.isArray(ab)){ab=ab[0]}var O={name:ab,Combinations:[],evoExp:""};if(P==true){for(var Z=0;Z<U.length;Z++){var aa=JSON.parse(U[Z]);if(aa.name==ab){if(aa.Combinations.length>0){aa=n.fillVariantDictionaryWithDisplayName(aa,T);O=aa}break}}}if(a.ite_options.evoEffXML){a.ite_options.evoExpJson.contextsFilterXML.forEach(function(ae){if(ae.name==ab){O.evoExp=ae.expression}})}N.effectivity.push(O)}a.ite_options.varEffJsonWithLabel=N;var S=i.get();if(S&&S.AuthoringContextHeader){for(var ad in S.AuthoringContextHeader){a.ite_options.auth.headers.push({key:ad,value:S.AuthoringContextHeader[ad]})}}a.ite_options.iconModelURL=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png";a.cfgVarEffectivityInlineEditor=new e();a.cfgVarEffectivityInlineEditor.init(a.ite_options);z.unmask(a.cfgVarDialog.container);var X=document.getElementsByClassName("CfgITEOnDashboardDialog")[0];X.setAttribute("style",X.getAttribute("style")+"min-height:380px !important;min-width:240px !important;");var M=X.getElementsByClassName("modal-body")[0];M.setAttribute("style",M.getAttribute("style")+"overflow-y:auto !important;")},function(M){if(document.getElementsByClassName("CfgITEOnDashboardDialog")[0]){n.showwarning(o.Service_Fail,"error")}})},function(K){if(document.getElementsByClassName("CfgITEOnDashboardDialog")[0]){n.showwarning(o.Service_Fail,"error")}})},function(H){if(document.getElementsByClassName("CfgITEOnDashboardDialog")[0]){n.showwarning(o.Service_Fail,"error")}})};t.init();if(widget){enoviaServerFilterWidget.tenant=widget.getValue("x3dPlatformId")}else{enoviaServerFilterWidget.tenant="OnPremise"}n.populate3DSpaceURL().then(function(){n.populateSecurityContext().then(function(){D()})})}},getAdditionalCtxMenu:function(L){if(g.is(L.callback,"function")===false){throw new Error("A callback function should be defined")}if(L.ctxParams===undefined){throw new Error("No Ctx params given")}var A=false,J;if(L.ctxParams.treeview){A=L.ctxParams.treeview.isHeader;J=L.ctxParams.treeview.dataIndex}else{if(L.view==="datagridview"){A=L.ctxParams.cellInfos.rowID===-1;J=L.ctxParams.collectionView.getColumnOrGroup(L.ctxParams.cellInfos.columnID).dataIndex}}if(A===true){L.callback("CfgEffectivityColumnsHeader",[])}else{var C=null,A=false,E=L.ctxParams;if(E.graphview){C=E.graphview.node}else{if(E.treeview){C=E.treeview.nodeModel?E.treeview.nodeModel:E.treeview.cellModel;A=E.treeview.isHeader}else{C=E.cellInfos?E.cellInfos.nodeModel?E.cellInfos.nodeModel:E.cellInfos.cellModel:null}}var K=L.treeDocument.getSelectedNodes();if(C){if(!(E.treeview&&E.treeview.isHeader)){var I;var H;var F="enabled";var D="enabled";I=b.getCommand("CopyVariantEffectivity");if(I!=undefined){I._checkSelection();if(I._isEnabled==false){F="disabled"}}H=b.getCommand("PasteVariantEffectivity");if(H!=undefined){H._checkSelection();if(H._isEnabled==false){D="disabled"}}var B={type:"PushItem",icon:"url("+f.getWebappsAssetUrl("CfgWebAppEffectivityUX","icons/I_Copy_Variant_Effectivity.png")+")",title:o.CFG_COPY_VARIANT_EFFECTIVITY,state:F,action:{context:{nodes:K},callback:function(M){I.execute()}}};var G={type:"PushItem",icon:"url("+f.getWebappsAssetUrl("CfgWebAppEffectivityUX","icons/I_Paste_Variant_Effectivity.png")+")",title:o.CFG_PASTE_VARIANT_EFFECTIVITY,state:D,action:{context:{nodes:K},callback:function(M){H.execute()}}}}}setTimeout(function(){L.callback("copyVariantEffectivityCtx",B);L.callback("pasteVariantEffectivityCtx",G)},50)}},getOnCellClickCB:function(B){var A;var C=this;switch(B){case"Effectivity":A=function(E){var D=this.getManager().getTreeNodeModelFromRowID(E.virtualRowID)};break;case"VariantEffectivity":A=function(E){var D=this.getManager().getTreeNodeModelFromRowID(E.virtualRowID);if(r.get&&r.get().getEditMode()===true){C.initVariantDialog(D)}};break;default:break}return A}});return a});