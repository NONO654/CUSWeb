define("DS/DELPPWImplementModule/ImplementModule",["UWA/Core"],function(b){var a=function a(Q,g,S,m,C,e,d,I,X,B){var z="CreateScopeLink",V="ReconnectScope",E="ReviseAndReconnectScope",L="AssignProductUI",K="CreateMfgItemAndScope",U=null,o,Y,R=null,P,N={},t,F,O,x,T,k,v,D,J,j,s,W,G,r,i,A,h,c,w,q,H,M;t=function t(Z,aa){N={};if(b.is(Z)){N.cmdId=Z}else{throw new Error("Command ID is null")}N.onOKCallBack=aa;N.onCancelCallback=c;N.newObjType=o;N.isInstancePossible=null};O=function O(Z,aa){var ab;o=null;Y=null;if(b.is(aa,"array")){if(0<aa.length){aa.forEach(function(ac){if(!b.is(ac)||!b.is(ac.ID,"string")||!b.is(ac.Value,"string")){return}if("ReferenceType"===ac.ID){o=ac.Value}},this)}}if(b.is(o)){Y=o.split("/")[1]}else{ab=S.getNLSValue("Error.CommandConfigNotValid",{cmdName:Z});Q.warn(ab);throw new Error(ab)}};x=function p(ad){var Z=false,ac,ab,aa=S.getNLSValue("ImplementUI.SelectedMultiObjectsForProvide");if(ad.bUpdateImplemented===true){U.updateImplemented(ad.selNodes)}else{if(ad.bUpdateImplementing===true){U.updateImplementing(ad.selNodes)}}if(b.is(Y)){ac=U.getImplementingID();if(b.is(ac)){ab=m.getReferenceModel(ac).get("type");Z=m.isInstancePossibleByType(ab,Y);U.showDCFormForAssign(Z);if(Z===false){if(U.getImplementedIDs().length>1){U.showErrorMultipleImplementedSelected(aa)}}}}};T=function T(Z){if(Z.bUpdateImplemented===true){U.updateImplemented(Z.selNodes);U.showDCFormForCreate()}};k=function k(ab){var Z=true,aa=B.getActiveView();if(ab.changed.isSelected===false&&ab.sourceId!==aa){Z=false}return Z};F=function F(){if(b.is(U)){if(U.isVisible()){U.destroyUI()}U=void 0}};v=function v(Z,aa){N={};if(b.is(Z)){N.cmdId=Z}else{throw new Error("Command ID is null")}N.moduleOptions=P;N.onOKCallBack=aa;N.onCancelCallback=c};J=function J(ac){var ah,aa,ag,ad=S.getNLSValue("ImplementUI.Implementing"),ab,af=function af(){D()},ae=function(ai){R.updateImplementedRevnList(aa,ai,true)},Z=function Z(ai){R.showMessages(ai,"error")};if(!b.is(ac)){return}ag=m.getReferenceId(ac);R.updateImplementingLabel(ag);ah=e.getScopeLinksOfImplementing(ag);if(ah.length<=0){R.showMessages(S.getNLSValue("ImplementBehavior.Validation.NoScopeExist"),"error");return}aa=ah[0].get("to");ab=function ab(ai){if(!b.is(ai)){m.getMajorRevisions(aa,ae,Z)}else{R.showMessages(ai,"error")}};e.prereqChecksForReconnectScope(N.cmdId,ag,ad,ab,af)};D=function D(){if(b.is(R)){if(R.isVisible()){R.destroyUI()}R=void 0}};c=function c(){F();D()};w=function w(Z){var ad=Z.implementingId,ab=Z.implementedIDs[0],ac=Z.implementingPaths[0],aa=Z.implementedPaths[0];if((b.is(ad)&&b.is(ab))||(b.is(ac)&&b.is(aa))){e.createScopeLink([{implementingPID:ad,implementedPID:ab,implementingAbsPath:ac,implementedAbsPath:aa}])}F()};H=function H(Z){var ab,aa,ac;if(b.is(Z)){ab=Z.implementingId}if(m.isInstance(ab)){ac=ab;aa=m.getReferenceIdFromInstance(ac)}else{aa=ab}d.assignProduct({mbomReferenceId:aa,mbomInstanceId:ac,bodyInstanceIds:Z.implementedIDs,bodyAbsolutePaths:Z.implementedPaths,mbomAbsolutePaths:Z.implementingPaths,newMfgAttributes:Z.newObjAttributes,isInstancePossible:Z.isInstancePossible});F()};M=function M(ab){var ac=S.getNLSValue(N.cmdTitle,{type:S.getNLSValue(Y||"",null,"Type")}),aa=ab.implementedIDs,Z=ab.newObjAttributes;d.createMfgItemAndScopeLink(aa,Z,ac);F()};q=function q(Z){var aa={logMessage:b.is(N.cmdTitle)?S.getNLSValue(N.cmdTitle):"Reconnect Scope command"};if(b.is(Z)){if(N.cmdId===V){e.reconnectScope(Z.implementedId,Z.implementingId,aa,D)}else{if(N.cmdId===E){e.reviseAndReconnectScope(Z.implementedId,Z.implementingId,aa,D)}}}};j=function j(){c();o=null;Y=null;t(z,w);N.cmdTitle="ImplementUI.CreateScope";N.implementingSection=true;N.implementedSection=true;N.optionsSection=false;N.checkForImplementingScope=true;N.modalFlag=false;N.multiSelectionOfImplementing=false;N.multiSelectionOfImplemented=false;U=g.create("ImplementUI",N);x(U.getSelectionsWithPaths())};i=function i(Z){c();O(L,Z.arguments);t(L,H);N.cmdTitle="ImplementUI.AssignImplemented";N.implementingSection=true;N.implementedSection=true;N.optionsSection=false;N.checkForImplementingScope=false;N.modalFlag=false;N.multiSelectionOfImplementing=false;N.multiSelectionOfImplemented=true;U=g.create("ImplementUI",N);x(U.getSelectionsWithPaths())};A=function A(){var aa=C.getSelectionsWithPaths()[1],ab,Z,ac=[];c();aa.forEach(function(ad){ab=ad.path;Z=(b.is(ab)&&ab.length>0)?ab:ad.id;ac.push(Z)});d.unassignProduct(ac)};h=function h(Z){c();O(K,Z.arguments);t(K,M);N.cmdTitle="ImplementUI.CreateImplementingAndScope";N.implementingSection=false;N.implementedSection=true;N.optionsSection=false;N.checkForImplementingScope=false;N.modalFlag=true;N.multiSelectionOfImplementing=false;N.multiSelectionOfImplemented=true;U=g.create("ImplementUI",N);T(U.getSelectionsWithPaths())};s=function s(){var ae,ab=[],aa,Z,ad=S.getNLSValue("ImplementUI.Implementing");c();ae=C.getSelectionsWithPaths()[1];if(b.is(ae,"array")&&ae.length>0){ae.forEach(function ac(af){aa=af.path;Z=(b.is(aa)&&aa.length>0)?aa:af.id;if(e.isScoped(Z)){ab.push(Z)}})}if(ab.length>0){e.deleteScopeLink(ab)}else{Q.warn(S.getNLSValue("Error.ScopeDeletion",{objectName:ad}))}};W=function f(aa,Z){c();v(aa,q);N.cmdTitle=b.is(Z)?Z:"";N.implementedRevTreeListCSSStyle="implementedSection-container";N.optionsSection=false;N.modalFlag=false;R=g.create("ImplementedRevChooserUI",N);J(C.getSelections()[1][0])};G=function G(){W(V,"Dialog.ReconnectScope.Title")};r=function r(){W(E,"Dialog.ReviseAndReconnectScope.Title")};return{listenTo:function y(){return{select:this.onSelect,CreateScopeLink:j,DeleteScopeLink:s,ReconnectScope:G,ReviseAndReconnectScope:r,AssignProduct:i,UnassignProduct:A,CreateMfgItemAndScope:h,}},onStart:function n(Z){P=Z},onStop:function u(){F();D()},onSelect:function l(aa){var Z;if(b.is(U)&&U.isVisible()){if(b.is(aa)){if(k(aa)===false){return}if(b.is(aa.selectedNodeIds)&&aa.selectedNodeIds.length>0){Z=U.getSelectionsWithPaths()}}if(b.is(Z)&&Z.selNodes.length>0){if(N.implementingSection===true){x(Z)}else{T(Z)}}}else{if(b.is(R)&&R.isVisible()){if(b.is(aa.selectedNodeIds)&&aa.selectedNodeIds.length>0){J(C.getSelections()[1][0])}}}}}};return{behaviors:["UXFactoryBehavior","ResourceBehavior","ModelBehavior","SelectionBehavior","ImplementBehavior","AssignProductBehavior","WUXNodeModelBehavior","TreeListViewBehavior","ViewBehavior"],creator:a}});