require(["UWA/Core","DS/Tree/Tree","DS/Tree/TreeNodeModel","DS/WebappsUtils/WebappsUtils"],function(e,b,d,c){var a=window.Polymer;Polymer({is:"ec-monitoring",properties:{},initialize:function(j,g){if(g){var f=new b({enableDragAndDrop:false,roots:[{label:g}],defaultCellHeight:23}).inject(this.querySelector("#mainDiv"));var h=f.getDocument().getNthRoot(0);for(var l=0;l<j.length;l++){var k=new d({label:j[l]});h.addChild(k)}}else{if(!g){var f=new b({enableDragAndDrop:false,roots:[{label:j[0],icons:[""]}],defaultCellHeight:23}).inject(this.querySelector("#mainDiv"));for(var l=1;l<j.length;l++){var k=new d({label:j[l],icons:[""]});f.addRoot(k)}}}this.tree=f},setStepStatus:function(l,r,p,k,t){var m=this.tree;for(var q=0;q<m.getRoots().length;q++){if(r===m.getDocument().getNthRoot(q).options.label.split(":  ")[0]){var s=q;var n=m.getDocument().getNthRoot(s)}}for(var q=0;q<m.getRoots().length;q++){if(m.getDocument().getChildren()[q].getChildren()){for(var o=0;o<m.getDocument().getChildren()[q].getChildren().length;o++){if(r===m.getDocument().getChildren()[q].getChildren()[o].options.label.split(":")[0]){var n=m.getDocument().getChildren()[q].getChildren()[o]}}}}var g=false;if(!n){for(var q=0;q<m.getRoots().length;q++){if(l===m.getDocument().getNthRoot(q).options.label.split(":  ")[0]){var g=true;var h=m.getDocument().getNthRoot(q)}}}if(n&&n.options.children){for(var q=0;q<n.options.children.length;q++){if(l===n.options.children[q].options.label.split(":  ")[0]){var g=true;var h=n.options.children[q]}}}if(p==="Running"){var v=c.getWebappsBaseUrl()+"SMAProcWebXYPlot/assets/I_SMAFeaStatusBusy.png"}else{if(p==="Done"){var v=c.getWebappsBaseUrl()+"SMAProcWebXYPlot/assets/I_IAmDone_32.png"}else{if(p==="Aborted"||p==="Failed"){var v=c.getWebappsBaseUrl()+"SMAProcWebXYPlot/assets/Icon_Formula_Status_Failed.png"}}}if(g===false&&k&&k===true&&n){var f=new d({label:l,icons:[v]});n.addChild(f)}else{if(g===true){var u=h.options.label;h.updateOptions({icons:[v]})}}},setInformation:function(g,f){},getCurrentStep:function(){var f=this.tree;for(var h=0;h<f.getRoots().length;h++){if(f.getDocument().getChildren()[h].options.icons[0].split("/")[f.getDocument().getChildren()[h].options.icons[0].split("/").length-1]==="I_SMAFeaStatusBusy.png"){return f.getDocument().getChildren()[h].options.label.split(":")[0]}}for(var h=0;h<f.getRoots().length;h++){if(f.getDocument().getChildren()[h].getChildren()){for(var g=0;g<f.getDocument().getChildren()[h].getChildren().length;g++){if(f.getDocument().getChildren()[h].getChildren()[g].options.icons[0].split("/")[f.getDocument().getChildren()[h].getChildren()[g].options.icons[0].split("/").length-1]==="I_SMAFeaStatusBusy.png"){return f.getDocument().getChildren()[h].getChildren()[g].options.label.split(":")[0]}}}}},doesStepExist:function(o,h){var g=this.tree;var k=false;if(h){for(var n=0;n<g.getRoots().length;n++){if(h===g.getDocument().getNthRoot(n).options.label){var f=n;var l=g.getDocument().getNthRoot(f)}}for(var n=0;n<g.getRoots().length;n++){if(g.getDocument().getChildren()[n].getChildren()){for(var m=0;m<g.getDocument().getChildren()[n].getChildren().length;m++){if(h===g.getDocument().getChildren()[n].getChildren()[m].options.label.split(":")[0]){var l=g.getDocument().getChildren()[n].getChildren()[m]}}}}if(l.options.children){for(var n=0;n<l.options.children.length;n++){if(o===l.options.children[n].options.label.split(":  ")[0]){var k=true}}}}else{if(!h){for(var n=0;n<g.getRoots().length;n++){if(o===g.getDocument().getNthRoot(n).options.label){var k=true}}}}return k},addStep:function(g,k,o){var h=this.tree;if(!o){var f=new d({label:g,icons:[""]});if(!k){h.addRoot(f)}else{if(k){h.addRoot(f,k)}}}else{if(o){for(var n=0;n<h.getRoots().length;n++){if(o===h.getDocument().getNthRoot(n).options.label){var p=n;var l=h.getDocument().getNthRoot(p)}}for(var n=0;n<h.getRoots().length;n++){if(h.getDocument().getChildren()[n].getChildren()){for(var m=0;m<h.getDocument().getChildren()[n].getChildren().length;m++){if(o===h.getDocument().getChildren()[n].getChildren()[m].options.label.split(":")[0]){var l=h.getDocument().getChildren()[n].getChildren()[m]}}}}var f=new d({label:g,icons:[""]});if(!k){l.addChild(f)}else{if(k){l.addChild(f,k)}}}}},getNumberOfSteps:function(h){var g=this.tree;if(!h){return g.getRoots().length}else{if(h){for(var m=0;m<g.getRoots().length;m++){if(h===g.getDocument().getNthRoot(m).options.label){var f=m;var k=g.getDocument().getNthRoot(f)}}for(var m=0;m<g.getRoots().length;m++){if(g.getDocument().getChildren()[m].getChildren()){for(var l=0;l<g.getDocument().getChildren()[m].getChildren().length;l++){if(h===g.getDocument().getChildren()[m].getChildren()[l].options.label.split(":")[0]){var k=g.getDocument().getChildren()[m].getChildren()[l]}}}}return k.getChildren().length}}},getParentNode:function(){},clearSteps:function(){this.tree.getDocument().getNthRoot(0).removeChildren()},ready:function(){this.fire("ecmonitoringready")}})});