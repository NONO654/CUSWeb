var datagrid=null;function clearGrid(){if(datagrid&&!datagrid.isDestroyed){datagrid.destroy()}datagrid=null}function receiveMessage(d){var c=d.data.type;switch(c){case"odt-trace":return;case"add":var a=d.data.data;if(a.data){a.data=a.data.map(function(f){for(var e in f){if(f.hasOwnProperty(e)&&typeof f[e]==="string"&&f[e].indexOf("<")>-1){f[e]=f[e].replace(/</g,"&lt;")}}return f})}if(datagrid&&!datagrid.isDestroyed){datagrid.options.autoScroll=a.autoScroll;datagrid.appendToModel(a);try{window.parent.postMessage({type:"odt-trace",operation:"logsdatagrid-updated",data:a},"*")}catch(b){}}else{if(!datagrid){require(["DS/SMAProcSPUI/Views/LogsDataGrid"],function(f){datagrid=new f({height:"auto",autoScroll:true,hasRunIDCloumn:a.hasRunIDCloumn,source:a.data,jobObjectId:a.jobObjectId,jobExecutionStatus:a.jobExecutionStatus,mcsBaseURL:a.mcsBaseURL});datagrid.inject(document.body);try{window.parent.postMessage({type:"odt-trace",operation:"logsdatagrid-created",data:a},"*")}catch(e){}})}}break;case"clear":clearGrid();break;case"settablepreference":if(d.data.data.column){if(d.data.data.show){sessionStorage.setItem(d.data.data.column,"true")}else{sessionStorage.setItem(d.data.data.column,"false")}}break;default:break}}function adjustColumnWidth(){if(datagrid&&datagrid.spreadsheet){var c=datagrid.spreadsheet.getManager(),e=c.elements.container.clientWidth,b=[],a,d=true;d=c.isColumnHidden("Msg");if(!d){var f=e-375;var g=f>1000?f:1000;if(f>0){c.setColumnWidth("Msg",g)}else{c.setColumnWidth("Msg",100)}}else{e-=25;for(a=0;a<5;a+=1){if(!c.isColumnHidden(a)){b.push(a)}}e=e/b.length;for(a=0;a<b.length;a+=1){c.setColumnWidth(b[a],e)}}}return null}(function(){var f,b,d,a,c,e;window.addEventListener("message",receiveMessage,false);f=sessionStorage.getItem("CompIterRunId");b=sessionStorage.getItem("CompDisplayPath");d=sessionStorage.getItem("time");a=sessionStorage.getItem("severity");c=sessionStorage.getItem("source");e=sessionStorage.getItem("Msg");sessionStorage.setItem("tree","false");d?sessionStorage.setItem("Time",d):sessionStorage.setItem("Time","true");f?sessionStorage.setItem("CompIterRunId",f):sessionStorage.setItem("CompIterRunId","true");a?sessionStorage.setItem("severity",a):sessionStorage.setItem("severity","false");b?sessionStorage.setItem("CompDisplayPath",b):sessionStorage.setItem("CompDisplayPath","true");c?sessionStorage.setItem("source",c):sessionStorage.setItem("source","false");e?sessionStorage.setItem("Msg",e):sessionStorage.setItem("Msg","true")})();