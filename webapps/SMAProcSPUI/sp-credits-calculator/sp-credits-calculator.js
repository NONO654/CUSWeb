window.require(["DS/UIKIT/Input/Select","DS/Controls/Slider"],function(a,g){var f=null,n=null,b=null,h=null,i=null,c=null,e=null,j=null,l=null,m=null,k=null,d=null;f={"1":{pvm:"1",core:"1"},"2":{pvm:"1.93",core:"2"},"3":{pvm:"3.43",core:"4"},"4":{pvm:"5.91",core:"8"},"5":{pvm:"9.67",core:"16"},"6":{pvm:"13.85",core:"32"},"7":{pvm:"14.86",core:"64"}};n={"1":{svm:1,core:1},"2":{svm:1.15,core:2},"3":{svm:1.3,core:4},"4":{svm:1.7,core:8},"5":{svm:1.9,core:16},"6":{svm:2.1,core:32},"7":{svm:2.4,core:64}};b={"1":1,"2":1.1,"3":1.25,"4":1.5,"5":1.67};j=function(w,r,o,v,x,s){var y,p,B,u,t,A,q=true;this.$.rangeOutput.textContent=this.$.performance.value+"/7";if(s==="linux"){y=0.12;this.maxCores=this.cpuLimit}else{y=0.27;this.maxCores=4}if(!this.onPremiseStationOnCloud3X){if((v*x)>this.maxCores&&this.cpuLimit!==0){B=(v*x)/this.maxCores;if(B>v){}else{for(var z in f){if(f.hasOwnProperty(z)){if(Number(f[z].core)===(v/B)){w=f[z].pvm}}}}p=this.maxCores;this.$.warningNote.classList.remove("hidden")}else{p=v*x;this.$.warningNote.classList.add("hidden")}}else{p=v*x}u=Math.round(92.01*w*r*o);if(this.onPremiseStationOnCloud3X){t=0}else{t=Math.ceil((2.86*y*p)/0.18,1)}A=Math.floor(33*w*r*o);if(this.$.licenseType.getSelection()[0].value!=="tokens"){u=u+" credits /hr"}else{u=A+" SCT tokens"}this.$.creditsSWOutput.value=u;this.$.creditsHWOutput.value=t+" credits /hr";this.$.numCores.value=p;this.numCores=p;this.fire("coreschanged",{cores:this.numCores,perfIndex:this.$.performance.value,licenseType:this.$.licenseType.getSelection()[0].value,licenseEstimateOptions:{licenseType:this.$.licenseType.getSelection()[0].value.toString(),features:this.$.features.getSelection()[0].value.toString(),modelSize:this.$.modelSize.getSelection()[0].value.toString(),perfIndex:this.$.performance.value.toString()}});d={SWCheckout:u,HWCheckout:t}};c=function(){j.call(this,f[this.$.performance.value].pvm,n[this.sizeIndex].svm,this.featureIndex,f[this.$.performance.value].core,n[this.sizeIndex].core,this.operatingSystem)};h=function(o){o.stopPropagation();o.cancelBubble=true;o.preventDefault();this.licenseType=this.$.licenseType.getSelection()[0].value;this.featureIndex=b[this.$.features.getSelection()[0].value];this.sizeIndex=this.$.modelSize.getSelection()[0].value;this.perfIndex=this.$.performance.value;if(this.licenseType==="tradTokens"){this.$.estimatorSection.classList.add("hidden")}else{this.$.estimatorSection.classList.remove("hidden")}c.call(this);return true};l=function(){if(this.SXALicenseOptions){if(typeof(this.SXALicenseOptions.licenseType)!=="undefined"&&this.SXALicenseOptions.licenseType!==null){this.$.licenseType.select(this.SXALicenseOptions.licenseType);this.licenseType=this.SXALicenseOptions.licenseType}if(!this.onPremiseStationOnCloud3X){this.$.licenseType.disable("tradTokens");if(this.$.licenseType.getSelection()[0].value==="tradTokens"){this.$.licenseType.select("credits")}}else{this.$.licenseType.enable("tradTokens")}if(typeof(this.SXALicenseOptions.features)!=="undefined"&&this.SXALicenseOptions.features!==null){this.$.features.select(this.SXALicenseOptions.features);this.featureIndex=b[this.SXALicenseOptions.features]}if(typeof(this.SXALicenseOptions.modelSize)!=="undefined"&&this.SXALicenseOptions.modelSize!==null){this.$.modelSize.select(this.SXALicenseOptions.modelSize);this.sizeIndex=this.SXALicenseOptions.modelSize}if(typeof(this.SXALicenseOptions.perfIndex)!=="undefined"&&this.SXALicenseOptions.perfIndex!==null){this.$.performance.value=this.SXALicenseOptions.perfIndex;if("createEvent" in document){var o=document.createEvent("HTMLEvents");o.initEvent("change",false,true);this.$.performance.dispatchEvent(o)}else{this.$.performance.fireEvent("onchange")}this.perfIndex=Number(this.SXALicenseOptions.perfIndex)}}};i=function(p,o){this.$.licenseType=new p({id:"licenseType",placeholder:false,options:[{value:"credits",label:"Credits",selected:true},{value:"tokens",label:"Tokens"},{value:"tradTokens",label:"Tokens [traditional]"}]});this.$.licenseType.inject(this.$.licenseTypeContainer);this.$.licenseType.addEvent("onChange",h,this);this.$.features=new p({id:"features",placeholder:false,options:[{value:"1",label:"Linear static, Buckling",selected:true},{value:"2",label:"Frequency"},{value:"3",label:"Linear dynamics"},{value:"4",label:"Nonlinear"},{value:"5",label:"Explicit dynamics"},{value:"6",label:"CFD"}]});this.$.features.inject(this.$.featuresContainer);this.$.features.addEvent("onChange",h,this);this.$.modelSize=new p({id:"modelSize",placeholder:false,options:[{value:"1",label:"0 - 125,000 nodes",selected:true},{value:"2",label:"125,001 - 250,000 nodes"},{value:"3",label:"250,001 - 500,000 nodes"},{value:"4",label:"500,001 - 1,000,000 nodes"},{value:"5",label:"1,000,001 - 2,000,000 nodes"},{value:"6",label:"2,000,001 - 3,750,000 nodes"},{value:"7",label:">=3,750,001 nodes"}]});this.$.modelSize.inject(this.$.modelSizeContainer);this.$.modelSize.addEvent("onChange",h,this)};e=function(){if(typeof(this.options.properties)!=="undefined"&&typeof(this.options.properties.SXALicenseOptions)!=="undefined"){this.SXALicenseOptions=this.options.properties.SXALicenseOptions;l.call(this)}};k=function(o){this.operatingSystem=o;c.call(this);return d};m=function(){i.call(this,a,g);l.call(this);c.call(this)};window.DS.SMAProcSPUI=window.DS.SMAProcSPUI||{};window.DS.SMAProcSPUI.SPCreditsCalculator=Polymer({is:"sp-credits-calculator",behaviors:[window.DS.SMAProcSP.SPBase],properties:{licenseType:{type:String,notify:true,reflectToAttribute:true,value:"credits"},perfIndex:{type:Number,notify:true,reflectToAttribute:true,value:1},sizeIndex:{type:Number,notify:true,reflectToAttribute:true,value:1},featureIndex:{type:Number,notify:true,reflectToAttribute:true,value:1},numCores:{type:Number,notify:true,reflectToAttribute:true,value:1},operatingSystem:{type:String,value:"windows"},options:{type:Object,observer:"optionsChanged"},maxCores:{type:Number},onPremiseStationOnCloud3X:{type:Boolean,value:false},isOnCloudCpuLimitSet:{type:Boolean,value:true}},ready:function(){return m.apply(this,arguments)},onSelectionChange:function(){return h.apply(this,arguments)},estimate:function(){return k.apply(this,arguments)},calculate:function(){if(this.featureIndex=="6"){if(this.licenseType==="credits"){d.SWCheckout=Math.floor(92.01*Math.pow(this.numCores,0.422))+" credits /hr";d.HWCheckout=Math.ceil((2.86*this.numCores)/0.18,1)}else{d.SWCheckout=Math.floor(50*Math.pow(this.numCores,0.422))+" SCT tokens";d.HWCheckout=0}}else{j.call(this,f[this.perfIndex].pvm,n[this.sizeIndex].svm,b[this.featureIndex],f[this.perfIndex].core,n[this.sizeIndex].core,this.operatingSystem)}return d},optionsChanged:function(){e.call(this)}})});