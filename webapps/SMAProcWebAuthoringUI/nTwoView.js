define("DS/SMAProcWebAuthoringUI/nTwoView",["DS/SMAProcWebCommonControls/Polymer","DS/SMAProcWebCommonControls/utils","DS/SMAProcWebDiagram/nTwoGraphLayout","DS/SMAProcWebCMMUtils/SMAJSCMMAuthoringUtils","DS/SMAProcWebCMMUtils/SMAJSCMMDataFlowUtils","DS/JSCMM/SMAJSCMMUtils","text!DS/SMAProcWebAuthoringUI/nTwoView.html"],function(h,c,b,e,a,g,f){c.registerDomModule(f);var d={OneToMany:"ONETOMANY",Sequential:"ROUTE",AtoA:"AtoA"};return h({is:"cmp-ntwo-view",properties:{sourceActivity:{type:Object},destinationActivities:{type:Array,value:[]},mode:{type:String,value:d.AtoA}},ready:function(){b.CleanUp();b.initialize(this.$.graph_canvas);this.initializeAllDataflows();this.addEventListener("process-click",function(i){this.fire("toggleselection",{activity:i.detail.data})})},updateCurrentnTwoGraph:function(i,j){if(j){this.mode=j}b.reRender(this.sourceActivity,i);this.highlightNodes(this.sourceActivity,this.destinationActivities);this.highlightEdges(this.sourceActivity,this.destinationActivities,j||this.mode)},initializeAllDataflows:function(){var k=e.getCurrentProcess();var j=g.getnTwoOrderedFIs(k);var i=j.filter(function(l){return l.isActivity()||l.isProcess()});a.getAllDataFlowsInPLM(i,{onSuccess:function(){b.createnTwoGraph(k,this.sourceActivity,true);b._highlightNodes(this.sourceActivity);b.fitAllIn()}.bind(this),onFailure:function(){console.error("Graph creation failed")}})},clear:function(){b.CleanUp()},highlightDataPaths:function(l){var k=[];for(var j=0;j<l.length;j++){l[j].dataflows.forEach(function(i){k.push(i._fromParameter.getParent().getId()+"_n2_"+i._toParameter.getParent().getId())})}b._highlightEdges(k)},unHighlightAllEdges:function(){b._unHighlightAllEdges()},setHeight:function(i){this.$.graph_canvas.style.height=i;this.style.height=i},getGraphNode:function(i){return b.getGraphNode(i)},getActivityView:function(k){var i=b.getGraphNode(k);if(i&&i.views&&i.views.main&&i.views.main.display){var j=i.views.main.display.elt;return j}},highlightNodes:function(i,j){b._highlightNodes(i,j);this.sourceActivity=i;this.destinationActivities=j},highlightEdges:function(i,j,n){if(n){this.mode=n}var k=i&&i.getId&&i.getId();var m=[];if(j.length===1||j.length===0){var l=j[0]&&j[0].getId&&j[0].getId();if(k&&l){m.push(k+"_n2_"+l)}}else{if(n==="ONETOMANY"){j.forEach(function(o){m.push(k+"_n2_"+o.getId())})}else{if(n==="ROUTE"){j.forEach(function(o,p){if(p===0){m.push(k+"_n2_"+o.getId())}else{m.push(j[p-1].getId()+"_n2_"+o.getId())}})}}}b._highlightEdges(m)},fitAllIn:function(){b.fitAllIn()}})});