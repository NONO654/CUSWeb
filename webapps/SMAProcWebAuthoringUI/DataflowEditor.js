define("DS/SMAProcWebAuthoringUI/DataflowEditor",["DS/SMAProcWebCommonControls/Polymer","DS/SMAProcWebCommonControls/utils","text!DS/SMAProcWebAuthoringUI/DataflowEditor.html","DS/SMAProcWebAuthoringControls/WebUXDialog","DS/SMAProcWebAuthoringUtils/cmp-dataflow-editor/cmp-dataflow-editor"],function(d,a,b){a.registerDomModule(b);var c;return window.Polymer({is:"cmp-dataflow-editor-modal",properties:{dataContainer:{type:Object}},attached:function(){this.$.dialogcontent.innerHTML="";this.$.dialogcontent.appendChild(this.getDataFlowEditor())},getDataFlowEditor:function(){var e;if(!this.dataFlowEditor){e=document.createElement("cmp-dataflow-editor");e.addEventListener("dialogHeaderChanged",function(f){if(f.detail&&f.detail.getName){this.setDialogHeading(f.detail.getName())}else{this.setDialogHeading()}}.bind(this));this.dataFlowEditor=e}return this.dataFlowEditor},saveAndLoad:function(e){this.dataFlowEditor.save().then(function(){this.setDataContainer(e,false)}.bind(this))},getDataContainer:function(){return this.dataContainer},setDialogHeading:function(e){var f;if(e&&e.length>0&&this.$.dataflowDialog&&this.$.dataflowDialog.setTitle){f="Data Mapping - "+e}else{f="Data Mapping"}this.$.dataflowDialog.setTitle(f);this.$.dataflowDialog.identifier=f;this.$.dataflowDialogContent.parentElement.style.backgroundColor="white"},maximizeDialog:function(){this.$.dataflowDialog.setAttribute("maximized-flag",true)},syncSelectionWithTree:function(e){c.syncSelectionWithTree(e)},toggleActivitySelection:function(f,e,h){var g=this.getDataFlowEditor();g&&this._callWhenAttached(g,function(){g.toggleActivitySelection(f,e)});h&&this.$.dataflowDialog.show()},onClose:function(){this.dataFlowEditor.onClose();this._close()},onOK:function(){this.dataFlowEditor.onOK(function(){this._close()}.bind(this))},onCancel:function(){this.dataFlowEditor.onCancel();this._close()},_close:function(){this.$.dataflowDialog.hide();this.fire("onClose");this.$.dataflowDialog.destroy()},onApply:function(){this.dataFlowEditor.onApply()},onResize:function(){this.dataFlowEditor.onResize()},_callWhenAttached:function(e,g){if(e.isAttached){g()}else{e.addEventListener(e.tagName.toLowerCase()+"-attached",function f(){e.removeEventListener(e.tagName.toLowerCase()+"-attached",f);g()})}},updateSelection:function(e,f,g){this.dataFlowEditor.updateSelection(e,f,g)},getSourceActivity:function(){return this.dataFlowEditor.sourceActivity},getDestinationActivities:function(){return this.dataFlowEditor.destinationActivities},getMode:function(){return this.dataFlowEditor.mode}})});