define("DS/SMAAnalyticsEssential/components/SMAAnalyticsFormulationUI",["UWA/Core","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsFormulationUI"],function(g,f,d,e,b){var a=null;var c=g.Class.extend({init:function(h){a=this;h=h||{};this.popovers={};this.target=h.target||document.body},show:function(i,h){this._createPopover(i,h)},_createPopover:function(h,i){a._createFormulationUINew(h);this.analyticsFormulationUI.show().then(function(){a.updateFormulation(this.analyticsFormulationUI.getChanges(),i)}.bind(this),function(){})},_createFormulationUINew:function(j){var i=null,k=null;if(j.constraints){j.constraints.forEach(function(n){var l=null,m=null;if(n.conditions){n.conditions.forEach(function(o){if(o.type==="GREATER_THAN"){m=o.boundValue}else{if(o.type==="LESS_THAN"){l=o.boundValue}}})}if(l!==null&&m===null){i=l}else{if(l===null&&m!==null){k=m}}})}var h={header:f.get("REQUIREMENTS_FOR")+" "+j.displayName,id:j.id,priority:j.priority,objective:g.is(j.objective)&&g.is(j.objective.type)?j.objective.type:"",lowerThreshold:e.precise(k),upperThreshold:e.precise(i),min:e.precise(j.min),max:e.precise(j.max),target:g.is(j.objective)&&g.is(j.objective.value)?e.precise(j.objective.value):""};this.analyticsFormulationUI=new b(h)},updateFormulation:function(i,h){d.modifyFormulation(i).then(h)}});return c});define("DS/SMAAnalyticsEssential/components/requirements-table/SMAAnalyticsLiteRequirementsTableModel",["UWA/Core","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/Logger/Logger","module","DS/SMAAnalyticsCommon/SMAAnalyticsCommonProxy"],function(f,a,g,j,b,d,c,k){var h;var i=d.getLogger(c);var e=f.Class.extend({init:function(){h=this;h.requirementsData={};h.newRequirementsData={rowHierarchy:[],columnData:[],metaData:{numRows:0,numAlternatives:0}}},getRAERequirementsUIModel:function(){return new Promise(function(m,l){h.getRequirementsData().then(function(r){h.requirementsData=r;h.transformRequirementsData(r);h.raeRequirementsUIDoc=new a({useAsyncPreExpand:true});var p=new g({label:"Requirements"});var q=h._createModel(p,h.newRequirementsData.rowHierarchy,true);var o=[];var n=true;if(q&&q.getChildren&&q.getChildren()&&q.getChildren().length>0){q.getChildren().forEach(function(s){if(n){n=false;s.expandAll()}o.push(s)})}h.raeRequirementsUIDoc.addChild(o);m(h.raeRequirementsUIDoc)},function(n){i.error(n);l(n)})})},getRequirementsData:function(){var l=b.caseData.Requirement;var m=[];if(l&&l.length>0){l.forEach(function(n){m.push(n.physicalID)})}return new Promise(function(o,n){k.getRequirementsParameters(m).then(function(p){o(p)},function(p){n(p)})})},_createModel:function(l,o,p){var n;if(!p&&o.length===undefined){n=new g({label:h.getName(o),grid:{type:(o.type.toUpperCase()==="GROUP")?"":o.type,value:o.parameterValue,transformedValue:h.getTransformedValue(o),id:o.id,max:o.max,min:o.min,name:h.getName(o),priority:o.priority,objective:o.objective,physicalId:o.physicalId,unit:o.unit}})}else{n=l}if(o!==null&&o!==undefined){if(o.length===undefined){if(!p){l.addChild(n)}this._createModel(n,o.children,true)}else{for(var m=0;m<o.length;m++){if(!p){l.addChild(n)}this._createModel(n,o[m],false)}}}else{if(p===false){l.addChild(n)}}return l},getName:function(m){var l="";if(m.title&&m.type.toUpperCase()==="GROUP"){l=m.title}else{l=m.name}return l},getTransformedValue:function(m){var l="";if(m.type.toUpperCase()!=="GROUP"){if(m.type==="REAL"||m.type==="INTEGER"){if(m.min||m.max){if(m.min!==m.max){l=m.min+"-"+m.max}else{l=m.min}}}else{if(m.type==="STRING"){l=m.value}}}return l},transformRequirementsData:function(l){var m=l.requirementsList||l["analytics-requirement"]||[];m.forEach(function(o){var p={};p.type="GROUP";p.id=o.id;p.name=o.name;p.title=o.title;p.children=[];var n=typeof o.parametersList!=="undefined"?o.parametersList.parameterList||o.parametersList["analytics-parameter"]||[]:[];h.newRequirementsData.metaData.numRows+=n.length;p.children=h.hierarchyparsefunction(n);h.newRequirementsData.rowHierarchy.push(p)})},hierarchyparsefunction:function(m){var l=[];m.forEach(function(n){var o={id:n.id,name:n.title,type:n.type,min:n.minimum,max:n.maximum,objective:n.objective,parameterValue:n.parameterValue,physicalId:n.physicalId,priority:n.priority,unit:n.unit};l.push(o)},this);return l}});return e});define("DS/SMAAnalyticsEssential/SMAAnalyticsManageLifecycle",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase"],function(h,b,d,a,e,g){var c=b.getLogger(d);var f=a.extend({execute:function(i){c.debug("execute");if(e.isTransientWidget()){return}var j="DS/TransientWidget/TransientWidget",m=h.is(i)?i:g.caseInfo.physicalId,l=h.is(widget.data.appId)?widget.data.appId:widget.environment.data._data._x_appId;var k={protocol:"3DXContent",version:"1.1",source:l,widgetId:widget.id,data:{items:[{envId:e.getCurrentPlatformId(),objectId:m,objectType:"Analytics Case",displayType:"Analytics Case"}]}};if(m){require([j],function(n){var o={mode:"panel",height:800,width:700};n.showWidget("ENOLCMI_AP","",{X3DContentId:JSON.stringify(k)},o)},function(n){c.error("execute- TransientWidget Require Failed ",n)})}else{c.error("execute- No physical id.")}}});return f});define("DS/SMAAnalyticsEssential/components/mapping-table/SMAAnalyticsLiteMappingTableModel",["UWA/Core","DS/Logger/Logger","module","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/SMAAnalyticsUtils"],function(e,c,b,a,f,d,j){var g,i=c.getLogger(b);var h=e.Class.extend({init:function(k){g=this;g.expandNodeId=e.is(k.expandNodeId)?k.expandNodeId:undefined;g.raeMergeUIDoc=new a({useAsyncPreExpand:true});g._getDataForModel().then(function(o){var m=new f({label:"DataSets"});var n=g._createModel(m,o.rowHierarchy,true);var l=[];if(n&&n.getChildren&&n.getChildren()&&n.getChildren().length>0){n.getChildren().forEach(function(t){if(e.is(g.expandNodeId)&&t.options.grid.id===g.expandNodeId){t.expand();var r=t.getChildren();if(r.length>0){var s=r[r.length-1];s.expand();var q=s.getChildren();q.forEach(function(p){p.expand()})}}l.push(t)})}g.raeMergeUIDoc.addChild(l)})},_getDataForModel:function(){return new Promise(function(l,k){d.getParameterMergeData().then(function(m){i.debug(m);l(m)},function(m){i.error(m);k(m)})})},_createModel:function(k,n,o){var m;if(!o&&n.length===undefined){m=new f({label:(n.title)?n.title:n.name,grid:{type:(n.type.toUpperCase()==="GROUP")?"":n.type,value:n.value,transformedValue:g.getTransformedValue(n),id:n.id,name:n.name,priority:n.priority,objective:n.objective}})}else{m=k}if(n!==null&&n!==undefined){if(n.length===undefined){if(!o){k.addChild(m)}this._createModel(m,n.children,true)}else{for(var l=0;l<n.length;l++){if(!o){k.addChild(m)}this._createModel(m,n[l],false)}}}else{if(o===false){k.addChild(m)}}return k},getTransformedValue:function(l){var k="";if(l&&l.type&&l.type.toUpperCase()!=="GROUP"){if(l.type==="REAL"||l.type==="INTEGER"){if(e.is(l.min)&&e.is(l.max)){if(l.min!==l.max){k=l.min+"-"+l.max}else{k=l.min}}k=j.precise(k)}else{if(l&&l.type&&(l.type==="STRING"||l.type==="BOOLEAN")){k=l.value}}}if(typeof l.unit!=="undefined"){return k+" "+l.unit}return k},getRAEMergeUIModel:function(){return this.raeMergeUIDoc}});return h});define("DS/SMAAnalyticsEssential/SMAAnalyticsMappingToolbar",["UWA/Core","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Tweakers/GeneratedToolbar","DS/Tweakers/TypeRepresentationFactory","text!DS/SMAAnalyticsEssential/assets/toolbar/toolbar_param_mapping.json","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(h,b,g,f,a,e,d){var c={getToolbar:function(){var i=e;var n,j;n=new b({});j=JSON.parse(i);if(!j.entries){return null}j.entries.forEach(function(p){p.label=d.get(d.get(p.label));n.addRoot(new g(p))});var m=new a();if(j.enums){for(var o in j.enums){m.registerEnum(o,j.enums[o])}}if(j.typeRepresentations){var l=Object.keys(j.typeRepresentations);l.forEach(function(p){var q=j.typeRepresentations[p];q.semantics.label=d.get(q.semantics.label);q.label=d.get(q.label)});m.registerTypeRepresentations(j.typeRepresentations)}var k=new f({overflowManagement:"dropdown",direction:"horizontal",items:n,typeRepresentationFactory:m});return k}};return c});define("DS/SMAAnalyticsEssential/SMAAnalyticsEssentialUtils",["UWA/Core"],function(b){var a={getRecentCaseIds:function(d){var c=widget.getValue("recentcaseids"),f=b.is(d)&&d>0?d:5,e=[];if(b.is(c)&&c.length>0){c.split("|").forEach(function(g){if(g.length>0){e.push(g)}})}if(e.length>f){return e.splice(0,f)}return e}};return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsHistory",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsHistoryDialog","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(g,e,d,c,b,j,f,i){var h=e.getLogger(d);var a=c.extend({execute:function(){h.debug("execute");j.mask(i.get("LOADING_HISTORY"));b.getHistory().then(function(k){f.showDialog(b.caseInfo.title,k.history,j.getImmersiveFrame());j.unmask()},function(k){h.error(k);j.unmask();j.showErrorNotification("",i.get("HIST_VIEW_FAIL"))})}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsSetup",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/Windows/Dialog","DS/Controls/Button","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsDatasetView","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(g,d,c,b,l,h,k,e,f,j){var i=d.getLogger(c);var a=b.extend({execute:function(){i.debug("execute");var m=this;f.getAlternatives().then(function(o){i.debug("execute: "+o);o.forEach(function(r){if(r.hidden===true){r.visible="false"}else{r.visible="true"}var q=parseFloat(r.rank);var p=parseFloat(r.score);if(isNaN(q)||q<=0){r.rank="-"}if(isNaN(p)||p===0){r.score="0"}else{r.score=Math.round(p*100)/100}r.dType=m._formatTypeName(r.dType)});e.initialize({data:o,columns:m._getColumns(),toolbar:m._getToolbar()});var n=new l({title:j.get("SETUP"),content:e.getView(),immersiveFrame:k.getImmersiveFrame(),resizableFlag:true,width:"635",height:"400",header:e.getToolbar(),icon:"legend-eye",modalFlag:true,usePaddingFlag:true,buttons:{Cancel:new h({label:j.get("CLOSE"),onClick:function(r){var p=r.dsModel;var q=p.dialog;q.close()}})}});n.addEventListener("close",function(){})},function(n){i.error(n)})},_formatTypeName:function(m){switch(m){case"DesignSight":return j.get("PHYSICS_SIMULATION");case"Simulation":return j.get("SIMULATION_PROCESS");case"Test Execution":return j.get("TEST_EXECUTION");default:return m}},_getColumns:function(){return[{text:j.get("ALTERNATIVE"),dataIndex:"name",pinned:"left"},{text:j.get("VISIBLE"),dataIndex:"visible",width:"100",minWidth:"60",typeRepresentation:"boolean"},{text:j.get("RANK"),dataIndex:"rank",width:"80",minWidth:"60",typeRepresentation:"integer"},{text:j.get("SCORE"),dataIndex:"score",width:"120",minWidth:"80",typeRepresentation:"progress"},{text:j.get("TYPE"),dataIndex:"dType"}]},_getToolbar:function(){return{entries:[{id:"ID_1",dataElements:{typeRepresentation:"string",value:"",label:j.get("ALTERNATIVE"),displayLabel:true,tooltip:"Search alternatives",overflowPriority:"none",category:"Component"},children:[]},{id:"ID_2",dataElements:{typeRepresentation:"function",label:j.get("FILTER"),overflowPriority:"none",icon:"search",category:"Component",readOnly:false,position:"near",action:{module:"DS/SMAAnalyticsEssential/SMAAnalyticsSetupActions",func:"filter",argument:{isCheck:false,mode:"all"}}},children:[]},{id:"ID_3",dataElements:{typeRepresentation:"function",label:j.get("HIDE"),icon:"eye-slash",category:"other",readOnly:false,position:"near",action:{module:"DS/SMAAnalyticsEssential/SMAAnalyticsSetupActions",func:"hide"}},children:[]},{id:"ID_4",dataElements:{typeRepresentation:"function",label:j.get("UNHIDE"),icon:"eye",category:"other",readOnly:false,position:"near",action:{module:"DS/SMAAnalyticsEssential/SMAAnalyticsSetupActions",func:"unhide"}},children:[]}]}}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsOpenRA",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsCase"],function(g,b,d,a,f){var c=b.getLogger(d),e=a.extend({execute:function(){c.debug("execute");f.openInRA()}});return e});define("DS/SMAAnalyticsEssential/SMAAnalyticsEssProperties",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase"],function(h,b,d,a,e,g){var c=b.getLogger(d);var f=a.extend({execute:function(){c.debug("execute");if(e.isTransientWidget()){return}var j="DS/LifecycleControls/EditPropDialog",k=g.caseInfo.physicalId;if(h.is(k)){var i={getSecurityContext:function(){return widget.getValue("collabspaces")},getSelectedNodes:function(){return[{getID:function(){return k}}]}};require([j],function(m){var l=new m();l.launchProperties(i)},function(l){c.error("execute- EditPropDialog Require Failed ",l)})}else{c.error("execute- No physical id.")}}});return f});define("DS/SMAAnalyticsEssential/SMAAnalyticsAddRequirement",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/ApplicationFrame/CommandsManager"],function(h,b,e,a,f,d){var c=b.getLogger(e),g=a.extend({init:function(i){this._parent(i,{mode:"exclusive",isAsynchronous:false})},execute:function(){c.debug("execute");if(f.isTransientWidget()){return}var i=d.getCommand("SMAAnalyticsSearchHdr");i.execute({plmTypes:"Requirement",command:"addrequirement",multiSelect:true})}});return g});define("DS/SMAAnalyticsEssential/components/SMAAnalyticsPopover",["UWA/Class","DS/Controls/Button","DS/Windows/Dialog","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(c,f,e,d,g){var a=null;var b=c.extend({init:function(h){a=this;this.isReady=false;h=h||{};this.closeButtonFlag=typeof h.closeButtonFlag==="boolean"?h.closeButtonFlag:false;this.resizableFlag=typeof h.resizableFlag==="boolean"?h.resizableFlag:true;this.isModal=h.isModal||false;this.usePaddingFlag=false;this.width=h.width||500;this.height=h.height||400;this.position={};if(UWA.is(h.offsetX)||UWA.is(h.offsetY)){this.position.offsetX=UWA.is(h.offsetX)?h.offsetX:"";this.position.offsetY=UWA.is(h.offsetY)?h.offsetY:""}this.immersiveFrame=d.getImmersiveFrame();this.title=h.title||"";this.okLabel=h.okLabel||"OK";this.okLabel=g.get(this.okLabel);this.closeLabel=h.closeLabel||"CLOSE";this.closeLabel=g.get(this.closeLabel)},setTitle:function(h){this.title=h||this.title||""},open:function(){if(this.dialog){this.dialog.visibleFlag=this.visibleFlag=true}},close:function(){if(this.dialog){this.dialog.buttons.Close.fire("click")}},onResize:function(h){if(this.dialog){this.dialog.addEventListener("stopResize",function(){if(a.dialogContent.parentNode&&a.dialogContent.parentNode.classList){a.dialogContent.parentNode.classList.add("rae-popover-fix")}if(typeof h==="function"){h()}});this.dialog.fire("stopResize")}},injectContent:function(i,n){var m=i?i.body:null,r=i?i.footer:null,l=i?i.header:null;var k=document.createElement("div");k.classList.add("rae-popover");k.closeCallback=n?n.close:null;k.okCallback=n?n.ok:null;k.applyCallback=n?n.apply:null;k.confirmOnCloseCallback=n?n.confirmOnCloseCallback:null;var q=document.createElement("div");q.classList.add("rae-popover-container");if(l){var h=document.createElement("div");h.classList.add("ra-pmui");h.classList.add("rae-popover-head");h.appendChild(l);q.appendChild(h)}if(m){var j=document.createElement("div");j.classList.add("rae-popover-main");j.appendChild(m);q.appendChild(j)}if(r){var p=document.createElement("div");p.classList.add("ra-pmui");p.classList.add("rae-popover-foot");p.appendChild(r);q.appendChild(p)}k.appendChild(q);this.dialogContent=k;var o={Close:new f({label:this.closeLabel,onClick:function(u){var s=u.dsModel;var t=s.dialog;if(typeof k.confirmOnCloseCallback==="function"){t.__contentWrapper__.confirmOnCloseCallback().then(function(){t.close()},function(){})}else{t.close()}}})};if(typeof k.okCallback==="function"){o.Apply=new f({label:this.okLabel,emphasize:"primary",onClick:function(u){var s=u.dsModel;var t=s.dialog;t.__contentWrapper__.okCallback();t.close()}})}this.dialog=new e({title:this.title,content:this.dialogContent,immersiveFrame:this.immersiveFrame,resizableFlag:this.resizableFlag,width:this.width,height:this.height,position:this.position,closeButtonFlag:true,visibleFlag:true,buttons:o,modalFlag:this.isModal});if(o.Apply){o.Apply.emphasize="primary"}this.dialog.__contentWrapper__=k;this.dialog.addEventListener("close",function(){if(k&&typeof k.closeCallback==="function"){k.closeCallback()}})}});return b});define("DS/SMAAnalyticsEssential/components/SMAAnalyticsCommentUI",["UWA/Core","DS/UIKIT/Modal","DS/Controls/Button","DS/Controls/TooltipModel","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsEssential/components/SMAAnalyticsPopover","DS/Controls/Editor","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsConfirmDialog","css!DS/SMAAnalyticsEssential/components/SMAAnalyticsCommentUI"],function(b,c,h,f,a,g,k,j,i,l){var e=null;var d=b.Class.extend({init:function(m){e=this;m=m||{};this.target=m.target||document.body},getCommentForm:function(r){var t=document.createElement("div");var n=j.get("RESPOND_TO")+" ",u=null,p=false;if(typeof r==="undefined"){u=e.activeRow.rowId;n=j.get("LEAVE_A_COMMENT")}else{u=r.id;if(r.user&&r.user.name){n+=r.user.name}p=true}var q=b.createElement("div",{"class":"rae-comment-ta-container"});var v=b.createElement("div",{"class":"rae-comment-textarea"});q.appendChild(v);e.textArea=new k({placeholder:n+" ...",requiredFlag:true,escapeHTML:true}).inject(v);var w=b.createElement("div",{"class":"rae-comment-button-container"});q.appendChild(w);var o=new h({value:"Submit",emphasize:"primary",label:j.get("ADD_COMMENT"),onClick:function(){var x=e.textArea.value;if(b.is(x)&&x.length>0){a.setCommentOnRow(e.activeRow.rowIndex,x,u).then(function(y){e.refreshCommentForm(y)})}}});o.inject(w);if(p){var s=b.createElement("div",{"class":"rae-comment-cancel"});var m=new h({value:"Cancel",label:j.get("CANCEL"),onClick:function(){e.refreshCommentForm()}});m.inject(s);s.inject(w)}t.appendChild(q);return t},clearFooter:function(){},showCommentsForRowId:function(o,n){e.activeRow=o;var m=document.createElement("div");m.classList.add("ra-pmui");m.classList.add("ra-pmui-container");e.commentContainer=document.createElement("div");e.commentContainer.id="RAE-comments-container";e.commentContainer.classList.add("ra-popover-container");e.commentContainer.classList.add("ra-comment-ui");e.commentChangeCallback=n;a.getCommentsForRow(e.activeRow.rowIndex).then(function(p){e.refreshCommentForm(p)});e.popover=new g({resizableFlag:true,title:j.get("COMMENTS_FOR")+" "+e.activeRow.name});e.commentFooter=document.createElement("div");e.commentFooter.appendChild(e.getCommentForm());e.popover.injectContent({body:e.commentContainer,footer:e.commentFooter},{confirmOnCloseCallback:e.confirmCloseCommentForm});e.popover.onResize();e.popover.open()},confirmCloseCommentForm:function(){if(e.textArea.value===""){return Promise.resolve(true)}else{var m={immersiveFrame:i.getImmersiveFrame(),label:j.get("CONFIRM_DISCARD_MESSAGE"),header:j.get("CONFIRM_CLOSE"),okLabel:j.get("YES_BUTTON_LABEL"),cancelLabel:j.get("NO_BUTTON_LABEL")};return l.showDialog(m)}},refreshCommentForm:function(m){e.commentList=m||e.commentList;if(typeof e.commentChangeCallback==="function"){e.commentChangeCallback()}if(!Array.isArray(e.commentList)||e.commentList.length===0){e.commentContainer.textContent=j.get("NO_COMMENTS")}else{e.commentContainer.innerHTML="";e.commentList.forEach(function(n){e.displayComment(n)},this)}if(e.commentFooter){e.commentFooter.innerHTML="";e.commentFooter.appendChild(e.getCommentForm())}if(e.textArea){e.textArea.value=""}},displayComment:function(t,x,r){r=typeof r!=="undefined"?r:0;var m=document.createElement("div");m.classList.add("ra-comment");if(r>0){m.classList.add("ra-comment-sub");m.classList.add("ra-comment-sub-"+r);m.setAttribute("style","margin-left:"+r*8+"px;")}var w=document.createElement("div");w.classList.add("ra-comment-header");w.classList.add("ra-comment-section");var q=document.createElement("span");q.classList.add("ra-comment-user");q.textContent=t.user.name;w.appendChild(q);var n=b.createElement("span",{"class":"ra-comment-date"});n.textContent="- "+i.getModifiedInterval(t.date);try{var p=new Date(parseInt(t.date));n.tooltipInfos=new f({shortHelp:p.toLocaleString(widget.lang+"-"+widget.locale),mouseRelativePosition:true})}catch(v){}w.appendChild(n);m.appendChild(w);var y=document.createElement("div");y.classList.add("ra-comment-content");y.classList.add("ra-comment-section");y.textContent=b.String.unescapeHTML(decodeURIComponent(t.text));m.appendChild(y);var o=document.createElement("div");o.classList.add("ra-comment-footer");o.classList.add("ra-comment-section");var s=document.createElement("span");s.commentObj=t;s.classList.add("rae-comment-reply");s.textContent=j.get("REPLY_BUTTON_LABEL");s.onclick=e.subComment;o.appendChild(s);m.appendChild(o);e.commentContainer.appendChild(m);if(Array.isArray(t.comments)){var u=r+1;t.comments.forEach(function(z){e.displayComment(z,t,u)},this)}},subComment:function(){if(e.commentFooter){e.commentFooter.innerHTML="";this.parentElement.appendChild(e.getCommentForm(this.commentObj))}}});return d});define("DS/SMAAnalyticsEssential/components/mappng-table/SMAAnalyticsLiteMappingTableView",["UWA/Core","UWA/Element","DS/Core/Core","DS/Tree/TreeListView","DS/Controls/ComboBox","DS/SMAAnalyticsEssential/components/mapping-table/SMAAnalyticsLiteMappingTableModel","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(c,a,f,d,h,e,b,l){var i,g,k,j=c.Class.extend({init:function(m){i=this;i.paramList=[];i.paramList[0]={labelItem:l.get("Remove_Mapping"),valueItem:"REMOVE_",iconItem:"minus"};i.paramList[1]={labelItem:l.get("New_Parameter"),valueItem:"NEWPARAM_",iconItem:"plus"};i.paramsToMerge=[];i.paramsToUnmerge=[];i.previousSelectedVal="";i.previousSelectedLabel="";i.previousSelectedIndex=-1;i.mtable=new e({expandNodeId:m.expandNodeId});i.docModel=i.mtable.getRAEMergeUIModel();i.matchedNodesList=[];i.mergeTableUI=new d(this.createTreeListView());i.mergeTableUI.options.columns[0].text=l.get("PARAM_MAPPING_DATASET_COL");i.mergeTableUI.options.columns[0].width="38%";i.mergeTableUI.options.columns[0].isSortable=true;i.mergeTableUI.options.columns[0].isEditable=false;if(m.model){i.model=m.model}},createTreeListView:function(){var m=this;return{height:"auto",width:"auto",enableDragAndDrop:false,isEditable:true,isSortable:true,infiniteScrolling:true,enableKeyboardNavigation:true,expanderStyle:"classic",resize:{columns:true,rows:false},columns:[{text:l.get("TYPE"),dataIndex:"type",isEditable:false,isSortable:true,width:"14.5%"},{text:l.get("VALUE"),dataIndex:"transformedValue",isEditable:false,isSortable:true,width:"14.5%"},{text:l.get("PARAMETERS"),dataIndex:"Parameters",isEditable:false,isSortable:true,width:"32%",onCellRequest:function(s){if(!s.isHeader){var t=s.nodeModel;var n=-1;var r=s.nodeModel.options.grid.type;if((r&&r.length>0&&r!=="GROUP"&&i.paramList)||g){var q=i.paramList;if(!g){q.some(function(v,u){if(v.objectId===t.options.grid.id||(v.mergedFromVars&&v.mergedFromVars.indexOf(t.options.grid.id)>-1)){n=u;return true}return false})}else{g=false;n=k}var p=new h({elementsList:q,placeholder:l.get("SELECT_PARAM_MAP"),selectedIndex:n,enableSearchFlag:true,autocompleteFlag:true});var o=p.elements.container.getElementsByClassName("wux-ui-state-undefined");if(o.length>0){o[0].addClassName("wux-controls-lineeditor");o[0].removeClassName("wux-ui-state-undefined")}p.addEventListener("change",function(z,C){C.stopPropagation();C.preventDefault();var x=C.dsModel,v={},D={},w=null,A=null,y=null;w=null;if(x.selectedIndex===1){if(i.previousSelectedIndex>1){D={parameterName:i.previousSelectedLabel,parameter:t.options.grid,id:i.previousSelectedVal};w=x.elementsList[i.previousSelectedIndex];A=t.options.grid.id;if(w&&Array.isArray(w.mergedFromVars)){y=w.mergedFromVars.indexOf(A);if(y>=0){w.mergedFromVars.splice(y,1)}}i.paramsToUnmerge[t.options.grid.id]=D}var B=this.nodeModel.options.grid.name;var u="NEWPARAM_"+(Object.keys(i.paramsToMerge).length);k=c.clone(x.elementsList.length);g=true;v={parameterName:B,parameter:t.options.grid,id:c.clone(u)};i.paramsToMerge[t.options.grid.id]=v;i.updateParameterList(false);this.manager.updateRowView(this.virtualRowID)}else{if(x.selectedIndex===0){D={parameterName:i.previousSelectedLabel,parameter:t.options.grid,id:i.previousSelectedVal};w=x.elementsList[i.previousSelectedIndex];A=t.options.grid.id;if(w&&Array.isArray(w.mergedFromVars)){y=w.mergedFromVars.indexOf(A);if(y>=0){w.mergedFromVars.splice(y,1)}}i.paramsToUnmerge[t.options.grid.id]=D;x.selectedIndex=-1}else{if(x.selectedIndex===-1){}else{if(i.previousSelectedIndex>1){D={parameterName:i.previousSelectedLabel,parameter:t.options.grid,id:i.previousSelectedVal};w=x.elementsList[i.previousSelectedIndex];A=t.options.grid.id;if(w&&Array.isArray(w.mergedFromVars)){y=w.mergedFromVars.indexOf(A);if(y>=0){w.mergedFromVars.splice(y,1)}}i.paramsToUnmerge[t.options.grid.id]=D}v={parameterName:x.currentLabel,parameter:t.options.grid,id:x.currentValue};w=x.elementsList;i.paramsToMerge[t.options.grid.id]=v;i.updateParameterList(true)}}}}.bind(s,m));p.addEventListener("preDropdown",function(w,u){var v=u.dsModel;if(v){i.previousSelectedVal=v.currentValue;i.previousSelectedLabel=v.currentLabel;i.previousSelectedIndex=v.selectedIndex}}.bind(s,m));p.addEventListener("keyup",function(v,u){if(u.key==="Enter"){u.stopPropagation()}}.bind(s,m));s.cellView.getContent().setHTML(p)}}}}],selection:{cells:false,rowHeaders:true,columnHeaders:false,canMultiSelect:true,useUnselectAllOnEmptyArea:true},showLoaderIndicator:true,treeDocument:this.docModel}},setParamList:function(n){var m=[];m[0]={labelItem:l.get("Remove_Mapping"),valueItem:"REMOVE_",iconItem:"minus"};m[1]={labelItem:l.get("New_Parameter"),valueItem:"NEWPARAM_",iconItem:"plus"};n.forEach(function(o){m.push({labelItem:decodeURIComponent(o.displayName),valueItem:o.id,objectId:o.id,mergedFromVars:o.mergedFromVars})},this);i.paramList=m},expandCollapse:function(m){var n=i.docModel.getSelectedNodes();if(n.length===0){if(m===true){i.docModel.collapseAll()}else{i.docModel.expandAll()}return}n.forEach(function(o){if(m===true){o.collapseAll()}else{o.expandAll()}})},searchModel:function(n){var m=i.docModel;i.showAllNodes(m);n=n.replace(/\*/g,"");if(n.length>0){this.matchedNodesList=m.search({match:function(o){if(n&&o.nodeModel.options.label.toLowerCase().indexOf(n.toLowerCase())!==-1){return true}return false}});i.hideAllNodes(m);m.prepareUpdate();this.matchedNodesList.forEach(function(p){p.show();var o=p.getParents();o.forEach(function(q){q.show()});p.show();p.reverseExpand()});m.pushUpdate()}},showAllNodes:function(m){m.prepareUpdate();if(m&&m.getAllDescendants&&m.getAllDescendants()!==null){m.getAllDescendants().forEach(function(n){n.show()})}m.collapseAll();m.pushUpdate()},hideAllNodes:function(m){m.prepareUpdate();if(m&&m.getAllDescendants&&m.getAllDescendants()!==null){m.getAllDescendants().forEach(function(n){n.hide()})}m.pushUpdate()},updateParameterList:function(m){Object.keys(i.paramsToMerge).forEach(function(n){var p=i.paramsToMerge[n],o=false;if(i.paramsToUnmerge[n]&&m&&i.paramsToUnmerge[n].id===p.id){delete i.paramsToUnmerge[n]}o=i.paramList.some(function(q){if(q.valueItem===p.id){q.mergedFromVars.push(n);return true}return false},this);if(!o){i.paramList.push({labelItem:p.parameterName,valueItem:p.id,mergedFromVars:[n]})}},this)},getParamList:function(){return i.paramList},getMergeUI:function(){return this.mergeTableUI},getMergeCallback:function(){return new Promise(function(n,m){b.mergeParameters(i.paramsToMerge,i.paramsToUnmerge,i.model.title).then(function(o){n(o)},function(o){m(o)})})}});return j});define("DS/SMAAnalyticsEssential/components/SMAAnalytics3DPlayer",["UWA/Class","UWA/Core","DS/Logger/Logger","module","DS/SMAAnalyticsEssential/components/SMAAnalyticsPopover","DS/SimReviewHelper/SimReviewHelper","DS/3DPlayHelper/3DPlayHelper","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/WebappsUtils/WebappsUtils","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/3DPlay/3DPlay","css!DS/SMAAnalyticsEssential/components/SMAAnalytics3DPlayer"],function(a,i,c,b,j,g,d,m,e,l){var h=null,k=c.getLogger(b),f=a.extend({init:function(){h=this;h.activePlayers={}},createPlayerIFrame:function(o,q,n){var p=document.createElement("iframe");p.onload=function(){p.onload="";n(null,p.contentWindow)};p.src=q;p.style.width="100%";p.style.height="100%";o.appendChild(p);return p},loadPlayer:function(s,q,v){var u="RAE-PSR-Player-"+s;if(!h.activePlayers[u]){var o=document.createElement("div");o.id=u;o.classList.add("ra-popover-container");o.classList.add("ra-3dplayer-container");o.style.position="100%";o.style.height="100%";var p=e.getProxifiedWebappsBaseUrl()+"SMAAnalyticsEssential/components/SMAAnalytics3DPlayer.html";p+="?plmid="+s;p+="&serverurl="+encodeURIComponent(m.get3DSpaceUrl());p+="&premise="+widget.getValue("x3dPlatformId");var n=function(w,y){try{y.initialize3DPlay()}catch(x){k.error("3DPlay initialize error")}};var r=this.createPlayerIFrame(o,p,n);var t;if(Object.keys(h.activePlayers).length>0){t=new j({resizableFlag:true,title:v||l.get("3D_PLAYER"),offsetX:10*(Object.keys(h.activePlayers).length),offsetY:10*(Object.keys(h.activePlayers).length)})}else{t=new j({resizableFlag:true,title:v||l.get("3D_PLAYER")})}t.injectContent({body:o},{close:function(){if(o&&o.parentNode){o.parentNode.removeChild(o)}delete h.activePlayers[u]}});h.activePlayers[u]={psrContainer:o,playerFrame:r,player:null};t.onResize()}else{h.activePlayers[u].playerFrame.contentWindow.reload()}}});return f});define("DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/CommandsManager","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/SMAAnalyticsReqUtils","DS/SMAAnalyticsEssential/components/SMAAnalyticsCommentUI","UWA/Class/Promise","DS/UIKIT/DropdownMenu","DS/Windows/Dialog","DS/Controls/LineEditor","DS/SMAAnalyticsEssential/components/SMAAnalytics3DPlayer","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsEssential/components/SMAAnalyticsFormulationUI","DS/Controls/ResponsiveThumbnailView","DS/SMAAnalyticsCommon/SMAAnalyticsCommonProxy","DS/WebappsUtils/WebappsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsOpenInApp","DS/PlatformAPI/PlatformAPI","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsConfirmDialog","DS/SMAAnalyticsCommon/SMAAnalyticsCustomTileView"],function(i,x,b,a,w,j,p,u,d,r,v,n,q,h,e,o,m,g,t,l,c,k,s){var f=null,z=x.getLogger(b),y=i.Class.singleton({init:function(){f=this;f.tableRef=null;f.parameterNameFilter="";f.headerObjects={};f.alternativeCount=0;f.baselineColumnId=null;f.sortOrder="none"},initialize:function(A){f.baselineColumnId=null;f.alternativeCount=0;f.headerObjects={};f.parameterNameFilter="";f.viewType="table";f.diffViewType="actual";f.sortOrder="none";f.raCaseContainer=i.is(A)&&i.is(A.container)?A.container:null;this.commentUI=new u({});this.formulationUI=new e()},clear:function(){f.alternativeCount=0;f.tableRef=null;f.parameterNameFilter="";f.headerObjects={};f.baselineColumnId=null;f.sortOrder="none"},getTableElement:function(){return f.tableRef},getCompareView:function(){return new d(function(B,A){if(!i.is(f.raCaseContainer)){z.error("no container");A(new Error("no container"));return}j.setupWorker().then(function(){Polymer.Base.importHref([g.getWebappsBaseUrl()+"SMAAnalyticsElements/ra-table-framework/ra-table-framework.html"],function(){f.tableRef=f.createBasicTableElement();Polymer.dom(f.tableRef).appendChild(f.createRowHeaderColumn());Polymer.dom(f.tableRef).appendChild(f.createRequirementsColumn());Polymer.dom(f.tableRef).appendChild(f.createFileRow());Polymer.dom(f.tableRef).appendChild(f.createPSRRow());f.tableRef.addEvent("resize",function(){f.resize()});var D=j._getSavedViewState();f.restoreViewState(D);if(i.is(f.noDataDiv)){try{f.raCaseContainer.querySelector(".content-panel").removeChild(f.noDataDiv);delete f.noDataDiv}catch(C){z.warn(C)}}f.raCaseContainer.querySelector(".content-panel").appendChild(f.tableRef);f.selectIconForView();f.refresh();j.getAlternativeCount().then(function(E){var F={message:"DATA_ATTACHED"};if(i.is(E)){f.alternativeCount=E;F.count=E}else{f.alternativeCount=E=0}if(E===0){F.visible=false}else{F.visible=true}B(F)})},A)},function(E){z.warn(E);if(!i.is(f.noDataDiv)){f.noDataDiv=i.createElement("div",{"class":"noCompareTableData"});f.message1=i.createElement("p",{text:h.get("NO_COMPARE_DATA_MSG1")});f.message2=i.createElement("img",{src:g.getWebappsBaseUrl()+"/SMAAnalyticsEssential/assets/icons/32/I_IRS_NewExperience.png"});f.message3=i.createElement("p",{text:h.get("NO_COMPARE_DATA_MSG2")});f.noDataDiv.appendChild(f.message1);f.noDataDiv.appendChild(f.message2);f.noDataDiv.appendChild(f.message3)}if(f.raCaseContainer.querySelector(".content-panel").hasChildNodes()){f.raCaseContainer.querySelector(".content-panel").removeChild(f.noDataDiv)}f.raCaseContainer.querySelector(".content-panel").appendChild(f.noDataDiv);var D=a.getCommand("SMAAnalyticsEssSaveCaseHdr");if(D&&D.disable){D.disable()}var C=a.getCommand("SMAAnalyticsEssReviseSaveCaseHdr");if(C&&C.disable){C.disable()}B("NO_DATA")})})},selectIconForView:function(B){var A=i.is(B)&&B===true?null:f.getViewType();f.raCaseContainer.querySelector("ra-case-header").setSelectedView(A,f.getDiffViewType())},displayColumnHeader:function(T){var H=null;var L=false;var O=i.createElement("div",{"class":"rae-custom-header"});if(T.id==="___ra_flex_left___"){return O}var I=Boolean(window.MSInputMethodContext)&&Boolean(document.documentMode);if(!I&&i.is(f.headerObjects[T.id])){H=f.headerObjects[T.id]}var M=[{name:"hide",text:h.get("HIDE"),fonticon:"eye-off"}];if(i.is(T.dType)){M.push({name:"mapping",text:h.get("MAP_PARAM"),fonticon:"parameter-mapping"})}if(T.dType==="DesignSight"){M.push({name:"3dplay",text:h.get("VIEW_IN_PLAYER"),fonticon:"play"});M.push({name:"phyres",text:h.get("OPEN_IN_PHY_RES"),fonticon:"open"})}var U=function(){if(!f.SimulationPlayer){function W(X){require(["UWA/Utils/InterCom"],function(Y){if((typeof window._3dplaysyncserver==="undefined")||(window._3dplaysyncserver.id!==X)){window._3dplaysyncserver=new Y.Server(X,{isPublic:true})}},function(){z.error("Failed to load intercom. Opening 3dplay without intercom.")})}W("RAE3DPlay");f.SimulationPlayer=new q()}f.SimulationPlayer.loadPlayer(T.PLMOID,T.dType,T.name)};var R=function(aa,X){if(X.name==="3dplay"){U()}else{if(X.name==="phyres"){if(!f.OpenInApp){f.OpenInApp=new l({sourceApp:"SIMWREI_AP"})}f.OpenInApp.openInApp(T.PLMOID,"DesignSight","SIMPHYR_AP")}else{if(X.name==="hide"){j.hideAlternatives(T.rowID).then(function(){f.refresh()})}else{if(X.name==="remove"){var W={immersiveFrame:t.getImmersiveFrame(),label:i.is(T.dType)?h.get("REMOVE_ALTERNATIVE_SAVE"):h.get("REMOVE_ALTERNATIVE"),header:h.get("ARE_YOU_SURE")};k.showDialog(W).then(function(){if(i.is(T.dType)){w.disconnect(T.PLMOID).then(function(){j.removeAlternatives(T.rowID).then(function(){var ab=a.getCommand("SMAAnalyticsEssSaveCaseHdr");ab.execute();f.refresh()})})}else{j.removeAlternatives(T.rowID).then(function(){f.refresh()})}})}else{if(X.name==="mapping"){var Z=a.getCommand("SMAAnalyticsEssParamMappingHdr");var Y={connectedData:[{physicalID:T.PLMOID}]};Z.execute(Y)}}}}}};var D=["trophy","thumbs-up","comment"];var A=[h.get("RECOMMEND"),h.get("Like"),h.get("Comment")];if(f.diffViewType!=="actual"){D.push("radiobutton-off");A.push(h.get("MAKE_BASELINE"))}var J=function(){var W=this.getAttribute("icon-name");switch(W){case"radiobutton-off":f.baselineColumnId=T.id;f.tableRef._resetSizing();break;case"trophy":j.toggleRecommendedRow(T.rowID).then(function(){f.tableRef._resetSizing()});break;case"thumbs-up":j.toggleLikeRow(T.rowIndex).then(function(){f.tableRef._resetSizing()});break;case"comment":f.commentUI.showCommentsForRowId(T,function(){f.tableRef._resetSizing()});break;default:z.error("invalid iconName")}};var C=null;if(i.is(w.thumbnails[T.PLMOID])){C=w.thumbnails[T.PLMOID]}else{var E=g.getWebappsBaseUrl()+"/SMAAnalyticsEssential/assets/icons/thumb_default.png";w.thumbnails[T.PLMOID]=E;C=E}var V=i.is(T.rank)?T.rank:0;if(V===0){V="-"}if(i.is(H)){H.update({alternativeCount:f.alternativeCount,title:T.name,subtitle:{rank:V,score:Math.round(T.score*100)/100},picture:C,statusbarIcons:D,statusbarIconsTooltips:A,contextualMenu:M,onContextMenuBuildCallback:R})}else{L=true;H=new s({alternativeCount:f.alternativeCount,title:T.name,subtitle:{rank:V,score:Math.round(T.score*100)/100},picture:C,description:i.is(T.description)?T.description:undefined,statusbarIcons:D,statusbarIconsTooltips:A,onStatusbarIconPointerDown:J,contextualMenu:M,onContextMenuBuildCallback:R});H.apply();f.headerObjects[T.id]=H}H.toggleIconColor("trophy",false);var P=h.get("RECOMMEND");if(T.isRecommended){H.toggleIconColor("trophy",true);P=h.get("RECOMMENDED")}H.updateIconTooltip("trophy",P);var N=T.commentCount+" "+h.get("COMMENT");H.toggleIconColor("comment",false);if(T.commentCount>=1){N=T.commentCount+" "+h.get("COMMENTS");H.toggleIconColor("comment",true)}H.updateIconTooltip("comment",N);f._setupLikeUI(H,T);if(f.diffViewType!=="actual"&&T.id===f.baselineColumnId){H.makeBaseline();H.toggleIcon("radiobutton-off","radiobutton-on");H.toggleIconColor("radiobutton-on",true);H.updateIconTooltip("radiobutton-on",h.get("BASELINED"))}else{H.removeBaseline();H.toggleIcon("radiobutton-on","radiobutton-off");H.toggleIconColor("radiobutton-off",false);H.updateIconTooltip("radiobutton-off",h.get("MAKE_BASELINE"))}var Q=this;var B=function(){f.tableRef.debounce("clickChecker",function(){var W=document.createEvent("MouseEvents");W.initEvent("mousedown",true,true);Q.dispatchEvent(W)},5)};var G=function(){f.tableRef.cancelDebouncer("clickChecker");var W=document.createEvent("MouseEvents");W.initEvent("mouseup",true,true);Q.dispatchEvent(W)};var K=H.getDragHolder();if(L===false){K.removeEventListener("mousedown",B);K.removeEventListener("mouseup",G)}K.addEventListener("mousedown",B);K.addEventListener("mouseup",G);if(L&&i.is(T.dType)){var S=window.widget.getValue("x3dPlatformId");if(!S){S="OnPremise"}var F=JSON.stringify({protocol:"3DXContent",version:"1.0",source:"SIMWREI_AP",data:{items:[{envId:S,contextId:window.widget.getValue("collabspaces"),serviceId:"3DSpace",objectId:T.PLMOID,objectType:T.dType}]}});if(T.dType==="DesignSight"){H.setDraggable(F,U)}else{H.setDraggable(F)}}O.appendChild(H.get());return O},_setupLikeUI:function(D,B){var E=Boolean(window.MSInputMethodContext)&&Boolean(document.documentMode),C=h.get("Like"),A=Array.isArray(B.likes)?B.likes.length:0,F=false;if(B.liked){if(E===true){D.toggleIconClass("thumbs-up","hollow-icon-ie",true)}else{D.toggleIconClass("thumbs-up","hollow-icon",true)}F=true;if(A===1){C=h.get("LIKED")}if(A>1){C=h.get("LIKED_BY_YOU_AND")+f._getLikedBy(B)}}else{if(A>=1){if(E===true){D.toggleIconClass("thumbs-up","hollow-icon-ie")}else{D.toggleIconClass("thumbs-up","hollow-icon")}F=true;C=h.get("LIKED_BY")+f._getLikedBy(B)}}D.toggleIconColor("thumbs-up",F);D.updateIconTooltip("thumbs-up",C)},_getLikedBy:function(D){var B=c.getUser(),C=[],G="<br>";D.likes.forEach(function(H){C.push({date:parseFloat(H.date),user:H.user.name,userID:H.user.userID})});C.sort(function(I,H){if(I.date>H.date){return -1}else{if(I.date<H.date){return 1}}return 0});var F=0;var E=false;C.forEach(function(H){if(B.login!==H.userID){if(F<10){G+=H.user+"<br>"}else{E=true}F++}});if(E===true&&F>10){var A=F-10;G+="+ "+A+" "+h.get("MORE")+"..."}return G},displayRowInColumn:function(A,B){if(B.type==="FILE"){return f.fileRowDisplay.call(this,A,B)}else{if(B.type==="REAL"){return f.realRowDisplay.call(this,A,B)}else{if(B.type==="INTEGER"){return f.integerRowDisplay.call(this,A,B)}else{return f.textRowDisplay.call(this,A,B)}}}},realRowDisplay:function(B,E){var D=document.createDocumentFragment();if(typeof B!=="undefined"&&typeof B.value!=="undefined"&&!isNaN(B.value)){var C="";if(f.diffViewType==="percentage"&&f.baselineColumnId!==this.getColumnId()){C=t.precise(B.value,"fixed",2).toLocaleString()}else{C=t.precise(B.value).toLocaleString();if(B.unit&&B.unit.length>0){C+=" "+B.unit}}D.textContent=C;this.classList.add("ra-number-column");f._checkIfBest.call(this,E,B.value,D);f.checkAgainstObjective.call(this,E,B.value);if(B.thresholdViolation){f.markInfeasible.call(this,D)}}else{if(typeof B!=="undefined"&&isNaN(B.value)&&B.value==="-"){var A=i.createElement("span",{"class":"rae-not-applicable",text:h.get("NA"),title:h.get("NOT_APPLICABLE")});D.appendChild(A)}}return D},integerRowDisplay:function(B,E){var D=document.createDocumentFragment();if(typeof B!=="undefined"&&typeof B.value!=="undefined"&&!isNaN(B.value)){var C="";if(f.diffViewType==="percentage"&&f.baselineColumnId!==this.getColumnId()){C=t.precise(B.value,"fixed",2).toLocaleString()}else{C=t.precise(B.value).toLocaleString();if(B.unit&&B.unit.length>0){C+=" "+B.unit}}D.textContent=C;this.classList.add("ra-number-column");f._checkIfBest.call(this,E,B.value,D);f.checkAgainstObjective.call(this,E,B.value);if(B.thresholdViolation){f.markInfeasible.call(this,D)}}else{if(typeof B!=="undefined"&&isNaN(B.value)&&B.value==="-"){var A=i.createElement("span",{"class":"rae-not-applicable",text:h.get("NA"),title:h.get("NOT_APPLICABLE")});D.appendChild(A)}}return D},textRowDisplay:function(A){var B=document.createDocumentFragment();if(typeof A!=="undefined"){B.textContent=A}this.classList.add("ra-string-column");return B},_checkIfBest:function(C,A,B){if(!C.objective){return}if(!(C.objective.bestRowIds instanceof Array)){return}if(this.parentElement){var D=this.parentElement.columnData.rowID;if(C.objective.bestRowIds.indexOf(D)>-1){f.markBest.call(this,B);if(f.diffViewType==="actual"){this.classList.add("ra-objective-better")}}}},checkAgainstObjective:function(B,A){if(f.baselineColumnId===this.getColumnId()){this.classList.add("ra-is-baseline")}if(f.baselineColumnId!==this.getColumnId()&&(f.diffViewType==="percentage"||f.diffViewType==="magnitude")){if(B.objective&&B.objective.type==="MAXIMIZE"){if(A<0){this.classList.add("ra-objective-worse")}else{if(A>0){this.classList.add("ra-objective-better")}}}else{if(B.objective&&B.objective.type==="MINIMIZE"){if(A>0){this.classList.add("ra-objective-worse")}else{if(A<0){this.classList.add("ra-objective-better")}}}else{if(B.objective&&B.objective.type==="TARGET"){if(A===0){this.classList.add("ra-objective-better")}}}}}else{if(B.objective&&Array.isArray(B.objective.bestRowIds)){try{if(B.objective.bestRowIds.indexOf(this.parentElement.columnData.rowID)>-1){this.classList.add("ra-objective-better")}}catch(C){z.error("checkAgainstObjective",C)}}}},checkThresholdViolations:function(C,A){var B=true;if(C.constraints){C.constraints.forEach(function(D){if(D.conditions){D.conditions.forEach(function(E){if((E.type==="GREATER_THAN"&&E.boundValue>Number(A))||(E.type==="LESS_THAN"&&E.boundValue<Number(A))){B=false}},this)}},this)}return B},markInfeasible:function(A){this.classList.add("ra-constraint-violated");var B=document.createElement("span");B.classList.add("fonticon");B.classList.add("fonticon-attention");B.classList.add("ra-constraint-violated-flag");B.title=h.get("THRESHOLD_VIOLATION");A.insertBefore(B,A.childNodes[0]||null)},markBest:function(B){this.classList.add("ra-best-for-objective");var A=document.createElement("span");A.classList.add("fonticon");A.classList.add("fonticon-favorite-on");A.classList.add("ra-best-flag");A.title=h.get("BEST_FOR_OBJECTIVE");B.insertBefore(A,B.childNodes[0]||null)},fileRowDisplay:function(B){var C=document.createDocumentFragment();if(typeof B!=="undefined"){var D=document.createElement("img");D.classList.add("file-thumbnail-nonclickable");if(typeof B.thumbnail!=="undefined"&&B.thumbnail!==null){D.src=B.thumbnail}else{var E=B;if(typeof E.url!=="undefined"){E=E.url}if(j.iconData){var A=j.iconData.findIndex(function(F){return F.name===E});if(j.iconData[A]){D.src=j.iconData[A].content}}}C.appendChild(D)}return C},createBasicTableElement:function(){var A=i.createElement("ra-table-framework");A.set("displayFunctions",{rowDisplay:f.displayRowInColumn,headerDisplay:f.displayColumnHeader});return A},createRowHeaderColumn:function(){var A=document.createElement("ra-table-column");A.setAttribute("column-id","rowheader");A.setAttribute("region","left");A.setAttribute("column-width","200");A.set("displayFunctions",{headerDisplay:f.displayDSDropTitle,rowDisplay:f.displayRowHeader});return A},editingParameterName:null,parameterEditUI:null,displayRowHeader:function(I,C){var E=document.createDocumentFragment();var F=document.createElement("div");var H=document.createElement("span");H.classList.add("ra-paramater-display-name");H.textContent=C.displayName;H.title=C.displayName;F.appendChild(H);var G=function(){};var B=function(){H.classList.add("hidden");var K=new n({value:C.displayName,requiredFlag:true,displayStyle:"lite"});K.addEventListener("click",function(L){L.stopPropagation()});var J=function(){var L=K.value||"";if(L&&L.length>0){H.textContent=L;H.title=L;if(K){K.value=L}if(C){C.displayName=L}j.modifyParameter({id:C.id,displayName:L})}K.remove();H.classList.remove("hidden")};K.addEventListener("change",J);K.addEventListener("blur",J);K.inject(F);K._myInput.focus()};if(f.editingParameter===C.id){B()}var D=G;var A=null;F.onclick=function(){if(A){clearTimeout(A)}D=G;A=setTimeout(function(){D();D=G},250)};F.ondblclick=function(){D=B};E.appendChild(F);return E},displayDSDropTitle:function(){var C=document.createDocumentFragment();var B=document.createElement("ra-input-dropbox");B.objectId=w.getCaseId();B.hideUpload=true;B.plmTypes="Simulation,DesignSight,Test Execution, Requirement";var A={title:h.get("ADD_DS"),dragdrop:h.get("DDHERE"),search:h.get("SEARCH")};B.raTitle=A;B.objectId=w.getCaseId();B.addEventListener("onDataUploadCompleteEvent",f._handleAddDataset);C.appendChild(B);this.classList.add("rae-add-dataset-container");return C},_handleAddDataset:function(B){var A=B.detail.connectedData;if(A[0].type==="Requirement"){var C=a.getCommand("SMAAnalyticsEssReqMappingHdr");C.begin()}else{if(A[0].type==="Test Case"){z.debug("test case")}else{j.updateWorker(B.detail.connectedData).then(function(D){f.refresh();if(D.autoMerge&&!D.autoMerge){var E=a.getCommand("SMAAnalyticsEssParamMappingHdr");E.begin()}if(D.autoMerge&&D.autoMerge){t.showInfoNotification("",h.get("PARAMS_AUTO_MERGED"))}},function(D){z.error(D)})}}},createRequirementsColumn:function(){var A=document.createElement("ra-table-column");A.setAttribute("column-id","requirements");A.setAttribute("region","left");A.setAttribute("column-width","120");A.set("displayFunctions",{headerDisplay:f.displayRequirementsTitle,rowDisplay:f.displayRequirementsInRow});return A},displayRequirementsTitle:function(){var B=i.createElement("div",{"class":"rae-custom-header"});var A=function(){var D=this.getAttribute("icon-name");switch(D){case"radiobutton-off":f.baselineColumnId=rowValue.id;f.tableRef._resetSizing();break;case"trophy":j.toggleRecommendedRow(rowValue.rowID).then(function(){f.tableRef._resetSizing()});break;case"thumbs-up":j.toggleLikeRow(rowValue.rowIndex).then(function(){f.tableRef._resetSizing()});break;case"comment":f.commentUI.showCommentsForRowId(rowValue,function(){f.tableRef._resetSizing()});break;default:z.error("invalid iconName")}};var C=new s({title:h.get("REQUIREMENTS"),picture:g.getWebappsBaseUrl()+"/SMAAnalyticsEssential/assets/icons/I_Requirement_Target.png",statusbarIcons:["parameter-mapping"],statusbarIconsTooltips:[h.get("MAP_PARAM")],onStatusbarIconPointerDown:function(){var D=a.getCommand("SMAAnalyticsEssReqMappingHdr");D.begin()}});C.apply();C.makeBaseline();B.appendChild(C.get());return B},requirementsChangeCallback:function(){f.resize()},displayRequirementsInRow:function(A,D){var B=document.createDocumentFragment();if(D.type!=="GROUP"&&D.type!=="STRING"&&D.type!=="BOOLEAN"){var C=p.getRowFormulationContents(D);C.onclick=function(){f.formulationUI.show(D,f.requirementsChangeCallback)};B.appendChild(C)}return B},createIntegerRow:function(){var A=document.createElement("ra-table-row");A.setAttribute("row-id","INTEGER");A.set("displayFunctions",{rowDisplay:function(){var B=document.createDocumentFragment();B.textContent="integer row ...";return B}});return A},resize:function(){f.tableRef._resetSizing()},refresh:function(){j.getAlternativeCount().then(function(A){f.alternativeCount=A;if(typeof f.tableRef.set==="function"){f.tableRef.set("dataAccessor",f.getTableDataCallbackObject())}})},refreshRows:function(){f.tableRef.refreshRowData()},setDiffViewType:function(A){f.diffViewType=A.toLowerCase();f.tableRef.classList.remove("ra-diffview-actual");f.tableRef.classList.remove("ra-diffview-percentage");f.tableRef.classList.remove("ra-diffview-magnitude");f.tableRef.classList.add("ra-diffview-"+f.diffViewType)},getDiffViewType:function(){return f.diffViewType},setViewType:function(A){f.viewType=A},getViewType:function(){return f.viewType},getViewState:function(){return{diffViewType:f.diffViewType}},restoreViewState:function(B){var A=f.diffViewType;if(B.hasOwnProperty("diffViewType")){A=B.diffViewType}f.setDiffViewType(A)},setSortOrder:function(A){f.sortOrder=A},getSortOrder:function(){return f.sortOrder},getTableDataCallbackObject:function(){return{getData:function(B,D,A){f.baselineColumnId=f.baselineColumnId||f.tableRef.getColumnIdAtIndex(0);var C=A||{};C.baselineId=f.baselineColumnId;C.view=f.diffViewType.toUpperCase();C.nameFilter=f.parameterNameFilter;C.sortOrder=f.sortOrder;j.getCompareData([B,C]).then(function(E){if(typeof D==="function"){D(E)}},function(E){z.error(E)})},timestamp:Date.now()}},createFileRow:function(){var A=document.createElement("ra-table-row");A.setAttribute("row-id","FILE");A.setAttribute("row-height","100");return A},createPSRRow:function(){var A=document.createElement("ra-table-row");A.setAttribute("row-id","PLMOBJECT");A.setAttribute("row-height","100");return A},showColumn:function(A){this.tableRef.showColumn(A)},hideColumn:function(A){this.tableRef.hideColumn(A)},setColumnOrder:function(A){this.tableRef.setColumnOrder(A)},setParameterNameFilter:function(A){this.parameterNameFilter=A}});return y});define("DS/SMAAnalyticsEssential/SMAAnalyticsSetupActions",["UWA/Core","DS/ApplicationFrame/CommandsManager","DS/SMAAnalyticsCommon/SMAAnalyticsDatasetView","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsConfirmDialog","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(f,a,c,j,d,i,b,g,h){var e=Object.create(null);e.filter=function(){var k=c.getView();var l=k.getTreeDocument();if(!f.is(l)){return}var o=l.getChildren();var n=c.alternativeFilter;if(n.length===0){l.prepareUpdate();o.forEach(function(p){p.show()});l.collapseAll();l.pushUpdate()}else{l.prepareUpdate();o.forEach(function(p){p.hide()});var m=l.search({match:function(p){if(n&&p.nodeModel.options.label.indexOf(n)!==-1){return true}return false}});m.forEach(function(p){p.show()});l.pushUpdate()}};e.hide=function(){var k=c.getView();var m=k.getTreeDocument();var n=m.getSelectedNodes();var l=[];n.forEach(function(o){if(o.options.grid.hidden===false){l.push(o.options.grid.rowID)}});if(l.length>0){m.prepareUpdate();d.hideAlternatives(l).then(function(){n.forEach(function(o){o.options.grid.hidden=true;o.options.grid.visible="false"});m.unselectAll();m.pushUpdate();k.updateView({updateCellContent:true});g.refresh()})}};e.unhide=function(){var k=c.getView();var m=k.getTreeDocument();var n=m.getSelectedNodes();var l=[];n.forEach(function(o){if(o.options.grid.hidden===true){l.push(o.options.grid.rowID)}});if(l.length>0){d.unhideAlternatives(l).then(function(){m.prepareUpdate();n.forEach(function(o){o.options.grid.hidden=false;o.options.grid.visible="true"});m.unselectAll();m.pushUpdate();k.updateView({updateCellContent:true});g.refresh()})}else{}};e.remove=function(){var k=c.getView();var n=k.getTreeDocument();var l=[];var o="";var p=n.getSelectedNodes();if(p.length>0){p.forEach(function(q){l.push(q.options.grid.rowID);if(f.is(q.options.grid.dType)){o+=q.options.grid.PLMOID+","}});var m={immersiveFrame:i.getImmersiveFrame(),label:o.length>0?h.get("REMOVE_ALTERNATIVE_SAVE"):h.get("REMOVE_ALTERNATIVE"),header:h.get("ARE_YOU_SURE")};j.showDialog(m).then(function(){if(o.length>0){b.disconnect(o).then(function(){d.removeAlternatives(l).then(function(){n.prepareUpdate();p.forEach(function(r){r.remove()});n.unselectAll();n.pushUpdate();k.updateView({updateCellContent:true});var q=a.getCommand("SMAAnalyticsEssSaveCaseHdr");q.execute();g.refresh()})})}else{d.removeAlternatives(l).then(function(){n.prepareUpdate();p.forEach(function(q){q.remove()});n.unselectAll();n.pushUpdate();k.updateView({updateCellContent:true});g.refresh()})}})}};e.download=function(){var k=c.getView();var l=document.createElement("a");l.href="data:text/csv;charset=utf-8,"+encodeURI(k.getAsCSV());l.target="_blank";l.download=b.caseInfo.title+".csv";l.click()};return e});define("DS/SMAAnalyticsEssential/SMAAnalyticsParamMerge",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/components/mappng-table/SMAAnalyticsLiteMappingTableView","DS/SMAAnalyticsEssential/components/mapping-table/SMAAnalyticsLiteMappingTableModel","DS/Controls/LineEditor","DS/Controls/TooltipModel","DS/Controls/Button","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/Windows/Dialog","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsEssential/SMAAnalyticsMappingToolbar","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable"],function(d,p,a,i,m,b,n,f,j,o,g,e,k,h,c,q){var r=p.getLogger(a);var l=i.extend({init:function(s){this.filterText="";this._parent(s,{mode:"exclusive",isAsynchronous:true})},execute:function(w){r.debug("execute");var v=this;var t={model:o.caseInfo};if(d.is(w)){t.expandNodeId=w.connectedData[0].physicalID}var s=new m(t);var u=h.getToolbar();u.addEventListener("liveChange",function(x){v.filterText=x.dsModel.value;if(v.filterText===""){s.searchModel("")}else{s.searchModel(v.filterText)}});u.addEventListener("buttonclick",function(y){var x=y.dsModel._properties.label.value;if(x===c.get("Filter")){s.searchModel(v.filterText)}else{if(x===c.get("Expand")){s.expandCollapse()}else{s.expandCollapse(true)}}});this._getParametersList().then(function(x){if(s&&x&&x.length>0){s.setParamList(x)}var y=new e({title:c.get("parameter_mapping"),content:s.getMergeUI().getContent(),immersiveFrame:k.getImmersiveFrame(),resizableFlag:true,width:"635",height:"400",header:u,icon:"parameter-mapping",modalFlag:true,usePaddingFlag:true,buttons:{Ok:new j({label:c.get("OK"),onClick:function(B){var z=B.dsModel;var A=z.dialog;s.getMergeCallback().then(function(){q.refresh();v.end()},function(C){r.error("getMergeCallback failure: "+C)});A.close()}}),Apply:new j({label:c.get("APPLY"),onClick:function(){s.getMergeCallback().then(function(){s.paramsToMerge=[];s.paramsToUnmerge=[];q.refresh()},function(z){r.error("getMergeCallback failure: "+z)})}}),Cancel:new j({onClick:function(B){var z=B.dsModel;var A=z.dialog;A.close();v.end()}})}});y.addEventListener("close",function(){v.end()})},function(){v.end()})},_getParametersList:function(){return new Promise(function(t,s){g.getAllParametersAsArray().then(function(u){t(u)},function(u){r.error(u);s(u)})})}});return l});define("DS/SMAAnalyticsEssential/components/requirements-table/SMAAnalyticsLiteRequirementsTableView",["UWA/Core","UWA/Element","DS/Core/Core","DS/Tree/TreeListView","DS/Controls/ComboBox","DS/SMAAnalyticsEssential/components/requirements-table/SMAAnalyticsLiteRequirementsTableModel","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/SMAAnalyticsReqUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCompare"],function(d,a,f,e,i,g,m,b,c){var k,h=false,l=-1;var j=d.Class.extend({init:function(n){k=this;k.paramList=[];k.cachedList=[];k.reqsToMerge={};k.mtable=new g();k.docModel={};if(n.model){k.model=n.model}},createTreeListView:function(){var n=this;return{height:"auto",width:"auto",enableDragAndDrop:false,isEditable:true,isSortable:true,infiniteScrolling:true,enableKeyboardNavigation:true,expanderStyle:"classic",resize:{columns:true,rows:false},columns:[{text:m.get("PRIORITY"),dataIndex:"priority",isEditable:false,isSortable:true,width:"7%",onCellRequest:function(p){if(!p.isHeader){var o=p.nodeModel.options.grid.type;if(o&&o.length>0&&o!=="GROUP"){var q=b.getPriorityAsHTML(p.nodeModel.options.grid);p.cellView.getContent().setHTML(q)}}}},{text:m.get("UNITS"),dataIndex:"unit",isEditable:false,isSortable:false,width:"7%"},{text:m.get("THRESHOLDS"),dataIndex:"transformedValue",isEditable:false,isSortable:true,width:"18%",onCellRequest:function(r){if(!r.isHeader){var q=r.nodeModel.options.grid.type;if(q&&q.length>0&&q!=="GROUP"){var t=r.nodeModel.options.grid;var o=typeof t.min!=="undefined"&&t.min.length>0?t.min:null,p=typeof t.max!=="undefined"&&t.max.length>0?t.max:null;if(o||p){var s=b.getConstraintsAsHTML(o,p);r.cellView.getContent().setHTML(s)}}}}},{text:m.get("OBJECTIVES"),dataIndex:"objective",isEditable:false,isSortable:true,width:"8%",onCellRequest:function(q){if(!q.isHeader){var p=q.nodeModel.options.grid.type;var o=q.nodeModel.options.grid.objective;if(p&&p.length>0&&p!=="GROUP"&&o&&o.length>0){var r=b.getObjectiveAsHTML(q.nodeModel.options.grid.objective,q.nodeModel.options.grid.value);q.cellView.getContent().setHTML(r)}}}},{text:m.get("PARAMETERS"),dataIndex:"Parameters",isEditable:false,isSortable:true,width:"32.5%",onCellRequest:function(t){if(!t.isHeader){var u=t.nodeModel;var o=-1;var s=t.nodeModel.options.grid.type;if((s&&s.length>0&&s!=="GROUP"&&k.paramList)||h){var r=k.paramList;if(!h){r.some(function(x,w){if(x.plmParameterId){var v=x.plmParameterId.split("#")[0];if(v===u.options.grid.physicalId||v===u.options.grid.id){o=w;return true}}return false})}else{h=false;o=l}var q=new i({elementsList:r,placeholder:m.get("SELECT_PARAM_MAP"),selectedIndex:o,enableSearchFlag:true,autocompleteFlag:true});var p=q.elements.container.getElementsByClassName("wux-ui-state-undefined");if(p.length>0){p[0].addClassName("wux-controls-lineeditor");p[0].removeClassName("wux-ui-state-undefined")}q.addEventListener("change",function(y,v){v.stopPropagation();v.preventDefault();var x=v.dsModel;var w={requirement:u.options.grid,id:x.currentValue};k.reqsToMerge[u.options.grid.id]=w;k.setParamList()}.bind(t,n));q.addEventListener("preDropdown",function(x,v){var w=v.dsModel;if(w){k.previousSelectedVal=w.currentValue;k.previousSelectedLabel=w.currentLabel}}.bind(t,n));t.cellView.getContent().setHTML(q)}}}}],selection:{cells:false,rowHeaders:false,columnHeaders:false,canMultiSelect:false,useUnselectAllOnEmptyArea:true},showLoaderIndicator:true,treeDocument:this.docModel}},setParamList:function(o){var n=[];o=o||k.cachedList||[];o.forEach(function(p){n.push({labelItem:decodeURIComponent(p.displayName),valueItem:p.physticalId||p.id,objectId:p.id,mergedFromVars:p.mergedFromVars,plmParameterId:p.plmParameterId})},this);Object.keys(this.reqsToMerge).forEach(function(p){var q=this.reqsToMerge[p];n.some(function(r){if(r.valueItem===q.id){r.plmParameterId=q.requirement.physicalId||q.requirement.id;r.plmParameterId+="#RA";return true}return false},this)},this);k.cachedList=o;k.paramList=n},getParamList:function(){return k.paramList},getMergeUI:function(){return new Promise(function(o,n){k.mtable.getRAERequirementsUIModel().then(function(p){k.docModel=p;k.mergeTableUI=new e(k.createTreeListView());k.mergeTableUI.options.columns[0].text=m.get("REQUIREMENTS");k.mergeTableUI.options.columns[0].width="27%";k.mergeTableUI.options.columns[0].isSortable=true;k.mergeTableUI.options.columns[0].isEditable=false;o(k.mergeTableUI)},function(p){n(p)})})},getMergeCallback:function(){return new Promise(function(o,n){c.mapRequirements(k.reqsToMerge).then(function(p){o(p)},function(p){n(p)})})}});return j});define("DS/SMAAnalyticsEssential/SMAAnalyticsReqMerge",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/components/SMAAnalyticsPopover","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsEssential/components/requirements-table/SMAAnalyticsLiteRequirementsTableView","DS/SMAAnalyticsEssential/components/requirements-table/SMAAnalyticsLiteRequirementsTableModel","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/SMAAnalyticsUtils"],function(h,f,e,d,k,c,b,i,n,g,j,m){var l=f.getLogger(e);var a=d.extend({init:function(o){this._parent(o,{mode:"exclusive",isAsynchronous:true})},execute:function(){l.debug("execute");this.requirementsMapContainer=this.requirementsMapContainer||new k({width:950,resizableFlag:true,isModal:true,title:n.get("requirements_mapping"),closeLabel:n.get("CANCEL")});var o=this;this._requirementsTabView=new b({model:c.caseInfo});this._getParametersList().then(function(p){l.debug("execute: _getParametersList "+p);if(o._requirementsTabView&&p&&p.length>0){o._requirementsTabView.setParamList(p)}o._requirementsTabView.getMergeUI().then(function(q){o.requirementsMapContainer.injectContent({body:q.getContent()},{ok:function(){o._requirementsTabView.getMergeCallback().then(function(){j.refreshRows();o.end()},function(r){l.error("Error occured in merging requirements "+r);o.end()})},apply:o._requirementsTabView.getMergeCallback,close:function(){o.cancel()}});o.requirementsMapContainer.open()},function(q){m.showWarningNotification("",n.get("REQ_NOT_ATTACHED"));o.end();l.error("No requirements attached "+q)})})},_getParametersList:function(){return new Promise(function(p,o){g.getAllParametersAsArray().then(function(q){p(q)},function(q){l.error(q);o(q)})})}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsCompareActions",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/CommandsManager","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsTCUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsCaseDialog","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsConfirmDialog","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(g,e,d,b,a,n,i,c,f,h,k,o,m){var l=e.getLogger(d);var j={editTitleDescription:function(){var p={immersiveFrame:n.getImmersiveFrame(),header:m.get("EDIT_CASE_TITLE_DESCRIPTION")+" - "+c.caseInfo.title,value:c.caseInfo.title,valueDescription:c.caseInfo.description,okButtonLabel:m.get("SAVE")};return new Promise(function(r,q){h.showDialog(p).then(function(s){var t=[];if(p.value!==s.title){t.push(c.setTitle(s.title))}if(p.valueDescription!==s.description){t.push(c.setDescription(s.description))}if(t.length>0){Promise.all(t).then(function(){c.caseInfo.title=s.title;c.caseInfo.description=s.description;r(s)},function(u){n.showErrorNotification("",m.get("ERROR_TITLE_DESCRIPTION"));l.error("editTitleDescription ",u);q(u)})}else{q(new Error("no change"))}},q)})},showVersionExplorer:function(){var p=b.getCommand("SMAAnalyticsEssLifecycleHdr");p.execute()},changeCompareTableView:function(q){var s=k.getTableElement();if(!g.is(s)){n.showInfoNotification("",m.get("NO_TABLE_SET"));return}if(q.view==="table"){if(k.getViewType()===q.view){k.setDiffViewType(q.subView);k.resize()}else{f.setParameterFilter({files:false,data:true}).then(function(){k.showColumn("requirements");k.setViewType(q.view);k.setDiffViewType(q.subView);k.refreshRows()})}}else{if(q.view==="icon"){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>-1){n.showWarningNotification("",m.get("NO_IE_SUPPORT_ICON_VIEW"));k.selectIconForView();return}var p=[];c.attachedFiles.forEach(function(t){if(t.indexOf("file_data")===0&&n.getFileExtension(t).toLowerCase()===".zip"){p.push(t)}});if(p.length>0){if(k.getViewType()===q.view){}else{var r={immersiveFrame:n.getImmersiveFrame(),label:m.get("ICON_VIEW_TIME"),header:m.get("ARE_YOU_SURE_FILE_ICON")};if(f.iconData.length>0){this._setupCompareIconView(q)}else{o.showDialog(r).then(function(){k.selectIconForView(true);this._setupCompareIconView(q)}.bind(this))}}}else{k.selectIconForView();n.showWarningNotification("",m.get("NO_ICON_DATA"))}}}},_setupCompareIconView:function(p){n.mask(m.get("ICON_VIEW_LOADING"));f.setupIconView().then(function(){f.setParameterFilter({files:true,data:false}).then(function(){n.unmask();k.hideColumn("requirements");k.setViewType(p.view);k.refreshRows()},function(q){l.error(q);n.unmask()})},function(q){l.error(q);n.unmask()})},sortByRank:function(p){var q=k.getTableElement();if(!g.is(q)){n.showInfoNotification("",m.get("NO_TABLE_SET"));return}k.setSortOrder(p);f.getColumnIdsByScore(p).then(function(r){k.setColumnOrder(r)},function(){l.warn("Unable to auto sort columns")})},filterParameter:function(q){var p=k.getTableElement();if(!g.is(p)){n.showInfoNotification("",m.get("NO_TABLE_SET"));return}if(g.is(q)&&q.length>0){q=q.replace(/\*/g,"")}k.setParameterNameFilter(q);k.refreshRows()},onAddDataset:function(q){var p=k.getTableElement();if(g.is(p)){n.mask(m.get("SETTING_COMPARE_TABLE"));f.updateWorker(q.connectedData).then(function(r){n.unmask();k.refresh();if(g.is(r.autoMerge)&&r.autoMerge===false){var s=b.getCommand("SMAAnalyticsEssParamMappingHdr");s.execute(q)}else{n.showInfoNotification("",m.get("PARAMS_AUTO_MERGED"))}},function(r){n.unmask();l.error(r)})}else{n.mask(m.get("LOADING_COMPARE"));k.getCompareView().then(function(s){n.unmask();var u=b.getCommand("SMAAnalyticsEssSaveCaseHdr");var r=b.getCommand("SMAAnalyticsEssReviseSaveCaseHdr");if(u&&u.enable){u.enable()}if(r&&r.enable){r.enable()}if(s.visible===false){var t=b.getCommand("SMAAnalyticsEssParamMappingHdr");t.execute(q)}else{n.showInfoNotification("",m.get("PARAMS_AUTO_MERGED"))}})}},onAddRequirement:function(){var p=b.getCommand("SMAAnalyticsEssReqMappingHdr");p.begin()}};return j});define("DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit",["UWA/Core","DS/ApplicationFrame/FrameWindow","DS/ApplicationFrame/CommandsManager","DS/WebappsUtils/WebappsUtils","DS/Logger/Logger","module","DS/Windows/DockingElement","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsCompare","DS/SMAAnalyticsCommon/SMAAnalyticsWorker","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialUtils","DS/SMAAnalyticsEssential/SMAAnalyticsCompareActions","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/SMAAnalyticsRecentView","DS/SMAAnalyticsCommon/SMAAnalyticsUtils"],function(g,m,b,e,p,c,j,o,i,k,a,q,f,r,n,l){var d=function(){return window.widget},s=p.getLogger(c);var h={frmWindow:null,uiFrame:null,landingPage:null,comparePage:null,currentCaseId:null,recentCaseList:[],analyticsData:null,raCaseContainer:null,immersiveFrame:null,x3dContentObjects:{validObjects:[],invalidObjects:[]},allowedPlmTypes:"Simulation,DesignSight,Test Execution",dockingElements:[],recentCaseCollection:undefined,createFrameWindow:function(){n.initialize({numRecent:10});if(this.frmWindow===undefined||this.frmWindow===null){d().body.empty()}if(d().frmWindow){this.frmWindow=d().frmWindow;this.frmWindow.inject(d().body)}else{this.frmWindow=new m({workbench:"SMAAnalyticsEssential.xml",workbenchModule:"SMAAnalyticsEssential",viewer:"none",height:"100%",width:"100%",viewerOptions:{antiAliasing:true,useShadowMap:false,infinitePlane:false,displayGrid:true,displayLines:true,control:"SIMPLE",ssao:false,debugShadowLight:false,debugBSphere:false,debugBBox:false},uiOptions:{displayActionBar:true,displayTree:true}}).inject(d().body);this.uiFrame=this.frmWindow.getViewerFrame();this.immersiveFrame=this.frmWindow.getImmersiveFrame();this.lastHeight=70;var t=this;widget.addEvent("onResize",function(){t.uiFrame.style.height=t.uiFrame.parentNode.offsetHeight-t.lastHeight+"px"},t);this.frmWindow.onActionBarReady(function(){this.open();try{this._isShownWhenSmall=true}catch(u){}t.uiFrame.style.height=t.uiFrame.parentNode.offsetHeight-t.lastHeight+"px";this._modelEvents.subscribe({event:"ACTIONBAR_OPEN"},function(){t.lastHeight=70;t.uiFrame.style.height=t.uiFrame.parentNode.offsetHeight-t.lastHeight+"px"});this._modelEvents.subscribe({event:"ACTIONBAR_CLOSE"},function(){t.lastHeight=20;t.uiFrame.style.height=t.uiFrame.parentNode.offsetHeight-t.lastHeight+"px"});t.onRefresh()},t)}},clear:function(){this.frmWindow=null;this.uiFrame=null;this.landingPage=null;this.comparePage=null;this.currentCaseId=null;this.recentCaseList=[];this.raCaseContainer=null;this.immersiveFrame=null;this.dockingElements.forEach(function(t){t.destroy()});this.dockingElements=[];this.recentCaseCollection=undefined;this.clearComparePage()},clearComparePage:function(){this.analyticsData=null;o.clear();r.clear();i.clear()},createDockingElement:function(t,u,x,v){var w=new j({side:t,dockingZoneSize:u,dockingZoneContent:v,resizableFlag:true,visibleDockingZoneFlag:true,useBordersFlag:true,collapseDockingZoneFlag:false,collapsibleFlag:x});if(this.dockingElements.size>0){this.dockingElements[this.dockingElements.length-1].freeZoneContent=w}this.dockingElements.push(w)},disableCommands:function(){b.disableAll();var t=["SMAAnalyticsEssCreateCaseHdr","SMAAnalyticsEssSearchCaseHdr"];t.forEach(function(u){var v=b.getCommand(u);if(v&&v.enable){v.enable()}})},onRefresh:function(){var t=this;this.currentCaseId=widget.getValue("raecaseid");this.clearComparePage();if(g.is(this.currentCaseId)&&this.currentCaseId.length>0){this.setAnalyticsData(this.currentCaseId).then(function(){t.setComparePage()},function(v){l.showWarningNotification("",f.get("INVALID_CASEID"));s.error("Invalid Case ID "+v);widget.setValue("raecaseid","");t.onRefresh()})}else{if(g.is(this.analyticsCreateData)){var u=b.getCommand("SMAAnalyticsEssCreateCaseHdr");u.begin()}else{this.setLandingPage()}}},setLandingPage:function(){var t=this;widget.setValue("raecaseid","");this.disableCommands();this.recentCases=a.getRecentCaseIds();if(this.landingPage!==null){this.uiFrame.removeChild(this.landingPage);this.landingPage=null}if(this.comparePage!==null){this.uiFrame.removeChild(this.comparePage);this.comparePage=null}this.landingPage=g.createElement("div",{id:"raeInputUI"});l.setMaskContent(this.landingPage);this.uiFrame.appendChild(this.landingPage);Polymer.Base.importHref([e.getWebappsBaseUrl()+"SMAAnalyticsCommon/components/ra-input-dropbox/ra-input-dropbox.html"],function(){var v=g.createElement("ra-input-dropbox");var u={title:f.get("DROPZONE_TITLE"),dragdrop:f.get("DROPZONE_DND"),search:f.get("DROPZONE_SEARCH")};v.showFullScreen=true;v.plmTypes=t.allowedPlmTypes;v.raTitle=u;v.addEventListener("onDataUploadCompleteEvent",t.setupAnalyticsCase.bind(t));if(n.getRecent().length>0){n.getRecentView(t.immersiveFrame).then(function(w){t.recentCaseCollection=w;t.createDockingElement(WUXDockAreaEnum.LeftDockArea,280,true,w.buildView.getContent());t.dockingElements[t.dockingElements.length-1].freeZoneContent=v;t.dockingElements[0].inject(t.landingPage)},function(){s.warn("no recent view");t.landingPage.appendChild(v)})}else{t.landingPage.appendChild(v)}})},setComparePage:function(){var t=this;if(this.landingPage!==null){this.uiFrame.removeChild(this.landingPage);this.landingPage=null;this.dockingElements.forEach(function(u){u.destroy()});this.dockingElements=[];this.recentCaseCollection=undefined}if(this.comparePage!==null){this.uiFrame.removeChild(this.comparePage);this.comparePage=null}this.comparePage=g.createElement("div",{id:"raeComparePage"});l.setMaskContent(this.comparePage);this.uiFrame.appendChild(this.comparePage);l.mask(f.get("LOADING_COMPARE"));Polymer.Base.importHref([e.getWebappsBaseUrl()+"SMAAnalyticsElements/ra-case-container/ra-case-container.html"],function(){t.raCaseContainer=g.createElement("ra-case-container");t.raCaseContainer.racase={title:t.analyticsData.displayName,revision:t.analyticsData.revision,description:t.analyticsData.description};t.raCaseContainer.addEventListener("onEditCaseProperties",t.comparePageActions.bind(t,"edit"));t.raCaseContainer.addEventListener("onSortOrderChange",t.comparePageActions.bind(t,"sort"));t.raCaseContainer.addEventListener("onFilterChange",t.comparePageActions.bind(t,"filter"));t.raCaseContainer.addEventListener("onViewChange",t.comparePageActions.bind(t,"view"));t.raCaseContainer.addEventListener("onRevisionClick",t.comparePageActions.bind(t,"version"));t.comparePage.appendChild(t.raCaseContainer);r.initialize({container:t.raCaseContainer});b.enableAll();r.getCompareView().then(function(u){if(g.is(u.visible)&&u.visible===false){var v=b.getCommand("SMAAnalyticsEssParamMappingHdr");v.begin()}else{if(g.is(u.visible)&&u.visible===true&&!i.isSavedCase()){l.showInfoNotification("",f.get("PARAMS_AUTO_MERGED"))}}})["finally"](function(){l.unmask()})})},comparePageActions:function(v,t){var u=this;switch(v){case"edit":q.editTitleDescription().then(function(w){u.raCaseContainer.racase={title:w.title,revision:u.analyticsData.revision,description:w.description};u.analyticsData.displayName=w.title;u.analyticsData.description=w.description});break;case"version":q.showVersionExplorer();break;case"sort":q.sortByRank(t.detail);break;case"filter":q.filterParameter(t.detail);break;case"view":q.changeCompareTableView(t.detail);break;case"adddataset":q.onAddDataset(t.detail);break;case"addrequirement":q.onAddRequirement(t.detail);break;case"addtestcase":q.onAddTestCase(t.detail);break;default:s.error("invalid action")}},setAnalyticsData:function(t){var u=this;return new Promise(function(w,v){o.initialize({caseId:t,RAE:true});i.initialize({workerAPI:k});o.getInfo().then(function(x){if(g.is(x.organization)&&g.is(x.project)){l.setUserSpecificSecCtx(x.organization,x.project)}d().setValue("raecaseid",x.physicalId);u.analyticsData={displayName:x.title,objectId:x.physicalId,description:x.description,revision:x.revision};n.addToRecent();w()},v)})},setupAnalyticsCase:function(u){this.clearComparePage();var v=u.detail,w=this,t=v.caseId;this.setAnalyticsData(t).then(function(){w.setComparePage()},function(){w.setLandingPage()})},updateCaseContainer:function(t){this.raCaseContainer.racase={title:t.title,description:t.description}}};return h});define("DS/SMAAnalyticsEssential/SMAAnalyticsSearch",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/WebappsUtils/WebappsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(h,f,e,c,g,b,m,d,j,l){var k=f.getLogger(e),i=null;var a=c.extend({init:function(n){i=this;i.spSearch=null;i.datasetLimit=m.RAELimit;i.frm=widget.body;this._parent(n,{mode:"exclusive",isAsynchronous:false})},execute:function(n){k.debug("execute");i.spSearch=m.getSPSearch(this._onChange,h.is(n.multiSelect)?n.multiSelect:null);i.callingCommand=n.command;i.completeEventMsg=n.command;i.loadMsg=l.get("CONNECT_DS");i.successMsg=l.get("CONNECT_DS_SUCCESS");i.errMsgDup=l.get("CONNECT_DS_FAIL_DUP");i.errMsgKey=l.get("CONNECT_DS_FAIL");switch(i.callingCommand){case"addrequirement":i.loadMsg=l.get("CONNECT_REQ");i.successMsg=l.get("CONNECT_REQ_SUCCESS");i.errMsgDup=l.get("CONNECT_REQ_FAIL_DUP");i.errMsgKey=l.get("CONNECT_REQ_FAIL");break;case"searchcase":i.loadMsg=l.get("LOAD_ANALYTICS_CASE");i.errMsgKey=l.get("LOAD_ANALYTICS_FAIL");break;default:i.loadMsg=l.get("CONNECT_DS");i.successMsg=l.get("CONNECT_DS_SUCCESS");i.errMsgDup=l.get("CONNECT_DS_FAIL_DUP");i.errMsgKey=l.get("CONNECT_DS_FAIL")}i.spSearch.plmTypes=n.plmTypes;if(i.callingCommand==="adddataset"&&(b.validateDatasetCountRAE()>=i.datasetLimit||j.alternativeCount>=i.datasetLimit)){m.showWarningNotification("",l.get("LIMITCROSSED"));m.unmask();return}i.spSearch.search()},_onChange:function(o){o.stopPropagation();o.cancelBubble=true;o.preventDefault();i.spSearch.removeEventListener("change",i._onChange);m.mask(i.loadMsg);var n=o&&o.detail&&o.detail.getSelectedObjects()||[];var s=m.validateObjects(n,i.spSearch.plmTypes,null,"search");if(s.length>0){if(i.spSearch.plmTypes==="Analytics Case"){if(s.length===1){var r=n[0];var p={};p[r.objectId]=[];var q={detail:m.formatResponse(p,s)};m.unmask();d.setupAnalyticsCase(q)}else{m.unmask();m.showErrorNotification("",i.errMsgKey)}}else{b.connect(s).then(function(t){m.unmask();var u={detail:m.formatResponse(t,s)};if(t[Object.keys(t)[0]].length>0){m.showSuccessNotification("",i.successMsg)}else{m.showErrorNotification("",i.errMsgDup)}d.comparePageActions(i.completeEventMsg,u)},function(t){m.unmask();k.error("connect failure ",t);var u=i.errMsgKey;if(t==="DUPLICATE"){u=i.errMsgDup}m.showErrorNotification("",u)})}}else{m.unmask()}}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsCreateCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential","DS/SMAAnalyticsCommon/utils/SMAAnalyticsSaveUtils"],function(h,f,e,c,l,b,d,i,k,g){var j=f.getLogger(e);var a=c.extend({_createCase:function(n,m){j.debug("_createCase: "+n);l.mask(k.get("CREATING_CASE"));var o=n.includeObjects;b.initialize();b.create(n).then(function(q){j.debug("_createCase caseId "+q);l.showSuccessNotification("",k.get("CREATE_CASE_SUCCESS"));widget.setValue("collabspaces",widget.getValue("createcollabspaces"));var p={};p[q]=[];var r={detail:l.formatResponse(p)};if(o&&m.validObjects.length>0){if(m.invalidObjects.length>0){l.showWarningNotification("",k.get("SOME_INVALID_DS"))}b.connect(m.validObjects).then(function(s){l.unmask();r={detail:l.formatResponse(s,m.validObjects)};d.setupAnalyticsCase(r)},function(s){l.unmask();l.showWarningNotification("",k.get("CONNECT_DS_FAIL"));j.error("Failed to connect",s);d.setupAnalyticsCase(r)})}else{l.unmask();if(o&&m.invalidObjects.length>0){l.showWarningNotification("",k.get("ALL_INVALID_DS"))}d.setupAnalyticsCase(r)}},function(p){j.error(k.get("CREATE_CASE_FAILED")+" "+p);l.unmask();l.showErrorNotification("",k.get("CREATE_CASE_FAILED"))})},execute:function(){g.checkForChanges(i.getViewState()).then(function(){var o=d.analyticsCreateData;d.analyticsCreateData=null;if(h.is(o)){this._createCase({title:o.title,description:o.description,includeObjects:true},{validObjects:o.validObjects,invalidObjects:o.invalidObjects})}else{var m=d.x3dContentObjects,n=false,p=m.validObjects;if(p.length>0){n=true}l.showCaseCreateDialog(n).then(function(q){this._createCase(q,m)}.bind(this))}}.bind(this))}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsAddData",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/ApplicationFrame/CommandsManager"],function(g,f,e,c,d,h,b){var i=f.getLogger(e),a=c.extend({init:function(j){this._parent(j,{mode:"exclusive",isAsynchronous:false})},execute:function(){i.debug("execute");if(h.isTransientWidget()){return}var j=b.getCommand("SMAAnalyticsSearchHdr");j.execute({plmTypes:d.allowedPlmTypes,command:"adddataset",multiSelect:true})}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsSaveCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/ApplicationFrame/CommandsManager","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/utils/SMAAnalyticsSaveUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsSaveDialog","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(i,g,f,d,b,l,h,c,o,e,j,n){var m=g.getLogger(f),k=null,a=d.extend({init:function(p){k=this;this._parent(p,{mode:"exclusive",isAsynchronous:false})},execute:function(){m.debug("execute");c.checkModified().then(function(p){var q={immersiveFrame:o.getImmersiveFrame(),header:n.get("ARE_YOU_SURE"),label:p.user+" "+n.get("CASE_MODIFIED_BY")+" "+o.getModifiedInterval(p.modified)+".",okLabel:n.get("REVISE_SAVE"),applyLabel:n.get("OVERWRITE")};j.showDialog(q).then(function(r){if(r===true){var s=b.getCommand("SMAAnalyticsEssReviseSaveCaseHdr");s.execute()}else{k._saveCase()}})},function(){k._saveCase()})},_saveCase:function(p){return new Promise(function(r,q){o.mask(n.get("SAVING"));if(!i.is(p)){p={}}p.currentViewState=l.getViewState();h.saveCase(p).then(function(){c.updateCESTAMP().then(function(){o.unmask();o.showSuccessNotification("",n.get("SAVE_SUCCESS"));r()},function(){o.unmask();o.showSuccessNotification("",n.get("SAVE_SUCCESS"));r()})},function(s){o.unmask();o.showErrorNotification("",n.get("SAVE_ERROR"));m.error(s);q(s)})})}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsReviseSaveCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/utils/SMAAnalyticsSaveUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsCommon/dialogs/SMAAnalyticsSaveDialog","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(h,f,e,c,k,g,b,n,d,i,m){var l=f.getLogger(e),j=null,a=c.extend({init:function(o){j=this;this._parent(o,{mode:"exclusive",isAsynchronous:false})},execute:function(){l.debug("execute");j._reviseCaseSave()},_reviseCaseSave:function(){n.mask(m.get("REVISION_CREATE"));b.revise().then(function(p){n.showSuccessNotification("",m.get("CASE_REVISED"));n.unmask();var o=p.results[0].physicalid;b.setCaseId(o);j._saveCase({caseId:o}).then(function(){var q={};q[o]=[];var r={detail:n.formatResponse(q)};d.setupAnalyticsCase(r)},function(q){l.error(q)})},function(o){n.unmask();l.error(o);n.showErrorNotification("",m.get("CASE_REVISED_ERROR"))})},_saveCase:function(o){return new Promise(function(q,p){n.mask(m.get("SAVING"));if(!h.is(o)){o={}}o.currentViewState=k.getViewState();g.saveCase(o).then(function(){b.updateCESTAMP().then(function(){n.unmask();n.showSuccessNotification("",m.get("SAVE_SUCCESS"));q()},function(){n.unmask();n.showSuccessNotification("",m.get("SAVE_SUCCESS"));q()})},function(r){n.unmask();n.showErrorNotification("",m.get("SAVE_ERROR"));l.error(r);p(r)})})}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsCloseCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable","DS/SMAAnalyticsCommon/utils/SMAAnalyticsSaveUtils","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit"],function(g,e,d,b,h,f,c){var i=e.getLogger(d),a=b.extend({_closeCase:function(){i.debug("_closeCase");widget.setValue("raecaseid","");c.disableCommands();c.onRefresh()},execute:function(){i.debug("execute");f.checkForChanges(h.getViewState()).then(function(){this._closeCase()}.bind(this))}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsAddTestCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/WebappsUtils/WebappsUtils","DS/SMAAnalyticsCommon/SMAAnalyticsCase","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","i18n!DS/SMAAnalyticsEssential/assets/nls/SMAAnalyticsEssential"],function(h,f,e,c,g,b,d,l,k){var i=null;var j=f.getLogger(e);var a=c.extend({init:function(m){j.debug("init");i=this;i.spSearch=null;Polymer.Base.importHref([g.getWebappsBaseUrl()+"SMAProcSP/sp-search/sp-search.html"],function(){i.spSearch=h.createElement("sp-search",{id:"spSearchAddTC"});i.spSearch.addEventListener("change",function(o){l.mask(k.get("CONNECT_REQ"));var n=o&&o.detail&&o.detail.getSelectedObjects()||[];var p=l.validateObjects(n,"Test Case",null,"search");if(p.length>0){b.connect(n).then(function(q){var r={detail:l.formatResponse(q,p)};if(q[Object.keys(q)[0]].length>0){l.showSuccessNotification("",k.get("CONNECT_TC_SUCCESS"))}else{l.showWarningNotification("",k.get("CONNECT_TC_FAIL_DUP"))}d.comparePageActions("addtestcase",r);j.log("connect success",q);l.unmask()},function(q){j.error("connect failure ",q);l.showErrorNotification("",k.get("CONNECT_REQ_FAIL"));l.unmask()})}else{l.unmask()}});i.spSearch.plmTypes="Test Case";i.spSearch.multiSelect=true});this._parent(m,{mode:"exclusive",isAsynchronous:false})},execute:function(){j.debug("execute");i.spSearch.search()}});return a});define("DS/SMAAnalyticsEssential/SMAAnalyticsSearchCase",["UWA/Core","DS/Logger/Logger","module","DS/ApplicationFrame/Command","DS/SMAAnalyticsEssential/SMAAnalyticsEssentialInit","DS/SMAAnalyticsCommon/SMAAnalyticsUtils","DS/ApplicationFrame/CommandsManager","DS/SMAAnalyticsCommon/utils/SMAAnalyticsSaveUtils","DS/SMAAnalyticsEssential/components/SMAAnalyticsCompareTable"],function(h,f,e,c,d,l,b,g,j){var i=null;var k=f.getLogger(e),a=c.extend({init:function(m){i=this;i.frm=null;this._parent(m,{mode:"exclusive",isAsynchronous:false})},execute:function(m){k.debug("execute");var p=h.is(m)?m:undefined;i.frm=d.frmWindow.getContent();var o=[];if(!h.is(p)&&h.is(d.recentCaseCollection)){var n=d.recentCaseCollection.buildView;o=n.TreedocModel.getSelectedNodes();if(o.length>0){p=o[0].getAttributeValue("objectId")}}g.checkForChanges(j.getViewState()).then(function(){if(h.is(p)){var q={};q[p]=[];var s=[];s.push({objectId:p,objectType:"Analytics Case"});var t={detail:l.formatResponse(q,s)};d.setupAnalyticsCase(t)}else{if(l.isTransientWidget()){return}var r=b.getCommand("SMAAnalyticsSearchHdr");r.execute({plmTypes:"Analytics Case",command:"searchcase"})}})}});return a});