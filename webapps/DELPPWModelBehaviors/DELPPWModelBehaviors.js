define("DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvUI",["UWA/Core"],function(b){var a=function(r,f,n){var d,i,q,o,k,g,c,l=f.getComponent("Element"),m=f.getComponent("Dialog"),j=f.getComponent("Button"),e=f.getComponent("LineEditor"),p=f.getComponent("Toggle");k=function k(t){d=new m({domId:"DuplicateAdvCmd-Dialog",identifier:"DuplicateAdvCmd-Dialog",immersiveFrame:r.getImmersiveFrame(),modalFlag:true,visibleFlag:false,minWidth:"500",minHeight:"500",resizableFlag:true,snappableFlag:false,title:n.getNLSValue("DuplicateAdvCmd.Header"),content:o,buttons:{Ok:new j({className:"ok primary",label:n.getNLSValue("DuplicateAdvCmd.OK"),emphasize:"primary",onClick:function u(){var v=c();d.close();if(b.is(t,"function")){t(v)}}}),Cancel:new j({className:"cancel",label:n.getNLSValue("DuplicateAdvCmd.CANCEL"),onClick:function u(){d.close()}})}});d.close=function s(){this.destroy();o=null;i=null;q=null};d.show()};g=function g(u,t){var y,x,v;o=new l("div",{"class":"DuplicateAdvCmd-Content"});x=new l("div",{"class":"DuplicateAdvCmd-prefixOptionContainer"});v=new l("div",{"class":"DuplicateAdvCmd-linkOptionsContainer"});if(u.isDisplayed){new l("div",{"class":"DuplicateAdvCmd-prefixLabelContainer",text:n.getNLSValue("DuplicateAdvCmd.Prefix")}).inject(x);i=new e({placeholder:n.getNLSValue("DuplicateAdvCmd.Prefix"),value:u.defaultValue});i.inject(x)}q={};for(y in t){var w;if(t.hasOwnProperty(y)){w=t[y];if(w.isDisplayed){var s=new p({label:n.getNLSValue("DuplicateAdvCmd."+y),checkFlag:w.defaultValue});s.inject(v);q[y]=s}}}x.inject(o);v.inject(o)};c=function c(){var s={},t;if(b.is(i)){s.Prefix=i.value}if(b.is(q)){for(t in q){if(q.hasOwnProperty(t)){s[t]=q[t].checkFlag}}}return s};return{name:"DuplicateAdvUI",showUI:function h(t,s){if(b.is(d)){d.close()}g(t.prefixOption,t.linkOptions);k(s);return d}}};return a});define("DS/DELPPWModelBehaviors/ImplementBehavior",["UWA/Core","UWA/Class/Promise"],function(c,b){var a=function a(v,q,k,m,I,E,y){var d,x,H,u,B,w,r,f=function f(O,L,M,N){var K=c.is(O)?m.getNLSValue(O):L;q.info(K,M);if(N){N(K)}},j=function j(P,K,L,O,M){var N=c.is(P)?m.getNLSValue(P):L;if(K){N+="<br>"+K}q.warn(N,O);if(M){M(N)}};d=function p(S,N,Q,O,U){var P="POST",T,M;T=c.Json.encode({selectedHigherProductID:S,selectedMfgItemID:N,rootMfgItemID:N,reviseMfgItem:Q});O=c.merge(O,{appenedURL:"ReconnectScopeLink"});O.onComplete=function L(W,V){q.info(O.logMessage+" "+m.getNLSValue("completed"),M);q.notify("stopProgress");U(W,V)};O.onFailure=function K(W,V){q.warn(O.logMessage+" "+m.getNLSValue("failed"),M);q.notify("stopProgress");U(W,V)};O.onTimeout=function R(W,V){q.warn(O.logMessage+" "+m.getNLSValue("timeout"),M);q.notify("stopProgress");U(W,V)};q.notify("startProgress");if(c.is(O)&&c.is(O.logMessage)){M=q.log(O.logMessage)}E.webserviceAndProcessing(P,T,O)};x=function x(T,M,W,U,K){var Q,N,R,X=m.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),P=m.getNLSValue("ImplementBehavior.CreateScope.Success"),V=m.getNLSValue("ImplementBehavior.CreateScope.Failed"),O=q.log(X),S=function S(Y){f(Y,P,O,U)},L=function L(Z,Y){j(Z,Y,V,O,K)};if(I.isScoped(T)===true){Q=k.getReferenceModel(T);R=m.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:Q.get("V_Name")});L(null,R);return}N=r(W);if(N.hasImplementLink){R=m.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:N.implementingName,obj2:N.implementedName});L(null,R)}else{I.createScopeLink(T,M,{onComplete:S,onFailure:L})}};B=function B(Z,X,W,K){var V,T,Q,M,S,N,R,aa=m.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),P=m.getNLSValue("ImplementBehavior.CreateScope.Success"),Y=m.getNLSValue("ImplementBehavior.CreateScope.Failed"),O=q.log(aa),U=function U(ab){f(ab,P,O,W)},L=function L(ac,ab){j(ac,ab,Y,O,K)};if((c.is(Z,"array")&&Z.length>0)&&(c.is(X,"array")&&X.length>0)){T=Z[Z.length-1];V=k.getReferenceIdFromInstance(T);M=k.getReferenceIdFromInstance(X[X.length-1]);if(I.isScoped(V)===true){Q=k.getReferenceModel(V);R=m.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:Q.get("V_Name")});L(null,R);return}if(!I.validateIfScoped(Z,X)){R=m.getNLSValue("ImplementBehavior.Validation.ScopeNotValid");L(null,R)}else{if(I.getImplementLinkType()==="ProcessImplementLinkOcc"){I.createScopeLink(V,M,{onComplete:U,onFailure:L})}else{N=r(Z,X);if(N.hasImplementLink){if(N.withSameProduct){I.createScopeLink(V,M,{onComplete:U,onFailure:L})}else{R=m.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:N.implementingName,obj2:N.implementedName});L(null,R)}}else{S=I.getPathToScope(X);I.createScopeAndImplementLink(V,T,M,S,{onComplete:U,onFailure:L})}}}}else{q.debug("Input parameters are invalid.");L()}};r=function r(U,T){var S,L=false,O=false,N,R,M=null,P,Q,V=null,K;S=(c.is(U,"array")&&U.length>0)?I.getImplLinksOfImplementing(U):null;if(c.is(S,"array")&&S.length>0){L=true;if(c.is(T)){O=S.some(function(W){return c.equals(W.get("to"),T)})}K=S[0];P=K.getAttribute("from");Q=k.getReferenceModel(P);if(c.is(Q)){V=Q.get("V_Name")}N=K.getAttribute("to");R=k.getReferenceModel(N);if(c.is(R)){M=R.get("V_Name")}}return{hasImplementLink:L,withSameProduct:O,implementingName:V,implementedName:M}};u=function u(S,N,M,Q,T,K){var V=m.getNLSValue("ImplementBehavior.Consumption.LogMessage"),P=m.getNLSValue("ImplementBehavior.Consumption.Success"),U=m.getNLSValue("ImplementBehavior.Consumption.Failed"),O=q.log(V),R=function R(){f(null,P,O,T)},L=function L(X,W){j(null,W,U,O,K)};I.createScopeAndImplementLink(S,N,M,Q,{onComplete:R,onFailure:L})};H=function H(L,Q,K,S,T,M){var V=m.getNLSValue("ImplementBehavior.Consumption.LogMessage"),P=m.getNLSValue("ImplementBehavior.Consumption.Success"),U=m.getNLSValue("ImplementBehavior.Consumption.Failed"),O=q.log(V),R=function R(W){f(W,P,O,T)},N=function N(X,W){j(X,W,U,O,M)};I.consumeImplementedItems(L,[Q],K,S,{onComplete:R,onFailure:N})};w=function w(L,O,K,Q){var P,N=function N(S,R){return new b(function T(V,U){B(S,R,V,U)})},M=function M(T,S,R){return new b(function U(Y,X){var W=(k.isReference(T))?T:k.getReferenceIdFromInstance(T),V=(k.isReference(S))?S:k.getReferenceIdFromInstance(S);x(W,V,R,Y,X)})};if((c.is(L,"array")&&L.length>0&&I.isUnderScope(L))&&(c.is(K,"array")&&K.length>0)){P=N(L,K)}else{P=M(O,Q,K)}return P};return{isScoped:function n(K){return I.isScoped(K)},getScopeLinkType:function h(){return I.getScopeLinkType()},getImplementLinkType:function G(){return I.getImplementLinkType()},getScopeLinksOfImplementing:function F(K){return I.getScopeLinksOfImplementing(K)},getScopeLinksOfImplemented:function s(K){return I.getScopeLinksOfImplemented(K)},getImplLinksOfImplementing:function e(K){return I.getImplLinksOfImplementing(K)},getImplLinksOfImplemented:function i(K){return I.getImplLinksOfImplemented(K)},getScopedParent:function C(K){return I.getScopedParent(K)},consumeImplementedItems:function t(L){var N,M=function M(){var P=[];L.forEach(function O(Q){var R=new b(function S(X,W){var Y=null,U=null,V=null,T=(c.is(Q.targetInstancePIDsArray)&&Q.targetInstancePIDsArray.length>0)?Q.targetInstancePIDsArray:Q.targetReferencePID;Y=I.validateIfScoped(T,Q.instancePIDsArray);if(Y){U=I.getPathToScope(Q.instancePIDsArray);V=k.getReference(Q.targetReferencePID);if(y.isAKindOf(V,"Provide")){u(Q.targetReferencePID,Q.targetInstancePID,Q.referencePID,U,X,W)}else{H(Q.rootReferencePID,U,Q.targetRootReferencePID,Q.targetReferencePID,X,W)}}else{w(Q.targetInstancePIDsArray,Q.targetReferencePID,Q.instancePIDsArray,Q.referencePID).then(X,W)}});P.push(R)});return P};if(c.is(L,"array")&&L.length>0){q.notify("startProgress");N=b.allSettled(M()).then(function K(){q.notify("stopProgress")})}else{q.debug("Input parameters are invalid.");N=b.reject("ImplementBehavior.Validation.InvalidInput")}return N},createScopeLink:function o(M){var O,L=[];if(c.is(M,"array")&&M.length>0){q.notify("startProgress");L=M.map(function N(P){return w(P.implementingAbsPath,P.implementingPID,P.implementedAbsPath,P.implementedPID)});O=b.allSettled(L).then(function K(){q.notify("stopProgress")})}else{q.debug("Input parameters are invalid.");O=b.reject("ImplementBehavior.Validation.InvalidInput")}return O},createImplementLink:function A(M){var P,S=[],T=m.getNLSValue("ImplementBehavior.CreateImpl.LogMessage"),O=m.getNLSValue("ImplementBehavior.CreateImpl.Success"),R=m.getNLSValue("ImplementBehavior.CreateImpl.Failed"),N=m.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"),Q=function Q(X,ab,U){var Y,Z,W=q.log(T),ac=function ac(ae){var ad=false;if((c.is(ae.implementingAbsPath,"array")&&ae.implementingAbsPath.length>0)&&(c.is(ae.implementedAbsPath,"array")&&ae.implementedAbsPath.length>0)){ad=I.isImplementLinkPossible(ae.implementingAbsPath,ae.implementedAbsPath)}return ad},aa=function aa(ad){f(ad,O,W,ab)},V=function V(ae,ad){j(ae,ad,R,W,U)};if(ac(X)){Y=I.getPathToScope(X.implementingAbsPath),Z=I.getPathToScope(X.implementedAbsPath);if(c.is(Y)&&c.is(Z)){I.createImplementLink(Y,Z,{onComplete:aa,onFailure:V})}else{V(null,N)}}else{V(null,N)}};if(c.is(M,"array")&&M.length>0){q.notify("startProgress");S=M.map(function K(V){return new b(function U(X,W){Q(V,X,W)})});P=b.allSettled(S).then(function L(){q.notify("stopProgress")})}else{q.debug("Input parameters are invalid.");P=b.reject("ImplementBehavior.Validation.InvalidInput")}return P},deleteScopeLink:function D(P){var R,U=[],S,M=c.is(P,"array")?P:[P],O=m.getNLSValue(this.getScopeLinkType()),V=m.getNLSValue("DeleteLink.LogMessage",{linkType:O}),Q=m.getNLSValue("DeleteLink.Success",{linkType:O}),T=m.getNLSValue("DeleteLink.Failure",{linkType:O}),L=function L(ab,aa,Y){var W=q.log(V),Z=function Z(ac){f(ac,Q,W,aa)},X=function X(ad,ac){j(ad,ac,T,W,Y)};I.deleteScopeLink(ab,{onComplete:Z,onFailure:X})};if(M.length>0){q.notify("startProgress");M.forEach(function N(X){S=I.getScopeLinksOfImplementing(X);if(c.is(S)&&S.length>0){U=S.map(function W(Y){return new b(function Z(ab,aa){L(Y.id,ab,aa)})})}});R=b.allSettled(U).then(function K(){q.notify("stopProgress")})}else{q.debug("Unable to delete scope links as input parameters are invalid.");R=b.reject("ImplementBehavior.Validation.InvalidInput")}return R},reconnectScope:function J(K,M,L,N){d(K,M,false,L,N)},reviseAndReconnectScope:function l(K,M,L,N){d(K,M,true,L,N)},prereqChecksForReconnectScope:function g(K,O,N,L,M){var P=q.getBehavior("ModelBehavior");if(K==="ReconnectScope"){P.isReadOnly(O,N,L,M)}else{if(K==="ReviseAndReconnectScope"){P.isLatestRevision(O,N,L,M)}}},isLinkValidForOccPath:function z(L,K,M,N){return I.isLinkValidForOccPath(L,K,M,N)}}};return{plugins:["DatabasePlugin","ResourcePlugin","ImplementPlugin","MfgItemPlugin","DicoPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/DocumentBehavior",[],function(){var a=function a(s,p,c,h,t){var d,f;d=function(B,A){A=A||{};p.info(B);p.notify("stopProgress");if(UWA.is(A.onComplete,"function")){A.onComplete.call(null,B)}};f=function(C,A,B){B=B||{};if(UWA.is(A)){if(UWA.is(A.message,"string")){C+="\n"+A.message}}p.warn(C);p.notify("stopProgress");if(UWA.is(B.onFailure,"function")){B.onFailure.call(null,C)}};return{listenTo:function k(){return{}},onStart:function r(){},onStop:function i(){},getDocumentTypes:function w(){return c.getDocumentTypes()},getDocumentsPolicies:function v(C){c.getDocumentsPolicies({onComplete:function A(D){C(D)},onFailure:function B(){p.warn(h.getNLSValue("Document.FetchDocPolicyFailed"))}})},getDocument:function o(A){return c.getDocument(A)},isDocConnection:function z(A){return c.isDocConnection(A)},addDocumentConnection:function j(A,B,C){return c.addDocumentConnection(A,B,C)},uploadDocument:function u(D,B,C){var A=this,G,E=C.shift();p.notify("startProgress");G=function G(L){var J=L[0],I={id:J};c.linkWithDocumentID(D,J,{onComplete:function H(){c.addDocumentConnection(D,J);A.attachFile(I,C,{silent:true,onComplete:function N(){d(h.getNLSValue("Document.UploadDocSucceeded",{document:B.title}))},onFailure:function M(){f(h.getNLSValue("Document.UploadDocPartialSuccess",{document:B.title}))}})},onFailure:function K(M){c.deleteDocument(J);f(h.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(M.message)}))}})};A.attachFile(B,E,{silent:true,onComplete:G,onFailure:function F(H){f(h.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(H.message)}))}})},attachDocuments:function e(A,B){p.notify("startProgress");c.getDocumentInfo(B,{onComplete:function(F){var E,D,C;for(E=0;E<F.data.length;E++){D=F.data[E];C={onComplete:function(){c.addDocument(this);c.addDocumentConnection(A,this.id);d(h.getNLSValue("Document.UploadDocSucceeded",{document:this.dataelements.title}))}.bind(D),onFailure:function(G){f(h.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(G.message)}))}};if(t.getPPRType(D.type)!=="DOCUMENT"){p.warn(h.getNLSValue("Document.SelectionNotSupported",{type:D.type}))}else{c.linkWithDocumentID(A,D.id,C)}}},onFailure:function(C){f(h.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(C.message)}))}})},fetchDocuments:function y(A,D){c.getDocumentID(A,{onComplete:function C(E){c.getDocumentInfo(E,{onComplete:function G(K){var J,H,L=[],I;H=c.getConnectedDocuments(A);H.forEach(function(M){c.removeDocumentConnection(A,M,{silent:true})});for(J=0;J<K.data.length;J++){I=K.data[J];L.push(c.addDocument(I));c.addDocumentConnection(A,I.id,{silent:true})}p.notify("addDocumentConnections",[[A]]);D(L)},onFailure:function F(){D()}})},onFailure:function B(){D()},})},downloadDocument:function m(B){var A=c.getDocument(B);p.notify("startProgress");c.downloadDocuments(B,{onComplete:function C(){d(h.getNLSValue("Document.DownloadDocSucceeded",{document:A.get("dataelements").title}))},onFailure:function(D){f(h.getNLSValue("Document.DownloadDocFailed",{document:A.get("dataelements").title,message:UWA.Json.encode(D)}))}})},deleteDocument:function q(B,C){var A=c.getDocument(C);p.notify("startProgress");c.deleteLink(B,C,{onComplete:function E(){c.removeDocumentConnection(B,C);if(c.getDocumentConnectionsByDocID(C).length===0){c.removeDocument(C)}d(h.getNLSValue("Document.DeleteDocLinkSucceeded",{document:A.get("dataelements").title}))},onFailure:function D(F){f(h.getNLSValue("Document.DeleteDocLinkFailed",{document:A.get("dataelements").title,message:UWA.Json.encode(F)}))},})},attachFile:function l(B,H,F){var E,I,G=[],D;F=F||{};H=UWA.is(H,"array")?H:[H];if(!(UWA.is(F.silent,"boolean")&&F.silent)){p.notify("startProgress")}if(!UWA.is(B.id)&&H.length>1){s.getLogger().debug("if documentID is not provided only one file can be added");if(UWA.is(F.onFailure)){F.onFailure()}return}for(E=0;E<H.length;E++){D=H[E];I=new Promise(function(K,J){c.attachFile(this.docInfo,this.fileInfo,{onComplete:function(M){var L;if(UWA.is(B.id)){L=c.getDocument(B.id);L.addFile(M.data[0].relateddata.files[0])}else{L=c.addDocument(M.data[0])}K(L.id)},onFailure:function(L){J(L)}})}.bind({docInfo:B,fileInfo:D}));G.push(I)}Promise.all(G).then(function C(J){if(UWA.is(F.silent,"boolean")&&F.silent){if(UWA.is(F.onComplete)){F.onComplete(J)}}else{d(h.getNLSValue("Document.AttachFileSuccess"))}},function A(J){if(UWA.is(F.silent,"boolean")&&F.silent){if(UWA.is(F.onFailure)){F.onFailure(J)}}else{f(h.getNLSValue("Document.AttachFileFailed")+UWA.Json.encode(J.error))}})},downloadFile:function b(C,A,B){p.notify("startProgress");c.downloadFile(C,A,{onComplete:function D(){d(h.getNLSValue("Document.DownloadFileSucceeded",{file:B}))},onFailure:function(E){f(h.getNLSValue("Document.DownloadFileFailed",{file:B,message:UWA.Json.encode(E)}))}})},modifyFile:function g(B,C,A){p.notify("startProgress");c.modifyFile(B,C,{onComplete:function E(G){var F=c.getDocument(B.id);F.modifyFile(G.data[0].relateddata.files[0]);d(h.getNLSValue("Document.ModifyFileSucceeded",{file:A}))},onFailure:function D(F){f(h.getNLSValue("Document.ModifyFileFailed",{file:A,message:UWA.Json.encode(F)}))}})},removeFile:function x(B,A){p.notify("startProgress");c.removeFile(B,A,{onComplete:function D(){var E=c.getDocument(B);E.removeFile(A);d(h.getNLSValue("Document.RemoveFileSuccess"))},onFailure:function C(E){f(h.getNLSValue("Document.RemoveFileFailure")+UWA.Json.encode(E))}})},viewFile:function n(C,A,B){c.fetchFileURL(C,A,{onComplete:function D(E){window.open(E,h.getNLSValue("Document.ViewFile",{title:B}),"fullscreen=no")}})},}};return{plugins:["DocumentPlugin","ResourcePlugin","DicoPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/AttributeBehavior",[],function(){var a=function(A,s,b,B){return{onStart:function z(){},onStop:function i(){},getAttributeInfo:function F(J,K){return B.getAttributeInfo(J,K)},getNodeAndColumnInfos:function d(K,J){return b.getNodeAndColumnInfos(K,J)},isReadOnly:function p(L,J,K){return b.isReadOnly(L,J,K)},doesAttributeExist:function E(K,J){return b.doesAttributeExist(K,J)},isVisible:function u(J){return b.isVisible(J)},getObjectAndAttributeInfos:function D(J){return b.getObjectAndAttributeInfos(J)},isBoolean:function k(J){return b.isBoolean(J)},isDouble:function j(J){return b.isDouble(J)},isInteger:function y(J){return b.isInteger(J)},isDate:function G(J){return b.isDate(J)},isMultiValuated:function w(J){return b.isMultiValuated(J)},isMultiLine:function I(J){return b.isMultiLine(J)},hasRangeDefined:function e(K,J){return b.hasRangeDefined(K,J)},hasMagnitude:function c(J){return b.hasMagnitude(J)},getAuthorizedValueIndex:function C(L,J,K){return b.getAuthorizedValueIndex(L,J,K)},getAuthorizedValueNLS:function h(K,J){return b.getAuthorizedValueNLS(K,J)},getAuthorizedValuesNLSList:function g(K,J){return b.getAuthorizedValuesNLSList(K,J)},getDefaultValue:function t(J){return b.getDefaultValue(J)},getMagnitude:function r(J){return b.getMagnitude(J)},getFullName:function H(J){return b.getFullName(J)},getMaxLength:function o(J){return b.getMaxLength(J)},getPattern:function n(J){return b.getPattern(J)},getNLS:function l(J){return b.getNLS(J)},getType:function v(J){return b.getType(J)},getValueAsArray:function f(K,J){return b.getValueAsArray(K,J)},getValueAsString:function x(K,J){return b.getValueAsString(K,J)},createField:function m(L,J,K){return b.createField(L,J,K)},getFieldValue:function q(J,K){return b.getFieldValue(J,K)},}};return{plugins:["AttributePlugin","DicoPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/ResourceBehavior",[],function(){var a=function a(c,j,f){return{onStart:function h(){},onStop:function e(){},getNLSValue:function i(n,l,m,k){return f.getNLSValue(n,l,m,k)},getNLSForUnit:function g(l,k){return f.getNLSForUnit(l,k)},getIconURLFromKey:function b(k,l,m){return f.getIconURLFromKey(k,l,m)},getIconElem:function d(l,k){return f.getIconElem(l,k)}}};return{plugins:["ResourcePlugin"],creator:a}});define("DS/DELPPWModelBehaviors/AssignProductBehavior",["UWA/Core"],function(b){var a=function a(d,m,i,j,k,f){var g,c;g=function g(x,q,y,n,w){var o,r,p,u=0,v=0,t;w=w||{};p=function p(z,A){if(b.is(w.onFailure,"function")){w.onFailure(A)}};r=function r(F){var E=i.getConnectionParser(),D={stackedReferences:[],stackedInstances:[],stackedConnections:[]},A={queriedForConnections:true},z={queriedForChildren:true,queriedForConnections:true,queriedForDocuments:false},C=function C(G){var H=[];if(!b.is(G.instancesAndReferences)||G.connections.length<2
/*!UWA.is(scopeConnModel) || !UWA.is(implConnModel)*/
){m.debug("Instance or scope or implement model is empty for instance PID:"+F.instancesAndReferences[0].attributesValue.PID)}G.instancesAndReferences.forEach(function(I){if(I.isInstance()){H.push(I)}});m.notify("addInstance",H);m.notify("addConnection",[G.connections]);if(q.length===v){if(b.is(w.onComplete,"function")){w.onComplete(G)}}};v++;if(b.is(F)){if(b.is(F.instancesAndReferences)){F.instancesAndReferences.forEach(function(H){var G=H.attributesValue,I,J;if(G.hasOwnProperty("isInstanceOf")){I=b.merge(G,A);D.stackedInstances.push(I);if(b.is(H["to.attributesValue"])){J=b.merge(H["to.attributesValue"],z);D.stackedReferences.push(J)}}else{J=b.merge(G,z);D.stackedReferences.push(J)}})}if(b.is(F.connections)){F.connections.forEach(function B(G){E.parse(G,D)})}D.onComplete=C;i.addToCollections(D)}};t={processID:x};q.forEach(function s(B){var A=b.clone(t),z=b.clone(n[u]);o=i.getReferenceModel(B);A.productPath=b.Json.encode(y[u]);A.productRefPID=o.id;A.type=z.V_Type,A.attributes=z;if(!z.hasOwnProperty("PLMEntity.V_Name")){z["PLMEntity.V_Name"]=o.get("V_Name")}k.webServiceRequest({url:"modeler/ppr/assignproduct",method:"POST",context:this,data:b.Json.encode(A),onComplete:r,onFailure:p,onTimeout:p,onCancel:p});u++},this)};c=function c(o,n,p){var q;p=p||{};m.notify("stopProgress");q=j.getNLSValue("AssignProdBehavior.ErrorLinkCreation.Title");m.warn(q,o);m.debug("AssignProdBehavior.ErrorLinkCreation.Title. ERROR during product assign: "+n);if(b.is(p.onFailure,"function")){p.onFailure(q,n)}};return{unassignProduct:function h(t,u){var w,o,q,v=[],r=[],s=[];w={onComplete:function(){m.notify("stopProgress");if(b.is(u)&&b.is(u.onComplete)){u.onComplete()}else{m.info(j.getNLSValue("UnassignProduct.DeleteSuccess"))}},onFailure:function(x){m.notify("stopProgress");if(b.is(u)&&b.is(u.onFailure)){u.onFailure()}else{m.warn(x)}}};if(b.is(u)){w=b.merge(w,u)}if(b.is(t,"array")&&t.length!==0){m.notify("startProgress");t.forEach(function(x){v.push(new Promise(function(B,y){o=f.getImplLinksOfImplementing(x);if(b.is(o)&&o.length>0){o.forEach(function(C){var D=C.id;s.push(new Promise(function(F,E){f.deleteImplementLink(D,{onComplete:F,onFailure:E})}))});b.Promise.allSettled(s).then(function A(){q=f.getScopeLinksOfImplementing(x);if(b.is(q)&&q.length>0){q.forEach(function(E){var F=E.id;r.push(new Promise(function(H,G){f.deleteScopeLink(F,{onComplete:H,onFailure:G})}))})}b.Promise.allSettled(r).then(function D(){B()},function C(){y()})},function z(){y()})}}))});b.Promise.allSettled(v).then(function p(){w.onComplete()},function n(z){var x=0,y=0;for(x=0;x<z.length;x++){if(z[x].state==="rejected"){y++}}if(y===z.length){w.onFailure(j.getNLSValue("UnassignProduct.DeleteFailure"))}else{w.onFailure(j.getNLSValue("UnassignProduct.PatialFailure"))}})}},assignProduct:function e(A){var p,n,B,o,y=false,r,u,C,x=[],v,t,w,z,s;s=function s(){m.info(j.getNLSValue("Success.ProductAssigned.Title",{mfgItem:z}),t);m.notify("stopProgress");if(b.is(A.onComplete,"function")){A.onComplete()}};if(b.is(A)){B=A.mbomReferenceId;p=A.mbomInstanceId;n=A.bodyInstanceIds;C=A.bodyAbsolutePaths;r=A.mbomAbsolutePaths[0];v=A.isInstancePossible,o=b.is(A.newMfgAttributes)?A.newMfgAttributes:{V_Type:"DELAsmAssemblyModelDisciplines/Provide"}}for(u=0;u<C.length;u++){if(!b.is(r)||r.length===0){r=B}y=f.validateIfScoped(r,C[u]);if(!y){m.warn(j.getNLSValue("AssignProdBehavior.NotScoped.Title"));return}}for(u=0;u<C.length;u++){x.push(f.getPathToScope(C[u]))}if(b.is(B,"array")&&(B.length>0)){B=B[0]}m.notify("startProgress");w=i.getReferenceModel(B);z=b.is(w)?w.get("V_Name"):"";t=m.log(j.getNLSValue("ProductAssign.LogMessage",{mfgItem:z}));if(v===true){g(B,n,x,o,{onComplete:s,onFailure:function q(D,E){c(t,E,A)}})}else{f.createImplementLink(p,x[0],{onComplete:s,onFailure:function q(D,E){c(t,E,A)}})}},createMfgItemAndScopeLink:function l(n,o,q){var p=0;if(!b.is(n,"array")&&!b.is(o,"array")){return}n.forEach(function(t){var w,v,r=b.clone(o[p]),z=i.getReferenceModel(t),y=z.get("V_Name"),x=z.id,s=function s(){m.notify("stopProgress");m.warn(j.getNLSValue("CreateMfgItemAndScope.Failure",{productName:y}),v)},u=function u(E){var D=i.getConnectionParser(),C={silentMode:true,stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function B(F){if(b.is(F)&&b.is(F.instancesAndReferences,"array")){m.notify("addReference",F.instancesAndReferences[0])}m.notify("stopProgress");m.info(j.getNLSValue("CreateMfgItemAndScope.Success",{processName:r["PLMEntity.V_Name"],productName:y}),v)}};if(b.is(E)&&b.is(E.instancesAndReferences)&&b.is(E.connections)){E.instancesAndReferences.forEach(function(F){C.stackedReferences.push(b.merge(F,{queriedForChildren:true,queriedForConnections:true,queriedForDocuments:true}))});E.connections.forEach(function A(F){D.parse(F,C)});i.addToCollections(C)}else{s()}};if(!b.is(r["PLMEntity.V_Name"])){r["PLMEntity.V_Name"]=y}w={productID:x,processType:r.V_Type,processData:r};m.notify("startProgress");v=m.log(q);k.webServiceRequest({url:"modeler/ppr/createMfgItemAndScope",method:"POST",data:b.Json.encode(w),onFailure:s,onTimeout:s,onComplete:u});p++})},}};return{plugins:["DatabasePlugin","ResourcePlugin","WebServicePlugin","ImplementPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/MfgItemBehavior",["UWA/Core"],function(b){var a=function a(c,f,g,e,h){return{webservice:function d(k,j,p,m,q){var l,n,o;f.notify("startProgress",{noTimeout:true});if(b.is(m)&&b.is(m.logMessage)){n=f.log(m.logMessage)}if(k==="Create"){l="POST";o=b.Json.encode({rootProductID:j,rootMfgItemID:p,scopeCreation:m.scopeCreation,prefix:m.prefix})}else{if(k==="Update"){l="PUT";o=b.Json.encode({mbomUpdateMode:"mbomPull",rootProductID:j,rootMfgItemID:p,backgroundJobflag:m.backgroundJobFlag,scopeCreation:m.scopeCreation,prefix:m.prefix})}else{if(k==="rerouteScopeLink"){l="POST";o=b.Json.encode({mfgItemPID:m.rootMfgId,rootMfgItemID:m.rootMfgId,mbomRefBIStatus:m.biStatusObject});m=b.merge(m,{appenedURL:"RerouteMfgItem"})}else{if(k==="rerouteLink"){l="POST";o=b.Json.encode({rootProductPID:m.rootPrdId,rootMfgItemPID:m.rootMfgId,rootMfgItemID:m.rootMfgId,mfgItemPID:m.mbomId,mbomInstBIStatus:m.biStatusObject,scopeCreation:m.scopeCreation});m=b.merge(m,{appenedURL:"RerouteMfgItem"})}}}}m.onComplete=function(s,r){if(!b.is(s)){f.info(e.getNLSValue("Info.NoUpdate.Title"),n);if(b.is(q)){q()}}else{f.info(m.logMessage+" "+e.getNLSValue("completed"),n);if(b.is(q)){q(s,r)}}f.notify("stopProgress")};m.onFailure=function(){f.warn(m.logMessage+" "+e.getNLSValue("failed"),n);f.notify("stopProgress");if(b.is(q)){q()}};g.webserviceAndProcessing(l,o,m)},getBrokenMfgItemStatus:function i(j,k){h.getBrokenMfgItemStatus(j,k)}}};return{plugins:["MfgItemPlugin","ResourcePlugin","BIPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/LinkBehavior",["UWA/Core"],function(b){var a=function(x,t,k,y,m,g,n,A){var s=A.getScopeLinkType(),d=A.getImplementLinkType(),f=function(E,D,C){D=D||{};t.info(E,C);t.notify("stopProgress");if(b.is(D.onComplete,"function")){D.onComplete.call(null,E)}},i=function(F,C,E,D){E=E||{};if(b.is(C)){if(b.is(C.message,"string")){F+="\n"+C.message}}t.warn(F,D);t.debug(F+b.Json.encode(C));t.notify("stopProgress");if(b.is(E.onFailure,"function")){E.onFailure.call(null,F)}};return{onStart:function w(){},onStop:function o(){},getPossibleRelationTypes:function z(I,G,E,J){var H=I.get("type"),F=G.get("type"),D,C;if(!H||!F){t.debug("No PPRTypes on models");return}D=y.getPossibleRelations(H,F,"write");if((!b.is(J)||!b.is(E))){C=D.indexOf("DELLmiMaterialPathCnxCust");if(C>-1){D.splice(C,1)}C=D.indexOf("DELLmiMaterialPathCnxCust_inverse");if(C>-1){D.splice(C,1)}C=D.indexOf("DELLmiTimeConstraintCnx");if(C>-1){D.splice(C,1)}C=D.indexOf("DELLmiTimeConstraintCnx_inverse");if(C>-1){D.splice(C,1)}}return D},getPathsToCommonParent:function l(G,E){var I={},M,K,L,N,F,C,D,J={},H=false;if(b.is(G,"array")&&b.is(E,"array")){for(K=G.length-1;K>=0;K--){N=G[K];M=k.getInstance(N);L=M.get("isAggregatedBy");for(F=E.length-1;F>=0;F--){C=E[F];if(b.is(J[C])){D=J[C]}else{M=k.getInstance(C);D=M.get("isAggregatedBy");J[C]=D}if(L===D&&(N!==C)){H=true;break}}if(H){break}}I.fromPath=G.slice(K);I.toPath=E.slice(F)}return I},isLinkPossible:function j(E,D,C,F){return y.isLinkPossible(E,D,C,F)},webServiceRequest:function c(C){m.webServiceRequest(C)},getConnection:function u(C){return k.getConnection(C)},createConnection:function q(H,F){var E,G=[],I;if(b.is(H,"array")&&H.length>0){I=function I(K,M,J){var N=new Promise(function L(W,P){var R,aa,Z,S=(b.is(M,"array"))?k.getReferenceModel(M[M.length-1]):k.getReferenceModel(M),Y=(b.is(J,"array"))?k.getReferenceModel(J[J.length-1]):k.getReferenceModel(J),Q=S.get("V_Name"),V=Y.get("V_Name"),X=n.getNLSValue(K),T={linkType:X,target:Q,source:V},U=function U(){t.log(n.getNLSValue("CreateLink.Success",T),E);W(T)},O=function O(ad,ab){var ac=n.getNLSValue("CreateLink.Failure",T);if(b.is(ab)){if(b.is(ab.message,"string")){ac+="\n"+ab.message}}t.log(ac,E);P(T)};if(y.getPossibleRelationTypes(S,Y).length===0){R=n.getNLSValue("CreateLink.NotAllowed",T);t.warn(R);P(R);return}F=F||{};Z={type:K,IDFrom:M.toString(),IDTo:J.toString(),};aa={onFailure:O,onTimeout:O,onCancel:O,onComplete:U};return k.createConnection(Z,b.merge(aa,F))});return N};t.notify("startProgress");E=t.log(n.getNLSValue("CreateLink.LogMessage"));G=H.map(function D(J){return I(J.type,J.idFrom,J.idTo)});b.Promise.allSettled(G).then(function C(Q){var L,O="",N,P,J=0,M=function M(R){var S=n.getNLSValue(R,{linkType:Q[0].linkType,target:L,source:O});return S};Q.forEach(function K(R,S){(R.state==="rejected")?(P=R.reason,J++):P=R.value;N=(0===S)?"":", ";if(0===S){L=P.target}O+=(N+P.source)});if(J===0){f(M("CreateLink.Success"),F,E)}else{if(J===Q.length){i(M("CreateLink.Failure"),null,F,E)}else{i(M("CreateLink.PartialFailure"),null,F,E)}}})}},deleteConnection:function v(E,J){var K,F,D,I,G=k.getConnection(E),H=G.getAttribute("type"),C=n.getNLSValue(H);J=J||{};t.notify("startProgress");F=t.log(n.getNLSValue("DeleteLink.LogMessage",{linkType:C}));D=function D(L){i(n.getNLSValue("DeleteLink.Failure",{linkType:C}),L,J,F)};I=function I(){f(n.getNLSValue("DeleteLink.Success",{linkType:C}),J,F)};K={onComplete:I,onFailure:D,onTimeout:D,onCancel:D};K=b.extend(K,J);if(s===H){A.deleteScopeLink(E,K)}else{if(d===H){A.deleteImplementLink(E,K)}else{k.deleteConnection(E,K)}}},addConnection:function r(C,D){return k.addConnection(C,D)},updateLinkAttributes:function h(D,N,M){var O=[],I,P,C,K={},G,J,H,L;N=N||{};M=M||{};for(I=0;I<N.length;I++){J=g.getNLS(N[I].attributeInfo);H=g.hasRangeDefined(N[I].attributeInfo,N[I].attributeDef)&&g.isInteger(N[I].attributeInfo);L=N[I].objectToBeModified;G=L.get(N[I].dataIndex);C=N[I].newValue;if(H){G=g.getAuthorizedValueIndex(N[I].attributeInfo,N[I].attributeDef,G)}if(g.isDate(N[I].attributeInfo)){G=new Date(G).getTime()/1000}if(G!==C){if(!g.doesAttributeExist(L,N[I].dataIndex)){t.warn(n.getNLSValue("TableView.AvailabilityFailure",{key:J}))}else{N[I].previousValue=G;O.push(N[I])}}}if(O.length===0){return}for(I=0;I<O.length;I++){K[O[I].attributeName]=O[I].newValue}P={data:K,onFailure:function E(Q){for(I=0;I<O.length;I++){Q.set(O[I].dataIndex,O[I].previousValue)}i(n.getNLSValue("AttributeUtil.SaveFailed"),Q,M)},onComplete:function F(){f(n.getNLSValue("AttributeUtil.SaveSucceeded"),M)},logMessage:n.getNLSValue("AttributeUtil.EditAttributesLogMessage")};k.updateConnection(D,P)},getConnectionsByModel:function B(D,C,E){return k.getConnectionsByModel(D,C,E)},getImpactedConnections:function e(C){return k.getImpacted(C)},getXMLValues:function p(E,C,D){return m.getXMLValues(E,C,D)}}};return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","AttributePlugin","ResourcePlugin","ImplementPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/ModelBehavior",["UWA/Core","UWA/Class/Promise"],function(c,b){var a=function(C,Q,m,I,z,H,U){var X,i,y,r,K,R;r=function r(ac,aa,Z){var ab=aa||{},Y=c.is(ab.popupMessage)?ab.popupMessage:true;(true===Y)?Q.info(ac,Z):Q.log(ac,Z);Q.notify("stopProgress");if(c.is(ab.onComplete,"function")){ab.onComplete.call(null,ac)}};K=function K(ad,Y,ab,aa){var ac=ab||{},Z=c.is(ac.popupMessage)?ac.popupMessage:true;if(c.is(Y)){if(c.is(Y.message,"string")){ad+="\n"+Y.message}}(true===Z)?Q.warn(ad,aa):Q.log(ad,aa);Q.notify("stopProgress");if(c.is(ac.onFailure,"function")){ac.onFailure.call(null,ad)}};X=function X(aa,Y,Z,ad,ak,al){var ao=I.getNLSValue("DeleteObject.Success"),ag=I.getNLSValue("DeleteObject.Failure"),ab=I.getNLSValue("DeleteObject.PatialFailure"),ap,ai,an,ac,am=[],af,ae,ah=aa?"Instance":"Reference";al=c.is(al)?al:false;ap=function ap(aq,ar){af=I.getNLSValue(ah,{objectLabel:aq.get(ad)},"Delete","Success");Q.log(af,ac);if(aq.isInstance()){an=m.getReferenceModelFromInstance(aq)}ar(an)};ai=function ai(aq,at,ar){af=I.getNLSValue(ah,{objectLabel:aq.get(ad)},"Delete","Failure");if(c.is(ar)){if(c.is(ar.message,"string")){af+="\n"+ar.message}}Q.log(af,ac);at()};if(c.is(Y,"array")&&Y.length>0){Q.notify("startProgress");ac=Q.log(I.getNLSValue("DeleteObject.LogMessage"));ae=m[aa?"deleteInstance":"deleteReference"];if(!c.is(ae,"function")){Q.debug("delete function not found on database plugin.");return}Y.forEach(function(aq){am.push(new b(function(av,at){ae(aq.id,{deep:c.is(ak)?ak:false,onComplete:function au(){ap(aq,av)},onFailure:function ar(aw,ax){ai(aq,at,ax)}})}))});c.Promise.allSettled(am).then(function aj(au){var ar=false,at=0,aq=0,av=[];for(at=0;at<au.length;at++){if(au[at].state==="rejected"){aq++;continue}if(c.is(au[at].value)){av.push(au[at].value)}}if(aq===0){r(ao,Z,ac);ar=true}else{if(aq===au.length){K(ag,null,Z,ac)}else{K(ab,null,Z,ac);ar=true}}if(ar&&aa&&al){Q.notify("addToAuxiliaryView",[av,{askAddToAuxConfirmation:!al}])}})}};R=function R(Y,Z){return m.isInstancePossible(Y,Z)};i=function i(Z,ab){var aa,Y;ab=ab||{};if(c.is(Z)){if(c.is(Z.V_Type)&&c.is(Z.type)){aa=Q.log(I.getNLSValue("ModelBehavior.CreateReference.LogMessage",{title:Z.V_Name,type:Z.type}));Q.notify("startProgress");Y=m.createReference(Z,{onComplete:function(ac){r(I.getNLSValue("ModelBehavior.CreateReference.Success",{name:ac.get("PLM_ExternalID")}),ab,aa)},onFailure:function(ac,ad){K(I.getNLSValue("ModelBehavior.CreateReference.Failure"),ad,ab,aa)}})}else{Q.debug("Type is required to create reference",Y)}}else{Q.debug("data is empty to addReference")}return Y};y=function y(Y,ab){var aa,Z=true;ab=ab||{};if(c.is(Y)){if(c.is(Y.isAggregatedBy)){if(c.is(Y.isInstanceOf)){Z=R(Y.isAggregatedBy,Y.isInstanceOf)}if(Z){Q.notify("startProgress");aa=Q.log(I.getNLSValue("ModelBehavior.CreateInstance.LogMessage"));m.createInstance(Y,{onComplete:function(ac){r(I.getNLSValue("ModelBehavior.CreateInstance.Success",{name:ac.get("PLM_ExternalID")}),ab,aa)},onFailure:function(ac,ad){K(I.getNLSValue("ModelBehavior.CreateInstance.Failure"),ad,ab,aa)}})}else{Q.debug("Instance object cannot be created between two selected Types")}}else{Q.debug("isAggregatedBy required to create instance")}}else{Q.debug("data is empty to createInstance")}};return{onStart:function p(){},onStop:function x(){},moveInstance:function f(ah){var Y=ah||{},ad=null,ag=null,ai=null,ab=null,ae=null,aj=I.getNLSValue("ModelBehavior.ReparentInstances"),aa=I.getNLSValue("ModelBehavior.ReparentInstances.Success"),af=I.getNLSValue("ModelBehavior.ReparentInstances.Failure");ad=function ad(ao){var ar,an=[],am={formerParentsPIDArray:ai.formerInstancesParentPIDs,movedInstPIDArray:ai.instancesPIDsToReparent,newParentPID:ai.newParentPID,newInstPIDArray:[]},aq={silent:true,merge:true};if(c.is(ao,"array")){ao.forEach(function ak(at){ar=at.attributesValue;if(!ar.hasOwnProperty("isInstanceOf")){m.addReference(ar,{silent:false,merge:true})}else{am.newInstPIDArray.push(ar.PID);m.addInstance(ar,aq)}});if(c.is(ai.instancesPIDsToReparent,"array")){an=ai.instancesPIDsToReparent.filter(function al(av){var au=!am.newInstPIDArray.some(function at(aw){return av===aw});return au});if(c.is(an,"array")){an.forEach(function ap(at){m.removeInstance(at,aq)})}}Q.notify("reparentInstances",am)}r(aa,Y,ae)};ag=function ag(ak){K(af,ak,Y,ae)};ae=Q.log(aj);Q.notify("startProgress");ai={instancesPIDsToReparent:c.is(Y.instancesPIDsToReparent)?Y.instancesPIDsToReparent:[],formerInstancesParentPIDs:c.is(Y.formerInstancesParentPIDs)?Y.formerInstancesParentPIDs:[],newParentPID:c.is(Y.newParentPID)?Y.newParentPID:"",newParentInstancesOrder:c.is(Y.newParentInstancesOrder)?Y.newParentInstancesOrder:[]};ab={url:"modeler/ppr/reparent",method:"POST",onComplete:ad,onFailure:ag,data:c.Json.encode(ai)};Q.debug("Reparent instance ("+ai.instancesPIDsToReparent.reduce(function Z(al,am,ak){return al+=((ak===0)?"":", ")+am+"#"+m.getInstance(am).get("PLM_ExternalID")},"")+"), formerly under reference ("+ai.formerInstancesParentPIDs.reduce(function ac(al,am,ak){return al+=((ak===0)?"":", ")+am+"#"+m.getReference(am).get("V_Name")},"")+"), under new reference ("+ai.newParentPID+"#"+m.getReference(ai.newParentPID).get("V_Name")+")");H.webServiceRequest(ab)},moveMultipleInstances:function M(ac,aa,ae){var Z=this,ad=new b(function Y(ah,af){var ag=c.merge({onComplete:ah,onFailure:af,popupMessage:false},ac);Z.moveInstance(ag)}),ab=function ab(){var af=I.getNLSValue("ModelBehavior.MoveInstances.Success",{instanceLabel:ae,newParentLabel:aa});Q.info(af);return b.resolve(af)};return ad.then(ab)},createRefOrInst:function D(Y,ac,aa){var ab={},Z;if(!c.is(Y)){Q.debug("createRefOrInst: No data to insert");return}for(Z in Y){if(Y.hasOwnProperty(Z)){ab[Z]=Y[Z]}}if(c.is(ac,"string")){ab.isAggregatedBy=ac;y(ab,aa)}else{i(ab,aa)}},createMultipleInstances:function S(ab,Z,ad){var ac=b.all(ab.map(function Y(af){return new b(function ae(ah,ag){y({isAggregatedBy:af.targetReferencePID,isInstanceOf:af.referencePID},{onComplete:ah,onFailure:ag,popupMessage:false})})})),aa=function aa(){var ae=I.getNLSValue("ModelBehavior.CreateInstances.Success",{instanciatedReference:ad,referenceName:Z});Q.info(ae);return b.resolve(ae)};return ac.then(aa)},deleteReference:function W(Y,ad){var ab,af,Z,ac="V_Name",ae=Q.getBehavior("UXFactoryBehavior"),aa=I.getNLSValue("Delete.Confirmation.Title");if(!c.is(ae)){Q.debug("uxFactoryBehavior is not available.");return}ad=ad||{};if(c.is(Y,"array")&&Y.length>0){af=I.getNLSValue("DeleteReference.Confirmation.Message");for(ab=0;ab<Y.length;ab++){if(m.getInstancesFromCollection(Y[ab].id).length>0){Z=I.getNLSValue("Confirmation.DeleteWholeStructure");break}}if(c.is(Z)){ae.showConfirmation(aa,af,{attributes:[ac],models:Y},function ag(aj,ah,ai){if(c.is(aj)&&aj){X(false,Y,ad,ac,ai)}},{check:Z})}else{ae.showConfirmation(aa,af,{attributes:[ac],models:Y},function ag(ah){if(c.is(ah)&&ah){X(false,Y,ad,ac,false)}})}}},deleteInstance:function A(ab,ac){var Y=false,ah,af="PLM_ExternalID",ae=Q.getBehavior("UXFactoryBehavior"),ad=I.getNLSValue("Confirmation.addRefToAuxViewPostDelete");if(!c.is(ae)){Q.debug("uxFactoryBehavior is not available.");return}ac=ac||{};Y=c.is(ac.askDeleteConfirmation)?ac.askDeleteConfirmation:true;if(c.is(ab,"array")&&ab.length>0){if(Y){var ah,aa,Z=c.is(ac.isDetachInstance)?ac.isDetachInstance:false;if(Z){aa=I.getNLSValue("Detach.Confirmation.Title");ah=I.getNLSValue("DetachInstance.Confirmation.Message")}else{aa=I.getNLSValue("Delete.Confirmation.Title");ah=I.getNLSValue("DeleteInstance.Confirmation.Message")}ae.showConfirmation(aa,ah,{attributes:[af],models:ab},function ag(aj,ak,ai){if(c.is(aj)&&aj){X(true,ab,ac,af,false,ai)}},{check:ad})}else{X(true,ab,ac,af)}}},fetchRoot:function J(Z,Y){return m.fetchRoot(Z,Y)},fetchInstance:function N(Z,Y){return m.fetchInstance(Z,Y)},getReference:function h(Y){return m.getReference(Y)},getInstance:function L(Y){return m.getInstance(Y)},getReferenceModelFromInstance:function T(Y){return m.getReferenceModelFromInstance(Y)},getReferenceIdFromInstance:function e(Y){return m.getReferenceIdFromInstance(Y)},getReferenceId:function V(Y){var Z=Y;if(this.isInstance(Y)){Z=m.getReferenceIdFromInstance(Y)}return Z},getInstancesFromCollection:function P(Y){return m.getInstancesFromCollection(Y)},getDescendantsFromServer:function s(aa,Z,Y){m.getInstancesFromCollection(aa,Z,Y)},getAllChildrenFromCollection:function o(Y){return m.getAllChildrenFromCollection(Y)},getImpactedConnections:function k(ac,Y){var ab=[],aa;if(c.is(ac,"array")){ac.forEach(function Z(ad){aa=m.getImpacted(ad,Y);if(c.is(aa)){if(c.is(aa,"array")&&aa.length>0){ab=ab.concat(aa)}}})}return ab},getReferenceModel:function t(Y){return m.getReferenceModel(Y)},isReference:function n(Y){return c.is(this.getReference(Y))},isInstance:function j(Y){return c.is(this.getInstance(Y))},updateModelAttribute:function w(aq,ag,ak,ad){var al=this,ae,ac,ao,am,au,ah,af,at,aj,Z,an,ai,ap=[],ab,Y,ar,aa;if(c.is(ag,"array")){ag=ag[0]}ag=ag||{};ad=ad||{};if(!c.is(ag.instOrRef)||!c.is(ag.dataIndex)||!c.is(ag.attributeInfo)||!c.is(ag.objectToBeModified)||!c.is(ag.attributeName)){Q.debug("Required attribute information is missing to update the model attribute");return}an=ag.attributeName;aj=ag.attributeInfo;Z=c.is(ag.attributeDef)?ag.attributeDef:{};au=z.getNLS(aj);ai=ag.objectToBeModified;at=ag.dataIndex;af=ag.instOrRef==="instance"?true:false;ah=z.hasRangeDefined(aj,Z)&&z.isInteger(aj);am=ai.get(at);if(!c.is(am)||am==="NULL"){am=""}if(ah){am=z.getAuthorizedValueIndex(aj,Z,am);am=am.toString()}ar=function ar(av,aB,aw){var aA,az=Q.getBehavior("UXFactoryBehavior"),ay=az.getComponent("Button"),ax=az.createElement("div",{"class":"confirmation-dialog-content-container",html:"<p>"+I.getNLSValue("UpdateAttributeUI.Text",{prevValue:aw})+"</p>"});aA=az.create("Dialog",{title:I.getNLSValue("UpdateAttributeUI.Header",{attributeName:au}),domId:"EditAttributeUI-Dialog",content:ax,resizableFlag:true,modalFlag:true,buttons:{No:new ay({onClick:function(){aA.close()}}),Yes:new ay({disabled:false,onClick:function(){ab(av,aB,aw);aA.close()}}),}});aA.close=function(){this.destroy();aA=null}};aa=function aa(aw){var av=false;if(c.is(aw)){ao=aw.get(at);if(ah){ao=z.getAuthorizedValueIndex(aj,Z,ao)}if(z.isDate(aj)){ao=new Date(ao).getTime()/1000}if(ao!==ak){if(!z.doesAttributeExist(aw,at)){Q.warn(I.getNLSValue("TableView.AvailabilityFailure",{key:au}))}else{av=true}}}return av};if(c.is(aq,"array")){aq.forEach(function(av){ae=(af)?al.getInstance(av):al.getReference(av);if(aa(ae)){ap.push(ae.id)}})}else{if(aa(ai)){ap.push(ai.id)}}if(ap.length===0){return}else{if(ap.length===1){ab=function ab(aA,az,av){var aw={previous:{}};aw[an]=az;aw.previous[an]=av;ac={data:aw,onFailure:function ax(aB,aC){K(I.getNLSValue("TableView.SingleUpdateFailure",{key:au,value:az}),aC,ad)},onComplete:function ay(aC){var aB=aC.get(at);if(c.is(aC._changed.modified)){r(I.getNLSValue("TableView.SingleUpdateSuccess",{key:au,value:az}),ad)}else{K(I.getNLSValue("TableView.UpdateWarning",{key:au}));ar(aA,az,aB)}},logMessage:I.getNLSValue("TableView.SingleUpdateLogMessage")};Q.notify("startProgress");(true===af)?m.updateInstance(aA,ac):m.updateReference(aA,ac)};ab(ap[0],ak,am)}else{if(ap.length>1){Y=function Y(ax,az){var av={keyValues:{},pids:ax};av.keyValues[an]=az;ac={data:av,onFailure:function aw(aA){K(I.getNLSValue("TableView.MassUpdateFailure",{key:au,value:az}),aA,ad)},onComplete:function ay(aA){if(aA.length!==ax.length){K(I.getNLSValue("TableView.UpdateWarning",{key:au}))}else{r(I.getNLSValue("TableView.MassUpdateSuccess",{key:au,value:az}),ad)}},logMessage:I.getNLSValue("TableView.MassUpdateLogMessage")};Q.notify("startProgress");(true===af)?m.updateInstances(at,ac):m.updateReferences(at,ac)};Y(ap,ak,am)}}}},getValidChildTypes:function u(Y){return U.getValidChildTypes(Y)},isInstancePossible:function d(Y,Z){return R(Y,Z)},isInstancePossibleByType:function l(Z,Y){return m.isInstancePossibleByType(Z,Y)},isMovePossible:function E(aa,Y){var Z,ab=false;if(Y){Z=Y.get("isAggregatedBy");if(Z!==aa.id){ab=true}}return ab},isAKindOf:function F(Z,Y){return U.isAKindOf(Z,Y)},getPPRType:function v(Y){return m.getPPRType(Y)},getMajorRevisions:function G(ad,Y,ab){var Z="modeler/ppr/getMajorRevisions",ac,aa,ae,af=m.getReferenceModel(ad).get("V_Name");aa=function aa(ai,ah,ag){Q.debug("jsonData: "+ai+" error:"+ah+" options: "+ag);ac=I.getNLSValue("Error.GetMajorRevisionFailure.Title",{objectName:af}),ab(ac)};ae=function ae(ag){Y(ag)};H.webServiceRequest({url:Z,method:"POST",data:c.Json.encode({pid:ad}),onFailure:aa,onTimeout:aa,onCancel:aa,onComplete:ae})},isReadOnly:function q(ae,ad,Y,ab){var Z="modeler/ppr/isReadOnly",ac,aa,af;aa=function aa(ai,ah,ag){Q.debug("jsonData: "+ai+" error:"+ah+" options: "+ag);ab()};af=function af(ag){if(c.is(ag.isReadOnly)&&ag.isReadOnly){ac=I.getNLSValue("Error.ObjNotInReadWrite.Title",{objectName:ad})}Y(ac)};H.webServiceRequest({url:Z,method:"GET",data:{pid:ae},onFailure:aa,onTimeout:aa,onCancel:aa,onComplete:af})},isLatestRevision:function g(ae,ad,Y,ab){var Z="modeler/ppr/isLatestRevision",ac,aa,af;aa=function aa(ai,ah,ag){Q.debug("jsonData: "+ai+" error:"+ah+" options: "+ag);ab()};af=function af(ag){if(c.is(ag.isLatestRevision)&&!(ag.isLatestRevision)){ac=I.getNLSValue("Error.ObjNotLatestRevision.Title",{objectName:ad})}Y(ac)};H.webServiceRequest({url:Z,method:"GET",data:{pid:ae},onFailure:aa,onTimeout:aa,onCancel:aa,onComplete:af})},getWhereUsedReferences:function O(Y,Z){m.getWhereUsedReferences(Y,Z)},replace:function B(ac){var Z,ab,ae,ad,aa,Y=ac||{};aa=Q.log(I.getNLSValue("replaceCmd.LogMessage",{replaceType:Y.replaceType}));Q.notify("startProgress");ad={instancePID:Y.instancePID,scopedParentPrdRefID:Y.scopedParentPrdRefID};if(Y.replaceType==="replaceByLatest"){Z="modeler/ppr/replaceByLatest"}else{if(Y.replaceType==="replaceByExisting"){Z="modeler/ppr/replaceByExisting";ad.existingRefPID=Y.existingRefPID}else{if(Y.replaceType==="replaceByNewRevision"){Z="modeler/ppr/replaceByNewRevision"}else{K(I.getNLSValue("InvalidReplaceOperation",null,"Error","Title"),null,Y,aa)}}}ab=function ab(ag,af){var ah;if(c.is(af)&&c.is(af.message,"string")){ah=I.getNLSValue(af.message,null,"Error","Title");if(ah===("Error."+af.message+".Title")){ah=I.getNLSValue(Y.replaceType,null,"Error","Title");Q.debug(af.message)}K(ah,null,Y,aa)}else{K(I.getNLSValue(Y.replaceType,null,"Error","Title"),null,Y,aa)}};ae=function ae(ak){var am,an=m.getConnectionParser(),al,ai,ah,ag={silentMode:false,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:ak.deletedObjects,onComplete:function aj(){var ao=I.getNLSValue(Y.replaceType,null,"Success","Title");r(ao,Y,aa)}};ak.instancesAndReferences.forEach(function(ao){ai=ao.attributesValue;if(ai.hasOwnProperty("isInstanceOf")){ag.stackedInstances.push(ai)}else{al=ai.PID;ag.stackedReferences.push(ai)}});ak.connections.forEach(function af(ao){an.parse(ao,ag)});am=function am(){m.addToCollections(ag)};m.getDescendantsFromServer(al,am,{silentMode:true})};H.webServiceRequest({url:Z,method:"POST",data:c.Json.encode(ad),onFailure:ab,onTimeout:ab,onCancel:ab,onComplete:ae})}}};return{plugins:["DatabasePlugin","ResourcePlugin","AttributePlugin","WebServicePlugin","DicoPlugin"],creator:a}});define("DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvBehavior",["UWA/Core","DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvUI"],function(c,a){var b=function b(g,o,l,d,k,i){var f,m;m=function m(p,t){var q,s,r;o.notify("startProgress");q=o.log(k.getNLSValue("DuplicateAdvCmd.LogMessage"));p.instAndRefIDs=[];t.forEach(function(v){var w,u;w=i.getReferenceModel(v.id),u=i.getAllChildrenFromCollection(w.id);p.instAndRefIDs=p.instAndRefIDs.concat(u.referencesPID);p.instAndRefIDs=p.instAndRefIDs.concat(u.instancesPID)});s=function s(A){var u=[],w=[],z=i.getConnectionParser(),y={silentMode:true,stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function x(){var B=o.getBehavior("WUXNodeModelBehavior");if(c.is(B)){u.forEach(function(C){if(w.indexOf(C)===-1){B.addNode(i.getReferenceModel(C),{withLinksResolved:false})}})}o.notify("stopProgress");o.info(k.getNLSValue("DuplicateAdvCmd.Success"),q)}};if(c.is(A)&&c.is(A.instancesAndReferences)&&c.is(A.connections)){A.instancesAndReferences.forEach(function(C){var B=C.attributesValue;if(B.hasOwnProperty("isInstanceOf")){C.queriedForConnections=true;y.stackedInstances.push(C);w.push(B.isInstanceOf)}else{C.queriedForChildren=true;C.queriedForConnections=true;y.stackedReferences.push(C);u.push(B.PID)}});A.connections.forEach(function v(B){z.parse(B,y)});i.addToCollections(y)}else{r()}};r=function r(){o.notify("stopProgress");o.warn(k.getNLSValue("DuplicateAdvCmd.Failure"),q)};l.webServiceRequest({url:"modeler/ppr/advancedClone",method:"POST",data:c.Json.encode(p),onComplete:s,onFailure:r,onTimeout:r,onCancel:r})};return{listenTo:function e(){return{}},onStart:function n(p){var q=g.getConfig();if(c.is(q)&&c.is(q.resource)&&c.is(q.resource.duplicateAdvancedPreferencesXML)){f=q.resource.duplicateAdvancedPreferencesXML}else{throw new Error(o.getId()+": DuplicateAdvBehavior initialization failed")}},onStop:function j(){},exectuteDuplicateAdvCmd:function h(){var r,A,s,u,v,x,w,z,q,y,t=o.getBehavior("WUXNodeModelBehavior");if(!c.is(t)){o.debug("WUXNodeModelBehavior is not available so cannot execute DuplicateAdvCmd")}else{y=t.getSelectedNodesInfo();if(y.length>0){u=l.getXMLValues(f);if(c.is(u)&&c.is(u.Config)){w=u.convert("Config.Preferences.DuplicateAdvanced.LinkOption","name");x=u.Config.Preferences.DuplicateAdvanced.PrefixOption;v=u.Config.Preferences.DuplicateAdvanced.showOptionPanel;A={};A.Prefix=x.defaultValue;for(s in w){if(w.hasOwnProperty(s)){A[s]=w[s].defaultValue}}if(v){q=d.getComponent("WUXFrameWindowsManager");z=q.getFrameWindow(g.getConfig().appContext);r=new a(z,d,k);r.showUI({prefixOption:x,linkOptions:w},function p(B){m(c.merge(B,A),y)})}else{m(A,y)}}else{o.warn(k.getNLSValue("DuplicateAdvCmd.PreferencesXMLNotConfigured"))}}else{o.warn(k.getNLSValue("DuplicateAdvCmd.NoSelection"))}}},}};return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin","DatabasePlugin"],creator:b}});