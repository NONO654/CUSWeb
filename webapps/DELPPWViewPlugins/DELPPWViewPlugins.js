define("DS/DELPPWViewPlugins/RelationsPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils"],function(c,b){var a=function a(g){var k=g.getLogger(),t=g.getConfig().resource.relationsColumnMappingXML,n,j,s={},o=false,p=null,f={};j=function j(v){b.getXMLValues(t,function u(z){var y,x,A,w;if(z.RelationsColumnMapping.RelationsColumns&&z.RelationsColumnMapping.RelationsColumns.RelationsColumn){y=z.RelationsColumnMapping.RelationsColumns.RelationsColumn;if(!Array.isArray(y)){y=[y]}s={};y.forEach(function(B){s[B.name]={};x=c.is(B.Relation)?(Array.isArray(B.Relation)?B.Relation:[B.Relation]):[];if(c.is(B.LinkedObjectConstraint)){A=Array.isArray(B.LinkedObjectConstraint)?B.LinkedObjectConstraint:[B.LinkedObjectConstraint]}else{A=[]}for(w=0;w<x.length;w++){s[B.name][x[w].name]=x[w];if(w<A.length){p=B.name;if(c.is(A[w].Attribute)){s[B.name][A[w].dicoType]=Array.isArray(A[w].Attribute)?A[w].Attribute:[A[w].Attribute]}else{s[B.name][A[w].dicoType]=[]}o=true}}});v()}if(z.RelationsColumnMapping.RelationsDisplayAttributes){f=z.convert("RelationsColumnMapping.RelationsDisplayAttributes.Type","name")}})};n=function n(u){new c.Promise.all([new Promise(j)]).then(function w(){k.debug("RelationsPlugin initialized!");u()},function v(x){k.debug("Failed to load Relations Plugin. Error Description:"+x);u()})};return{onStart:function r(u){n(u)},onStop:function m(){s=void 0;f=void 0},getRelationsConfiguredOnColumn:function e(v){var u=null;if(c.is(v)&&c.is(s)){u=s[v]}return u},isObjectConstraint:function i(){return o},getConstraintRelationName:function h(){return p},getRelationsColumnDisplayAttribute:function d(v,u){var w;if(!c.is(v)||!c.is(f)){w=null}else{if(c.is(u)&&(u==="display_icon")){w=f[v][u]}else{w=f[v]}}return w},getRelationsColumnDisplayOptions:function l(u){var v={};if(c.is(u)&&c.is(f)){v=c.is(f[u])?f[u]:{};if(c.is(v)&&c.is(v.Attribute)){v.Attribute=Array.isArray(v.Attribute)?v.Attribute:[v.Attribute]}else{v.Attribute=[]}}return v},getAllRelationDisplayAttributes:function q(){var u,x,v,w=[];Object.keys(s).forEach(function(y){u=s[y];Object.keys(u).forEach(function(z){x=u[z];if(x&&x.attribute_source==="Relation"){z=f[z];v=Array.isArray(z.Attribute)?z.Attribute:[z.Attribute];v.forEach(function(A){if(w.indexOf(A.name)===-1){w.push(A.name)}})}})});return w}}};return a});define("DS/DELPPWViewPlugins/ProxyPlugin",["UWA/Core","DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOFilterBIUX/FilterBIComponentProxy"],function(d,c,b){var a=function a(f){var e="ProxyPlugin",l=f.getLogger(),j;var k;j={FilterProxy:"FilterProxy",TaggerProxy:"TaggerProxy"};k=function k(m,o){var n;switch(m){case j.FilterProxy:n=new b(o);break;case j.TaggerProxy:if(!o.hasOwnProperty("filteringMode")){o.filteringMode=c.filteringMode.FilteringOnServer}n=c.createProxy(o);break;default:l.debug("Invalid proxy. Proxy creation failed")}return n};return{name:e,PROXY:j,create:function i(o,r){var s=f.getPlugins("WebServicePlugin"),m,n=r||{},p=null,q;if(d.is(s)){s=s.instance;q=f.getConfig().appContext;m={appId:q.widget.data.appId,widgetId:q.widget.getId(),tenant:s.getTenant(),colorize:true};d.merge(n,m);p=k(o,n)}else{l.debug("WebServicePlugin not available")}return p},onStart:function h(){},onStop:function g(){}}};return a});define("DS/DELPPWViewPlugins/RootsPlugin",["UWA/Core","UWA/Json"],function(c,b){var a=function a(w){var o="storedRoots",n="Default",d=w.getConfig().resource.rootsMappingPath,x,e,g,r,h,l;r=function r(){var y=widget.getValue(o);return c.Json.isJson(y)?c.Json.decode(y):y};e=function e(y,A){var z=r();if(z.hasOwnProperty(n)){if(z[n].hasOwnProperty(y)){if(z[n][y].indexOf(A)===-1){z[n][y].push(A)}}else{z[n][y]=[A]}}else{z={};z[n]={};z[n][y]=[A]}widget.setValue(o,c.Json.encode(z))};g=function g(z,B){var y=-1,A=r();if(A.hasOwnProperty(n)){if(A[n].hasOwnProperty(z)){y=A[n][z].indexOf(B);if(-1<y){A[n][z].splice(y,1);widget.setValue(o,c.Json.encode(A))}}}};h=function v(z){var y=[],B,A=c.is(z)&&z!==""?z:n,C=r();if(C.hasOwnProperty(A)){for(B in C[A]){if(C[A].hasOwnProperty(B)){y=y.concat(C[A][B])}}}return y};l=function l(A,z){var y=[],D,B=c.is(z)&&z!==""?z:n,C;if(c.is(x)&&c.is(A)){C=x[A];if(c.is(C,"array")){D=r();if(c.is(D[B])){C.forEach(function(E){if(D[B].hasOwnProperty(E)){y.push(D[B][E]||[])}})}}}return y};return{onStart:function u(y){require(["text!"+d],function(z){if(!c.is(z)){w.getLogger().debug("roots mapping is not defined.")}else{x=c.is(z,"string")?b.decode(z):z}y()});widget.addPreference({name:o,type:"hidden",defaultValue:{}})},onStop:function j(){},addRoot:function m(z,y){if(c.is(z)){e(z,y)}},removeRoot:function s(z,y){if(c.is(z)&&c.is(y)){g(z,y)}},getRoots:function t(y){return c.is(y)?l(y):h()},getStoreRoots:function f(z,A){var y=[];if(c.is(z)){y=c.is(A)?l(A,z):h(z)}return y},isRoot:function q(A){var z=false,y;if(c.is(A)){y=h();z=(y.indexOf(A)>-1)}return z},createStore:function p(y){var z=r();if(z.hasOwnProperty(n)){z[y]=z[n]}widget.setValue(o,c.Json.encode(z))},removeStore:function i(y){var z;if(c.is(y)&&y!==n){z=r();if(z.hasOwnProperty(y)){delete z[y];widget.setValue(o,c.Json.encode(z))}}},getStoresList:function k(){var z=r(),y=[];Object.keys(z).forEach(function(A){if(A!==n){y.push(A)}});return y}}};return a});define("DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase",["UWA/Core","DS/DELPPWModelServices/CollectionUtils"],function(c,b){var a=function(G,g,u,i){var r="ImplementBase",p=g,v=u,D,e,F,f;i=c.is(i)?i:true;if(!c.is(p)){throw new Error("Error: scope link name is not defined!")}if(!c.is(v)){throw new Error("Error: implment link name is not defined!")}D=function D(J,H){var I=[p,p+"_inverse"];if(c.is(H,"string")){I=[H]}return b.getImpactedConnections(J,null,{isRefRefOnly:true,relationTypes:I})};e=function e(J){var H,I=J,K;if(c.is(J,"array")){H=J;if(H.length>0){K=b.getInstanceFromCollection(H[H.length-1]);I=K.get("isInstanceOf")}else{I=null;G.debug(r,"Error: expected reference id for root node")}}return I};F=function F(I){var H=null;if(c.is(I,"function")){H=b.findSomeConnection(function(K){var J=v===K.get("type"),L=false;if(J){L=I(K.get("from"),K.get("to"))}return J&&L})}else{G.debug(r,'Error: _getImplementLinks: expected a predicate method "funcHasImplement"')}return H};f=function f(M,J){var H=J||{},L={onComplete:function K(){if(c.is(H.onComplete)){H.onComplete("ImplementPlugin.DeleteImpl.Success")}},onFailure:function I(N,O){if(c.is(H.onFailure)){H.onFailure("ImplementPlugin.DeleteImpl.Failed")}}};if(c.is(M)){b.deleteConn(M,L)}else{G.debug(r,"Input connection ID is invalid.");H.onFailure("ImplementPlugin.DeleteImpl.Failed")}};return{findInstanceWhoseParentIsScoped:function l(J){var H,L,K,I=null;for(H=J.length-1;H>=0;H--){L=b.getInstanceFromCollection(J[H]);K=L.get("isAggregatedBy");if(D(K).length>0){I={absPathIndex:H,instanceModel:L};break}}return I},getScopedParent:function z(H){var I=null,J;if(c.is(H,"array")&&(H.length>0)){J=this.findInstanceWhoseParentIsScoped(H);if(c.is(J)){I=J.instanceModel.get("isAggregatedBy")}}return I},isUnderScope:function E(I){var H=false,J;if(c.is(I,"array")){if(I.length>0){J=this.findInstanceWhoseParentIsScoped(I);if(c.is(J)){H=true}}}else{G.debug(r,"Error: isUnderScope: expected absolute path");H=null}return H},isScoped:function n(I){var H=this.getScopeLinks(I);return(H.length>0)},getScopeLinks:function x(J){var I=e(J),H=[];if(I){H=D(I)}return H},getScopeLinksOfImplementing:function C(K){var J=e(K),H,I=[];if(J){H=D(J,p);if(Array.isArray(H)){if(H.length===1){I=H}else{if(H.length>1){G.debug(r,"ERROR: getScopeLinksOfImplementing found more than one scope link for MfgItem: "+K)}}}}return I},getScopeLinksOfImplemented:function s(K){var J=e(K),H,I=[];if(J){H=D(J,p+"_inverse");if(Array.isArray(H)){I=H}}return I},getPathToScope:function d(I){var H=[],J;J=this.findInstanceWhoseParentIsScoped(I);if(c.is(J)){H=I.slice(J.absPathIndex)}return H},getImplLinks:function q(I){var J,L,H;if(c.is(I,"array")){J=I[I.length-1];L=this.getPathToScope(I);H=F(function K(O,N){var M=J===O||c.Json.encode(L)===c.Json.encode(N);return M})}else{H=null}return H},getImplLinksOfImplementing:function h(I){var K,J,H=null;if(c.is(I,"array")){K=I[I.length-1];J=F(function L(N,M){return K===N});if(c.is(J,"array")){if(J.length===1){H=J}else{if(J.length>1){G.debug(r,"ERROR: getImplLinksOfImplementing found more than one implement link for MfgItem: "+I)}}}}else{H=null}return H},getImplLinksOfImplemented:function k(I){var K,H;if(c.is(I,"array")){K=this.getPathToScope(I);H=F(function J(M,L){return c.Json.encode(K)===c.Json.encode(L)})}else{H=null}return H},isImplementLinkPossible:function t(L,J){var I=false,H,K;if((c.is(L,"array")&&L.length>0)&&(c.is(J,"array")&&J.length>0)){H=this.getScopedParent(L);K=this.getScopedParent(J);if(c.is(H)&&c.is(K)){I=b.hasConnection({to:K,from:H,type:p,})}}return I},validateIfScoped:function w(M,L){var K=false,N,H,J,I;if(c.is(M,"array")&&M.length>0){N=b.getInstanceFromCollection(M[M.length-1]);J=N.get("isInstanceOf");H=D(J);if(c.is(H,"array")&&H.length===0){J=this.getScopedParent(M)}}else{if(b.isReference(M)){J=M}}if(c.is(J)){I=this.getScopedParent(L);if(c.is(I)){K=b.hasConnection({to:I,from:J,type:p,})}}return K},getScopeLinkType:function j(){return p},getImplementLinkType:function B(){return v},deleteImplementLink:function m(I,H){f(I,H)},deleteScopeLink:function A(L,J){var H;H={onComplete:function K(){if(c.is(J)&&c.is(J.onComplete)){J.onComplete("ImplementPlugin.DeleteScope.Success")}},onFailure:function I(M,N){if(c.is(J)&&c.is(J.onFailure)){J.onFailure("ImplementPlugin.DeleteScope.Failed")}}};if(c.is(L)){b.deleteConn(L,H)}else{G.debug(r,"Input connection ID is invalid.");H.onFailure("ImplementPlugin.DeleteScope.Failed")}},createImplementLink:function y(L,H,K){var N,I,J=function J(O,P){if(c.is(K.onFailure,"function")){K.onFailure("ImplementPlugin.CreateImpl.Failed")}};K=K||{};if(!i){L=c.is(L,"array")?L[L.length-1]:L;H=c.Json.encode(H)}else{L=L.toString();H=H.toString()}N={type:v,IDFrom:L,IDTo:H};I={onFailure:J,onTimeout:J,onCancel:J,onComplete:function M(){if(c.is(K.onComplete,"function")){K.onComplete("ImplementPlugin.CreateImpl.Success")}}};b.createConn(N,I)},createScopeLink:function o(J,H,L){var N,I,K=function K(O,P){if(c.is(L.onFailure,"function")){L.onFailure("ImplementPlugin.CreateScope.Failed")}};L=L||{};N={type:p,IDFrom:J,IDTo:H,};I={onFailure:K,onTimeout:K,onCancel:K,onComplete:function M(){if(c.is(L.onComplete,"function")){L.onComplete("ImplementPlugin.CreateScope.Success")}}};b.createConn(N,I)}}};return a});define("DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor",["UWA/Core","DS/Controls/LineEditor","css!DS/DELPPWViewPlugins/assets/css/UnitsEditor.css"],function(g,c){var b=c.inherit({name:"UnitsEditor",buildView:function e(){this.elements.container.addClassName("wux-controls-lineeditor custom-controls-unitseditor");this._myInputGroup=new g.Element("div",{"class":"input-group  unitseditor-input-group"});this._myUnit=new g.Element("span",{"class":"input-group-addon unitseditor-group-addon"});this._myInput=new g.Element("input",{type:"text",tabindex:0,autocomplete:"off"});this._myInput.inject(this._myInputGroup);this._myUnit.inject(this._myInputGroup);this._myInputGroup.inject(this.elements.container);this._myInput.addClassName("wux-ui-state-"+this.options.type);this._validFlag=true;if(this.displayClearFieldButtonFlag){this._layoutClearFieldButton()}},setUnit:function a(h){this._myUnit.setContent(h)},getUnit:function f(){return this._myUnit.getText()},setInputName:function d(h){this._myInput.name=h}});return b});define("DS/DELPPWViewPlugins/TreeViewPlugin/CfgColumnsPlugin",["UWA/Core","DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns"],function(c,a){var b=function b(e){var n,d,k,p,l=false;n=function n(q){if(c.is(a)){a.isAdditionalColumnsAvailable(function(r){l=r;q()})}};d=function d(){var q=[],r={};if(l){r=a._columnDef;Object.keys(r).forEach(function(s){r[s].displayType="CFG";r[s].display=false;q.push(r[s])})}return q};k=function k(q){a.registerReusableCellContent(q)};p=function p(q,r){a.updateAttributes(q,r)};return{name:"CfgColumnsPlugin",onStart:function m(q){n(q)},onStop:function h(){},getConfigColumns:function i(){return d()},isConfigColumnAvailable:function g(){return l},registerReusableCellContent:function j(q){return k(q)},updateAttributes:function f(q,r){return p(q,r)},getRootEffectivity:function o(){var q={};q=a._columnDataIndex.reduce(function(r,s){r[s]=" ";return r},{});return q}}};return b});define("DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(c,b){var a=function(z,E,C,w,k){var s=0,x={baseContainer:"widget-layout-block",buttonContainer:"button-container",borderSelected:"border-selected",sideBloc:"side-block",mainBloc:"main-block"},o=E.getComponent("Dialog"),u=E.getComponent("Button"),A=E.getComponent("Element"),g=E.getComponent("WUXDockAreaEnum"),h=Object.create(null),l,f=Object.create(null),p=Object.create(null),e=Object.create(null),j=z.getLayoutConfig(),J,H,m;var i,n,I,y,d,r,t,G,K,F,D,q;c.merge(h,k.viewsInDockingZones);c.merge(f,k.viewsInFreeZone);i=function i(O){var M=O.getRowColumnMap(),Q,P,N=[],L;Q=O.getRowIds().length;l=new Array(Q);for(L=0;L<Q;L++){P=M[L].length;N.push({columns:P});l[L]=new Array(P)}return N};n=function n(L,M){if(M){if(!L.hasClassName(x.borderSelected)){L.addClassName(x.borderSelected)}}else{if(L.hasClassName(x.borderSelected)){L.removeClassName(x.borderSelected)}}};I=function I(N,M,L){N.buttons[M].checkFlag=L;n(N.buttonContainer,L)};y=function y(P,M,N,L){var O=l[P][M];if(c.is(O)){I(O,N,L)}};d=function d(O,M,L){var N=p[O];if(c.is(N)){I(N,M,L)}};r=function(S,M,N){var O,L,T,Q=[],P,R=function R(V){var W=V.dsModel;if(W.checkFlag===true){Q.some(function U(Y){var X=false;if(Y.checkFlag===true&&(Y.domId!==W.domId)){Y.checkFlag=false;X=true}return X});n(T,true)}else{n(T,false)}};O=z.createBlocLayout({rows:[{columns:1}]});T=new A("div",{"class":x.buttonContainer+" "+M});for(P=0;P<N;P++){L=new u({type:"check",label:b.getNLSValue(M+".LayoutPreferencesUI."+e[M][P]),value:"button",onClick:R,domId:M+"-"+(s++)});Q.push(L);L.inject(T)}p[S]={buttons:Q,buttonContainer:T,viewId:M};O.setColumnContent(0,0,T);return O};t=function t(P,S,M,N){var L,Q=[],O,T,R=function R(Y){var aa=Y.dsModel,X,W,V,Z;if(aa.checkFlag===true){Q.some(function U(ac){var ab=false;if(ac.checkFlag===true&&(ac.domId!==aa.domId)){ac.checkFlag=false;ab=true}return ab});n(T,true)}else{X=true;for(V=0;V<l.length;V++){for(Z=0;Z<l[V].length;Z++){if(c.is(l[V][Z])){W=l[V][Z].buttons.every(function(ab){return ab.checkFlag===false});X=X&&W}}}if(X){aa.checkFlag=true}else{n(T,false)}}};T=new A("div",{"class":x.buttonContainer+" "+M});for(O=0;O<N;O++){L=new u({type:"check",label:b.getNLSValue(M+".LayoutPreferencesUI."+e[M][O]),value:"button",onClick:R,domId:M+"-"+(s++)});Q.push(L);L.inject(T)}l[P][S]={buttons:Q,buttonContainer:T,viewId:M}};G=function G(){var S,M,O,R,Q,P,N,L;for(S in h){M=h[S];O=M.views.length;e[S]=M.views;switch(M.dockArea){case g.LeftDockArea:H=r(M.dockArea,S,O);break;case g.RightDockArea:m=r(M.dockArea,S,O);break;default:}}P=z.getBlocLayout();Q=i(P);for(S in f){M=f[S];if(c.is(M.views,"array")&&M.views.length>0){O=M.views.length;e[S]=M.views;R=j[S];if(c.is(R)){t(R.row,R.col,S,O)}}}J=z.createBlocLayout({rows:Q});for(N=0;N<l.length;N++){for(L=0;L<l[N].length;L++){if(c.is(l[N][L])){J.setColumnContent(N,L,l[N][L].buttonContainer)}}}};K=function K(){f=null;l=null;h=null;p=null;e=null},F=function F(){var M={},O,L,N;for(O in h){M[O]=""}for(O in f){N=f[O];if(c.is(N.views,"array")&&N.views.length>0){L=N.views[0];M[O]=L}}return M};D=function D(){var R,N,M,Q,P,O,L=function L(T,S){var W,U,V=T.length;for(U=0;U<V;U++){if(T[U]===S){W=U;break}}return W};for(R in w){if(w.hasOwnProperty(R)){N=w[R];if(N===""){continue}M=true;O=L(e[R],N);if(c.is(h[R])){d(h[R].dockArea,O,M)}else{P=f[R];if(c.is(P)&&c.is(P.views)){Q=j[R];y(Q.row,Q.col,O,M)}}}}};q=function q(N){var L,P,S,R=new A("div",{"class":x.baseContainer}),O=function O(V,U){var T;T=new A("div",{"class":U});V.inject(T);T.inject(R)};G();if(c.is(p[g.LeftDockArea])){O(H,x.sideBloc)}O(J,x.mainBloc);if(c.is(p[g.RightDockArea])){O(m,x.sideBloc)}P=E.getComponent("WUXFrameWindowsManager");S=P.getFrameWindow(C);L=new o({domId:"LayoutPreferencesUI-Dialog",immersiveFrame:S.getImmersiveFrame(),modalFlag:true,visibleFlag:false,snappableFlag:false,title:b.getNLSValue("LayoutPreferencesUI.Header"),content:R,resizableFlag:true,buttons:{Ok:new u({className:"ok primary",label:b.getNLSValue("LayoutPreferencesUI.Ok"),emphasize:"primary",onClick:function Q(){if(c.is(N,"function")){N()}L.close()}}),Cancel:new u({className:"cancel",label:b.getNLSValue("LayoutPreferencesUI.Cancel"),onClick:function Q(){L.close()}})}});L.close=function M(){L.destroy();R=null;K()};return L};return{name:"LayoutPreferencesUI",showDialog:function v(M){var L;L=q(M);if(!c.is(w)){w=F()}D();L.show()},decipherPreferencesFromButtonStates:function B(){var R,P,O,L={},N,M,Q=function Q(T){var S=e[T];L[T]="";P.forEach(function(X,V){var W=V,U,Y=X.checkFlag;U=S[W];if(Y===true){L[T]=U}})};for(R in p){O=p[R].viewId;P=p[R].buttons;Q(O)}for(N=0;N<l.length;N++){for(M=0;M<l[N].length;M++){if(c.is(l[N][M])){O=l[N][M].viewId;P=l[N][M].buttons;Q(O)}}}return L}}};return a});define("DS/DELPPWViewPlugins/KeyBindingPlugin",[],function(){var a=function(b){var e;e=function e(g){};return{name:"KeyBindingPlugin",createHandler:function f(j){var g=this,i=b.getLogger(),h;h=function h(m){var l,n,k;m=m||window.event;if(!m){i.debug(g.name,"could not get event from keydown event");return}l=m.keyCode,n=m.ctrlKey||m.metaKey;k=m.shiftKey;if(n&&67===l){j.onCtrlC?j.onCtrlC(m):e(m)}else{if(n&&86===l){j.onCtrlV?j.onCtrlV(m):e(m)}else{if(n&&88===l){j.onCtrlX?j.onCtrlX(m):e(m)}else{if(46===l){j.onSuppr?j.onSuppr(m):e(m)}else{if(8===l){j.onBackspace?j.onBackspace(m):e(m)}else{if(n&&65===l){j.onCtrlA?j.onCtrlA(m):e(m)}else{if(k&&9===l){j.onShiftTab?j.onShiftTab(m):e(m)}else{if(9===l){j.onTab?j.onTab(m):e(m)}else{if(40===l){j.onDownArrow?j.onDownArrow(m):e(m)}else{if(38===l){j.onUpArrow?j.onUpArrow(m):e(m)}}}}}}}}}}};j=j||{};if(!j.domElement){i.debug(g.name,"No dom element given to listen key bindings on. Exiting");return}j.domElement.onkeydown=h},onStart:function d(){},onStop:function c(){}}};return a});define("DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(c,b){var a=function a(i,g,d,n){var l=d.getComponent("Button"),e=d.getComponent("LineEditor"),o=d.getComponent("ComboBox"),k=d.getComponent("Element"),f=function f(p){return new k("div",p)},j=f({"class":"ViewPreferencesUI-TabContent store-view-container"}),m;m=function m(){var v,u,A,B,z,t,C,r=n.getStoresList(),y=function y(){if(-1<r.indexOf(B.value)){t.show();C.show()}else{t.hide();C.hide()}},x=function x(){var D=B.value;if(D!==""){g.getMediator().notify("LoadRecentContent",{store:D})}i.buttons.Ok.fire("buttonclick")},s=function s(){var D=B.value;if(D!==""){n.removeStore(D)}j.empty();m()},q=function q(){r=n.getStoresList();if(r.length>0){u=f({"class":"store-view-div"});B=new o({elementsList:r,placeholder:b.getNLSValue("RootsStoreUI.Store_select.Placeholder"),currentValue:"Default",enableSearchFlag:true,reachablePlaceholderFlag:true}).inject(u);B.getContent().addClassName("store-view-control");B.addEventListener("change",y);t=new l({label:b.getNLSValue("RootsStoreUI.Load_store.Title"),onClick:x}).inject(u);t.getContent().addClassName("store-view-btn");C=new l({label:b.getNLSValue("RootsStoreUI.Remove_store.Title"),onClick:s}).inject(u);C.getContent().addClassName("store-view-btn");t.hide();C.hide();u.inject(j)}},p=function p(){var D=A.value;if(D!==""){n.createStore(D);j.empty();m()}},w=function w(){var D=A._myInput.value;if(D!==""){z.show()}else{z.hide()}};v=f({"class":"store-view-div"});A=new e({placeholder:b.getNLSValue("RootsStoreUI.Store_name.Title")}).inject(v);A.getContent().addClassName("store-view-control");A.addEventListener("uncommittedChange",w);z=new l({label:b.getNLSValue("RootsStoreUI.Save_views.Title"),onClick:p}).inject(v);z.getContent().addClassName("store-view-btn");z.hide();v.inject(j);q()};if(c.is(i)){m(i)}return{getContent:function h(){return j}}};return a});define("DS/DELPPWViewPlugins/SearchPlugin/SearchPlugin",["UWA/Core","UWA/Utils/InterCom"],function(c,a){var b=function(g){var t,j,s,r,m,d,i,h="default_search_criteria",f="Selected_Objects_search",e="SearchComServer",p="RegisterContext",q="UnregisterContext",n="InContextSearch";s=function s(x,u,w){var v={};v.title=x;v.mode="furtive";v.app_socket_id=t;v.widget_id=widget.id;v.default_with_precond=true;v.show_precond=false;v.source=["3dspace"];v.default_search_criteria="";v.precond="";if(c.is(w,"array")){w.forEach(function(y){if(""!==v[h]){v[h]+=" OR "}v[h]+=y})}if(c.is(u,"array")){u.forEach(function(y){if(""!==v.precond){v.precond+=" OR "}v.precond+='flattenedtaxonomies:"types/'+y+'"'});v.precond="("+v.precond+")"}return(v)};r=function r(u){var w={};w.widget_id=widget.id;j.dispatchEvent("unregisterSearchContext",w);j.dispatchEvent(p,u);j.addListener("onCloseTransient",function v(){j.removeListener("onCloseTransient")})};m=function m(){var u={widget_id:widget.id};j.dispatchEvent("unregisterSearchContext",u);j.dispatchEvent(q,u);j.unsubscribeServer(e);j.removeListener(f,d);j.disconnect()};d=function d(u){if(c.is(i)){i(u)}};return{onStart:function o(){t="search_socket_"+(new Date()).getTime();j=new a.Socket(t,{dispatchRetryInterval:5});j.addListener(f,d);j.subscribeServer(e)},onStop:function l(){m()},activate:function k(x,y,v,w){var u;if(c.is(v)){v=(c.is(v,"array"))?v:[v]}u=s(x,v,w);if(!c.is(y,"function")){u.mode="default"}i=y;r(u);j.dispatchEvent(n,u)}}};return b});define("DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog",["UWA/Core","DS/Windows/Dialog"],function(d,j){var f=null,i,b=j.extend({name:"CustomDialog",init:function(k){i=k||{};this._parent(i)},_setup:function e(k){var l;this.clearMessages();f=new d.Element("div",{"class":"custom-dialog-message-container"});new d.Element("span",{"class":k.iconSpanClass}).inject(f);l=new d.Element("span",{"class":k.textSpanClass}).inject(f);l.innerHTML=k.message;if(!d.is(i.content,"string")){f.inject(i.content)}},error:function g(k){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention",textSpanClass:"custom-dialog-error-message",message:k});if(d.is(i.buttons.Ok)){i.buttons.Ok.disabled=true}},info:function a(k){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-info",textSpanClass:"custom-dialog-info-message",message:k});if(d.is(i.buttons.Ok)){i.buttons.Ok.disabled=false}},warning:function h(k){this._setup({iconSpanClass:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert",textSpanClass:"custom-dialog-warn-message",message:k});if(d.is(i.buttons.Ok)){i.buttons.Ok.disabled=false}},clearMessages:function c(){if(d.is(f)){f.destroy()}}});return b});define("DS/DELPPWViewPlugins/SelectionPlugin/SelectionPlugin",["UWA/Core","UWA/Json"],function(c,a){var b=function b(s){var o={},i,h=Object.create(null),r=s.getConfig().resource.selectionMappingPath,p,n,k;n=function n(y){var v=[],A=[],x=[],z,w;if(!c.is(p)||!c.is(y)){return A}v=p[y];if(c.is(v,"array")){for(w=0;w<v.length;w++){z=v[w];if(c.is(z,"string")){x=[];if(c.is(o[z])){x=o[z].map(function(B){return B.id})}A.push(x||[])}else{s.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+z)}}}return A};k=function k(x){var v=[],A=[],y=[],z,w;if(!c.is(p)||!c.is(x)){return A}v=p[x];if(c.is(v,"array")){for(w=0;w<v.length;w++){z=v[w];if(c.is(z,"string")){y=[];if(c.is(o[z])){y=o[z].map(function(B){return B})}A.push(y||[])}else{s.getLogger().debug("ModuleId is invalid in selection mapping. ModuleId:"+z)}}}return A};return{onStart:function q(v){require(["text!"+r],function(w){if(!c.is(w)){s.getLogger().debug("Selection mapping is not defined.")}else{i=c.is(w,"string")?a.decode(w):w;if(i){p=i.selection}}v()})},onStop:function j(){o={}},setSelection:function f(w,v){if(c.is(w)){o[w]=v}},getSelections:function m(v){if(!c.is(v)){return null}return n(v)},getSelectionsWithPaths:function l(v){if(!c.is(v)){return null}return k(v)},getSelectionMapping:function g(w){var v=null;if(c.is(w)){if(p.hasOwnProperty(w)){v=p[w]}}return v},removeFromHighlightMap:function u(w){var v=w.toString();delete h[v]},setNodeIdsToHighlight:function d(w,v){h[w.toString()]=v},getAllNodeIdsToHighlight:function t(){var v;v=c.clone(h);return v},getSelectedNodesCount:function e(x){var w=this.getSelections(x),y=0,v;if(c.is(w,"array")){for(v=0;v<w.length;v++){y+=w[v].length}}return y}}};return b});define("DS/DELPPWViewPlugins/View",["UWA/Core","UWA/Controls/Abstract","UWA/Element"],function(c,d,a){var b=function(f){var j=d.extend({init:function i(k){this._parent(k);this.container=new a("div",{"class":k?(k["class"]?k["class"]:""):"view-container"});this.elements={};this.setup.apply(this,arguments)},setup:function e(){return},render:function h(){return this},setContainer:function g(k){var l;if(k instanceof a){this.container=k;return}l=c.typeOf(k);if(l==="element"){this.container=c.extendElement(k)}else{if(l==="object"){this.container=c.createElement(k.tag,k)}else{throw new Error("Invalid type of container")}}},destroy:function(){this._parent()}});return j};return b});define("DS/DELPPWViewPlugins/Viewer3DPlugin",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWModelServices/CollectionUtils"],function(d,a,b){var c=function c(f){var n="Viewer3DPlugin",m=widget.id,e="MFNMGA",i=[],s={DROP:"drop",REMOVE:"remove",APPLY_FILTER:"applyFilter",SELECT:"select",CLEAN_ALL:"cleanAll"};var l,q,p;l=function l(t){return t+"/"+e};q=function q(t,v){var u=l(t),w=v||{};d.merge(w,{originWidgetId:m});a.publish(u,w)};p=function p(){var t=s.CLEAN_ALL;q(t,null)};return{onStart:function r(){i.push(f.addExternalListener("refreshAll",p))},onStop:function k(){while(i.length>0){f.removeExternalListener(i.pop())}},drop3D:function h(y,w){var u=s.DROP,v=w||{},t=d.is(v.filterQuery3d)?v.filterQuery3d:null,x={rootReferenceIds:y,filterQuery3d:t};q(u,x)},remove3D:function j(v){var t=s.REMOVE,u={rootReferenceIds:v};q(t,u)},apply3DFilter:function g(z,u,w){var t=s.APPLY_FILTER,v=w||{},x=d.is(v.removeFilter,"boolean")?v.removeFilter:false,y={rootReferenceIds:z,filterQuery3d:u,removeFilter:x};q(t,y)},selectIn3D:function o(w){var t=s.SELECT,v,x;v=w.map(function u(y){return b.transformToOccPathWithRefDetail(y)});x={occPathsWithRefDetail:v};q(t,x)}}};return c});define("DS/DELPPWViewPlugins/TreeViewPlugin/PlatformPlugin",["UWA/Core","UWA/Class","DS/DELPPWModelServices/BehaviorUtil"],function(d,a,c){var b=function b(i){return{name:"PlatformPlugin",isNewDragNDrop:function e(){return c.isNewDragNDrop()},shouldLoadRootOnly:function j(){return c.shouldLoadRootOnly()},isCloud:function h(){return c.isCloud()},isNewArchi:function k(){return c.isNewArchi()},useRootStorage:function f(){return c.useRootStorage()},isSwipeableMenuPrefDisplayed:function m(){return c.isSwipeableMenuPrefDisplayed()},isNavigateOnIndexedDBPrefDisplayed:function l(){return c.isNavigateOnIndexedDBPrefDisplayed()},isDialogDisplayedAtDDinCaseOfMove:function n(){return c.isDialogDisplayedAtDDinCaseOfMove()},showEffectivityColumns:function g(){return c.showEffectivityColumns()}}};return b});define("DS/DELPPWViewPlugins/ImplementPlugin/ProductImplementPlugin",["UWA/Core","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase"],function(g,c,d,e,f,a){var b=function(j){var n="ProductImplementPlugin",p="ProductImplementLink",k="ProductImplementLinkOcc",q,h,l,i=function i(u,y,x,v){var w,t=v||{};if(g.is(x)){q.debug(n,u+"failed with error: %s ",JSON.stringify(x));if(g.is(x.message,"string")){w=x.message}}if(g.is(t.onFailure,"function")){t.onFailure(y,w)}};h=new a(j.getLogger(),p,k,false);l=function l(y,v){var z,u,t,w;z=function z(B){var A=B.deletedConnections;if(g.is(y)){d.removeConnection(y)}if(g.is(A,"array")&&A.length!==0){A.forEach(function(C){d.removeConnection(C)})}if(g.is(v)&&g.is(v.onComplete)){v.onComplete("ImplementPlugin.DeleteScope.Success")}};u=function u(B,A){i("Delete scope link for id:"+y,"ImplementPlugin.DeleteScope.Failed",A,v)};t=d.getConnectionFromCollection(y),w=g.is(t)?t.getAttribute("from"):null;if(g.is(w)){e.webServiceRequest({url:"modeler/ppr/deleteScope",method:"GET",data:{pid:w},headers:e.getHeaders({isAuthoringCtx:true,isJsonOnly:true}),onFailure:u,onTimeout:u,onCancel:u,onComplete:function x(A){z(A)}})}else{u("Reference PID is not valid.")}};return g.extend(h,{onStart:function o(){q=j.getLogger()},deleteScopeLink:function r(u,t){l(u,t)},consumeImplementedItems:function m(u,x,B,y,z){var C=z||{},A={rootProductID:u,productOccPaths:x,rootMfgItemID:B,targetMfgItemID:y,expandBy:c.getNavigateOnIndex()?"index":"database"},t=function t(E,D){i("Create mbom from ebom","ImplementPlugin.Consumption.Failed",D,C)},v=function v(I){var F=f.getConnectionParser(),H={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function G(K){if(g.is(K.instancesAndReferences,"array")&&K.instancesAndReferences.length>0){K.instancesAndReferences.forEach(function J(L){if(L.isInstance()){j.getMediator().notify("addInstance",[L])}})}if(g.is(C.onComplete,"function")){C.onComplete("ImplementPlugin.Consumption.Success",K)}},onFailure:t,};if(g.is(I)&&g.is(I.instancesAndReferences,"array")&&g.is(I.connections,"array")&&(I.connections.length>0)){I.instancesAndReferences.forEach(function E(K){var J=g.is(K.attributesValue)?K.attributesValue:K;if(J.hasOwnProperty("isInstanceOf")){H.stackedInstances.push(K)}else{H.stackedReferences.push(K)}});I.connections.forEach(function D(J){F.parse(J,H)});d.addToCollections(H)}else{t("ImplementPlugin.Consumption.Failed")}},w={url:"modeler/ppr/MfgItem/CreateMBOMFromEBOM",method:"POST",context:this,headers:e.getHeaders({isAuthoringCtx:true,isJsonOnly:true}),data:g.Json.encode(A),onComplete:v,onFailure:t,onTimeout:t,onCancel:t};e.webServiceRequest(w)},createScopeAndImplementLink:function s(z,y,u,x,A){var C=A||{},B={productID:u,processID:z,processInstancePID:y,productPath:g.Json.encode(x),},t=function t(E,D){i("Create scope and implement link","ImplementPlugin.CreateScope.Failed",D,C)},v=function v(I){var G=f.getConnectionParser(),E={stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function H(J){if(g.is(J.connections,"array")&&J.connections.length>0){j.getMediator().notify("addConnection",[J.connections]);if(g.is(C.onComplete,"function")){C.onComplete("ImplementPlugin.CreateScope.Success",J)}}}};if(g.is(I)&&g.is(I.instancesAndReferences,"array")&&g.is(I.connections,"array")&&(I.connections.length>0)){I.instancesAndReferences.forEach(function F(K){var J=g.is(K.attributesValue)?K.attributesValue:K;if(J.hasOwnProperty("isInstanceOf")){E.stackedInstances.push(K)}else{E.stackedReferences.push(K)}});I.connections.forEach(function D(J){G.parse(J,E)});d.addToCollections(E)}else{t("ImplementPlugin.CreateScope.Failed")}},w={url:"modeler/ppr/createscopeandimplementlink",method:"POST",headers:e.getHeaders({isAuthoringCtx:true,isJsonOnly:true}),data:g.Json.encode(B),onFailure:t,onTimeout:t,onCancel:t,onComplete:v};e.webServiceRequest(w)}})};return b});define("DS/DELPPWViewPlugins/UXComponentsPlugin/UXComponentsPlugin",["UWA/Core","UWA/Element","UWA/Utils","DS/Windows/Panel","DS/Windows/Dialog","DS/UIKIT/Form","DS/UIKIT/Modal","DS/UIKIT/SuperModal","DS/UIKIT/Tooltip","DS/UIKIT/Alert","DS/Tree/Tree","DS/Controls/Button","DS/Controls/ButtonGroup","DS/Controls/LineEditor","DS/Controls/Loader","DS/Controls/Tab","DS/Tree/TreeListView","DS/Tree/TreeNodeModel","DS/Controls/TooltipModel","DS/CoreEvents/Events","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Editor","DS/Controls/DatePicker","DS/UIBehaviors/ContextualMenuManager","DS/ApplicationFrame/FrameWindowsManager","DS/ApplicationFrame/CommandsManager","DS/etree/syncwidget","DS/etree/syncviewsFactory","DS/Controls/ProgressBar","DS/Controls/Accordeon","DS/DELPPWViewPlugins/UXComponentsPlugin/UnitsEditor","DS/DELPPWViewPlugins/UXComponentsPlugin/ExtendedCustomDialog","DS/egraph/core","DS/egraph/views","DS/egraph/iact","DS/egraph/utils","css!egraph/views","css!DS/egraph/views_default.css","css!etree/syncviews","css!DS/etree/overviewui.css","css!DS/UIKIT/UIKIT.css"],function(c,g,C,d,j,t,e,b,x,p,h,H,E,J,K,l,F,s,D,f,L,u,q,o,A,v,n,m,y,z,a,w,I,r,G,i,B){var k=function(N){return{getComponent:function M(O){var P;switch(O){case"WUXDockAreaEnum":P=WUXDockAreaEnum;break;case"Element":P=g;break;case"Panel":P=d;break;case"Dialog":P=j;break;case"CustomDialog":P=I;break;case"Form":P=t;break;case"Tooltip":P=x;break;case"Modal":P=e;break;case"Alert":P=p;break;case"Button":P=H;break;case"ButtonGroup":P=E;break;case"LineEditor":P=J;break;case"TooltipModel":P=D;break;case"TreeListView":P=F;break;case"TreeNodeModel":P=s;break;case"Tree":P=h;break;case"WUXEvent":P=f;break;case"Segmented":P=c.Controls.Segmented;break;case"ContextualMenuManager":P=A;break;case"WUXFrameWindowsManager":P=v;break;case"WUXCommandsManager":P=n;break;case"WUXLoader":P=K;break;case"Toggle":P=L;break;case"ComboBox":P=u;break;case"Editor":P=q;break;case"DatePicker":P=o;break;case"SuperModal":P=b;break;case"ETree":P=m;break;case"ETreeViewsFactory":P=y;break;case"ProgressBar":P=z;break;case"Accordeon":P=a;break;case"UnitsEditor":P=w;break;case"WUXTab":P=l;break;case"EGraphCore":P=r;break;case"EGraphViews":P=G;break;case"EGraphIact":P=i;break;case"EGraphUtils":P=B;break;default:break}return P}}};return k});define("DS/DELPPWViewPlugins/ImplementPlugin/ProcessImplementPlugin",["UWA/Core","DS/DELPPWViewPlugins/ImplementPlugin/ImplementBase"],function(c,a){var b=function(e){var d="ProcessImplementPlugin",i="ProcessImplementLink",g="ProcessImplementLinkOcc",j;j=new a(e.getLogger(),i,g);return c.extend(j,{onStart:function f(){},isLinkValidForOccPath:function h(m,l,n,o){var k;if(this.getImplementLinkType()===o){k=this.getPathToScope(n);if(!c.equals(m,k)&&!c.equals(l,k)){return false}}return true}})};return b});define("DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI",["UWA/Core","DS/Utilities/Utils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWViewPlugins/TreeViewPlugin/RootsStoreUI"],function(f,b,d,e,c){var a=function(A,m,y,i,z){var l,g,j,h,q,B,w,r,n,k=y.getComponent("Element"),o=y.getComponent("Dialog"),t=y.getComponent("Button"),s=y.getComponent("WUXTab"),p=y.getComponent("TreeListView"),u=y.getComponent("TreeNodeModel"),x=y.getComponent("Editor"),v=y.getComponent("Toggle");q=function q(E){g=new k("div",{"class":"ViewPreferencesUI-Content"});l=new o({domId:"ViewPreferencesUI-Dialog",immersiveFrame:m.getImmersiveFrame(),modalFlag:true,visibleFlag:false,resizableFlag:true,snappableFlag:false,title:d.getNLSValue("ViewPreferencesUI.Header"),content:g,buttons:{Ok:new t({className:"ok primary",label:d.getNLSValue("ViewPreferencesUI.Ok"),emphasize:"primary",onClick:function F(){var G=n();l.close();if(f.is(E,"function")){E(G)}}}),Cancel:new t({className:"cancel",label:d.getNLSValue("ViewPreferencesUI.Cancel"),onClick:function F(){l.close()}})}});l.close=function D(){this.destroy();g=null;h=null;j=null}};B=function B(){if(!f.is(g)){return}h=new s({reorderFlag:true,showComboBoxFlag:true,pinFlag:false,multiSelFlag:false,editableFlag:true,touchMode:true,displayStyle:["strip"]});h.inject(g)};w=function w(E){var G,I,L={showVerticalLines:true,isSortable:false,isDraggable:true,isEditable:true,apiVersion:2,height:"auto",defaultCellHeight:40,performances:{resizeDebounceTimeout:200},selection:{cells:false,canMultiSelect:false,columnHeaders:false},resize:{columns:true,rows:false},enableActiveUI:true,enableKeyboardNavigation:true,onDropCellDefault:function(S,N){S.preventDefault();var R,Q,M,P,O,T;R=this.unserializeDragAndDropEvent(S);if(R){Q=R.data["dswebux/x-tree.treenodemodel+number"];M=R.data["dswebux/x-tree.treenodemodel+json"];if(N.nodeModel._getID()===Q){return}if(M){M.forEach(function(V,U){P=new u(V);if(N.cellView){O=N.nodeModel;T=N.manager.getDocument().options.shouldAcceptDrop({parentTreeNodeModel:O,draggedTreeNodeModel:P,dropPosition:N.dropPosition});if(T){N.manager.getDocument().prepareUpdate();N.manager.getDocument().getXSO().get().forEach(function(W){W.remove()});N.manager.getDocument().pushUpdate();if(N.virtualRowID!==-1){switch(N.dropPosition){case"top":O.getParent().insertBefore(P,O);break;default:case"middle":O.getParent().addChild(P,N.virtualRowID);break;case"bottom":O.getParent().addChild(P,O.getParent().getChildren().indexOf(O)+1);break}return false}return true}return false}})}}}},J=function J(N){var M=N.cellView.getContent();if(!N.isHeader){M.setContent(N.nodeModel.getLabel());return N.nodeModel.getLabel()}},H=function H(P){var O,M=P.cellView.getContent(),N=P.cellModel.getCellContent();if(!P.isHeader){O=new x({value:N});M.setContent(O);return O}},K=b.debounce(function K(M){M.nodeModel.options.grid[M.dataIndex]=M.value},100,true),F=function F(P){var N,M=P.cellView.getContent(),O=P.cellModel.getCellContent();if(!P.isHeader){N=new v({type:"switch",label:""});if(f.typeOf(O)==="string"){O=f.Json.decode(O)}if(O.display===true){N.checkFlag=true}if(O.mandatory===true){N.disabled=true}M.setContent(N);M.title="";P.cellView.setOption("toggle",N);return N}},D=b.debounce(function D(M){M.nodeModel.options.grid[M.dataIndex].display=M.cellView.getOption("toggle").checkFlag},100,true);L.columns=[{dataIndex:"tree",isHidden:true},{text:"",dataIndex:"colPosition",isEditable:false,width:"5%",isColumnMovable:false,onCellRequest:J},{text:d.getNLSValue("Column.HeaderName"),dataIndex:"colName",isEditable:false,width:"auto",isColumnMovable:false},{text:d.getNLSValue("Column.IsVisible"),dataIndex:"colVisibility",isEditable:false,width:"20%",isColumnMovable:false,onCellRequest:F,setValue:D},{text:d.getNLSValue("Column.Width"),dataIndex:"width",isEditable:false,width:"20%",isColumnMovable:false,onCellRequest:H,setValue:K},{text:d.getNLSValue("Column.MinWidth"),dataIndex:"minWidth",isEditable:false,width:"20%",isColumnMovable:false,onCellRequest:H,setValue:K}];G=new p(L);for(I=0;I<E.length;I++){G.addRoot(new u({label:I.toString(),grid:f.merge({colName:i.getColumnDisplayValue(E[I])},E[I])}))}return G};r=function r(D,G,E){var F;if(!f.is(h)){return}j={};D.forEach(function(L){var K,I=G[L],H=w(I),J=new k("div",{"class":L+"-Content ViewPreferencesUI-TabContent"});j[L]=H;J.setContent(H);K=h.add({label:d.getNLSValue("ViewPreferencesUI."+L+".TabTitle"),content:J,index:h.getPageCount(),icon:"table",isSelected:(h.getPageCount()===0)?true:false});if(f.is(E[L])){K.button.elements.iconPlaceholder.setContent(E[L])}});if(e.useRootStorage()){F=new c(l,A,y,z);h.add({id:"store-view-block",index:h.getPageCount(),icon:d.getIconURLFromKey("StoreViews"),label:d.getNLSValue("ViewPreferencesUI.StoreView.TabTitle"),content:F.getContent()})}};n=function n(){var E,J,G,D,H,F,I={};for(J in j){if(j.hasOwnProperty(J)){I[J]=[];D=j[J];F=D.getRoots();for(E=0;E<F.length;E++){G=F[E].options.grid;if(f.is(G.colName)){delete G.colName}I[J].push(G)}}}return I};return{name:"ViewPreferencesUI",buildView:function C(E,D){if(f.is(l)){l.close()}q(D);B();r(E.views,E.viewPreferences,E.viewIcons);return l}}};return a});define("DS/DELPPWViewPlugins/TreeViewPlugin/TreeViewPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWViewPlugins/TreeViewPlugin/ViewPreferencesUI","DS/DELPPWViewPlugins/TreeViewPlugin/LayoutPreferencesUI","DS/DELPPWModelServices/BehaviorUtil"],function(g,b,d,a,c,f){var e=function e(F){var m,G=[],u,H,s="",j,D,A,r,L,w,M,n,B,t,l,k,v=Object.create(null);l=function l(O){var N=-1;B.some(function(R,P){var Q=false;if(R.viewID===O){N=P;Q=true}return Q});return N};A=function A(N){var O=(u.getConfigurationPID()!=="")?u.getConfigurationPID()+"_":"";return O+N+"_ColumnPreferences"};r=function r(N){return u.getPreference(A(N))};L=function L(O,N){return u.setPreference(A(O),N)};w=function w(){var O,N=null;O=u.getPreference("widgetLayoutValues");if(g.is(O)){N=g.Json.decode(O)}return N};M=function M(N){u.setPreference("widgetLayoutValues",g.Json.encode(N))};n=function n(T,S){var U,R,Q,N=b.getXMLValues(S),P=r(T),O=F.getPlugins("CfgColumnsPlugin");O=O.instance;P=g.is(P)?P:[];N=g.is(N)?g.clone(N.Config.Columns.Column):[];if(f.showEffectivityColumns()){N=N.concat(O.getConfigColumns())}N=g.is(N,"array")?N:[N];for(U=P.length-1;U>=0;U--){Q=false;for(R=N.length-1;R>=0;R--){if(N[R].dataIndex===P[U].dataIndex){if(g.is(N[R].mandatory,"boolean")){P[U].colVisibility.mandatory=N[R].mandatory;if(N[R].mandatory){P[U].colVisibility.display=N[R].mandatory}}Q=true;N.splice(R,1);break}}if(!Q){P.splice(U,1)}}N.forEach(function(V){P.push({colVisibility:{display:g.is(V.display)?V.display:true,mandatory:g.is(V.mandatory)?V.mandatory:false},dataIndex:V.dataIndex,dicoType:V.dicoType,width:g.is(V.width)?V.width:"auto",minWidth:g.is(V.minWidth)?V.minWidth:"100"})});L(T,P);return P};t=function t(){var R,N,T,S,Q,U,P={views:[],viewPreferences:{},viewIcons:{}};N=F.getPlugins("AttributePlugin");R=F.getPlugins("UXComponentsPlugin");T=F.getPlugins("RootsPlugin");if(g.is(N)&&g.is(R)&&g.is(T)){N=N.instance;R=R.instance;T=T.instance;S=R.getComponent("WUXFrameWindowsManager");U=S.getFrameWindow(F.getConfig().appContext);Q=new a(F,U,R,N,T);B.forEach(function(V){var W=r(V.viewID);P.views.push(V.viewID);P.viewPreferences[V.viewID]=W;if(V.viewIcon){P.viewIcons[V.viewID]=d.getIconElem(V.viewIcon)}});m=Q.buildView(P,function O(V){var X,W;for(X in V){if(V.hasOwnProperty(X)){W=V[X];L(X,W)}}F.getMediator().notify("TreeViewPrefModified")});m.show()}else{F.getLogger().debug("Attribute Plugin or UXComponents Plugin or Roots Plugin is not available.")}};k=function k(){var R,Q,N,P={viewsInDockingZones:D,viewsInFreeZone:j};Q=F.getPlugins("UXComponentsPlugin");if(g.is(Q)){Q=Q.instance;N=w();R=new c(H,Q,F.getConfig().appContext,N,P);R.showDialog(function O(){var S=R.decipherPreferencesFromButtonStates();M(S);F.getMediator().notify("widgetLayoutChanged")})}};return{name:"TreeViewPlugin",onStart:function E(){B=[];D={};j={};u=F.getService("ConfigService");if(!g.is(u)){F.getLogger().debug("TreeViewPlugin initialization failed as ConfigService is not available")}H=F.getService("LayoutService");if(!g.is(H)){F.getLogger().debug("TreeViewPlugin initialization failed as LayoutService is not available")}G.push(F.addExternalListener("EditViewPreferencesCmd",t));G.push(F.addExternalListener("LayoutPreferences",k))},onStop:function p(){var O,N;B=null;D=null;j=null;for(O=0,N=G.length;O<N;O++){F.removeExternalListener(G[O])}G=[]},registerViewforColumnPref:function q(N){var O=false;if(!(g.is(N)&&(g.is(N.viewID)||g.is(N.columnConfigName)))){F.getLogger().debug(" viewID or columnConfigName has not been defined, so cannot register for  Column Preferences")}else{if(l(N.viewID)===-1){B.push(N);n(N.viewID,N.columnConfigName);O=true}else{F.getLogger().debug(N.viewID+" Module has already registered for Column Preferences")}}return O},syncViewColumnPreferences:function z(Q){var P,O,N;if(!g.is(Q)){F.getLogger().debug(" viewID has not been defined, so cannot sync Column Preferences");return}P=l(Q);if(P>-1){O=B[P];n(O.viewID,O.columnConfigName);N=this.getViewColumnPreferences(O.viewID)}else{F.getLogger().debug(Q+" Module has already registered for Column Preferences")}return N},getViewColumnPreferences:function C(Q,O){var T,N,R,Y,S,X,U=F.getPlugins("AttributePlugin"),V=F.getPlugins("ResourcePlugin"),P=F.getPlugins("CfgColumnsPlugin"),W;if(!g.is(U)||!g.is(V)){F.getLogger().debug("AttributePlugin or ResourcePlugin not available");return}U=U.instance;V=V.instance;P=P.instance;if(!g.is(Q)){F.getLogger().debug(" viewID has not been defined, so cannot retrieve Column Preferences");return}T=l(Q);if(T>-1){N=r(Q);S=B[T].columnConfigName;Y=b.getXMLValues(S);R=g.is(Y)?Y.Config.Columns.Column:[];if(f.showEffectivityColumns()){R=R.concat(P.getConfigColumns())}R=g.is(R,"array")?R:[R];N.forEach(function(Z,aa){R.some(function(ab){var ac=false;if(ab.dataIndex===Z.dataIndex){N[aa]=g.merge({isHidden:!Z.colVisibility.display,width:Z.width,minWidth:Z.minWidth},ab);ac=true}return ac})});Y.Config.Columns.Column=N}else{if(g.is(O)){Y=b.getXMLValues(O)}else{F.getLogger().debug(Q+" Module has not registered for Column Preferences");return}}if(g.is(Y)){X=Y.Config.Label;if(g.is(X)){W=U.getAttributeInfoFromColumn({dataIndex:X.dataIndex});v[Q]={attributeName:W.attributeName,labelIsOnRef:(W.objType==="reference"),dicoType:X.dicoType}}}return(g.is(Y)?Y.Config:void 0)},unRegisterViewforColumnPref:function i(P){var N,O=false;if(!g.is(P)){F.getLogger().debug(" viewID has not been defined, so cannot unRegister for  Column Preferences")}else{N=l(P);if(N>-1){B.splice(N,1);O=true}else{F.getLogger().debug(P+" Cannot unregister as Module is not registered for Column Preferences")}}return O},getLabelInfo:function J(N){return v[N]},registerViewforWidgetLayout:function h(O){var N;if(!(g.is(O)&&(g.is(O.viewID)||g.is(O.viewType)))){F.getLogger().debug("viewID or viewType has not been defined, so cannot register for Layout Preferences");return}N=O.viewID;if(g.is(O.dockArea)){if(g.is(D[N])){D[N].views.push(O.viewType)}else{D[N]={views:[O.viewType],dockArea:O.dockArea}}}else{if(g.is(j[N])){j[N].views.push(O.viewType)}else{j[N]={views:[O.viewType]}}}},unregisterViewforWidgetLayout:function I(P,O){var N,Q,S,R=false;if(g.is(j[P])){N=j}else{if(g.is(D[P])){N=D}}if(g.is(N)){Q=N[P];S=Q.views.indexOf(O);if(S!==-1){Q.views.splice(S,1);if(Q.views.length===0){delete N[P]}R=true}}if(!R){F.getLogger().debug('Cannot unregister as Module "'+P+'" or "'+O+'" is not registered for Layout Preferences')}return R},setCurrentView:function x(O,N){if(!(g.is(N)&&(g.is(O)||g.is(N.currentView)))){F.getLogger().debug("moduleId or currentView has not been defined, so cannot setup Module Current View");return}if(g.is(j[O])){j[O].currentView=N.currentView}else{j[O]={currentView:N.currentView}}},updateViewPreferences:function(S,N,Q){var P,O=r(S);if(Array.isArray(O)&&g.is(N)&&g.is(Q)){P=O.detect(function R(T){return T.dataIndex===N},this);if(g.is(P)){Object.keys(Q).forEach(function(T){switch(T){case"visibility":P.colVisibility.display=Q.visibility;break;default:F.getLogger().debug("Invalid option! No parameters to manage for the selected column!")}});L(S,O)}}},getCurrentView:function y(){return j},setActiveView:function K(N){s=N},getActiveView:function o(){return s}}};return e});