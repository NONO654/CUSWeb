require(["DS/SMAProcWebCommonControls/Polymer"],function(a){window.Polymer({is:"mft-validation",properties:{mftElement:{type:Object,value:null},mftPluginElement:{type:Object,value:null},mftProcessId:{type:String,value:null},closeCallbackClass:{type:Object,value:null},closeCallback:{type:Object,value:null}},ready:function(){this.listen(this.$.validationLogButton,"click","_logButtonClicked")},_approveLogin:function(b,c,d){b.mftPluginElement.setValidationElement(b);b.mftPluginElement.runRemoteProcessValidation(b.mftElement.getMftUrl(),c,d,b.mftProcessId)},_cancelLogin:function(b){b._logButtonClicked()},_logButtonClicked:function(b){if(this.$.validationLogButton.innerText=="Cancel"){if(this.mftPluginElement){this.mftPluginElement.cancelValidation();if(!this.$.validationLogButton.classList.contains("validationLogDisabled")){this.$.validationLogButton.classList.add("validationLogDisabled")}}}else{if(this.$.validationLogButton.innerText=="Close"){if(this.closeCallback&&this.closeCallbackClass){this.closeCallback.call(this,this.closeCallbackClass)}}}if(b){b.stopPropagation()}},setMftElement:function(b){this.mftElement=b},setCloseCallbackClass:function(b){this.closeCallbackClass=b},setCloseCallback:function(b){this.closeCallback=b},setProcess:function(b){if(b.name){this.$.validationLogTitlePaneText.innerText=b.name+" Validation:";if(b.publisherName){this.$.validationLogTitlePaneText.innerText=b.name+", "+b.publisherName+" Validation:"}}},validate:function(c,b){this.mftPluginElement=c;this.mftProcessId=b;if(this.mftPluginElement){if(this.mftElement.getMftUsername()&&this.mftElement.getMftPassword()){this._approveLogin(this,this.mftElement.getMftUsername(),this.mftElement.getMftPassword())}else{this.mftElement.showLogin(this.mftElement.getMftUrl(),this,this._approveLogin,this,this._cancelLogin)}}},clearLog:function(){this.$.validationLog.value=""},addLogMessage:function(b){if(this.$.validationLog.value.trim()==""){this.$.validationLog.value=b}else{this.$.validationLog.value=this.$.validationLog.value+"\n"+b}},validationStarted:function(){this.$.validationLogButton.innerText="Cancel";if(this.$.validationLogButton.classList.contains("validationLogDisabled")){this.$.validationLogButton.classList.remove("validationLogDisabled")}},validationComplete:function(){this.$.validationLogButton.innerText="Close";if(this.$.validationLogButton.classList.contains("validationLogDisabled")){this.$.validationLogButton.classList.remove("validationLogDisabled")}}})});