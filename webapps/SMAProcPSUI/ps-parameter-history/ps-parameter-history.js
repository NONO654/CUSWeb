require(["UWA/Core","DS/WebappsUtils/WebappsUtils"],function(c,O){var p;var K={NOJOB:"\nNo jobs have been run for this process.",COMPLETEDJOB:"\nThe job you are monitoring has been completed and results have been archived.\nTo review parameter history ",INITIALIZING:"\nJob now Initializing",NOTSTARTED:"\nJob is yet to be initialized, parameter history will be fetched once the job is initialized",SELECTACTIVITY:"\nSelect an activity to view Parameter history",COSFAILED:"\nFailed to get parameter history.\nResponse from COS \n",COMPLETEDJOBWIDGET:"\nThe job you are monitoring has been completed and results have been archived.\nTo review parameter history  please drop simulation to Results Analytics widget",COMPLETEDJOBAPP:'\nThe job you are monitoring has been completed and results have been archived.\nTo review parameter history  please use "Analyze Results".',NO_RECORDS:"No records found for this activity. Records will be fetched again in 10 seconds.",NO_RECORDS_COMPLETED:"No records found for this activity.",NO_ACTIVITIES:"No Activities found for this process."},r={STATUS_NOT_STARTED:"NotStarted",STATUS_RUNNING:"Running",STATUS_PAUSED:"Paused",STATUS_WAITING:"Waiting",STATUS_COMPLETED:"Completed",STATUS_ABORTED:"Aborted",STATUS_FAILED:"Failed",STATUS_INITIALIZING:"Initializing",STATUS_QUEUED:"Queued"},I=["OK","Cancelled","Failed","System Failed","Done","Aborted","Completed"],H={COMPLETED:"OK",ABORTED:"Canceled",FAILED:["Failed","System Failed"]},o=function(X){var W=X.detail.response;this.$.seeBaseURL.setValue(W.url)},E=function(Z){var ab=Z.data;if(ab.type==="rects"){Z.stopPropagation();var X=this.querySelector("#paramHistory");var Y=ab.data.scrollerContentWidth;var ac=ab.data.scrollerClientWidth;var aa=ab.data.remainingSpace;var W=this.querySelector("#historycontainer");var ad=W.clientWidth-ac;if((aa>=419)&&this.view!=="Table"){W.classList.add("historycontainer-vertical");if(this.view==="Table and Graphs"){X.style.minWidth=Y+19+"px"}}else{if(ad>=419&&this.view==="Table and Graphs"){X.style.minWidth=Y+19+"px";ad=W.clientWidth-ac;if(ad>=419){W.classList.add("historycontainer-vertical")}else{W.classList.remove("historycontainer-vertical")}}else{W.classList.remove("historycontainer-vertical");X.style.removeProperty("min-width")}}}},t=function(){var W=this.querySelector("#paramHistory");if(W&&W.contentWindow){W.contentWindow.postMessage({type:"rects"},"*")}},f=function(){this.plotSettingChanged=false;this.showImprovments=false;this.activityListView=[];this.data=[];this.startTime=0;this.activityList=[];this.summary={};this.columns=[];this.parameterList=[];this.isHistorySeeCallComplete=true;this.isHistoryCallComplete=true;this.fetchFirstJobLog=true;var X=this;require(["UWA/Drivers/Alone","DS/UIKIT/Spinner"],function(Y,Z){var aa=X.querySelector("#loader");X.spinner=new Z({className:"large"}).inject(aa)});require(["DS/SMAProcPSUI/Views/HistoryTableFilter"],function(Y){p=Y});if(this.$.spDashboard.isInDashboard()){K.COMPLETEDJOB=K.COMPLETEDJOBWIDGET;if(navigator.userAgent.search("Trident")>=0){this.querySelector("#filterModal").style.marginTop="100px"}}else{K.COMPLETEDJOB=K.COMPLETEDJOBAPP}var W=this.$.spDashboard.getMcsUri();this.$.mcsBaseURL.setValue(W);this.$.seeBaseURLWS.getData();this.view="Table";this.$.tablebutton.classList.add("select-color");window.addEventListener("resize",t.bind(this),true);window.addEventListener("message",E.bind(this),true)},S=function(){var W=Polymer.dom(this.root).querySelector("#paramHistory");if(W&&W.contentWindow){W.contentWindow.postMessage({type:"clear"},"*")}},C=function(){this.$.historyTimer.stop();this.$.summaryTimer.stop();this.$.cosTicketTimer.stop();this.$.seeCompPathTimer.stop();this.$.seeHistoryTimer.stop();if(x(this.jobExecutionStatus)){this.partialData=true}},x=function(W){var X=[r.STATUS_RUNNING,r.STATUS_PAUSED,r.STATUS_WAITING,r.STATUS_QUEUED].some(function(Y){return W===Y});return X},B=function(W){var X=[r.STATUS_FAILED,r.STATUS_COMPLETED,r.STATUS_ABORTED].some(function(Y){return W===Y});return X},Q=function(){var W="";if(!(x(this.jobExecutionStatus)||B(this.jobExecutionStatus))&&!this.isWebInWin){this.getResultsFromEED();if(!this.isWebInWin){this.activityListView=[];this.selectedActivityPath="";this.selectedActivitySequence=""}}if(this.jobExecutionStatus==="Running"){this.isJobRunning=true;C.call(this)}else{if(this.jobExecutionStatus==="Completed"&&this.isJobRunning){if(window.dscef){window.dscef.sendString("JobMovedToMCS",this.eedjobId)}}else{if(["Initializing","Started","NotStarted"].indexOf(this.jobExecutionStatus)!==-1){if(this.jobExecutionStatus==="NotStarted"){W=K.NOTSTARTED}else{W=K.INITIALIZING}this.querySelector("#selectActivity").classList.add("hide");Polymer.dom(Polymer.dom(this.root).querySelector("#selectmessage")).textContent=""}else{if(this.jobExecutionStatus===undefined||this.jobExecutionStatus===null||this.jobExecutionStatus===""){W=K.NOJOB;this.querySelector("#selectActivity").classList.add("hide");Polymer.dom(Polymer.dom(this.root).querySelector("#selectmessage")).textContent="";this.spinner&&this.spinner.hide()}}}}Polymer.dom(Polymer.dom(this.root).querySelector("#custommessage")).textContent=W},v=function(af,Y){var X,Z=[],W={},ae,ad,ab,ac=false;X=af===undefined||af===""?[]:af.split("#");ad=X[X.length-1];ab=Y.some(function(ag){var ah=ag["@path"]||ag.Path||"";return ah===af&&ag["@type"]==="com.dassault_systemes.sma.adapter.condgateway"});if(!ab&&X.length>1){if(X.length>2){Z=X[X.length-2].split(".");ae=Z[Z.length-1];if(af.indexOf(ae)===af.lastIndexOf(ae)){ac=true}}else{if(X[X.length-2].indexOf(".")>-1){Z=X[X.length-2].split(".");ae=X[X.length-1];var aa=Z[Z.length-1];if(aa.indexOf(ae)===aa.lastIndexOf(ae)){ac=true}}else{Z=X[X.length-2];ae=X[X.length-1];if(ae.indexOf(ae)===ae.lastIndexOf(ae)){ac=true}}}}W.isAct=ac;W.title=ad;return W},w=function(){var X;if(this.summary[0]&&this.summary[0].WorkItemSummaries){X=this.summary[0].WorkItemSummaries}else{X=this.summary.JobInfo.JobSummary.WorkItemSummaries?this.summary.JobInfo.JobSummary.WorkItemSummaries.WorkItemSummary:null}if(X&&this.isWebInWin){var W=this.summary.JobInfo["@status"];if(I.indexOf(W)!==-1){var Y=this.summary.JobInfo["@completionCode"];if(H.COMPLETED===Y){this.jobExecutionStatus=r.STATUS_COMPLETED}else{if(H.ABORTED===Y){this.jobExecutionStatus=r.STATUS_ABORTED}else{this.jobExecutionStatus=r.STATUS_FAILED}}}}if(X.length>0){this.generateActivityList()}else{this.querySelector("#activitiesListButton").classList.add("hide");this.querySelector("#selectmessage").textContent=K.NO_ACTIVITIES;this.spinner.hide()}},D=function(){var Y,aa=0,W=0,al,ab,aj,ag=false,X={};if(this.summary[0]&&this.summary[0].WorkItemSummaries){Y=this.summary[0].WorkItemSummaries}else{Y=this.summary.JobInfo.JobSummary.WorkItemSummaries?this.summary.JobInfo.JobSummary.WorkItemSummaries.WorkItemSummary:null}if(Y){for(aa=0;aa<this.activityList.length;aa+=1){X={};ab=this.activityList[aa].internalId;for(var Z=0;Z<Y.length;Z++){var ah=Y[Z]["Group Name"]||Y[Z]["@groupName"];var ae=Y[Z]["Is Step"]||Y[Z]["@isStep"];if((ae&&ae.toLowerCase()==="false")||(!ae&&ah)){al=Y[Z].Path||Y[Z]["@path"];aj=Boolean(Y[Z].SubflowSummary);var ai=localStorage.getItem("showIsightHistory");if(ai==="true"){if(Y[aa]["@type"]&&Y[aa]["@type"]==="com.dassault_systemes.sma.adapter.IsightV5Adapter"){if(!this.seeJobId){this.getSEEJobId()}else{if(this.$.seeCompPathTimer.state!=="is-started"){this.$.seeCompPathTimer.start()}}continue}}X=v(al,Y);ag=false;if(X.isAct||aj){for(W=0;W<this.activityListView.length;W+=1){if(this.activityListView[W].CompPath===al){ag=true}}if(!ag){this.push("activityListView",{Title:X.title,CompPath:al,internalId:ab})}}}}}if(this.activityListView.length===0){this.querySelector("#selectmessage").textContent=K.NO_ACTIVITIES;this.spinner.hide()}}if(this.fetchFirstJobLog){var ac=this.activityListView[0];var ad=ac.Title;var af=ac.CompPath;var ak=ac.internalId;this.getParamHistory(ad,af,ak);this.querySelector("#header").classList.remove("hide");setTimeout(function(){var am=this.querySelector("#activitiesList sp-dropdown-menu-item");am&&am.setAttribute("selected",true)}.bind(this),10);this.fetchFirstJobLog=false}},L=function(){var W=new XMLHttpRequest(),X=this.$.eedBaseURL.getValue()+"/job/"+this.eedjobId+"/monitor?Topic=ISightJob";W.open("GET",X,true);W.setRequestHeader("Content-Type","application/json");W.setRequestHeader("Accept","application/json, */*; q=0.01");W.setRequestHeader("EEDTicket",this.eedTicket);W.onreadystatechange=function(){if(W.readyState!==4){return}switch(W.status){case 200:var Y=JSON.parse(W.response);if(Y.MonitoringMessages&&Y.MonitoringMessages.MessageList instanceof Object){var Z=Y.MonitoringMessages.MessageList.Message.$;this.seeJobId=Z;this.$.seeJobIdTimer.stop();this.$.seeCompPathTimer.start()}else{this.$.seeJobIdTimer.start()}break;case 401:break;case 403:case 410:case 500:default:this.$.seeJobIdTimer.stop();this.$.seeCompPathTimer.stop();C.call(this);break}}.bind(this);W.send()},y=function(Y){var W=JSON.parse(Y);if(!W.comppaths){return}var ab=W.comppaths;if(ab&&ab.length>0){for(var X=0;X<ab.length;X++){var aa=false;for(var Z=0;Z<this.activityListView.length;Z++){if(this.activityListView[Z].CompPath===ab[X]){aa=true}}if(!aa){this.push("activityListView",{Title:"SEE-"+ab[X],CompPath:ab[X],internalId:ab[X]})}}}},k=function(W){var X=W.detail.response;this.seeJobId=X.jobId;this.$.seeCompPathTimer.start()},n=function(){this.httpCompPathList=new XMLHttpRequest();var W=this.$.seeBaseURL.getValue()+"/job/comppaths?jobid="+this.seeJobId;this.httpCompPathList.open("GET",W,true);this.httpCompPathList.setRequestHeader("Accept","application/json, */*; q=0.01");var Z=JSON.parse(sessionStorage.getItem("IsightPwd"));if(Z){var X=this.$.spEncryption.decryptAESCBC(Z.cipher_text,"ENCYPTION2345",Z.salt,Z.iv);var Y=sessionStorage.getItem("isightV5User");this.httpCompPathList.setRequestHeader("Authorization","Basic "+btoa(Y+":"+X));this.httpCompPathList.onreadystatechange=function(){if(this.httpCompPathList.readyState!==4){return}switch(this.httpCompPathList.status){case 200:this.setCompPathList(this.httpCompPathList.response);break;case 401:case 0:this.$.seeJobIdTimer.stop();this.$.seeCompPathTimer.stop();this.$.IsightUserPwd.show();break;case 403:case 410:default:C.call(this);break}}.bind(this);this.httpCompPathList.send()}else{this.$.IsightUserPwd.show()}},V=function(){this.$.historyTimer.stop();this.$.seeHistoryTimer.stop();if(this.jobObjectId!==undefined&&this.jobObjectId!==""){this.$.cosTicketTimer.start();if(B(this.jobExecutionStatus)){this.getResultsFromEED()}else{if(this.jobExecutionStatus==="Paused"){this.getResultsFromEED()}else{this.$.historyTimer.start()}}}},N=function(W,X){if(X){this.eedTicket=X;if(this.selectedActivityPath.length>0){V.call(this)}}},G=function(){console.log("error in tickets")},s=function(){if(this.cosServerId&&this.cosServerId.length>0){this.$.ticketSvc.cosTicketUrl=this.$.mcsBaseURL.getValue()+"/resources/eepservices/cos/configurations/<serverID>/ticket"}else{this.$.ticketSvc.cosTicketUrl=this.$.mcsBaseURL.getValue()+"/resources/slmservices/cos/ticket";this.cosServerId=null}if(this.cosServerId){this.$.ticketSvc.getServerTicket(this.cosServerId,this.jobObjectId,true,N.bind(this),G)}},J=function(){var W=new XMLHttpRequest(),X=this.$.eedBaseURL.getValue()+"/job/"+this.eedjobId+"/summary/full";W.open("GET",X,true);W.setRequestHeader("Accept","application/json, */*; q=0.01");W.setRequestHeader("EEDTicket",this.eedTicket);W.onreadystatechange=function(){if(W.readyState!==4){return}switch(W.status){case 200:this.summary=JSON.parse(W.response);w.call(this);break;case 401:this.$.summaryTimer.stop();this.$.historyTimer.stop();break;case 404:this.querySelector("#activitiesListButton").classList.add("hide");this.querySelector("#selectmessage").textContent=K.NO_ACTIVITIES;this.spinner.hide();break;case 410:if(this.isWebInWin){if(window.dscef){window.dscef.sendString("JobMovedToMCS",this.eedjobId)}}this.fire("appmessage",{level:"error",message:"Parameter history is not available from jobs executed using older releases of Performance Study (prior to 17X). You can use Results Analytics to view the parameter history from this job."});C.call(this);break;default:C.call(this);break}}.bind(this);W.send()},P=function(){if(!this.eedjobId||!this.selectedActivityPath||this.startTime===undefined||!this.isHistoryCallComplete){return}if(this.selectedActivity&&(this.selectedActivity.indexOf("SEE-")>-1)){this.getResultsFromSEE();return}var X=this.$.eedBaseURL.getValue()+"/job/"+this.eedjobId+"/results?comppath="+encodeURIComponent(this.selectedActivityPath)+"&start="+this.startTime,W=new XMLHttpRequest();if(this.spinner){this.spinner.show()}W.open("GET",X,true);W.setRequestHeader("Content-Type","text/VEN-3DS-COS-tsv");W.setRequestHeader("EEDTicket",this.eedTicket);W.onreadystatechange=function(){if(W.readyState!==4){this.isHistoryCallComplete=false;return}this.isHistoryCallComplete=true;switch(W.status){case 200:Polymer.dom(Polymer.dom(this.root).querySelector("#selectmessage")).textContent="";this.parseParameterHistory(W.responseText);break;case 401:this.spinner.hide();this.$.summaryTimer.stop();this.$.historyTimer.stop();break;case 500:this.spinner.hide();if(W.responseText.indexOf("No such file or ")>-1){var Y=K.COSFAILED+W.responseText;alert(Y)}else{this.$.historyTimer.stop()}break;case 403:case 410:default:C.call(this);this.spinner.hide();break}}.bind(this);W.send();this.isHistoryCallComplete=false},l=function(){if(!this.eedjobId||!this.selectedActivityPath){return}if(!this.isHistorySeeCallComplete){return}var W="";this.httpResultsFromSEE=new XMLHttpRequest();var X=1;if(this.lastIndex){X=this.lastIndex+1}W=this.$.seeBaseURL.getValue()+"/job/paramhistory?jobid="+this.seeJobId+"&comppath="+encodeURIComponent(this.selectedActivityPath)+"&fromindex="+X;this.spinner.show();this.httpResultsFromSEE.open("GET",W,true);var aa=JSON.parse(sessionStorage.getItem("IsightPwd"));var Y=this.$.spEncryption.decryptAESCBC(aa.cipher_text,"ENCYPTION2345",aa.salt,aa.iv);var Z=sessionStorage.getItem("isightV5User");this.httpResultsFromSEE.setRequestHeader("Authorization","Basic "+btoa(Z+":"+Y));this.httpResultsFromSEE.onreadystatechange=function(){if(this.httpResultsFromSEE.readyState!==4){this.isHistorySeeCallComplete=false;return}this.isHistorySeeCallComplete=true;switch(this.httpResultsFromSEE.status){case 200:Polymer.dom(Polymer.dom(this.root).querySelector("#selectmessage")).textContent="";this.parseSEEParameterHistory(this.httpResultsFromSEE.responseText);break;case 401:this.$.IsightUserPwd.show();this.$.seeHistoryTimer.stop();break;case 500:this.spinner.hide();if(this.httpResultsFromSEE.responseText.indexOf("No such file or ")>-1){var ab=K.COSFAILED+this.httpResultsFromSEE.responseText;alert(ab)}else{this.$.historyTimer.stop()}break;case 403:case 410:default:C.call(this);this.spinner.hide();break}}.bind(this);this.httpResultsFromSEE.send();this.isHistorySeeCallComplete=false},m=function(Z){var W=[];for(var Y=0;Y<Z.length;Y++){var X=Z[Y]["Design Feasibility"];if(X==="9"||X==="3"){W.push(Z[Y])}}return W},T=function(ab){if(this.isFrameLoaded){if(!ab){if(this.history){ab=this.history}}if(this.userSelection&&this.userSelection.length>0){ab.columns=[];for(var W=0;W<this.columns.length;W+=1){var X=this.columns[W].dataIndex;var Z=false;for(var Y=0;Y<this.userSelection.length;Y+=1){if(this.userSelection[Y].name===X){Z=true;if(this.userSelection[Y].isSelected){ab.columns.push(this.columns[W])}}}if(!Z){ab.columns.push(this.columns[W])}}}else{ab.columns=this.columns}if(this.showImprovments){var aa=m.call(this,ab.data);ab.data=aa}ab.height="auto";ab.jobExecutionStatus=this.jobExecutionStatus;ab.selectedActivityPath=this.selectedActivityPath;ab.userSelection=this.userSelection;ab.showImprovments=this.showImprovments;ab.isWebInWin=this.isWebInWin;if(this.$.paramHistory&&this.$.paramHistory.contentWindow){this.$.paramHistory.contentWindow.postMessage({type:"add",data:ab},"*")}}else{this.loadGrid=true;if(ab){this.history=ab}}},M=function(Y){var X=[];for(var W=0;W<Y.length;W++){if(Y[W].STATUS!==undefined){X.push(Y[W])}}return X},a=function(W){var Z,Y={},X;this.response=W;X=O.getProxifiedWebappsBaseUrl()===null?O.getWebappsBaseUrl():O.getProxifiedWebappsBaseUrl();Z=new window.Worker(X+"SMAProcPSUI/ps-parameter-history/parser.js");Z.addEventListener("message",function(aj){this.spinner.hide();this.startTime=aj.data.jobData.snap;if(!this.startTime){this.$.historyTimer.stop()}if(aj.data.parameterValues&&aj.data.parameterValues.length>0){aj.data.parameterValues=this.getStatusCompletedRows(aj.data.parameterValues)}if(aj.data.parameterValues&&aj.data.parameterValues.length>0){this.querySelector("#selectmessage").textContent="";for(var af=0;af<aj.data.parameterNames.length;af++){var am=aj.data.parameterNames[af].dataIndex+".IN";var ad=false;for(var ae=0;ae<aj.data.parameterNames.length;ae++){if(am===aj.data.parameterNames[ae].dataIndex){ad=true;break}}if(ad){aj.data.parameterNames[af].dataIndex=aj.data.parameterNames[af].dataIndex+".OUT";for(var ah=0;ah<aj.data.parameterValues.length;ah+=1){aj.data.parameterValues[ah][aj.data.parameterNames[af].text+".OUT"]=aj.data.parameterValues[ah][aj.data.parameterNames[af].text]}aj.data.parameterNames[af].text=aj.data.parameterNames[af].text+".OUT"}}Y.columns=aj.data.parameterNames;Y.data=aj.data.parameterValues;if(!this.data){this.data=[]}if(!this.columns){this.columns=[]}this.columns=aj.data.parameterNames;for(var af=0;af<aj.data.parameterTypes.length;af+=1){this.columns[af].type=aj.data.parameterTypes[af]}var ac=[];this.columns.forEach(function(an){if(an.type!=="PLMOBJECT"){ac.push(an)}});this.columns=ac;this.data=this.data.concat(aj.data.parameterValues);for(var ai=0;ai<this.columns.length;ai+=1){for(var af=0;af<this.parameterList.length;af+=1){if(this.parameterList[af].name===this.columns[ai].text){var ak=this.parameterList[af].type;if(ak==="real"||ak==="integer"){this.columns[ai].valuetype=this.parameterList[af].valuetype;this.columns[ai].arraydim=this.parameterList[af].arraydim;this.columns[ai].mode=this.parameterList[af].mode;break}}}}var al=localStorage.getItem("showPSPlots");if(al==="true"&&!this.plotSettingChanged){this.userPlotSelection=[];for(var af=0;af<this.columns.length;af+=1){if((this.columns[af].dataIndex==="STATUS"||this.columns[af].dataIndex==="RUN ID")&&af<2){continue}var ag=this.columns[af].mode?this.columns[af].mode:"output";var ab=false;if(ag==="output"||ag==="both"){ab=true}this.userPlotSelection.push({name:this.columns[af].dataIndex,mode:ag,isSelected:ab})}var aa=false;if(this.userPlotSelection&&this.userPlotSelection.length>0){for(var ai=0;ai<this.userPlotSelection.length;ai+=1){if(!this.userPlotSelection[ai].isSelected){aa=true;break}}}if(aa){this.$.filterbutton.classList.add("select-color")}else{this.$.filterbutton.classList.remove("select-color")}}if(Y.data.length>0){if(this.view==="Table"){T.call(this,Y)}else{if(this.view==="Graph"){T.call(this,Y);this.loadXYPlot(Y)}else{T.call(this,Y);this.loadXYPlot(Y)}}}this.querySelector("#buttonWrapper").style.display="inline"}else{if(this.data.length===0){this.querySelector("#buttonWrapper").style.display="none";this.hideGraph();if(B(this.jobExecutionStatus)){this.querySelector("#selectmessage").textContent=K.NO_RECORDS_COMPLETED}else{this.querySelector("#selectmessage").textContent=K.NO_RECORDS}}}}.bind(this),false);Z.postMessage(W)},g=function(an){this.spinner.hide();var ae={};var az=JSON.parse(an);if(!az.paramhistory){if(this.data.length===0){this.querySelector("#selectmessage").textContent=K.NO_RECORDS}return}try{this.querySelector("#selectmessage").textContent="";this.response=az.paramhistory.values;var aE={};var aw=[];var ac=[];var at=false;aE.parameterNames=[];aE.parameterTypes=[];ac.push({dataIndex:"RUN ID",text:"RUN ID",type:"STRING",issubf:1});aw=Object.keys(az.paramhistory.vars);for(var aB=0;aB<aw.length;aB++){var af=az.paramhistory.vars[aw[aB]].name;var W=az.paramhistory.vars[aw[aB]].varid;var aG=null;var Z=az.paramhistory.vars[aw[aB]].mode;var ai=az.paramhistory.vars[aw[aB]].issubf;var ab=null;switch(az.paramhistory.vars[aw[aB]].type){case"com.engineous.datatype.Integer":aG="INT";break;case"com.engineous.datatype.Real":aG="REAL";break;default:aG="STRING"}switch(Z){case 1:ab="input";break;case 2:ab="output";break;case 3:ab="both";break;case 4:ab="none";break;default:ab="none"}var X=false;for(var aA=0;aA<ac.length;aA+=1){if(ac[aA].varid===W){X=true;if(ai!==ac[aA].issubf){at=true}break}}if(X){if(ab==="both"){ac[aA].mode=ab;ac[aA].modeInt=Z;ac[aA].text=af;ac[aA].dataIndex=af;ac[aA].type=aG;ac[aA].varid=W;ac[aA].issubf=ai}}else{if(af!=="Run #"){ac.push({dataIndex:af,text:af,type:aG,mode:ab,varid:W,modeInt:Z,issubf:ai})}}}if(at){for(var aA=0;aA<ac.length;aA+=1){if(ac[aA].issubf===1){aE.parameterNames.push(ac[aA])}}}else{aE.parameterNames=ac}aE.parameterNames.sort(function(aJ,aI){var aK=aJ.modeInt;var aH=aI.modeInt;if(aK===2||aH===2){if(aK===aH){return 0}else{if(aK===2){return 1}else{if(aH===2){return 0}}}}else{if(aK===4||aH===4){if(aK===aH){return 0}else{if(aK===4){return 0}else{if(aH===4){return -1}}}}else{if(aK===1||aH===1){if(aK===aH){return 0}else{if(aK===1){return 0}else{if(aH===1){return -1}}}}}}if(aK===3||aH===3){if(aK===aH){return 0}else{if(aK===2){return 0}else{if(aH===2){return -1}}}}return parseInt(aJ.modeInt)-parseInt(aI.modeInt)});this.parameterList=aE.parameterNames.slice(0);var ak={};ak.ActPath=az.paramhistory.comppath;var ad=new Map();for(var aB=0;aB<az.paramhistory.values.length;aB++){var aj=az.paramhistory.values[aB];var ap=aj[1];var av=ad.get(ap);var ax="";if(aj[2] instanceof Object){for(var al in aj[2]){if(aj[2].hasOwnProperty(al)){ax=ax+aj[2][al]+","}}ax=ax.substring(0,(ax.length-1))}else{ax=aj[2]}var ag,aF;if(typeof(av)!=="undefined"){ag=aj[0];aF=az.paramhistory.vars[ag];av[aF.name]=ax;av["RUN ID"]=ap;ad.set(ap,av)}else{ag=aj[0];aF=az.paramhistory.vars[ag];var ah={};ah[aF.name]=ax;ah["RUN ID"]=ap;ad.set(ap,ah)}}var ar=[];var au=function(aH){this.push(aH)};ad.forEach(au.bind(ar));ar.sort(function aa(aI,aH){var aM=aI["RUN ID"].split(".");var aK=aH["RUN ID"].split(".");for(var aJ=0;aJ<aM.length;aJ+=1){var aN=Number(aM[aJ]);var aL=Number(aK[aJ]);if(aN===aL){continue}if(aN<aL){return -1}if(aN>aL){return 1}}return 0});this.lastIndex=az.paramhistory.toindex;ae.columns=aE.parameterNames;this.columns=aE.parameterNames;if(this.data&&this.data.length>0&&ar){var aC=this.data[this.data.length-1];var ao=ar[0];if(aC["RUN ID"]===ao["RUN ID"]){Object.assign(ao,aC);this.data[this.data.length-1]=aC;ar[0]=ao}}var ay=null;var Y=null;if(at){for(var aB=0;aB<ar.length;aB+=1){var aq=ar[aB]["RUN ID"];var am=aq.split(".").length;if(!ay){Y=am;ay=am}else{if(am>ay){Y=am}else{if(ay>am){Y=ay;ay=am}}}}}if(Y>ay){for(var aB=0;aB<ar.length;aB+=1){var aq=ar[aB]["RUN ID"];var am=aq.split(".").length;if(am===ay){ar.splice(aB,1);aB=aB-1}}}ae.data=ar;if(!this.data){this.data=[]}if(!this.columns){this.columns=[]}this.columns=aE.parameterNames;this.data=this.data.concat(ar);if(ae.data.length>0){if(this.view==="Table"){T.call(this,ae)}else{if(this.view==="Graph"){this.loadXYPlot(ae)}else{T.call(this,ae);this.loadXYPlot(ae)}}}}catch(aD){alert(aD)}},F=function(){this.$.historyTimer.stop();this.$.seeHistoryTimer.stop();if(this.jobObjectId!==undefined&&this.jobObjectId!==""){if(x(this.jobExecutionStatus)){this.$.seeHistoryTimer.start()}}},u=function(Y){var W;if(Y){if(this.activityList&&this.activityList.length>0){for(var X=0;X<this.activityList.length;X+=1){if(this.activityList[X].internalId.toUpperCase()===Y.toUpperCase()){W=this.activityList[X].objectId}}}if(W){this.$.SMAParameter.uri=this.$.mcsBaseURL.getValue()+"/resources/e6w/service/SMA_Parameter?objectId="+W;this.$.SMAParameter.getData()}}},b=function(){S.call(this,true);try{this.$.psXYPlot.clearXYPlot()}catch(W){}},h=function(Y,Z,X){this.showImprovments=false;this.userSelection=[];this.$.historyTimer.stop();var W=localStorage.getItem("showPSPlots");if(W==="false"){if(!this.$.psXYPlot.classList.contains("hide")){this.$.psXYPlot.classList.add("hide")}}this.$.seeHistoryTimer.stop();if(Y&&(Y!==this.selectedActivity)||(Y===this.selectedActivity&&X!==this.selectedActivitySequence)){try{if(this.httpResultsFromSEE){this.httpResultsFromSEE.abort()}if(this.httpCompPathList){this.httpCompPathList.abort()}}catch(aa){}this.plotSettingChanged=false;this.isHistorySeeCallComplete=true;this.isHistoryCallComplete=true;this.lastIndex=0;this.querySelector("#selectActivity").classList.add("hide");this.destroyParamFilter();this.selectedActivity=Y;this.selectedActivityPath=Z;this.selectedActivitySequence=X;b.call(this);this.data=[];this.startTime=0;if(this.selectedActivitySequence){u.call(this,this.selectedActivitySequence)}if(Y.indexOf("SEE-")===-1){V.call(this)}else{F.call(this)}}else{if(this.selectedActivity&&this.selectedActivity.length===0){this.querySelector("#selectActivity").classList.remove("hide")}}setTimeout(function(){t.call(this)}.bind(this),2000)},R=function(Y){var X=Polymer.dom(Y).localTarget.label,W=Polymer.dom(Y).localTarget.dataInternalid,Z=Polymer.dom(Y).localTarget.value;if(X&&W&&Z){this.getParamHistory(X,Z,W)}},z=function(W){var aa=W.detail.response,ah=aa.datarecords.datagroups,ad=0;this.parameterList=[];for(ad;ad<ah.length;ad+=1){var X=ah[ad].dataelements.name.value[0].value,ac=ah[ad].dataelements.mode.value[0]?ah[ad].dataelements.mode.value[0].value:"none",ae=ah[ad].dataelements.type.value[0]?ah[ad].dataelements.type.value[0].value:"",ai=ah[ad].dataelements.valuetype.value[0]?ah[ad].dataelements.valuetype.value[0].value:"",ag=ah[ad].dataelements.arraydim.value[0]?ah[ad].dataelements.arraydim.value[0].value:"";this.parameterList.push({name:X,mode:ac,type:ae,valuetype:ai,arraydim:ag})}var af=localStorage.getItem("showPSPlots");if(af==="true"&&!this.plotSettingChanged){this.userPlotSelection=[];for(var ab=0;ab<this.columns.length;ab+=1){if((this.columns[ab].dataIndex==="STATUS"||this.columns[ab].dataIndex==="RUN ID")&&ab<2){continue}var ac=this.columns[ab].mode?this.columns[ab].mode:"output";var Z=false;if(ac==="output"||ac==="both"){Z=true}this.userPlotSelection.push({name:this.columns[ab].dataIndex,mode:ac,isSelected:Z})}var Y=false;if(this.userPlotSelection&&this.userPlotSelection.length>0){for(var ad=0;ad<this.userPlotSelection.length;ad+=1){if(!this.userPlotSelection[ad].isSelected){Y=true;break}}}if(Y){this.$.filterbutton.classList.add("select-color")}else{this.$.filterbutton.classList.remove("select-color")}setTimeout(function(){t.call(this)}.bind(this),2000)}},i=function(){if(this.view==="Graph"||this.view==="Table and Graphs"){var W={columns:this.columns,data:this.data,viewChange:true};this.loadXYPlot(W)}else{if(this.view==="Table"){this.$.psXYPlot.hidePlot()}}},j=function(){this.$.eedBaseURL.setValue(this.eedBaseURL)},A=function(){this.seeJobId=null;this.destroyParamFilter();this.resetInterval();this.view="Table";if(this.$.paramHistory.classList.contains("hide")){this.$.paramHistory.classList.remove("hide");this.$.tablebutton.classList.add("select-color")}this.response="";this.showImprovments=false;this.selectedActivity="";b.call(this);this.activityListView=[];this.selectedActivityPath="";this.selectedActivitySequence="";this.data=[];this.column=[];this.fetchFirstJobLog=true;if(this.spinner){this.spinner.show()}this.isHistorySeeCallComplete=true;this.isHistoryCallComplete=true;try{if(this.httpResultsFromSEE){this.httpResultsFromSEE.abort()}if(this.httpCompPathList){this.httpCompPathList.abort()}}catch(W){}this.querySelector("#header").classList.add("hide");this.$.selectmessage.textContent="";if(this.querySelector("#selectActivity")){this.querySelector("#selectActivity").classList.remove("hide")}},e=function(){var X="";this.resetInterval();var W=this.$.selectActivity.className.split(" ");var Y=W.map(function(Z){return Z==="hide"});this.querySelector("#activitiesListButton").classList.remove("hide");if((Y.indexOf(true)===-1)){this.hideGraph()}if(x(this.jobExecutionStatus)&&this.jobExecutionStatus!=="Paused"){this.$.cosTicketTimer.start()}else{if(this.jobExecutionStatus==="Paused"){s.call(this)}else{if(B(this.jobExecutionStatus)&&this.response.length===0||this.partialData){if(!this.partialData){this.querySelector("#selectActivity").classList.remove("hide")}this.partialData=false;this.$.cosTicketTimer.start();this.$.SMAProcess.getData()}else{if(["Initializing","Started","NotStarted"].indexOf(this.jobExecutionStatus)!==-1){if(this.jobExecutionStatus==="NotStarted"){X=K.NOTSTARTED}else{X=K.INITIALIZING}Polymer.dom(Polymer.dom(this.root).querySelector("#custommessage")).textContent=X}else{if(this.jobExecutionStatus===undefined||this.jobExecutionStatus===null||this.jobExecutionStatus===""){X=K.NOJOB;Polymer.dom(Polymer.dom(this.root).querySelector("#custommessage")).textContent=X;this.spinner.hide()}else{if(B(this.jobExecutionStatus)&&this.data.length===0){X=K.NO_RECORDS_COMPLETED;Polymer.dom(Polymer.dom(this.root).querySelector("#selectmessage")).textContent=X}else{}}}}}}if(this.simId&&this.simId.length>0){if(this.isWebInWin||x(this.jobExecutionStatus)){this.$.SMAProcess.getData()}}},q=function(){var W;W=this.DOM(this).find("#activitiesList").elements()[0];W.visible=true},d=function(){var W;W=this.DOM(this).find("#activitiesList").elements()[0];W.visible=true},U=function(){var W;W=this.DOM(this).find("#viewList").elements()[0];W.visible=true};window.PSParameterHistory=window.Polymer({is:"ps-parameter-history",behaviors:[DS.SMAProcSP.SPBase],hostAttributes:{draggable:"false"},properties:{eedBaseURL:{notify:true,observer:"eedBaseURLChanged"},response:{type:String,value:"",notify:true},eedjobId:{type:String,value:"",notify:true},jobExecutionStatus:{notify:true,observer:"jobExecutionStatusChanged"},jobObjectId:{notify:true,observer:"jobChanged"},cosServerId:{type:String,value:""},selectedActivity:{type:String,value:"",notify:true},selectedActivityPath:{type:String,value:"",notify:true},selectedActivitySequence:{type:String,value:"",notify:true},simId:{notify:true,value:"",observer:"processChanged"},height:{type:Number,value:null},isWebInWin:{type:Boolean,value:false},stretch:{type:Boolean,value:false}},attached:function(){this._categoryMessages={processDataFail:"MESSAGE02"}},generateActivityList:function(){var W;if(this.summary[0]){W=this.summary[0].WorkItemSummaries}else{W=this.summary.JobInfo&&this.summary.JobInfo.JobSummary}if(this.activityList.length>0&&W){D.call(this)}},showActivityList:function(){return d.apply(this,arguments)},showViewList:function(){return U.apply(this,arguments)},ready:function(){return f.apply(this,arguments)},onItemSelect:function(){return R.apply(this,arguments)},getParamHistory:function(){return h.apply(this,arguments)},onViewChange:function(){return i.apply(this,arguments)},getResultsFromEED:function(){return P.apply(this,arguments)},getResultsFromSEE:function(){return l.apply(this,arguments)},jobExecutionStatusChanged:function(){return Q.apply(this,arguments)},refreshParamHistory:function(){return P.apply(this,arguments)},showFilterMenu:function(){return q.apply(this,arguments)},downloadParamHistory:function(){var ab=[];if(this.userSelection&&this.userSelection.length>0){var ac={};for(var aa=0;aa<this.data.length;aa++){ac={};for(var Y=0;Y<this.userSelection.length;Y++){ac["RUN ID"]=this.data[aa]["RUN ID"];if(this.data[aa].STATUS){ac.STATUS=this.data[aa].STATUS}if(this.data[aa]["RUN TYPE"]){ac["RUN TYPE"]=this.data[aa]["RUN TYPE"]}if(this.userSelection[Y].isSelected){var X=this.userSelection[Y].name;ac[X]=this.data[aa][X]}}ab.push(ac)}}else{ab=this.data}var ad=new Date(),W=this.selectedActivity+"_"+ad.getTime(),Z=this.$.CsvExpFrame;require(["DS/SMAProcSPUI/Utilities/ExportToExcel"],function(af){var ae={data:ab,filename:W,CsvExpFrame:Z};af.exportToExcel(ae)})},eedBaseURLChanged:function(){return j.apply(this,arguments)},showError:function(W){alert(W)},getStatusCompletedRows:function(){return M.apply(this,arguments)},parseParameterHistory:function(){return a.apply(this,arguments)},jobChanged:function(){return A.apply(this,arguments)},processChanged:function(){return A.apply(this,arguments)},startInterval:function(){return e.apply(this,arguments)},setEEDTicket:function(){return N.apply(this,arguments)},onHistoryTimerTick:function(){return P.apply(this,arguments)},onSeeHistoryTimerTick:function(){return l.apply(this,arguments)},onSummaryTick:function(){return J.apply(this,arguments)},onEEDTicketTimerTick:function(){return s.apply(this,arguments)},resetInterval:function(){return C.apply(this,arguments)},_computeUri:function(W){return"cos/ticket?physicalid="+W},_computeSMAProcessUri:function(W){return this.$.mcsBaseURL.getValue()+"/resources/e6w/service/SMA_Process?objectId="+W},setActivityParameterData:function(){return z.apply(this,arguments)},setSEEURLData:function(){return o.apply(this,arguments)},setCompPathList:function(){return y.apply(this,arguments)},onSEEJobIdWSReady:function(){return k.apply(this,arguments)},onCompathTimerTk:function(){return n.apply(this,arguments)},getSEEJobId:function(){return L.apply(this,arguments)},parseSEEParameterHistory:function(){return g.apply(this,arguments)},setActivityData:function(W){var ae;if(!W.detail.response.success){return false}var Y=W.detail.response,ad=Y.datarecords.datagroups,Z=0;this.activityList=[];for(Z;Z<ad.length;Z+=1){var X=ad[Z].busType;if(X==="Simulation Activity"){var ab=ad[Z].objectId;var ac=ad[Z].dataelements.title.value[0].value;var aa=ad[Z].dataelements.internalId.value[0].value;this.activityList.push({objectId:ab,title:ac,internalId:aa})}}if(B(this.jobExecutionStatus)){this.onSummaryTick()}else{this.$.summaryTimer.start()}},showNotification:function(Y){var X,W,Z={};Z.text=Y.message;Z.type=Y.level;X=Y.category;if(X&&X.length>0){W=this._categoryMessages[X];if(W){W=this.$.historyNotification.logMessage(Z,W)}else{this.$.historyNotification.logMessage(Z)}this._categoryMessages[X]=W}else{this.$.historyNotification.logMessage(Z)}},_computeClassSelectAct:function(W,X){if(this.isWebInWin||x(X)||B(X)||W.length>0){return"showHeader"}else{return"hide"}},_computeClassRefresh:function(X,W,Y){if(W.length>0&&X.length>0&&x(Y)){return"header-button fonticon  fonticon-cw showHeader"}else{return"hide"}},_computeClassImprovment:function(X,W,Z){if(W.length>0&&X.length>0&&Z){var Y=Z.filter(function(aa){return aa.text==="Design Feasibility"});if(Y.length>0){if(this.showImprovments){return"header-button fonticon fonticon-check showHeader select-color"}else{return"header-button fonticon fonticon-check showHeader"}}else{return"hide"}}else{return"hide"}},_computeClassDownload:function(X,W){if(W.length>0&&X.length>0){return"header-button fonticon fonticon-download showHeader"}else{return"hide"}},_computeClassFilter:function(X,W){var Z=false;if(this.userSelection&&this.userSelection.length>0){for(var Y=0;Y<this.userSelection.length;Y+=1){if(!this.userSelection[Y].isSelected){Z=true;break}}}var aa=false;if(this.userPlotSelection&&this.userPlotSelection.length>0){for(var Y=0;Y<this.userPlotSelection.length;Y+=1){if(!this.userPlotSelection[Y].isSelected){aa=true;break}}}if(W.length>0&&X.length>0){if(Z||aa){return"header-button fonticon fonticon-filter showHeader select-color"}else{return"header-button fonticon fonticon-filter showHeader"}}else{return"hide"}},_computeClassTable:function(Y,X){var W=localStorage.getItem("showPSPlots");if(W==="true"&&X.length>0&&Y.length>0){if(this.view==="Table"||this.view==="Table and Graphs"){return"header-button fonticon fonticon-list showHeader select-color"}else{return"header-button fonticon fonticon-list showHeader"}}else{return"hide"}},_computeClassGraph:function(Y,X){var W=localStorage.getItem("showPSPlots");if(W==="true"&&X.length>0&&Y.length>0){if(this.view==="Graph"||this.view==="Table and Graphs"){return"header-button fonticon fonticon-chart-line showHeader select-color"}else{return"header-button fonticon fonticon-chart-line showHeader"}}else{return"hide"}},toggleTable:function(){if(this.view==="Table"){return}else{if(this.view==="Table and Graphs"){this.view="Graph";this.$.paramHistory.classList.add("hide");this.$.tablebutton.classList.remove("select-color");this.$.psXYPlot.clearXYPlot();this.$.psXYPlot.removePlotHeight()}else{if(this.view==="Graph"){this.view="Table and Graphs";this.$.tablebutton.classList.add("select-color");this.$.paramHistory.classList.remove("hide");this.$.psXYPlot.clearXYPlot();this.$.psXYPlot.setPlotHeight("200");t.call(this)}}}this.onViewChange()},toggleGraph:function(){if(this.view==="Table"){this.view="Table and Graphs";t.call(this);this.$.psXYPlot.classList.remove("hide");this.$.plotbutton.classList.add("select-color")}else{if(this.view==="Table and Graphs"){this.view="Table";t.call(this);this.$.psXYPlot.clearXYPlot();this.$.psXYPlot.classList.add("hide");this.$.plotbutton.classList.remove("select-color")}else{if(this.view==="Graph"){return}}}this.onViewChange()},hideGraph:function(){this.view="Table";t.call(this);this.$.psXYPlot.classList.add("hide");this.$.plotbutton.classList.remove("select-color")},savePasswords:function(){var Y=this.$.IsightUserPwd.querySelectorAll("[credential]");var Z=Y[0].value;var X=Y[1].value;if(X){var W=this.$.spEncryption.encryptAESCBC(X,"ENCYPTION2345");sessionStorage.setItem("IsightPwd",JSON.stringify(W));sessionStorage.setItem("isightV5User",Z)}this.$.seeJobIdTimer.start();this.$.seeCompPathTimer.start();this.$.IsightUserPwd.hide()},destroyParamFilter:function(){var W=localStorage.getItem("showPSPlots");try{this.userSelection=[];if(W!=="true"){if(this.TableFilter){this.TableFilter.destroy();this.TableFilter=null}if(this.elements&&this.elements.body){this.elements.body.empty()}}else{this.userPlotSelection=[];if(this.modalPlotFilter){this.modalPlotFilter.destroy();this.modalPlotFilter=null}if(this.modalTableFilter){this.modalTableFilter.destroy();this.modalTableFilter=null}if(this.tableElements&&this.tableElements.body){this.tableElements.body.empty()}if(this.plotElements&&this.plotElements.body){this.plotElements.body.empty()}}}catch(X){window.console.log(X)}this.hideFilter()},hideParamFilter:function(){if(this.TableFilter){this.TableFilter.clearSelectedMode();this.TableFilter.setSelection(this.userSelection)}this.hideFilter()},hideFilter:function(){var W=localStorage.getItem("showPSPlots");if(W!=="true"){this.$.filterParameterModal.hide()}else{this.$.filterModal.hide()}},hideFilterModel:function(){if(this.modalTableFilter){this.modalTableFilter.clearSelectedMode();this.modalTableFilter.setSelection(this.userSelection)}if(this.modalPlotFilter){this.modalPlotFilter.clearSelectedMode();this.modalPlotFilter.setSelection(this.userPlotSelection)}this.hideFilter()},createParamFilter:function(W,X,ab){for(var ae=0;ae<this.columns.length;ae+=1){var aa=this.columns[ae].dataIndex;for(var ac=0;ac<this.parameterList.length;ac+=1){var Y=this.parameterList[ac].name;if(aa==="RUN ID"||aa==="STATUS"){this.columns[ae].mode="none"}else{if(aa.endsWith(".IN")){this.columns[ae].mode="input"}else{if(aa.endsWith(".OUT")){this.columns[ae].mode="output"}else{if(aa===Y){var af=this.parameterList[ac].mode;this.columns[ae].mode=af;break}}}}}}var ad=[];for(var ae=0;ae<this.columns.length;ae+=1){if((this.columns[ae].dataIndex==="STATUS"||this.columns[ae].dataIndex==="RUN ID")&&ae<2){continue}ad.push({name:this.columns[ae].dataIndex,mode:this.columns[ae].mode?this.columns[ae].mode:"output"})}var Z=new p({container:W.body,toolbarDiv:W.toolbar,data:ad,topPadding:X,selectAll:ab});return Z},showParamFilter:function(){var af=localStorage.getItem("showPSPlots");if(af!=="true"){this.$.filterParameterModal.show();if(!this.TableFilter){var W=this.elements={};this.elements.container=c.extendElement(Polymer.dom(this.root).querySelector(".filter-optn-modal"));this.elements.body=W.container.getElement(".spreadsheet-body");this.elements.toolbar=W.container.getElement(".toolbarOuter");this.TableFilter=this.createParamFilter(this.elements,"90px",true)}}else{this.$.filterModal.show();if(!this.modalTableFilter){var ae=this.tableElements={};this.tableElements.container=c.extendElement(Polymer.dom(this.root).querySelector("#tableFilter"));this.tableElements.body=ae.container.getElement(".spreadsheet-body");this.tableElements.toolbar=ae.container.getElement(".toolbarOuter");this.modalTableFilter=this.createParamFilter(this.tableElements,"140px",true)}if(!this.modalPlotFilter){var ad=this.plotElements={};this.plotElements.container=c.extendElement(Polymer.dom(this.root).querySelector("#plotsFilter"));this.plotElements.body=ad.container.getElement(".spreadsheet-body");this.plotElements.toolbar=ad.container.getElement(".toolbarOuter");this.modalPlotFilter=this.createParamFilter(this.plotElements,"140px",false);var af=localStorage.getItem("showPSPlots");if(af==="true"&&!this.plotSettingChanged){this.userPlotSelection=[];for(var Z=0;Z<this.columns.length;Z+=1){if((this.columns[Z].dataIndex==="STATUS"||this.columns[Z].dataIndex==="RUN ID")&&Z<2){continue}var aa=this.columns[Z].mode?this.columns[Z].mode:"output";var Y=false;if(aa==="output"||aa==="both"){Y=true}this.userPlotSelection.push({name:this.columns[Z].dataIndex,mode:aa,isSelected:Y})}var X=false;if(this.userPlotSelection&&this.userPlotSelection.length>0){for(var ac=0;ac<this.userPlotSelection.length;ac+=1){if(!this.userPlotSelection[ac].isSelected){X=true;break}}}if(X){this.$.filterbutton.classList.add("select-color")}else{this.$.filterbutton.classList.remove("select-color")}}if(!this.plotSettingChanged){var ab=this;this.modalPlotFilter.spreadsheet.addEventOnce("filterready",function(){ab.modalPlotFilter.setSelection(ab.userPlotSelection)})}}}},toggleColumns:function(){var aa=0;var X=localStorage.getItem("showPSPlots");this.hideFilter();if(X!=="true"){if(this.TableFilter){this.userSelection=this.TableFilter.getSelection();var Z=false;for(var aa=0;aa<this.userSelection.length;aa+=1){if(!this.userSelection[aa].isSelected){Z=true;break}}if(Z){this.$.filterbutton.classList.add("select-color")}else{this.$.filterbutton.classList.remove("select-color")}S.call(this,false);var ad={data:this.data,userSelection:this.userSelection};T.call(this,ad);if(this.view==="Graph"||this.view==="Table and Graphs"){this.$.psXYPlot.managePlots(ad)}}}else{if(this.modalTableFilter&&this.modalPlotFilter){this.userSelection=this.modalTableFilter.getSelection();var Y=this.modalPlotFilter.getSelection();for(aa=0;aa<this.userSelection.length;aa+=1){if(this.userPlotSelection[aa].isSelected!==Y[aa].isSelected){this.plotSettingChanged=true;break}}if(this.modalPlotFilter.hasOwnProperty("nodeRendered")){this.userPlotSelection=Y}var ac=false;for(aa=0;aa<this.userSelection.length;aa+=1){if(!this.userSelection[aa].isSelected){ac=true;break}}var ab=false;for(aa=0;aa<this.userPlotSelection.length;aa+=1){if(!this.userPlotSelection[aa].isSelected){ab=true;break}}if(ac||ab){this.$.filterbutton.classList.add("select-color")}else{this.$.filterbutton.classList.remove("select-color")}S.call(this,false);var ad={data:this.data,userSelection:this.userSelection};T.call(this,ad);var W={data:this.data,userSelection:this.userPlotSelection};if(this.view==="Graph"||this.view==="Table and Graphs"){setTimeout(function(){t.call(this);this.$.psXYPlot.managePlots(W)}.bind(this),1000)}}}},filterHistory:function(){if(this.showImprovments){this.showImprovments=false}else{this.showImprovments=true}S.call(this,false);var W={data:this.data};if(this.showImprovments){this.$.improvementbutton.classList.add("select-color")}else{this.$.improvementbutton.classList.remove("select-color")}if(this.view==="Graph"){this.loadXYPlot(W)}else{if(this.view==="Table"){T.call(this,W)}else{if(this.view==="Table and Graphs"){T.call(this,W);this.loadXYPlot(W)}}}},loadXYPlot:function(ac){if(this.showImprovments){var ab=m.call(this,ac.data);ac.data=ab}ac.view=this.view;if(this.view==="Table and Graphs"){var W=this.querySelector("#historycontainer");if(W.classList.contains("historycontainer-vertical")){ac.height="auto"}else{ac.height="200px"}}ac.showImprovments=this.showImprovments;ac.columns=[];for(var X=0;X<this.columns.length;X+=1){var Z=false;for(var Y=0;Y<this.parameterList.length;Y+=1){if(this.parameterList[Y].name===this.columns[X].text){Z=true;var aa=this.parameterList[Y].type;if(aa==="real"||aa==="integer"){ac.columns.push(this.columns[X]);break}}}if(!Z){if(this.columns[X].text==="RUN ID"||this.columns[X].text==="STATUS"){ac.columns.push(this.columns[X])}else{if((this.columns[X].type.indexOf("INT")>-1)||(this.columns[X].type.indexOf("REAL")>-1)){ac.columns.push(this.columns[X])}}}}ac.selectedActivityPath=this.selectedActivityPath;ac.userSelection=this.userPlotSelection;this.$.psXYPlot.showPlot(ac)},_onIframeLoad:function(){this.isFrameLoaded=true;if(this.loadGrid){this.loadGrid=false;T.call(this)}}})});