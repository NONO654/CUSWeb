define("DS/SMAProcPSUI/Views/MultitextEditor",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input/Text","DS/UIKIT/Dropdown","css!DS/SMAProcPSUI/Views/MultitextEditor.css"],function(g,c,b,f,e,a){var d={name:"dropdown-menu",items:null,init:function(m){var n,j;this._parent(m);this.items=[];this.map=new Map();var k="\n";m.items=[];var o=m.value.toString().split(k);for(n=0;n<o.length;n++){m.items.push({text:o[n]})}if(!m.disabled){var p=new e({placeholder:"add new value",className:"inlineBlock widthEighty"});var h=g.createElement("span",{"class":"fonticon fonticon-plus-squared alignRight iconColorGreen",events:{click:this.addItemInList.bind(this,p)}});p.inject(this.elements.wrapper);h.inject(this.elements.wrapper)}if(m.items){for(n=0,j=m.items.length;n<j;n++){this.addItem(m.items[n])}}this._getMapValues()},buildSkeleton:function(){var i=g.createElement,j=this.elements,h=this.options;if(j.container){return}j.container=g.createElement("div",{"class":this.getClassNames(),html:h.body,events:{click:this.eventHandler.bind(this),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave")}});j.wrapper=i("ul",{"class":this.name+"-wrap"}).inject(j.container);if(h.target&&h.bound){this.events.target={click:this.toggle.bind(this)};h.target.addEvents(this.events.target)}delete h.body},addItem:function(h){var i=this;f.splat(h).forEach(function(j){i._addItem(j)});return this},removeItem:function(h){var i=this;f.splat(h).forEach(function(j){i._removeItem(j)});return this},enableItem:function(i){var h=this.getItem(i);h&&h.elements.container.removeClassName("disabled");return this},disableItem:function(i){var h=this.getItem(i);h&&h.elements.container.addClassName("disabled");return this},_addItem:function(i){var l=this.elements,h=i.className||"",k={};if(!i.text||i.text===""){return}if(!i.id&&i.id!==0&&!i.name){k.id=f.getUUID().substr(0,6)}if(!i.name){k.name=i.text}this.map.set(k.id,i.text||"");if(i.disabled){h+=" disabled"}var j=g.createElement("div",{});g.createElement("li",{"class":"item "+h+" inlineBlock widthEighty",text:i.text||""}).inject(j);if(!this.options.disabled){g.createElement("span",{"class":"fonticon fonticon-cancel-squared alignRight iconColor",events:{click:this.removeItemFromList.bind(this,k.id)}}).inject(j)}k.elements={container:j};if(i.id){k.elements.container.id=i.id}if(/header|divider/.test(i.className)){k.elements.container.removeClassName("item")}else{if(i.icon){k.elements.icon=g.createElement("div",{"class":"wux-icon wux-ui-fa"}).inject(k.elements.container,"top")}}k.elements.container.inject(l.wrapper);this.items.push(g.merge(k,i))},_removeItem:function(l){var k=this.getItem(l),i,j;var h=new Map();this.map.forEach(function(n,m){if(m!==l){h.set(m,n)}});this.map=h;if(k){i=this.items.indexOf(k);this.items.splice(i,1);for(j in k.elements){if(k.elements.hasOwnProperty(j)){c.destroy.call(k.elements[j])}}}},_getMapValues:function(){var h="";this.map.forEach(function(i){h=h+i+"\n"});if(h.length>0){h=h.substring(0,h.length-1)}if(this.valuestr&&this.valuestr!==h){}if(!this.valuestr){this.valuestr=h}return h},getItem:function(m){var j,h,k=false;for(j=0,h=this.items.length;j<h;j+=1){k=this.items[j];if(m&&m.nodeType&&(k.elements.container===m||k.elements.icon===m)){break}else{if(j===m||k.id===m||k.name===m){break}}k=false}return k},removeItemFromList:function(h){this._removeItem(h)},addItemInList:function(i){var h=i.getValue();this._addItem({text:h});i.setValue("")},eventHandler:function(j){var h=b.getElement(j),i;if(h){i=this.getItem(h);if(i&&!/header|divider|disabled/.test(i.className)){this.dispatchEvent("onClick",[j,i],this);if(g.is(i.handler,"function")){i.handler.call(this,j)}}}}};return a.extend(d)});