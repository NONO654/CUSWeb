define("DS/SMAProcPSUI/Collections/IOCollection",["UWA/Core","UWA/Utils","UWA/Class/Model","UWA/Class/Collection","UWA/Class/Options","DS/SMAProcPSUI/Models/IOModel","DS/SMAProcPSUI/Utils/HttpUtil"],function(g,d,i,h,e,a,f){function j(k,m){var l;if(k){l=k[m];if(g.is(l,"function")){l=l.call(k)}}return l}function b(l){var k=l.match(new RegExp("simulations/(.*)/iosummaryview"));if(k&&k.length&&k.length===2){return k[1]}return""}var c=h.extend(e,{init:function(k){k=k?g.clone(k,false):{};this.setOptions(k);this._parent(null,k)},setup:function(){this.model=a},save:function(w){var s=this,m,l,p;w=w?g.clone(w,false):{};if(w.parse===undefined){w.parse=true}w.method="update";m=w.onComplete;l=w.onFailure;w.onComplete=function(x){var z=x.response;if(typeof z!=="object"||z===null){return false}for(var y=0;y<z.length;y+=1){z[y].modelId=String(y)}if(!s.set(z,w)){return false}if(m){m(s,z,w)}return s.dispatchEvent("onSync",[s,z,w])};w.onFailure=function(x){if(l){l(x)}s.dispatchEvent("onError",[s,x,w])};w.alwaysCallback=function(){delete s._request};w.url=j(this,"url");var r=this.toJSON();var o=[];var u=null;for(var q=0;q<r.length;q+=1){var t=r[q].isModified;var k=r[q].level;if(k==="0"){u=r[q].objectId}if(t){var v=g.clone(r[q],true);v.level="0";v.objectId=u;o.push(v)}}try{w.physicalId=b(w.url)}catch(n){}w.data=JSON.stringify(o);p=this._request=f.put(w.url,w.data,w.onComplete,w.onFailure,w.alwaysCallback,w.physicalId);this.dispatchEvent("onRequest",[this,p,w]);return p},fetch:function(k){var n=this,o,l,m;k=k?g.clone(k,false):{};if(k.parse===undefined){k.parse=true}k.method="read";o=k.onComplete;k.onComplete=function(p){var r=p.response;var s=k.reset?"reset":"set";for(var q=0;q<r.length;q+=1){r[q].modelId=String(q)}n[s](r,k);if(o){o(n,r,k)}return n.dispatchEvent("onSync",[n,r,k])};l=k.onFailure;k.onFailure=function(p){if(l){l(p)}n.dispatchEvent("onError",[n,p,k])};k.alwaysCallback=function(){delete n._request};k.url=j(this,"url");m=this._request=f.get(k.url,undefined,k.onComplete,k.onFailure,k.alwaysCallback);this.dispatchEvent("onRequest",[this,m,k]);return m},destroy:function(){if(this._request){this._request.abort()}this._parent()}});return c});