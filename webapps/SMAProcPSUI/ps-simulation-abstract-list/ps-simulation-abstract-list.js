(function(Y){var F=Y.console,f,d,aa,T,D,q,N,ac,M,l,k,e,Z,J,n,U,c,m,a,v,s,B,H,I,r,ab,C,g,i,z,L,b,A,X,ae,G,t,W,E,Q,w,K,p,V,S,R,O=[],u,ag,ad;ag='You have selected simulation(s) with the Simulation Kind set to "adhoc". Performance Study can only run simulation(s) with the Simulation Kind set to "method".';u='You have selected simulation(s) with the Simulation Kind set to "adhoc". Performance Study can only open simulation(s) with the Simulation Kind set to "method" in Result Analytics.';ad="You have selected simulation(s) with no job. Please run simulation(s) before opening in Result Analytics";var h={compare:"comparesimulations",simulationdeleted:"simulationdeleted"};var j={active:"is-active",error:"is-error",visible:"is-visible"};var ah={owned:"Owned",all:"All",searched:"Custom"};var y={All:"Show all",Owned:"Show owned",Custom:"Show Custom"};var x={maxSimsListed:"maxSimsListed",simOwner:"simOwner"};var af=5;k=function(){this.set("settings.maxSims",this.settings.maxSims)};f=function(){var ai=O.length;while(ai-->0){O[ai].clearMultiselect()}};d=Y.DS.SMAProcSP.SPBase.WIN.openInWindow;aa=Y.DS.SMAProcSP.SPBase.JS.toQueryString;T=function(ai){return ai&&ai[0]&&ai[0].id};D=function(ai){return ai&&ai[0]&&ai[0].oid};M=function(aj,ak,ai){require(["DS/TransientWidget/TransientWidget"],function(al){al.showWidget(aj,ak,ai)})};e=function(){this.$.additionalMenu.visible=true};Z=function(){this.$.createProcessMenu.visible=true};c=function(){this.fire(h.compare,this.selecteditems)};a=function(){var ai="You are about to delete "+this.selecteditems.length+(this.selecteditems.length>1?" processes. ":" process. ")+"Do you want to proceed?";this.$.deleteconfirm.querySelector("#body").innerText=ai;this.$.deleteconfirm.show()};v=function(){f.call(this);this.$.deleteconfirm.hide()};m=function(){var ai,aj,ak;this.$.deleteconfirm.hide();aj=O.slice(0);aj.forEach(function(am){ai=am.getAttribute("data-itemindex");ak=am.simitem.id;try{if(!this.$.simlistData.model[ai].destroy){F.log("ps-simulation-abstract-list: onDelete: this.$.simlistData.model[deleteIndex].delete unavailable, force sp-data.refresh");this.$.simlistData.refresh()}this.$.simlistData.model[ai].destroy(function(ar,ap){if(ap.status===200){this.$.refreshpanel.update();var an,aq,ao;aq=this.simlist.length;for(ao=0;ao<aq;ao+=1){if(this.simlist[ao].id===ar){an=ao;break}}this.splice("simlist",an,1);setTimeout(function(){this.$.refreshpanel.done()}.bind(this),1000);this.fire(h.simulationdeleted,{deletedItemId:ar})}}.bind(this,ak))}catch(al){this.alertmessage="Delete failed. Refresh and try again";this.$.messagedialog.show()}}.bind(this));f.call(this)};s=function(){this.DOM(this.$.groupaction).addClass(j.active);this.DOM(this.$.sidebaroverlay).addClass(j.active)};B=function(){ac.call(this,this.$.groupassign.value)};I=function(){ac.call(this,"")};ac=function(ai){var aj;O.forEach(function(ak){aj=ak.dataset.itemindex;ak.simitem.attributes["Simulation Study"]=ai;if(!this.$.simlistData.model[aj].update){F.log("ps-simulation-abstract-list: onGroupassign: this.$.simlistData.model[updateIndex].update unavailable, force sp-data.refresh");this.$.simlistData.refresh()}ak.$.simData.model.update(true,function(an){if(an.status===200){var al=JSON.parse(an.response);var am=R.call(this,al.id);this.set("simlist."+am+".attributes",al.attributes);this.asyncFire("event-manager",{name:"update-group",data:al})}}.bind(this))}.bind(this));this.$.groupassign.value=null;f.call(this);this.DOM(this.$.groupaction).removeClass(j.active);this.DOM(this.$.sidebaroverlay).removeClass(j.active)};H=function(){this.DOM(this.$.groupaction).removeClass(j.active);this.DOM(this.$.sidebaroverlay).removeClass(j.active);this.$.groupassign.value=null;f.call(this)};g=function(ai){this.activeitem=ai;this.activeitemid=ai.id;this.activeitemindex=R.call(this,this.activeitemid);return null};C=function(al){var ak,an,aj,ai;ai=Polymer.dom(al).localTarget.simitem;al.stopPropagation();aj="Your changes failed to save.\n\nPlease make sure that all of your recent changes are valid.";ak=function(ao){F.info(ao);Y.alert(aj)};an=function(ao,ap){if(ap){if(!ai){if(Y.console&&Y.console.warn){Y.console.warn("ps-simulation-abstract-list: no simitem could be obtain from simclick event")}return}if(this.activeitemid===ai.id){this.activeitem=null;this.activeitemid=null}else{g.call(this,ai)}}}.bind(this);if(this.activeitem){try{this.$.simlistWS.flushAllPendingUpdates(an,ak)}catch(am){an.call(this,am,true)}}else{g.call(this,ai)}};R=function(al){var ai=-1,aj,ak;ak=this.simlist.length;for(aj=0;aj<ak;aj+=1){if(this.simlist[aj].id===al){ai=aj;break}}return ai};i=function(){var aj=T(this.selecteditems),ai=this.$.dashboard.getAuthenticatedJspUri("/common/emxLifecycle.jsp?"+aa({toolbar:"SMACommon_LifecycleToolbar",header:"Common.LifeCycle.PageHeading","export":"false",mode:"basic",HelpMarker:"SMASimulation_NavTreeLifecycle",objectId:aj}));return d(ai)};z=function(){var aj=T(this.selecteditems),ai=this.$.dashboard.getAuthenticatedJspUri("/simulationcentral/smaJobsShowInteractive.jsp?"+aa({suiteKey:"SimulationCentral",HelpMarker:"SMAJobs_ShowInteractive",StringResourceFileId:"smaSimulationCentralStringResource",SuiteDirectory:"simulationcentral",objectId:aj}));return d(ai)};L=function(){var aj=D(this.selecteditems),ai=this.$.dashboard.getAuthenticatedJspUri("/common/emxIndentedTable.jsp?"+aa({program:"emxDomainAccess:getObjectAccessList",table:"DomainAccess",editLink:"true",selection:"multiple",toolbar:"DomainAccessToolBar",level:"0",header:"emxFramework.DomainAccess.AccessView",expandLevelFilter:"true",editRootNode:"false",objectBased:"false",hideRootSelection:"true",displayView:"details",showClipboard:"false",HelpMarker:"emxhelpmultipleownershipaccess",massUpdate:"false",objectId:aj}));return d(ai)};b=function(){var aj=D(this.selecteditems),ai=this.$.dashboard.getAuthenticatedJspUri("/simulationcentral/smaPSWrapper.jsp?"+aa({objectAction:"copy",objectId:aj}));return d(ai)};A=function(){var aj=D(this.selecteditems),ai=this.$.dashboard.getAuthenticatedJspUri("/simulationcentral/smaPSWrapper.jsp?"+aa({objectAction:"revise",objectId:aj}));return d(ai)};J=function(){M("SIMPRCW_AP","Process Composer",{mode:"create",operation:"new"})};n=function(){var ai=this.resolveUrl("../../SMAProcXSStudioComponents/xs-template-checker/xs-template-checker.html");Y.Polymer.Base.importHref(ai,function(){var aj=l.call(this,"xs-template-checker");if(!aj){aj=Y.UWA.createElement("xs-template-checker");Polymer.dom(this.$.defaultmenu).appendChild(aj);this.fire("xstemplatecheckloaded",aj)}aj.searchTemplates()}.bind(this),function(){this.$.notification.logMessage({type:"error",text:"Your session has expired. A new login is required."})}.bind(this))};l=function(ak){var aj=this.$.defaultmenu.children;var al=false;for(var ai=0;ai<aj.length;ai++){if(aj[ai].tagName.toLowerCase()===ak){al=aj[ai];break}}return al};U=function(){M("SIMWCOM_AP","Simulation Companion",{mode:"create",operation:"fromExprience"})};X=function(ai){var am=this.selecteditems||[];var al,ao=true;for(al=0;al<this.selecteditems.length;al++){var ap=this.selecteditems[al].latestExecution.state;if(ap!=="Completed"&&ap!=="Failed"&&ap!=="Aborted"){var ak;ao=false;for(ak=0;ak<this.simlist.length;ak++){if(this.simlist[ak].latestExecution.id!==null&&this.simlist[ak].latestExecution.id===this.selecteditems[al].latestExecution.id){this.set("simlist."+ak+".$state","is-failingtoanalyze")}}}}setTimeout(function(){var aq;for(aq=0;aq<this.simlist.length;aq++){this.set("simlist."+aq+".$state","")}}.bind(this),5000);if(ao===false){return}if(q.call(this,am)){alert(u);return}if(N.call(this,am)){alert(ad);return}var an=am.map(function(aq){return aq.oid}).join("|");if(this.$.dashboard.isInDashboard()){require(["DS/TransientWidget/TransientWidget"],function(ar){var aq={objectIds:an};if(ai){aq.runAs=true}ar.showWidget("SIMREII_AP","Result Analytics",aq)})}else{var aj=appData.environments[0].dashboard;aj=aj+"#app:SIMREII_AP/content:objectIds="+an;if(ai){aj+="&runAs=true"}aj=encodeURI(aj);Y.open(aj,"_blank")}};p=function(){var aj=O.length,ai=[];if(q.call(this,O)){alert(ag);return}while(aj--){ai.push(O[aj].simitem.id)}this.$.psConfigRun.showConfigDialog(ai,O)};V=function(ak){var aj=ak.detail.simId;for(var ai=0;ai<this.simlist.length;ai+=1){if(aj===this.simlist[ai].id){this.set("simlist."+ai+".latestExecution.state",ak.detail.state);this.set("simlist."+ai+".latestExecution.eedJobId",ak.detail.eedjobId);this.set("simlist."+ai+".latestExecution.id",ak.detail.MCSJobID);break}}};S=function(al){var ak=al.detail.simId;for(var ai=0;ai<this.simlist.length;ai+=1){if(ak===this.simlist[ai].id){this.set("simlist."+ai+".$state","is-failingtorun");var aj=al.detail.error;if(aj){this.$.errorMessageForRunFailed.setValue(aj)}setTimeout(function(){this.set("simlist."+ai+".$state","")}.bind(this),5000);break}}};q=function(ai){return(ai||[]).some(function(ak){var aj=ak&&ak.simitem?ak.simitem:ak;var al=aj&&aj.attributes&&aj.attributes["Simulation Kind"];return al==="adhoc"})};N=function(aj){var ai=(aj||[]).some(function(am){var ak=am&&am.simitem?am.simitem:am;var al=ak&&ak.latestExecution&&ak.latestExecution.id;return al!==null&&al!==undefined});return !ai};ae=function(){if(q.call(this,O)){alert(ag);return}var al=O.length>5?5:O.length;af=5;for(var aj=0;aj<al;aj++){var ai=O[aj];var ak=ai.simitem.id;this.$.simOptionsWs.uri=this.$.mcsBaseURL.getValue()+"/resources/e6w/service/SMA_SimExeOption?objectId="+ak;this.$.simOptionsWs.getData()}var am=document.getElementsByTagName("ps-simulation-list")[0];O.forEach(function(an){an.parentElement.update("run-started");an.simitem.isJobQueued=true;am.removeDragEvent(an);am.addDragEvent(an)})};G=function(){if(O.length>5&&af<O.length){var ai=O[af];var aj=ai.simitem.id;this.$.simOptionsWs.uri=this.$.mcsBaseURL.getValue()+"/resources/e6w/service/SMA_SimExeOption?objectId="+aj;this.$.simOptionsWs.getData();af=af+1}};Q=function(ai){if(ai==="SysError"){return"System Error"}else{if(ai.search("Information")>-1){return"Information"}else{return ai}}};w=function(al){var am=al.detail.response;var ak=am.objectId;var aj=am.datarecords.datagroups[0].dataelements;if(aj&&aj.logLevel&&aj.logLevel.value[0]&&aj.logLevel.value[0].value){this.logLevelRunInfo=aj.logLevel.value[0].value}else{this.logLevelRunInfo="Information"}var ai=Q(this.logLevelRunInfo);O.forEach(function(an){if(an.simitem.id===ak){an.createSimulation(ai)}})};K=function(){if(this.$.simTypeWs.data.hasOwnProperty("success")&&String(this.$.simTypeWs.data.success).toLowerCase()==="true"){var aj=this.$.simTypeWs.data.datarecords.datagroups[0].dataelements;var ai=aj.hasCreateAccess&&aj.hasCreateAccess.value[0]&&(aj.hasCreateAccess.value[0].value==="true");var ak=Y.UWA.Utils.Client&&Y.UWA.Utils.Client.Engine&&Y.UWA.Utils.Client.Engine.name.match(/^(chrome|firefox|ie)$/);if(!ak){ak=false}if(ai&&ak){this.$.createButton.classList.remove("hideButton");this.$.createButton.classList.add("create");this.$.createButton.classList.add("menu")}else{this.$.createButton.classList.add("hideButton");this.$.createButton.classList.remove("create");this.$.createButton.classList.remove("menu")}}else{this.$.simTypeWs.data.detail={message:this.$.simTypeWs.data.error};this.xserror(this.$.simTypeWs.data)}};ab=function(){this.$.simTypeWs.getData()};t=function(){if(O.length>0){var ai=Y.confirm("You are about to abort "+O.length+" jobs.");if(ai){O.forEach(function(aj){aj.abortSimulation()})}}};W=function(){var ak=Y.emxUIConstants&&Y.emxUIConstants.STR_QUERY_TYPE==="Indexed";var ai=Y.getTopWindow?Y.getTopWindow().bpsTagNavConnector:null;var aj=ai&&ai.getTNWindow?ai.getTNWindow():null;if(this.sidebarmode==="simList"){this.sidebarmode="searchedSim";this.set("settings.switchMessage",this.SWITCH_MESSAGE[this.settings.simOwner]);this.set("settings.simOwner",this.SIM_OWNER.searched);this.$.PSSettings.setValue(this.settings);aj.hasWidget=false}else{this.set("settings.switchMessage",this.SWITCH_MESSAGE[this.settings.simOwner]);this.set("settings.simOwner",this.getSettingValue(x.simOwner)||this.SIM_OWNER.owned);this.$.PSSettings.setValue(this.settings);this.sidebarmode="simList";aj.hasWidget=true}};var o=function(){var ai=this.$.PSSettings.getValue();this.set("settings.switchMessage",ai.switchMessage);this.set("settings.simOwner",ai.simOwner)};var P={properties:{LOCALSTORAGE_KEY:{type:Object,readOnly:true,value:x},SIM_OWNER:{type:Object,readOnly:true,value:ah},SWITCH_MESSAGE:{type:Object,readOnly:true,value:y},STATE:{type:Object,readOnly:true,value:j},ON_PREMISE:{type:String,readOnly:true,value:"OnPremise"}},onMultiSelect:function(ai){ai.stopPropagation();this.DOM(ai.currentTarget).addClass("multiselected");O.push(ai.currentTarget);this.push("selecteditems",ai.currentTarget.simitem)},onMultiUnselect:function(aj){var ai;aj.stopPropagation();this.DOM(aj.currentTarget).removeClass("multiselected");ai=this.selecteditems.indexOf(aj.currentTarget.simitem);O.splice(ai,1);this.splice("selecteditems",ai,1)},resetMultiSelect:f,onSimItemClick:C,setItem:g,checkLicenseData:function(){var ai=this.$.licenseData.getValue();if(ai&&ai.Results_Analytics&&ai.Results_Analytics==="true"){this.hasResultsAnalyticsLic="true"}},_getActiveItemIndex:function(){var ai=-1,aj,ak;ak=this.simlist.length;for(aj=0;aj<ak;aj+=1){if(this.simlist[aj].id===this.activeitemid){ai=aj;break}}return ai},onUpdateError:function(am){var ak,aj,ai,al;ak=am.detail;ai=ak.uri.lastIndexOf("/");aj=ak.uri.substring(ai+1);al=Polymer.dom(this.$.list).querySelector("[data-id='"+aj+"']");Polymer.dom(al).setAttribute("errormsg",ak.xhr.responseText);al.state="is-failing"}};Y.DS.SMAProcPSUI=Y.DS.SMAProcPSUI||{};Y.DS.SMAProcPSUI.simAbstractListBehavior=P;Polymer({is:"ps-simulation-abstract-list",behaviors:[Y.DS.SMAProcSP.SPBase,P],properties:{activeitem:{type:Object,notify:true},activeitemindex:{type:String,notify:true},alertmessage:{type:String,notify:true},sidebarmode:{type:String,notify:true},hasResultsAnalyticsLic:{type:String,value:"false",notify:true},refreshedData:{type:Object},settings:{type:Object,value:function(){return{maxSims:200,simOwner:ah.owned,switchMessage:""}},notify:true},selecteditems:{type:Array,value:function(){return[]},notify:true},simlist:{type:Array,notify:true},simidlist:{type:Array,notify:true}},ready:k,onAccess:L,onCopy:b,onRevise:A,onCreateMenuClick:Z,onCreateNew:J,onCreateFromExp:n,onCreateNewComp:U,onAdditionalMenuClick:e,onClearMultiSelect:f,onCompare:c,onDelete:m,onDeleteAttempt:a,onDeleteCancel:v,onGroup:s,onGroupassign:B,onRemoveGroup:I,onGroupassignCancel:H,onLifecycle:i,onRun:ae,runNext:G,useSimOptionsLogLevel:w,errorForSimOptions:function(ak){if(ak.detail.status){var aj=ak.detail.uri.split("?")[1].split("&")[0].replace("objectId=","");var al=document.getElementsByTagName("ps-simulation-list")[0];var am;var ai=al.querySelectorAll("ps-simulation-item");[].forEach.call(ai,function(an){if(an.simitem.id===aj){am=an;return false}});am.parentElement.done();am.set("simitem.$state","is-failingtorun");am.set("simitem.message","Simulation failed to run");setTimeout(function(){am.set("simitem.$state","")},5000)}},processTypeInfo:K,oncollabspaceChange:ab,onConfigRun:p,onAbort:t,simulationStarted:V,simulationFailed:S,onSearchResult:E,onRefresh:function(){this.fire("refresh")},onDisplaySettings:function(){this.fire("displaysettings")},onUpdateError:function(){this.fire("updateerror")},openInRA:function(){return X.call(this,false)},openInRAAs:function(){return X.call(this,true)},PSSettingsChanged:o,showInteractive:z,switchMode:W,xserror:function(ai){return r.call(this,ai)},getSettingValue:function(ai){return this.$.psLocalstore.getItem(ai)},setSettingValue:function(ai,aj){return this.$.psLocalstore.setItem(ai,aj)},_computeTypeInfoURI:function(){return this.$.dashboard.getMcsUri()+"/resources/e6w/service/SMA_TypeMetaData?type=Simulation"},_computeClass:function(ai){return"onlymultiselect "+this.tokenList({show:ai>0})},_computeClass2:function(ai){return"multionly "+this.tokenList({show:ai>1})},_computeDisabled:function(ai){return ai<1},_computeDisabledNewRunAs:function(ai){if(appData.isRunAsEnabled==="true"&&ai>0){return false}else{return true}},_showNewRunAs:function(){return""},_computeDisabled2:function(ai){return ai!==1},_computeIf:function(aj){var ai=false;if(aj==="true"&&!this.$.dashboard.isInDashboard()){ai=true}return ai},_computeIf2:function(ai){return ai==="simList"&&!this.$.dashboard.isInDashboard()},_computeDisabled3:function(ai){return ai===0},_computeHeaderClass:function(){return this.$.dashboard.isInDashboard()?"sidebarheader is-hidden":"sidebarheader"},openRunAsModal:function(){var ai=[];this.selecteditems.forEach(function(aj){ai.push(aj.id)});this.$.runAsModal.showModal(ai,true)},_computeClassCreateButton:function(){if(this.$.dashboard.isInDashboard()){if(Y.UWA.Utils&&Y.UWA.Utils.Client&&Y.UWA.Utils.Client.Engine&&Y.UWA.Utils.Client.Engine.name.match(/^(chrome|firefox)$/)){return"create menu"}else{return"hideButton"}}else{return"hideButton"}}})}(this));