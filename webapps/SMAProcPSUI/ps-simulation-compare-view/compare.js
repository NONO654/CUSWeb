/*!  Copyright 2015 Dassault Systemes. All rights reserved. */
(function(d){function a(y,z,q,A,x,w,u,B,v,s,r,t){this.matches=true;this.id=q;this.title=y;this.description=A;this.type=x;this.isMultivalue=w;this.mandatory=u;this.choices=B;this.minimum=v;this.maximum=s;this.value=z;this.action=r;this.ioMode=t}function o(x,y,q,z,w,v,u,r,s,t){this.matches=true;this.id=q;this.title=x;this.description=z;this.value=y;this.action=s;this.expression=v;this.datatype=u;this.syncAssist=r;this.ioMode=t}function f(y,z,q,A,v,r,t,s,w,u,x){this.matches=true;this.id=q;this.title=y;this.description=A;this.value=z;this.action=t;this.datatype=v;this.syncAssist=r;this.DummyDocType=s;this.type=w;this.ioMode=u;this.objectId=x}function c(r,s,q){this.title=r;this.id=s;this.attributes=q;this.match=true}function p(q,r){this.title=q;this.id=r;this.attributeGroups=[];this.parameters=[];this.ownedContent=[];this.activities=[];this.match=true}function m(){this.title="";this.id="";this.physicalid="";this.revision="";this.match=true;this.attributeGroups=[];this.parameters=[];this.referencedContent=[];this.ownedContent=[];this.activities=[]}function g(){this.columnHeaders=[];this.processInputs=[];this.processOutputs=[];this.processNone=[];this.processAll=[]}function j(y){var q="",u="",w="",r=[],t,x={},s,v;for(t=0;t<y.length;t+=1){x=y[t];if(x.sequence){s=x.sequence;if(s==="0"){q=x.objectId;continue}u=x.parentId;w=x.objectId;if(q===u){x.hierarchy=1;r=[];r.push(w)}else{v=r.indexOf(u)+1;x.hierarchy=v+1;if((v)!==r.length){r=r.slice(0,v)}r.push(w)}}}}m.prototype.parseProcessResponse=function(s){var z,D=false,t,T=[],A=1,W="",L="",B=[],R=0,q="",G="",V={},M,I,P,v,y,Q,K,J,S,O,r,F,H,E,C,w,N,x,U,u;for(z=0;z<s.length;z+=1){W=s[z].title;L=s[z]["title_display"];if("Simulation"===W){this.title=L;this.id=s[z].objectId;this.physicalid=s[z].physicalid;this.revision=s[z].revision}else{if("Attributes"===W){q=s[z].id;B=[];for(R=z+=1;R<s.length;R+=1,z+=1){G=s[z]["title_display"];if(G!==undefined){z-=1;V=new c(L,q,B);if(D){t.attributeGroups.push(V)}else{this.attributeGroups.push(V)}break}W=s[R].title;M=s[R].value;I=s[R].id;P=s[R].description;v=s[R].type;y=s[R].isMultivalue;Q=s[R].mandatory;K=s[R].choices;J=s[R].minimum;S=s[R].maximum;O=s[R].action;r=s[R].ioMode;F=new a(W,M,I,P,v,y,Q,K,J,S,O,r);B.push(F);if(R===(s.length-1)){V=new c(L,q,B);if(D){t.attributeGroups.push(V)}else{this.attributeGroups.push(V)}}}}else{if("Parameters"===W){for(R=z+=1;R<s.length;R+=1,z+=1){G=s[z]["title_display"];if(G!==undefined){z-=1;break}W=s[R].title;M=s[R].value;I=s[R].id;P=s[R].description;v=s[R].type;H=s[R].expression;E=s[R].datatype;C=s[R].syncAssist;O=s[R].action;r=s[R].ioMode;if(E==="chooser"){M=s[R]["value_display"]+(v?" ("+v+")":"")}w=new o(W,M,I,P,v,H,E,C,O,r);if(D){t.parameters.push(w)}else{this.parameters.push(w)}}}else{if(W.indexOf("OwnedContent")!==-1&&L!==undefined){for(R=z+=1;R<s.length;R+=1,z+=1){G=s[z]["title_display"];if(G!==undefined){z-=1;break}W=s[R].title;M=s[R].title;I=s[R].id;P=s[R].description;E=s[R].datatype;C=s[R].syncAssist;O=s[R].action;U=s[R].DummyDocType;r=s[R].ioMode;q=s[R].value;N=new f(W,M,I,P,E,C,O,U,"",r,q);if(D){t.ownedContent.push(N)}else{this.ownedContent.push(N)}}}else{if(W.indexOf("Content")!==-1&&L!==undefined){for(R=z+=1;R<s.length;R+=1,z+=1){G=s[z]["title_display"];if(G!==undefined){z-=1;break}W=s[R].title;M=s[R].value;I=s[R].id;P=s[R].description;E=s[R].datatype;C=s[R].syncAssist;O=s[R].action;U=s[R].DummyDocType;v=s[R].type;r=s[R].ioMode;if(E==="chooser"){M=s[R]["value_display"]}q=s[R].value;N=new f(W,M,I,P,E,C,O,U,v,r,q);this.referencedContent.push(N)}}else{if(W.indexOf("Activity")!==-1&&L!==undefined){q=s[z].objectId;t=new p(L,I);x=s[z].hierarchy;if(x>A){T[T.length-1].activities.push(t);A=x;T.push(t)}else{if(x>1){for(R=x-2;R<T.length;R+=1){T.pop()}A=x;T[T.length-1].activities.push(t);T.push(t)}else{if(x===1){this.activities.push(t);u=T.length;for(R=0;R<u;R+=1){T.pop()}T.push(t);A=1}}}D=true}}}}}}}};function l(r,t){var s,q;for(s=0,q=t.length;s<q;s+=1){if((r.title===t[s].title)&&!t[s].compared){t[s].compared=true;return t[s]}}return null}g.prototype.addProcess=function(r,q){if(q==="all"){this.processAll.push(r)}else{if(q==="input"){this.processInputs.push(r)}else{if(q==="output"){this.processOutputs.push(r)}else{this.processNone.push(r)}}}};g.prototype.parseResponse=function(r){var A,q,z,w,t,s,v,u=[],y=[],x=[];for(t=0;t<r.length;t+=1){u=[];y=[];x=[];j(r[t]);w=new m();w.parseProcessResponse(r[t]);this.addProcess(w,"all");for(s=0;s<r[t].length;s+=1){if(r[t][s]["title_display"]){u.push(r[t][s]);y.push(r[t][s]);x.push(r[t][s])}else{if(r[t][s].ioMode){v=r[t][s].ioMode;if(v==="InputOutput"){u.push(r[t][s]);y.push(r[t][s])}else{if(v==="Input"){u.push(r[t][s])}else{if(v==="Output"){y.push(r[t][s])}else{x.push(r[t][s])}}}}}}A=new m();A.parseProcessResponse(u);this.addProcess(A,"input");q=new m();q.parseProcessResponse(y);this.addProcess(q,"output");z=new m();z.parseProcessResponse(x);this.addProcess(z,"none")}};function k(x,H){var w,F,E,D,r,y,t,z,B,q,s,v,u,A,C,G;for(w=0;w<x.length;w+=1){if(x[w]&&x[w].attributeGroups){for(F=0;F<x[w].attributeGroups.length;F+=1){r=[];y=x[w].attributeGroups[F];if(!y.compared){r[0]={value:y.title,icon:d.imageBaseURL+"smaIconSimType.gif",level:1,title:"Attributes"};for(E=1;E<H[0].length;E+=1){r[E]={value:"",icon:"",level:1}}H.push(r);t=[];for(E=0;E<w;E+=1){t.push({})}for(E=w+1,z=x;E<z.length;E+=1){if(z[E]){B=l(y,z[E].attributeGroups);t.push(B)}else{t.push(null)}}s=true;for(E=0;E<y.attributes.length;E+=1){v=true;D=0;u=[];A=y.attributes[E];u.push({value:A.title,level:2});for(D=0;D<w;D+=1){u.push({value:""})}u.push(A);for(D=w;D<t.length;D+=1){if(t[D]!==null){q=l(A,t[D].attributes);if(q!==null){u.push(q)}else{u.push({value:""})}}else{u.push({value:""})}}C=u[1].value;for(D=2;D<u.length;D+=1){G=u[D].value;if(G!==C){v=false;s=false;break}}for(D=0;D<u.length;D+=1){u[D].matches=v}H.push(u)}if(!s){r[0].matches=false}}}}}}function h(r,v){var E=[],w,u,t,s,y,C,z=true,q,x,D,B,A;for(w=0;w<r.length;w+=1){if(r[w]&&r[w].parameters.length>0){E[0]={value:"Parameters",level:1,title:"Parameters"};for(u=1;u<v[0].length;u+=1){E[u]={value:"",level:1}}v.push(E);break}}if(r[0]&&r[0].parameters){for(w=0;w<r[0].parameters.length;w+=1){C=[];z=true;A=r[0].parameters[w];C.push({value:A.title,level:2});C.push(A);for(u=1;u<r.length;u+=1){if(r[u]){q=r[u].parameters;x=l(A,q);if(x!==null){C.push(x)}else{C.push({value:""})}}else{C.push({value:""})}}D=C[1].value;for(u=2;u<C.length;u+=1){B=C[u].value;if(B!==D){z=false;y=false;break}}for(t=0;t<C.length;t+=1){C[t].matches=z}v.push(C)}}for(w=1;w<r.length;w+=1){if(r[w]){for(u=0;u<r[w].parameters.length;u+=1){if(!r[w].parameters[u].compared){y=false;C=[];A=r[w].parameters[u];C.push({value:A.title,level:2,matches:false});for(t=0;t<w;t+=1){C.push({value:"",matches:false})}A.matches=false;C.push(A);for(s=w+1;s<r.length;s+=1){if(r[s]){q=r[s].parameters;x=l(A,q);if(x!==null){x.matches=false;C.push(x)}else{C.push({value:"",matches:false})}}else{C.push({value:"",matches:false})}}v.push(C)}}}}if(E[0]){E[0].matches=y}}function e(r,w){var s=[],x,v,u,t,z,D,A=true,q,y,E,C,B;for(x=0;x<r.length;x+=1){if(r[x]&&r[x].ownedContent.length>0){s[0]={value:"OwnedContent",level:1,title:"OwnedContent"};for(v=1;v<w[0].length;v+=1){s[v]={value:"",level:1}}w.push(s);break}}if(r[0]&&r[0].ownedContent){for(x=0;x<r[0].ownedContent.length;x+=1){D=[];A=true;B=r[0].ownedContent[x];D.push({value:B.DummyDocType,level:2});D.push(B);for(v=1;v<r.length;v+=1){if(r[v]){q=r[v].ownedContent;y=l(B,q);if(y!==null){D.push(y)}else{D.push({value:""})}}else{D.push({value:""})}}E=D[1].objectId;for(v=2;v<D.length;v+=1){C=D[v].objectId;if(C!==E){A=false;z=false;break}}for(u=0;u<D.length;u+=1){D[u].matches=A}w.push(D)}}for(x=1;x<r.length;x+=1){if(r[x]){for(v=0;v<r[x].ownedContent.length;v+=1){if(!r[x].ownedContent[v].compared){z=false;D=[];B=r[x].ownedContent[v];D.push({value:B.DummyDocType,level:2,matches:false});for(u=0;u<x;u+=1){D.push({value:"",matches:false})}B.matches=false;D.push(B);for(t=x+1;t<r.length;t+=1){if(r[t]){q=r[t].ownedContent;y=l(B,q);if(y!==null){D.push(y)}else{D.push({value:""})}}else{D.push({value:""})}}E=D[x].objectId;for(u=0;u<D.length;u+=1){C=D[u].objectId;if(C!==E){A=false;z=false;break}}for(u=0;u<D.length;u+=1){D[u].matches=A}w.push(D)}}}}if(s[0]){s[0].matches=z}}function i(r,v){var B=[],w,u,t,s,y,D,z=true,q,x,E,C,A;for(w=0;w<r.length;w+=1){if(r[w]&&r[w].referencedContent&&r[w].referencedContent.length>0){B[0]={value:"ReferencedContent",level:1,title:"ReferencedContent"};for(u=1;u<v[0].length;u+=1){B[u]={value:"",level:1}}v.push(B);break}}if(r[0]&&r[0].referencedContent){for(w=0;w<r[0].referencedContent.length;w+=1){D=[];z=true;A=r[0].referencedContent[w];D.push({value:A.DummyDocType,level:2});D.push(A);for(u=1;u<r.length;u+=1){if(r[u]){q=r[u].referencedContent;x=l(A,q);if(x!==null){D.push(x)}else{D.push({value:""})}}else{D.push({value:""})}}E=D[1].value;for(u=2;u<D.length;u+=1){C=D[u].value;if(C!==E){z=false;y=false;break}}for(t=0;t<D.length;t+=1){D[t].matches=z}v.push(D)}}for(w=1;w<r.length;w+=1){if(r[w]&&r[w].referencedContent){for(u=0;u<r[w].referencedContent.length;u+=1){if(!r[w].referencedContent[u].compared){y=false;D=[];A=r[w].referencedContent[u];D.push({value:A.DummyDocType,level:2,matches:false});for(t=0;t<w;t+=1){D.push({value:"",matches:false})}A.matches=false;D.push(A);for(s=w+1;s<r.length;s+=1){q=r[s].referencedContent;x=l(A,q);if(x!==null){x.matches=false;D.push(x)}else{D.push({value:"",matches:false})}}v.push(D)}}}}if(B[0]){B[0].matches=y}}function n(u,v){var t,s,q,x,r,w;if(u[0]&&u[0].activities){for(t=0;t<u[0].activities.length;t+=1){x=u[0].activities[t];x.compared=true;r=[];r.push(x);for(s=1;s<u.length;s+=1){if(u[s]){x=u[s].activities[t];if(x){x.compared=true;r.push(x)}else{r.push(null)}}}w=[];w[0]={value:"",icon:d.imageBaseURL+"smaIconActivity.gif",level:0,title:"Activity"};for(s=1;s<v[0].length;s+=1){if(r[s-1]){w[s]={value:r[s-1].title,icon:"",level:0,title:"Activity"}}else{w[s]={value:"",icon:"",level:0}}}v.push(w);b(r,v)}}for(s=1;s<u.length;s+=1){if(u[s]&&u[s].activities){for(t=0;t<u[s].activities.length;t+=1){if(!u[s].activities[t].compared){r=[];for(q=0;q<s;q+=1){r.push(null)}x=u[s].activities[t];x.compared=true;r.push(x);for(q=s+1;q<u.length;q+=1){if(u[q]&&u[q].activities[t]){x=u[q].activities[t];x.compared=true;r.push(u[q].activities[t])}else{r.push(null)}}w=[];w[0]={value:"",icon:d.imageBaseURL+"smaIconActivity.gif",level:0,title:"Activity"};for(q=0;q<s;q+=1){w[q+1]={value:"",icon:"",level:0}}for(q=s+1;q<v[0].length;q+=1){if(r[q-1]){w[q]={value:r[q-1].title,icon:"",level:0,title:"Activity"}}else{w[q]={value:"",icon:"",level:0}}}v.push(w);b(r,v)}}}}}function b(q,r){k(q,r);h(q,r);e(q,r);i(q,r);n(q,r)}d.self.addEventListener("message",function(x){var u=new g(),w=[],D=[],A=[],B=[],s=[],r=[],C=[],q=[],z=[],t=[],v;u.parseResponse(x.data.compareData);d.imageBaseURL=x.data.imageBaseURL;r[0]={};C[0]={icon:d.imageBaseURL+"smaIconInput.gif",level:0,value:"Simulation Inputs",title:"Simulation Inputs"};q[0]={icon:d.imageBaseURL+"smaIconOutput.gif",level:0,value:"Simulation Outputs",title:"Simulation Outputs"};z[0]={icon:"",level:0,value:"Neutral",title:"Neutral"};s.push({value:"",level:0});for(v=0;v<u.processAll.length;v+=1){var y=u.processAll[v].revision?"("+u.processAll[v].revision+")":"";r.push({title:u.processAll[v].title+y,id:u.processAll[v].physicalid});C.push({value:"",level:0});q.push({value:"",level:0});z.push({value:"",level:0});s.push({value:"",level:0})}t.push(r);t.push(B);B.push(s);b(u.processAll,B);t.push(w);w.push(C);b(u.processInputs,w);D.push(q);t.push(D);b(u.processOutputs,D);A.push(z);t.push(A);b(u.processNone,A);d.self.postMessage(t)},false)})(this);