define("DS/3DWorkbook/js/WkbHeaderPanel",["UWA/Core","DS/CoreEvents/ModelEvents","DS/UIKIT/Popover","DS/UIKIT/Tooltip","DS/Controls/Button","DS/Controls/ButtonGroup","DS/3DWorkbook/js/WkbUtils","DS/3DWorkbook/js/WkbSearch","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(p,n,x,y,M,I,m,g,L){var q="OPERATION";var b="SYSTEM";var z,F,f,D,w,R,J,C,o,d,G,K,u,h,c,N,j,k,P,i,O,t,r,v,E;var a=function(S){O=S.modelEvtManager||new n();F=S.ematrixURL;D=S.name;w=S.systemRefName;R=S.plmID;J=S.systemPhysicalId;C=S.publishedProductId;t=m.graphicsMode.Both;var T={insertUI:true,container:S.widgetBody,widget_id:S.widget_id,ematrixURL:F,modelEvtManager:O};E=new g(T);O.subscribe({event:"wkbNav-SelectOper"},B);O.subscribe({event:"wkbNav-RenderGraphics"},A);O.subscribe({event:"wkb3DViewer-No3D"},Q);this.setContainer();return this.getContainer()};function A(S){K=S.object_type;d=S.object_data.plmIdentifier;u=S.object_data.parentType;h=S.object_data.parentPlmIdentifier;c=S.object_data.id;G=S.object_data.physicalId}function Q(T){var S=f.getElement("#threeDButton");if(S){S.onclick=null;S.style.color="#f1f1f1"}}function B(S){switch(S.level){case 0:S.object_type=b;S.object_data.systemPhysicalId=J;j.style.display="none";N.style.display="none";i.className="noNav";K="SYSTEM";l();s();break;case 1:S.object_type=q;j.style.display="none";N.style.display="inline";k.innerHTML=S.object_data.displayName;o=S.object_data;i.className="canNav";k.className="noNav";H();break;case 2:S.object_type=q;j.style.display="inline";N.style.display="inline";P.innerHTML=S.object_data.displayName;k.innerHTML=S.parent.displayName;k.className="canNav";i.className="canNav";o=S.parent;k.onclick=function(){e({level:1,object_type:q,object_data:o})};H();break}A(S)}function H(){var S=f.getElement("#toggleDiv");if(S){S.style.visibility=""}}function l(){var S=f.getElement("#toggleDiv");if(S){S.style.visibility="hidden"}}function e(S){B(S);O.publish({event:(S.object_type===q)?"wkbHeader-SelectOper":"wkbHeader-SelectOrder",data:{object_data:S.object_data}});A(S)}function s(S){v.checkFlag=true;O.publish({event:"wkbHeader-Select3D",data:{plmId:d,object_type:K,parent_type:u,id:c,systemRefName:w,systemPLMID:R,systemPhysicalId:J,publishedProductId:C}})}a.prototype={setContainer:function(){var W=p.createElement("div",{id:"headerPanelDiv","class":"headerPanelDiv"});var ad=p.createElement("div",{id:"breadcrumbDiv","class":"breadcrumbDiv"}).inject(W);var ab=UWA.createElement("button",{"class":"",type:"button",styles:{"padding-top":"3px",outline:"none",border:"none",background:"transparent"}}).inject(ad);var ac=UWA.createElement("span",{"class":"headerIcon fonticon fonticon-search"}).inject(ab);var X=new UWA.Element("div",{"class":"searchBody",styles:{width:"450px"}});var U=m.createAndAppend(X,"div","searchBar","wkb_search_bar");var Z=m.createAndAppend(U,"input","searchInput","wkb_input_search");Z.placeholder="Search";var ae=UWA.createElement("div",{"class":"searchIcon fonticon fonticon-search"}).inject(U);var af=new y({target:ac,body:L.Search,position:"bottom",trigger:"hover focus"});var T=UWA.createElement("div",{"class":"searchIcon fonticon fonticon-cancel"}).inject(U);Z.onkeypress=function(ag){if(ag.keyCode==13){Z.style.visibility="hidden";E.launchSearch(Z.value)}};ae.onclick=function(){E.launchSearch(Z.value)};var Y=new x({target:ab,position:"Bottom",trigger:"click touch",body:X});Y.elements.container.style.maxWidth="500px";T.addEvent("click",function(ag){ag.stopPropagation();Y.hide()});UWA.createElement("div",{"class":"headerIcon fonticon fonticon-open-right"}).inject(ad);i=UWA.createElement("p",{html:D,"class":"noNav"}).inject(ad);i.onclick=function(){e({level:0,object_type:b,object_data:{}})};N=UWA.createElement("div",{id:"operDiv"}).inject(ad);UWA.createElement("div",{"class":"headerIcon fonticon fonticon-open-right"}).inject(N);k=UWA.createElement("p",{"class":"noNav"}).inject(N);N.style.display="none";j=UWA.createElement("div",{id:"subOperDiv"}).inject(ad);UWA.createElement("div",{"class":"headerIcon fonticon fonticon-open-right"}).inject(j);P=UWA.createElement("p",{"class":"noNav"}).inject(j);j.style.display="none";var aa=p.createElement("div",{id:"headerButtonsDiv","class":"headerButtonsDiv"}).inject(W);var S=new UWA.Element("div",{id:"toggleDiv","class":"wux-control-inline-container",style:{"vertical-align":"top"}}).inject(aa);var V=new I();V.inject(S);r=new M({type:"radio",label:L.TwoDLbl,value:"2D"});v=new M({type:"radio",label:L.ThreeDLbl,value:"3D",checkFlag:true});V.addChild(r);V.addChild(v);r.onClick=function(ag){O.publish({event:"wkbHeader-Select2D",data:{systemPLMID:R,plmId:d,object_type:K,parent_type:u,id:c}})};v.onClick=s;S.style.visibility="hidden";f=W},getContainer:function(){return f}};return a});