define("DS/ENOChgActionProp/scripts/ChangePropertiesUtility",["DS/WAFData/WAFData","DS/WidgetServices/WidgetServices","DS/ENOChangeActionUX/scripts/CASpinner","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/TreeModel/DataModelSet"],function(a,f,c,b,g,d){var e={GetChangeRequired:function(h){var i=new Promise(function(p,o){var n="pid:"+h;var j=[];j.push(n);var m={ObjectsListForGetChangeControl:j};m=JSON.stringify(m);var k="/resources/modeler/change/changecontrol";var l=function(r){var s={};if(r&&r.objectListChangeControlled){var q=r.objectListChangeControlled[0];if(q){s.CCValue=q.changeControlValue}}if(r&&r.ChangeData){s.ChangeData=r.ChangeData[0]}p(s)};e.makeWSCall(k,"POST","enovia","application/json",m,l,null)});return i},SetUnsetChangeRequired:function(i,h){var j=new Promise(function(q,p){var o="pid:"+i;var k=[];k.push(o);var n={};if(h=="Set"){n={ObjectsListForSetChangeControl:k}}else{n={ObjectsListForUnSetChangeControl:k}}n=JSON.stringify(n);var l="/resources/modeler/change/changecontrol";var m=function(s){var t={};if(s&&s.objectListChangeControlled){var r=s.objectListChangeControlled[0];if(r){t.CCValue=r.changeControlValue}}if(s&&s.ChangeData){t.ChangeData=s.ChangeData[0]}q(t)};e.makeWSCall(l,"PUT","enovia","application/json",n,m,null)});return j},getImpactedCA:function(h){var i=new Promise(function(p,o){var n="pid:"+h;var j=[];j.push(n);var m={};m={"impacted items":j};m=JSON.stringify(m);var k="/resources/modeler/change/impactAnalysis";var l=function(q){var r={};if(q.object[0].impacting){r=q.object[0].impacting["complete ca"][0]}p(r)};e.makeWSCall(k,"POST","enovia","application/json",m,l,null)});return i},getCompletedTaskDetails:function(h){var i=new Promise(function(n,m){var j="/resources/modeler/change/inboxtask/"+h;var k="";var l=function(p){var o={};o.completedTaskDetail=p;n(o)};e.makeWSCall(j,"GET","enovia","application/json",k,l,null,false)});return i},getRouteFromChangeAction:function(h){var i=new Promise(function(n,m){var j="/resources/modeler/change/changeaction/"+h+"?lastApprovalRoute=1";var k="";var l=function(p){var o={};o.lastApproveRoute=p.changeaction.lastApprovalRoute;n(o)};e.makeWSCall(j,"GET","enovia","application/json",k,l,null,false)});return i},getRouteDetails:function(h){var i=new Promise(function(n,m){h=h.replace("pid:","");var j="/resources/v1/modeler/routes/"+h+"/tasks";var k="";var l=function(p){var o={};o.routeInfo=p;n(o)};e.makeWSCall(j,"GET","enovia","application/json",k,l,null,false)});return i},getConfiguredObjectInfo:function(h){var i=new Promise(function(n,m){var j="/resources/modeler/configuration/navigationServices/getConfiguredObjectInfo/pid:"+h+"?cfgCtxt=1";var k="";var l=function(p){n(p)};var o=function(p){var q={};n(q)};e.makeWSCall(j,"GET","enovia","application/ds-json",k,l,o,false)});return i},DispatchEventToWin:function(j,l){if(enoviaServerCAWidget&&(enoviaServerCAWidget.isNative||(j=="Work_Under"&&enoviaServerCAWidget.isPoweredBy))){var i=window.dscef;if(i!==undefined){if(typeof i.sendString==="function"){i.sendString(j+"="+l)}}else{if(typeof CATCefSendString!=="undefined"){CATCefSendString(j+"="+l)}else{var h=document.createElement("textarea");h.setAttribute("name",j);h.appendChild(document.createTextNode(l));var k=document.createElement("form");k.setAttribute("method","POST");k.setAttribute("action","jsnotif://");k.appendChild(h);document.documentElement.appendChild(k);k.submit();k.parentNode.removeChild(k);k=null}}}},getUserDisplayNameByPromise:function(h){var i=new Promise(function(o,n){var m="";var p="";if(Array.isArray(h)){for(var k=0;k<h.length;k++){if(p!=""){if(-1===p.indexOf(h[k])){p=p+"%7C"+h[k]}}else{p=h[k]}}}else{p=h}var l=function(r){var q={};q.userDisplayName=r;o(q)};var j="/resources/modeler/change/userdisplayname";e.makeWSCall(j,"GET","enovia","application/json","userNames="+p,l,null,false)});return i},_addFullNameToPersonObject:function(j,i){var h=j.changeaction.people;if(Array.isArray(h)){h.forEach(function(m){var k=m.name;if(i&&i.userDisplayName.userInfo&&i.userDisplayName.userInfo[k]){var l=i.userDisplayName.userInfo[k].userDisplayName;m.fullName=l;m.id=i.userDisplayName.userInfo[k].id}})}},getCADetails:function(h){var i=new Promise(function(n,m){var j="/resources/modeler/change/changeaction/"+h+"?people=1&attributes=1";var k="";var l=function(o){n(o)};e.makeWSCall(j,"GET","enovia","application/json",k,l,m,false)});return i},makeWSCall:function(o,h,j,i,l,k,n){var m=f.get3DSpaceUrlAsync({onComplete:function(u){ChgPropWidget.url=u;var q=u+o;var s=new Date().getTime();if(q.indexOf("?")==-1){q=q+"?tenant="+ChgPropWidget.tenant+"&timestamp="+s}else{q=q+"&tenant="+ChgPropWidget.tenant+"&timestamp="+s}var r=ChgPropWidget.securityContext;r=encodeURIComponent(r);k=k||function(){};n=n||function(){};var t=widget.getValue("lang");if(widget.lang){t=widget.lang}var p={};p.method=h;p.timeout=ChgPropWidget.wsCallTimeout;p.type="json";if(ChgPropWidget.isNative){if(r){p.headers={Accept:"application/json","Content-Type":i,SecurityContext:r,"Accept-Language":t}}else{p.headers={Accept:"application/json","Content-Type":i,"Accept-Language":t}}}else{if(j){p.auth={passport_target:j}}p.proxy=ChgPropWidget.proxy;if(r){p.headers={Accept:"application/json","Content-Type":i,SecurityContext:r,"Accept-Language":t}}else{p.headers={Accept:"application/json","Content-Type":i,"Accept-Language":t}}}if(l){p.data=l}p.onComplete=function(v){console.log("Success calling url: "+q);console.log("Success data: "+JSON.stringify(v));k(v)};p.onFailure=function(w,v){console.log("Error in calling url: "+q);console.log("Additional Details:: httpMethod: "+h+" authentication: "+j+" securityContext: "+r+" ContentType: "+i);console.log("Error Detail: "+w);console.log("Error Data: "+JSON.stringify(v));n(w,v)};p.onTimeout=function(){console.log("Timedout for url: "+q)};a.authenticatedRequest(q,p)}})},buildApprovalSummaryDataGridModel:function(h){var k=new d();var i=new b({dataModelSet:k,useAsyncPreExpand:true});var j=[];h.forEach(function(m){var l=e.createTreeModel(k,m);i.addChild(l)});i.prepareUpdate();i.pushUpdate();return i},createTreeModel:function(i,j){var h=new g.createTreeNodeDataModel(i,{label:j.get("taskName"),children:[],icons:[],grid:{order:j.get("order"),title:j.get("taskTitle"),approver:j.get("taskApprover"),status:j.get("approvalStatus"),comments:j.get("approvalComments"),approvalDate:j.get("actualComplDate")}});return h}};return e});define("DS/ENOChgActionProp/facets/ChangePropertiesFacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/UIKIT/Mask","DS/WidgetServices/WidgetServices","css!DS/ENOChangeActionUX/ENOChangeActionUX","DS/WidgetServices/securityContextServices/SecurityContextServices",],function(g,c,a,f,e,h,d){var b=c.extend({init:function(i){this._parent.apply(this,arguments);window.ChgPropWidget={tenant:model.getTenant(),wsCallTimeout:3000,isNative:false,is3DSpace:false,proxy:window.UWA.Data.proxies.passport?"passport":"ajax",frameWorkName:"ENOChangeActionUX"};if(this.checkEnvironment()==="Native"){ChgPropWidget.isNative=true}else{if(this.checkEnvironment()==="3DSpace"){ChgPropWidget.is3DSpace=true}}if(!this.elements.container){this.elements.container=g.createElement("div",{styles:{height:"100%"}})}},checkEnvironment:function(){var i=window.top.location.pathname;if(i.indexOf("emxNavigator.jsp")>=0){return"3DSpace"}if(typeof(dscef)!=="undefined"){if(i.indexOf("ENOChangeAction.html")>=0){return"Native"}}},updateFacet:function(){if(this.modid){var i=this.getModel();if(!i){return false}if(this.modid==i.get("objectId")){return}}var j=this;f.mask(this.elements.container);require(["DS/ENOChgActionProp/scripts/ChangePropertiesView","DS/ENOChgActionProp/scripts/Models/CAApprovalSumModel"],function(l,n){if(j.elements&&j.elements.container){var k=j.getModel();if(!k){return false}j.modid=k.get("objectId");var m=d.getInstance({tenant:ChgPropWidget.tenant}).getSecurityContext({onSuccess:function(o){ChgPropWidget.securityContext=o.SecurityContext;var p=ChgPropWidget.CRView=l.displayChangeReq(k,j.options);f.unmask(j.elements.container);j.elements.container.setContent(p)},onFailure:function(o){console.log("Failed to GetSecurityContext")}})}})},destroyComponent:function(){if(g.is(this.destroy,"function")){this.destroy()}}});return b});define("DS/ENOChgActionProp/scripts/ChangePropertiesDataGridView",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","i18n!DS/ENOChgActionProp/assets/nls/ChangePropertiesFacet"],function(d,a,e,c){var b={_createView_ApprovalSummaryTable:function(f){var g=new e({columns:[{text:c.Order,dataIndex:"order",typeRepresentation:"string",width:"47px"},{text:c.Title,dataIndex:"title",typeRepresentation:"string"},{text:c.Approver,dataIndex:"approver",typeRepresentation:"string"},{text:c.Action,dataIndex:"status",typeRepresentation:"string"},{text:c.Comments,dataIndex:"comments",typeRepresentation:"string"},{text:c.Completion_Date,dataIndex:"approvalDate",typeRepresentation:"string"}],treeDocument:f,showRowIndexFlag:false,showSelectionCheckBoxesFlag:false});if(g){g.layout.rowsHeader=false}return g}};return b});define("DS/ENOChgActionProp/scripts/Models/CAImpactedModel",["UWA/Class/Model","DS/WebappsUtils/WebappsUtils","DS/ENOChgActionProp/scripts/ChangePropertiesUtility","UWA/Date","UWA/Class/Promise","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","text!DS/ENOChangeActionUX/assets/ChangeActionMapping.json"],function(h,f,g,d,e,a,b){var c=h.extend({idAttribute:"id",setup:function(){},fetch:function(j){var k=this;j.method="GET";var i="";var l="%Y-%m-%d";j.ajax=function(n,m){g.getCADetails(j.caTileId).then(function(r){var q=[];var p=r;if(p&&p.changeaction){var o=p.changeaction.people;if(o.length){o.forEach(function(s){q.push(s.name);if(q.length){g.getUserDisplayNameByPromise(q).then(function(t){g._addFullNameToPersonObject(p,t);m.onComplete(p)})}})}}})};j.url="dummyURL";return this._parent(j)},parse:function(o){var l=this;var m="%Y-%m-%d";var j={};if(!UWA.is(o)){return}else{if(UWA.is(o)){if(UWA.is(o.changeaction)){l.set("id",o.changeaction.id);var k=o.changeaction.attributes;if(UWA.is(k)){k.forEach(function(q){if(q.name==="attribute_ActualCompletionDate"){l.set("actualDue",(UWA.is(q.value)&&q.value!=="")?d.strftime(new Date(q.value),m):"")}else{if(q.name==="attribute_ActualStartDate"){l.set("actualCreated",(UWA.is(q.value)&&q.value!=="")?d.strftime(new Date(q.value),m):"")}else{if(q.name==="attribute_BypassPlants"){l.set("bypassPlants",q.value)}else{if(q.name==="attribute_CategoryofChange"){l.set("categoryofChange",q.value)}else{if(q.name==="attribute_EstimatedCompletionDate"){l.set("due",(UWA.is(q.value)&&q.value!=="")?d.strftime(new Date(q.value),m):"");if(l.get("due")===""){l.set("due",a.ECM_CA_DUEDATE_UNASSIGNED)}}else{if(q.name==="attribute_EstimatedStartDate"){l.set("created",(UWA.is(q.value)&&q.value!=="")?d.strftime(new Date(q.value),m):"")}else{if(q.name==="attribute_Originator"){l.set("originator",q.value)}else{if(q.name==="attribute_ReasonForCancel"){l.set("reasonForCancel",q.value)}else{if(q.name==="attribute_ResponsibleManufacturingEngineer"){l.set("responsibleManufacturingEngineer",q.value)}else{if(q.name==="attribute_Severity"){l.set("severity","",{silent:true});l.set("severity",q.value);l.set("severityDisplay",a.get("ECM_CA_Severity_"+l.get("severity")))}else{if(q.name==="attribute_Synopsis"){l.set("synopsis",q.value);l.set("title",q.value);l.set("subtitle",o.changeaction.name)}else{if(q.name==="project"){l.set("project_space",q.value)}else{if(q.name==="current"){l.set("current","",{silent:true});l.set("current",q.value);l.set("currentDisplay",a.get("ECM_CA_State_"+l.get("current")))}else{if(q.name==="organization"){l.set("organization",q.value)}else{if(q.name==="modified"){l.set("modified",(UWA.is(q.value)&&q.value!=="")?d.strftime(new Date(q.value),m):"")}else{if(q.name==="interface[Change On Hold]"){if(q.value=="TRUE"){l.set("holdStatus","true");l.set("holdValue",a.ECM_CA_State_On_Hold,{silent:true})}else{l.set("holdStatus",null);l.set("holdValue","",{silent:true})}l.get("holdStatus")?l.set("TableStateVal",a.ECM_CA_State_On_Hold):l.set("TableStateVal",a.get("ECM_CA_State_"+l.get("current")))}}}}}}}}}}}}}}}}})}if(UWA.is(o.changeaction.people)){l.set("owner",o.changeaction.people[0].name,{silent:true});l.set("ownerDisplayName",o.changeaction.people[0].fullName);l.set("ownerId",o.changeaction.people[0].id);var p="";o.changeaction.people.forEach(function(q){if(p!=""){p=p+", "}if(q.role!="templateReviewer"){var s=q.role;var r="";if(s.indexOf("owner")>=0){r=a.ECM_CA_Team_Owner}if(s.indexOf("contributor")>=0){r=a.ECM_CA_Team_AddMembers_Assignee}if(s.indexOf("reviewer")>=0){r=a.ECM_CA_Team_AddMembers_Reviewer}if(s.indexOf("follower")>=0){r=a.ECM_CA_Team_AddMembers_Follower}p=p+r}});if(p==""){this.set("contextUserRole","other")}else{this.set("contextUserRole",p)}}l.set("name",o.changeaction.name);if(o.changeaction.type==="type_ChangeAction"){l.set("type","Change Action")}l.set("roleField",a.ECM_CA_Summary_Role);l.set("ownerField",a.ECM_CA_Summary_Owner);l.set("dueDateField",a.ECM_CA_Summary_DueDate);var i=JSON.parse(b);var n=i[this.get("severity")];if(UWA.is(n)&&n!=""){n="images/"+n}else{n=i._default;n="images/"+n}this.set("image",f.getWebappsAssetUrl("ENOChangeActionUX",n))}}}},});return c});define("DS/ENOChgActionProp/scripts/ChangePropertiesCATileView",["UWA/Core","UWA/Class","DS/Handlebars/Handlebars","DS/ENOChgActionProp/scripts/ChangePropertiesUtility","DS/W3DXComponents/Views/Item/TileView","DS/WebappsUtils/WebappsUtils","DS/TransientWidget/TransientWidget"],function(h,b,g,f,d,e,a){var c={_createView_CATile:function(j,i){return d.extend({name:"CACustomTile",currentProdId:j,className:"CACustomTile-container tile-container",model:i,setup:function(){this.template='                            <div class="'+this.getClassNames("-check")+' {{#unless withMultisel}}hidden{{/unless}}">                                <div class="toggle toggle-primary">                                    <input type="checkbox" name="radios" value="" id="SummaryView-{{{title}}}">                                    <label class="control-label" for="SummaryView-{{{title}}}"></label>                                </div>                            </div>                            <div class="'+this.getClassNames("-sub-container")+'" id={{id}} draggable="true">                                  <div class="'+this.getClassNames("-header")+'">                                      <div>{{#if image}}<img title={{{severityDisplay}}} src="{{#unless lazyLoading}}{{image}}{{/unless}}" {{getImgAttrs imgAttrs}} class="'+this.getClassNames("-image")+'" draggable="false"/>{{/if}}                                    </div>									                    {{#if holdStatus}}<div class="state" title="{{{holdValue}}}[{{{currentDisplay}}}]">{{{holdValue}}}</div>{{/if}}														{{#unless holdStatus}}<div class="state" title="{{{currentDisplay}}}">{{{currentDisplay}}}</div>{{/unless}}								              </div>                                <div class="'+this.getClassNames("-body")+'">                                    {{#if icon}}<img src="{{icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}	                                <div class="'+this.getClassNames("-title")+'" title="{{title}}">{{title}}</div>	                                <div class="'+this.getClassNames("-subtitle")+'" title="{{subtitle}}">{{subtitle}}</div>									<div class="'+this.getClassNames("-content")+'">                                        <div class="'+this.getClassNames("-content-left")+'">										<div class="'+this.getClassNames("-CAowner")+'" title="{{{ownerDisplayName}}}">{{{ownerField}}}&nbsp;{{{ownerDisplayName}}}</div>										<div class="'+this.getClassNames("-Role")+'" title="{{{contextUserRole}}}">{{{roleField}}}&nbsp;{{{contextUserRole}}}</div>										{{#if due}}<div class="'+this.getClassNames("-DueDate")+'">{{{dueDateField}}}&nbsp;{{{due}}}</div>{{/if}}									</div>									</div>                                    <ps-progress  class="'+this.getClassNames("-progress")+'"></ps-progress>                                </div>                            </div>                                    '},onClick:function(m){if(this.container.hasClassName("selected")){this.unSelect(m)}else{this.select(m)}var n=m._uwaTarget.id;n=n.replace("pid:","");if(ChgPropWidget&&ChgPropWidget.is3DSpace){var o=widget.getUrl();o=o.substring(0,o.indexOf("/enterprisechangemgt"));var l=o+"/common/emxTree.jsp?mode=insert&objectId="+n;window.open(l)}else{if(ChgPropWidget&&ChgPropWidget.isNative){var k={TransientCAPid:n};f.DispatchEventToWin("OpenCA",n)}else{var k={TransientCAPid:n};a.showWidget("ENOWCHA_AP","",k,{mode:"panel",height:800,width:650})}}}})}};return c});define("DS/ENOChgActionProp/scripts/ChangePropertiesApprovalSumView",["UWA/Core","UWA/Class","UWA/Class/Collection","DS/W3DXComponents/Views/Layout/TableScrollView","DS/ENOChgActionProp/scripts/ChangePropertiesUtility","i18n!DS/ENOChgActionProp/assets/nls/ChangePropertiesFacet"],function(g,b,c,a,e,f){var d={_createView_ApprovalSummaryTable:function(h){var j=new c(h);var i=new a({collection:j,useInfiniteScroll:false,usePullToRefresh:false,headers:[{property:"order",label:f.Order},{property:"taskTitle",label:f.Title},{property:"taskApprover",label:f.Approver},{property:"approvalStatus",label:f.Action},{property:"approvalComments",label:f.Comments},{property:"actualComplDate",label:f.Completion_Date}],});return i}};return d});define("DS/ENOChgActionProp/scripts/Models/CAApprovalSumModel",["UWA/Class/Model","DS/WebappsUtils/WebappsUtils","DS/ENOChgActionProp/scripts/ChangePropertiesUtility","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","text!DS/ENOChangeActionUX/assets/ChangeActionMapping.json"],function(e,c,d,a,b){var f=e.extend({idAttribute:"id",setup:function(){},fetch:function(h){var i=this;h.method="GET";var g="";var j="%Y-%m-%d";h.ajax=function(l,k){};h.url="dummyURL";return this._parent(h)},parse:function(k){var i=this;var j="%Y-%m-%d";var h={};if(!UWA.is(k)){return}else{if(UWA.is(k)){var g=k;i.set("id",k.id);i.set("order",k.order);i.set("taskName",k.name);i.set("taskTitle",k.title);i.set("taskApprover",k.approver);i.set("taskMaturity",k.maturity);i.set("approvalComments",k.comments);i.set("approvalStatus",k.action);i.set("actualComplDate",k.actualComplDate)}}},});return f});define("DS/ENOChgActionProp/scripts/ChangePropertiesView",["UWA/Core","UWA/Class","DS/UIKIT/Alert","DS/UIKIT/Input/Toggle","DS/ENOChgActionProp/scripts/ChangePropertiesUtility","DS/WebappsUtils/WebappsUtils","DS/ENOChgActionProp/scripts/Models/CAImpactedModel","DS/ENOChgActionProp/scripts/Models/CAApprovalSumModel","css!DS/ENOChgActionProp/ENOChgActionProp","DS/ENOChgActionProp/scripts/ChangePropertiesCATileView","DS/ENOChgActionProp/scripts/ChangePropertiesApprovalSumView","DS/ENOChgActionProp/scripts/ChangePropertiesDataGridView","DS/ENOChangeActionUX/scripts/CASpinner","UWA/Class/Promise","i18n!DS/ENOChgActionProp/assets/nls/ChangePropertiesFacet",],function(h,a,f,k,p,d,m,o,e,b,g,j,l,i,n){var c={displayChangeReq:function(r,q){this.options=q;this.model=r;var u=c.CreateElements();var t=this;var s=r.get("objectId");this.ChangeData=p.GetChangeRequired(s).then(function(v){t.UpdateUIForCC(v)},function(v){u.setContent("Error while getting Change Required value");console.log("Failed to Get Change Required")});return u},CreateElements:function(){var t=this;var s=this.model.get("objectId");var r=UWA.Element("div",{"class":"GroupsContainer"});this.ChgReqGroup=UWA.Element("div",{"class":"CR_MainContainer"});this.ChgReqContainer=UWA.Element("div",{"class":"CR_Container",html:{text:n["Change Required"]}});this.checkbox=new k({type:"switch",label:"",className:"ChangeReq_CheckBox hidden",checked:false,disabled:this.options.readOnly,events:{onChange:function(){var u=this.isChecked();var v=(u==true)?"Set":"UnSet";this.ChangeData=p.SetUnsetChangeRequired(s,v).then(function(w){t.UpdateUIForCC(w)})}}});this.CAContainer=UWA.Element("div",{"class":"CA_NameContainer hidden"});this.ChgReqGroup.addContent(this.ChgReqContainer);this.ChgReqGroup.addContent(this.CAContainer);this.ChgReqGroup.addContent(this.checkbox);r.addContent(this.ChgReqGroup);this.ApprovalSummaryGroup=UWA.Element("div",{"class":"ApprovalSummaryGroup"});this.ApprovalSummaryGroupName=UWA.Element("div",{"class":"ApprovalSummaryGroupName",html:n.Release_Auth});this.ApprovalSummaryCATileMain=UWA.Element("div",{"class":"ApprovalSummaryCATileMain"});this.ApprovalSummaryCATile=UWA.Element("div",{"class":"ApprovalSummaryCATile"});this.ApprovalSummaryTable=UWA.Element("div",{"class":"ApprovalSummaryTable"});var q;var t=this;var s=this.model.get("objectId");l.doWait(r);p.getImpactedCA(s).then(function(v){if(v){p.getConfiguredObjectInfo(s).then(function(A){if(A&&A.contexts&&A.contexts.content&&A.contexts.content.results&&A.contexts.content.results.length>0){var y=UWA.Element("div",{"class":"error-msg-div",html:[{tag:"span","class":"fonticon fonticon-attention"},{tag:"span",html:n.ECM_CONFIGURED_DATA_ERR},]});t.ApprovalSummaryGroup.addContent(t.ApprovalSummaryGroupName);t.ApprovalSummaryGroup.addContent(y);r.addContent(t.ApprovalSummaryGroup);l.endWait(r);return r}q=v;var C=c.createModelForImpactedCA(q);var x=new (b._createView_CATile(s,C));var w=[];var z={};var D=[];var B=[];var w=[];setTimeout(function(){if(x){t.ApprovalSummaryCATile.addContent(x.render())}var F={};F.caId=C.get("id");var G=[];var E=p.getRouteFromChangeAction(F.caId).then(function(I){var H=I.lastApproveRoute;if(H){p.getRouteDetails(H).then(function(K){var J=p.getCompletedTaskDetails(F.caId).then(function(O){if(K&&K.routeInfo&&K.routeInfo.success){var M=K.routeInfo.data;M.forEach(function(T){var S=T.id.replace("pid:","");var Q=O.completedTaskDetail.inboxTasks;for(var P=0;P<Q.length;P++){var V=Q[P];if(V){var R=V.id.replace("pid:","");if(R===S){z[S]={id:S,name:T.dataelements.name,title:T.dataelements.title,maturity:T.dataelements.current,comments:T.dataelements.comments,order:T.dataelements.taskOrder,approver:T.dataelements.taskAssignee,action:T.dataelements.taskAction,actualComplDate:V.actualCompletionDate};G.push(z);var U=c.createCAApprovalSumModel(z[S]);w.push(U)}}}});var N=p.buildApprovalSummaryDataGridModel(w);var L=j._createView_ApprovalSummaryTable(N);if(L){t.ApprovalSummaryTable.addContent(L)}l.endWait(r);t.ApprovalSummaryCATileMain.addContent(t.ApprovalSummaryCATile);t.ApprovalSummaryGroup.addContent(t.ApprovalSummaryGroupName);t.ApprovalSummaryGroup.addContent(t.ApprovalSummaryCATileMain);t.ApprovalSummaryGroup.addContent(t.ApprovalSummaryTable);r.addContent(t.ApprovalSummaryGroup)}},function(L){l.endWait(r);return i.reject(L)})},function(J){l.endWait(r);return i.reject(J)})}},function(H){l.endWait(r);return i.reject(H)})},1000)},function(w){l.endWait(r);i.reject(w)})}else{l.endWait(r);var u=UWA.Element("div",{"class":"error-msg-div",html:[{tag:"span","class":"fonticon fonticon-attention"},{tag:"span",html:n.ECM_OBJECT_NOT_RELEASED_ERR},]});t.ApprovalSummaryGroup.addContent(t.ApprovalSummaryGroupName);t.ApprovalSummaryGroup.addContent(u);r.addContent(t.ApprovalSummaryGroup);return r}},function(u){l.endWait(t.ApprovalSummaryGroup);return i.reject(u)});return r},createModelForImpactedCA:function(q){var r={};r.caTileId=q;this.caImpactedModel=new m();this.caImpactedModel.fetch(r);return this.caImpactedModel},createCAApprovalSumModel:function(r){var q={};c.tableModel=new o();c.tableModel.parse(r);return c.tableModel},UpdateUIForCC:function(s){var r=this;if(s.CCValue=="none"||s.CCValue=="any"){r.checkbox.setClassName("ChangeReq_CheckBox");if(!r.CAContainer.hasClassName("hidden")){r.CAContainer.addClassName("hidden")}if(s.CCValue=="any"){r.checkbox.setCheck(true)}else{r.checkbox.setCheck(false)}}else{r.CAContainer.removeClassName("hidden");var q=d.getWebappsAssetUrl("ENOChgActionProp","icons/iconSmallChangeAction.png");r.CAContainer.setContent({tag:"div",html:s.ChangeData.name,},{tag:"img",src:q,"class":"CAIconContainer",})}}};return c});