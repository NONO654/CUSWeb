require(["DS/SMAProcWebCMMUtils/SMAJSCMMUtils","DS/JSCMM/SMAJSCMMContent","DS/Tree/TreeNodeModel"],function(b,a,c){Polymer({is:"cmp-category-create-modal",properties:{_dataContainer:{value:null},_categoryToAdd:{type:Array,value:function(){return[]}}},listeners:{"dialog.cmp-wux-ok-clicked":"onOk","dialog.cmp-wux-cancel-clicked":"onCancel","dialog.close":"onCancel"},launch:function(n,m){this._dataContainer=n;this._CategoryListCanBeAdded=[];for(var h=0;h<m.length;h++){if(m[h]!==""){this.push("_CategoryListCanBeAdded",{Name:m[h]})}}var o=this._dataContainer.getTemporaryContent(b.State.Deleted);for(var g=0;g<o.length;g++){var l=o[g]._data.dataelements.name.value[0].value;this.push("_CategoryListCanBeAdded",{Name:l})}var e=this._dataContainer.getTemporaryContent(b.State.Created);for(var f=0;f<e.length;f++){var d=e[f]._data.dataelements.name.value[0].value;this._CategoryListCanBeAdded=this._CategoryListCanBeAdded.filter(function(i){return i.Name!==d})}this._categoryToAdd=[];this.$.dialog.show()},setDataContainer:function(d){if(!this._dataContainer){this._dataContainer=d}},addCategory:function(d){var e=d.currentTarget.id;if(d.currentTarget.checked===true){this._categoryToAdd.push(e)}else{this._categoryToAdd.pop(e)}},onOk:function(g){var d=this._dataContainer;var h=[];if(this._categoryToAdd.length!==0){for(var f=0;f<this._categoryToAdd.length;f++){var j=this.makeDataForCategoryAddition(this._categoryToAdd[f]);h.push(new a(j));h[f].setState(b.State.Created);h[f].setParent(d);d.addTemporaryContent(h[f])}}var e=g.detail.dialog;e.hide();var k=this.parentElement.$.contentTable;this.addContentToTable(k,h);this._categoryToAdd=[];this._dataContainer.testId="1234"},addContentToTable:function(j,f){var d,h;for(var e=0;e<f.length;++e){j.model.prepareUpdate();h={tree:f[e].getName(),Remarks:" ",Icon:" ",Files:" ",Modified:" ",content:f[e]};var g=new c({label:h.tree,grid:h});j.model.addRoot(g);j.model.pushUpdate()}},makeDataForCategoryAddition:function(d){var f={objectId:"",physicalId:"",busType:"Simulation Category -"+d,dataelements:{}};var e=f.dataelements;var g="";e.image={value:[{imageValue:g}]};e.ioMode={value:[{value:"None"}]};e.isLocked={value:[{value:"FALSE"}]};e.name={value:[{value:d}]};e.description={value:[{value:""}]};e.lastModified={value:[{actualValue:(new Date()).getTime()}]};return f},onCancel:function(e){this._CategoryListCanBeAdded=[];this._categoryToAdd=[];var d=e.detail.dialog;d.hide();this.fire("cmp-category-create-cancel")}})});