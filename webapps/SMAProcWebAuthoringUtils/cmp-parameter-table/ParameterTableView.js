define("DS/SMAProcWebAuthoringUtils/cmp-parameter-table/ParameterTableView",["UWA/Core","UWA/Class","UWA/Controls/Abstract","DS/Utilities/Dom","DS/SMAProcSPUI/Views/RulesEditor","DS/Tree/TreeListView","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/SMAProcWebCMMUtils/SMAJSCMMUtils","DS/Logger/Logger","DS/SMAProcWebAuthoringUtils/ParameterUIUtil","DS/SMAProcWebContents/WUXControlUtil","DS/SMAProcWebCMMUtils/SMAJSCMMAccessUtils","DS/Utilities/KeyboardUtils","module","i18n!DS/SMAProcWebCMMUtils/assets/nls/SMAJSCMMDataFlowUtilsNLS","css!DS/SMAProcWebAuthoringUtils/cmp-parameter-table/ParameterTableView.css","css!DS/UIKIT/UIKIT.css"],function(p,x,q,s,B,j,k,l,c,y,m,n,g,o,b,t){var h,e,d,a,w,f,A,r,u,i,z,C,v;C=y.getLogger(b);v=x.extend({_registerControl:function(D,E){if(window.jasmine){if(typeof D==="string"){if(this._registeredControls[D]){this._unregisterControl(D)}this._registeredControls[D]=E;return E}else{throw new Error("Invalid arguments!")}}},_unregisterControl:function(D){if(window.jasmine){if(typeof D==="string"){if(this._registeredControls[D]){try{if(this._registeredControls[D].destroy){this._registeredControls[D].destroy()}}catch(E){C.warn(E)}delete this._registeredControls[D]}}else{throw new Error("Invalid arguments!")}}},_unregisterAll:function(){if(window.jasmine){for(var D in this._registeredControls){if(this._registeredControls.hasOwnProperty(D)){this._unregisterControl(D)}}}},init:function(D){this._registeredControls={};this._parent(D)},destroy:function(){this._unregisterAll()}});d=function(I){var H,J,E,D,F;var G=this;J=I.nodeModel;if(!I.isHeader&&!J.options.grid.nonValueColumnReadOnly&&!this.options.isReadOnly){E=I.manager._getColumnOptionValue(I.dataIndex,"getValue");D=E.call(I.manager,I);F=J.options.grid.Name+"_"+I.dataIndex;H=n.createControl(F,"ComboBox",D,{value:D,choices:m.getValidModes(),readonly:!g.hasModifyAccess()});if(p.is(H)){I.cellView.elements.container.setContent(H);this.ControlFactory._registerControl(F,H)}H.addEventListener("onChange",function(N){N.preventDefault();N.stopImmediatePropagation();var M=N.options.value;var O=J.options&&J.options.grid&&J.options.grid.parameter;if(O){var L={grid:{Mode:M}};G.updateNodeOptions(J,L,true);var K={name:"Mode",value:M};this.dispatchEvent("updateparameter",[O,K,I.nodeModel])}}.bind(this))}return H};a=function(D){var K;var O=D.nodeModel;var R=this;if(!D.isHeader){var M=O.options.grid.Expression;var F=O.options.grid.Name+"_"+D.dataIndex;var I=O.options&&O.options.grid&&O.options.grid.parameter;var J=D.manager._getColumnOptionValue(D.dataIndex,"getValue");var P=J.call(D.manager,D);var E=O.options.grid;var L=!g.hasModifyAccess();var H=n.decideEditor(E,L,"parameterTable");var S={readonly:L,choices:E.Choices,type:E.Type};if(M){H="readonlyfield";S.tooltip=t["Parameter.expression.tooltip"]}if(H==="contentchooser"){var Q,T,U,N,G;if(I.getValue()&&I.getValue()._data){Q=I.getValue()._data.busType;if(Q===undefined){Q=I.getValue()._data.objectTypeValue}T=I.getValue().getFieldValue("title");U=I.getValue().getFieldValue("name");N=I.getValue()._data.displayName;G=I.getValue()._data.objectId}if(T===""){T=U}else{if(T===undefined||T===null){T=N}}S={displayName:T,busType:Q,objectId:G,readonly:L}}K=n.createControl(F,H,P,S);if(p.is(K)){D.cellView.elements.container.setContent(K);this.ControlFactory._registerControl(F,K)}K&&K.addEventListener("onChange",function(ab){ab.preventDefault();ab.stopImmediatePropagation();var aa,Z,W={name:"Value"};I=O.options&&O.options.grid&&O.options.grid.parameter;if(I){if(H==="contentchooser"){W.newObject=ab.detail.newObject;W.value=ab.detail.newObject;Z={grid:{Value:ab.detail.newObject.displayName}}}else{aa=ab.options.value;var X=O.options.grid.Type;if(X==="Integer"){aa=Number(aa);if(typeof aa==="number"){W.value=aa;Z={grid:{Value:aa}}}else{W.value=O.options.grid.Value;Z={grid:{Value:O.options.grid.Value}}}}else{W.value=aa;Z={grid:{Value:aa}}}}R.updateNodeOptions(O,Z,true);R.dispatchEvent("updateparameter",[I,W,D.nodeModel])}else{if(!I){var V;var Y=O.getParent().options.grid.parameter;V=O.options.grid.Name;aa=ab.options.value;W={name:"Value",value:aa,index:V};Z={grid:{Value:aa}};R.updateNodeOptions(O,Z,true);R.dispatchEvent("updateparameter",[Y,W,D.nodeModel.getParent()])}}});K&&K.addEventListener("onClear",function(X){X.preventDefault();X.stopImmediatePropagation();I=O.options&&O.options.grid&&O.options.grid.parameter;if(I){var W={grid:{Value:""}};R.updateNodeOptions(O,W,true);var V={name:"Value",value:""};R.dispatchEvent("updateparameter",[I,V,D.nodeModel])}})}return K};f=function(M){var F;var E=M.nodeModel;var J=this;if(!M.isHeader){var K=E.options.grid.Name+"_"+M.dataIndex;var G=M.manager._getColumnOptionValue(M.dataIndex,"getValue");var L=G.call(M.manager,M);var I=!g.hasModifyAccess(),D=E.options.grid;var H="lineEditor";if(D.newParameter){H="string"}else{if(D.nonValueColumnReadOnly){H="indentedstring"}}F=n.createControl(K,H,L,{readonly:I});if(p.is(F)){M.cellView.elements.container.setContent(F);this.ControlFactory._registerControl(K,F)}F.addEventListener("onChange",function(R){R.preventDefault();R.stopImmediatePropagation();var Q=R.options.value;var S=E.options&&E.options.grid&&E.options.grid.parameter;if(Q!==S.getName()){var O=m.validateParameterName(S.getParent(),Q,S.getName());if(!O.isValid){Q=O.validValue;J.dispatchEvent("notify",[O.errorMsg]);F.value=Q}}if(S){var P={grid:{Name:Q}};J.updateNodeOptions(E,P,true);var N={name:"Name",value:Q};J.dispatchEvent("updateparameter",[S,N,M.nodeModel])}});F.addEventListener("onkeydown",function(T){var U,Q,P,S,R,N;N=T.options.keyCode;U=M.nodeModel;Q=M.virtualRowID;P=M.virtualColumnID;if(N===o.ARROWUP){var O=U.getPreviousNode();if(O){M.manager._goToNode(U,-1);setTimeout(function(){R=M.manager.options.model[Q-1][P].getView();S=R.elements.container.firstElementChild;S.firstElementChild.select()},0)}}else{if(N===o.ARROWDOWN){var V=U.getNextNode();if(V){M.manager._goToNode(U,1);setTimeout(function(){R=M.manager.options.model[Q+1][P].getView();S=R.elements.container.firstElementChild;S.firstElementChild.select()},0)}}}});F.addEventListener("click",function(O){O.preventDefault();O.stopImmediatePropagation();var N=E.options&&E.options.grid&&E.options.grid.newParameter;if(N){J.dispatchEvent("addparameter",[])}})}return F};w=function(L){var E;var D=L.nodeModel;var H=this;if(!L.isHeader){if(!D.options.grid.nonValueColumnReadOnly){var J=D.options.grid.Name+"_"+L.dataIndex;var I=D.options.grid.Type;var K=D.options.grid.Value;if(typeof K==="object"||I==="Object"){return undefined}var F=L.manager._getColumnOptionValue(L.dataIndex,"getValue");K=F.call(L.manager,L);var G=!g.hasModifyAccess();E=n.createControl(J,"lineEditor",K,{readonly:G});if(p.is(E)){L.cellView.elements.container.setContent(E);this.ControlFactory._registerControl(J,E)}E.addEventListener("onChange",function(P){P.preventDefault();P.stopImmediatePropagation();var O=P.options.value;var Q=D.options&&D.options.grid&&D.options.grid.parameter;if(Q){var N={grid:{Expression:O}};H.updateNodeOptions(D,N,true);var M={name:"Expression",value:O};H.dispatchEvent("updateparameter",[Q,M,L.nodeModel])}});E.addEventListener("onkeydown",function(S){var T,P,O,R,Q,M;M=S.options.keyCode;T=L.nodeModel;P=L.virtualRowID;O=L.virtualColumnID;if(M===o.ARROWUP){var N=T.getPreviousNode();if(N){L.manager._goToNode(T,-1);setTimeout(function(){Q=L.manager.options.model[P-1][O].getView();R=Q.elements.container.firstElementChild;R.firstElementChild.select()},0)}}else{if(M===o.ARROWDOWN){var U=T.getNextNode();if(U){L.manager._goToNode(T,1);setTimeout(function(){Q=L.manager.options.model[P+1][O].getView();R=Q.elements.container.firstElementChild;R.firstElementChild.select()},0)}}}})}}return E};A=function(J){var I;var K=J.nodeModel;var F=this;if(!J.isHeader){if(!K.options.grid.nonValueColumnReadOnly){var E=K.options.grid.Name+"_"+J.dataIndex;var D=J.manager._getColumnOptionValue(J.dataIndex,"getValue");var G=D.call(J.manager,J);var H=!g.hasModifyAccess();I=n.createControl(E,"lineEditor",G,{readonly:H});if(p.is(I)){J.cellView.elements.container.setContent(I);this.ControlFactory._registerControl(E,I)}I.addEventListener("onChange",function(O){O.preventDefault();O.stopImmediatePropagation();var N=O.options.value;var P=K.options&&K.options.grid&&K.options.grid.parameter;if(P){var M={grid:{Description:N}};F.updateNodeOptions(K,M,true);var L={name:"Description",value:N};F.dispatchEvent("updateparameter",[P,L,J.nodeModel])}});I.addEventListener("onkeydown",function(R){var S,O,N,Q,P,L;L=R.options.keyCode;S=J.nodeModel;O=J.virtualRowID;N=J.virtualColumnID;if(L===o.ARROWUP){var M=S.getPreviousNode();if(M){J.manager._goToNode(S,-1);setTimeout(function(){P=J.manager.options.model[O-1][N].getView();Q=P.elements.container.firstElementChild;Q.firstElementChild.select()},0)}}else{if(L===o.ARROWDOWN){var T=S.getNextNode();if(T){J.manager._goToNode(S,1);setTimeout(function(){P=J.manager.options.model[O+1][N].getView();Q=P.elements.container.firstElementChild;Q.firstElementChild.select()},0)}}}})}}return I};r=function(K){var F,E,G,L,I,D,J;var H=this;E=K.nodeModel;if(!K.isHeader&&!E.options.grid.nonValueColumnReadOnly&&!this.options.isReadOnly){J=E.options&&E.options.grid&&E.options.grid.parameter;D=J&&m.getValidTypes(J._getStructureName());G=K.manager._getColumnOptionValue(K.dataIndex,"getValue");L=G.call(K.manager,K);I=E.options.grid.Name+"_"+K.dataIndex;F=n.createControl(I,"ComboBox",L,{value:L,choices:D,readonly:!g.hasModifyAccess()});if(p.is(F)){K.cellView.elements.container.setContent(F);this.ControlFactory._registerControl(I,F)}F.addEventListener("onChange",function(P){P.preventDefault();P.stopImmediatePropagation();var O=P.options.value;J=E.options&&E.options.grid&&E.options.grid.parameter;if(J){var N={grid:{Type:O}};H.updateNodeOptions(E,N,true);var M={name:"Type",value:O};H.dispatchEvent("updateparameter",[J,M,K.nodeModel])}})}return F};i=function(H){var G;var I=H.nodeModel;var F=this;if(!H.isHeader&&g.hasModifyAccess()){if(!I.options.grid.nonValueColumnReadOnly){var D;var E=I.options.grid.Name+"_Edit";G=document.createElement("div");D=document.createElement("span");D.setAttribute("id",E);D.setAttribute("title","Edit");D.classList.add("fonticon");D.classList.add("fonticon-pencil");D.classList.add("icon");G.appendChild(D);D.addEventListener("click",function(J){J.preventDefault();J.stopImmediatePropagation();F.nodeToModify=H.nodeModel;F.dispatchEvent("editParameterInDetail",[[{parameter:H.nodeModel._options.grid.parameter,node:H.nodeModel}]])});H.cellView.elements.container.setContent(G);this.ControlFactory._registerControl(E,G)}}return G};z=function(H){var G;var I=H.nodeModel;var F=this;if(!H.isHeader){if(!I.options.grid.nonValueColumnReadOnly){var D;var E=I.options.grid.Name+"_ParameterPath";G=document.createElement("div");D=document.createElement("span");D.setAttribute("id",E);D.setAttribute("title","Parameter Path");D.classList.add("fonticon");D.classList.add("fonticon-flow-children");D.classList.add("icon");G.appendChild(D);if(H.data.rowID===F.parameterPathRowID){D.style.color="#368ec4"}D.addEventListener("click",function(K){K.preventDefault();K.stopImmediatePropagation();F.nodeToModify=H.nodeModel;var L=H.nodeModel._options.grid.parameter;if(F.parameterPathID===undefined){F.parameterPathView=K.target;K.target.style.color="#368ec4";F.parameterPathView=K.target;F.parameterPathID=L.getId();F.parameterPathParameter=L;F.parameterPathRowID=H.rowID}else{if(H.rowID===F.parameterPathRowID){F.parameterPathView.style.color="";K.target.style.color="";L=null;F.parameterPathView=null;F.parameterPathID=undefined;F.parameterPathParameter=null;F.parameterPathRowID=null}else{if(F.parameterPathID){F.parameterPathView.style.color="";K.target.style.color="#368ec4";var J={node:F.getNodesFromParameterIds([F.parameterPathID])[0].node,parameter:F.parameterPathParameter};F.updateNodes([J]);F.getNodesFromParameterIds([F.parameterPathID]);F.parameterPathView=K.target;F.parameterPathID=L.getId();F.parameterPathParameter=L;F.parameterPathRowID=H.rowID}}}F.dispatchEvent("showParameterPathEvent",{parameter:L})});H.cellView.elements.container.setContent(G);this.ControlFactory._registerControl(E,G)}}return G};u=q.extend({name:"ParameterTableView",_initDefaultOptions:function(){this.nodeParamUpdateCache={};this.nodeCache={};e=[{text:"",dataIndex:"selection",type:"selection",width:30},{dataIndex:"tree",text:"",width:26,isDraggable:false,isEditable:false},{dataIndex:"Name",text:t["Parameter.TableColumn.Name"],width:220,isDraggable:false,isEditable:false,onCellRequest:f.bind(this)},{dataIndex:"Mode",text:t["Parameter.TableColumn.Mode"],width:88,isFilterable:true,onCellRequest:d.bind(this),isDraggable:false,isEditable:false},{dataIndex:"Type",text:t["Parameter.TableColumn.Type"],width:110,isFilterable:true,onCellRequest:r.bind(this),isDraggable:false,isEditable:false},{dataIndex:"Value",text:t["Parameter.TableColumn.Value"],width:200,onCellRequest:a.bind(this),isDraggable:false,isEditable:false},{dataIndex:"Expression",text:t["Parameter.TableColumn.Expression"],width:"auto",onCellRequest:w.bind(this),isDraggable:false,isEditable:false},{dataIndex:"Description",text:t["Parameter.TableColumn.Description"],width:"auto",onCellRequest:A.bind(this),isDraggable:false,isEditable:false},{dataIndex:"Action",text:"",width:40,onCellRequest:i.bind(this),isDraggable:false}];if(this.options.showParameterPathColumn===true){e.splice(1,0,{dataIndex:"ParameterPath",text:"",width:40,onCellRequest:z.bind(this),isDraggable:false})}},publishedProperties:{state:{type:"string",defaultValue:"",noNeedToApplyFlag:true}},init:function(D){this.nodeToModify=null;this._parent(D);this._initDefaultOptions();this._buildParameterView();this.ControlFactory=new v()},addNodes:function(E){var H,F,G=[],D=false;this._model.prepareUpdate();this.removeNewParameterRow();D=E&&E.length===1;E.forEach(function(K){F=new l({label:K.tree,grid:K});if(typeof K.Value==="object"){for(H in K.Value){var J={tree:"",Name:H,Value:K.Value[H],Mode:"",Expression:"",Description:"",Type:K.Type,Choices:"",nonValueColumnReadOnly:true,parent:K.Name};var I=new l({label:J.tree,grid:J});F.addChild(I)}}this.nodeCache[K.Name]=F;this._model.addRoot(F)}.bind(this));h&&h.onAddRows(E,0);this.addNewParameterRow();this._model.pushUpdate();if(D&&(E.length!==G.length)){this.scrollToNode(F)}},addToNodeUpdateCache:function(F){var D,E;F&&F.forEach(function(G){E=G.parameter;D=G.node;if(E.getState()===c.State.Modified){this.nodeParamUpdateCache[E.getId()]={node:D,oldParameter:E.getReference()}}}.bind(this))},clearNodeCache:function(){this.nodeParamUpdateCache={}},updateAllParametersReferenceToNode:function(F){this._model.prepareUpdate();for(var E=0;E<F.length;E+=1){var D=this.getNodesFromParameterIds([F[E].getId()]);if(D&&D.length>0){var G={grid:{parameter:F[E]}};p.extend(D[0].node.options,G,true)}}this._model.pushUpdate()},updateParameterToNodeAfterSave:function(){var D,E=[];for(D in this.nodeParamUpdateCache){if(this.nodeParamUpdateCache.hasOwnProperty(D)){E.push({node:this.nodeParamUpdateCache[D].node,parameter:this.nodeParamUpdateCache[D].oldParameter})}}this.updateNodes(E,false);this.nodeParamUpdateCache={}},unselectAll:function(){this.elements._treeListView&&this.elements._treeListView.getManager().unselectAll()},scrollToNode:function(D){setTimeout(function(){D&&this.elements._treeListView.getManager().scrollToNode(D);D.highlight();setTimeout(function(){D.unhighlight()},2000)}.bind(this),500)},updateNodeOptions:function(E,F,D){p.extend(E.options,F,D);F.grid&&F.grid.parameter&&this.addToNodeUpdateCache([{node:E,parameter:F.grid.parameter}]);h&&h.onAddRows([F.grid],0)},updateNodes:function(H,G){var E=[];this._model.prepareUpdate();H.forEach(function(J){var I=this.getDataToBeModified(J.parameter);E.push(J.parameter);J.node.updateOptions({label:I.tree,grid:I});if(J.node.getChildren()){this.updateChildNodes(J.node)}}.bind(this));var D=[];for(var F=0;F<E.length;F++){D.push({Type:E[F]._getDataTypeName(),Mode:E[F]._getModeName()})}h&&h.onAddRows(D,0);this._model.pushUpdate();if(!G){this.addToNodeUpdateCache(H)}},updateView:function(D){if(D){this.updateParameterToNodeAfterSave()}this.elements._treeListView.getManager().updateView(true)},updateChildNodes:function(E){if(E&&E._options.grid.parameter._getStructureName()==="Array"){var D=E._options.grid.parameter;var F=m.calculateDisplayValue(D);var H=E.isExpanded();this._model.prepareUpdate();E.removeChildren();for(var I in F){var G=new l({label:I,grid:{tree:"",Name:I,Value:F[I],Mode:"",Expression:"",Description:"",Type:D._getDataTypeName(),Choices:"",nonValueColumnReadOnly:true,parent:D.getName()}});E.addChild(G)}}if(H){E.expand()}this._model.pushUpdate()},getDataToBeModified:function(F){var D;if(F._getDataTypeName()==="Object"){if(F.getValue()){D=F.getValue()._data.displayName}else{D=" "}}var E={tree:"",Name:F.getName(),Value:D||m.calculateDisplayValue(F),Mode:F._getModeName(),Expression:F.getExpression()||"",Description:F.getDescription(),Type:F._getDataTypeName(),Multiline:F.getDataSubType(),parameter:F,Choices:!F.getDimensions?F.getLimits().join(", "):""};return E},_fireSelectedNodesEvent:function(){var D=this.getSelectedNodeParameter();this.dispatchEvent("parameterSelected",[D])},disableParameterPath:function(){if(this.parameterPathView){this.parameterPathView.style.color="";var D={node:this.getNodesFromParameterIds([this.parameterPathID])[0].node,parameter:this.parameterPathParameter};this.updateNodes([D]);this.parameterPathView=null;this.parameterPathID=undefined;this.parameterPathParameter=null;this.parameterPathRowID=null}},getParameterPathParameter:function(){return this.parameterPathParameter},addNewParameterRow:function(){},removeNewParameterRow:function(){},_loadDocument:function(){var E=new k({useAsyncPreExpand:false});this.elements.tableContainer.classList.remove("wux-ui-state-ready");this.elements.tableContainer.classList.add("wux-ui-state-busy");E.prepareUpdate();var I=this.options.data;for(var F=0;F<I.length;F+=1){var J=new l({label:I[F].tree,grid:I[F]});if(typeof I[F].Value==="object"){for(var K in I[F].Value){var H=new l({label:K,grid:{tree:"",Name:K,Value:I[F].Value[K],Mode:"",Expression:"",Description:"",Type:I[F].Type,Multiline:I[F].subType,Choices:"",nonValueColumnReadOnly:true,parent:I[F].Name}});J.addChild(H)}}this.nodeCache[I[F].Name]=J;E.addRoot(J)}E.pushUpdate();this._model=E;this.addNewParameterRow();var D=this._model.getXSO();D.onChange(function(){var L=this.getSelectedNodeParameter();this.dispatchEvent("parameterSelected",[L])}.bind(this));var G=this.elements._treeListView.getManager();G.loadDocument(this._model);setTimeout(function(){this.elements.tableContainer.classList.remove("wux-ui-state-busy");this.elements.tableContainer.classList.add("wux-ui-state-ready");this.dispatchEvent("parametertableready");this._fireSelectedNodesEvent()}.bind(this),50)},unloadDocument:function(){try{this.ControlFactory._unregisterAll();this.elements._treeListView.getManager().unloadDocument();this._model=null;this.elements._treeListView.destroy();this.elements.body.destroy();this.elements.tableContainer.empty();h&&h.destroy();h=null}catch(D){C.warn(D)}},getColumnIndexDataIndex:function(E,G){var D=-1,F=0;E.forEach(function(H){if(H.dataIndex===G){D=F}F+=1});return D},_buildParameterView:function(){var F,D,G,H=this;this.elements=this.options.elements;this.elements.tableContainer.classList.add("wux-controls-input-output");this._model=new k({useAsyncPreExpand:false});F=this.options.columns||e;D=this.getColumnIndexDataIndex(F,"Type");G=this.getColumnIndexDataIndex(F,"Mode");if(D!==-1){F[D].isFilterable=this.options.filterType}if(G!==-1){F[G].isFilterable=this.options.filterMode}this.elements._treeListView=new j({columns:F,defaultCellHeight:30,resize:{rows:false,columns:true},showVerticalLines:true,useTransparentScroller:false,alternateRowColor:true,isEditable:false,iconsSize:22,isSortable:true,enableActiveUI:false,enableKeyboardNavigation:false,show:{rowHeaders:false,columnHeaders:true},selection:{nodes:false,cells:false,rowHeaders:true,columnHeaders:true,unselectAllOnEmptyArea:false,toggle:true,canMultiSelect:true},performances:{buildLinks:false,renderingMode:"adaptive",useRequestAnimationFrameRendering:false,debounceCellRequest:true,debounceCellInternalUpdateTimer:10},showLoaderIndicator:true,enableDragAndDrop:false,shouldAcceptDrag:function(){return false},height:"auto",apiVersion:"2",allowUnsafeHTMLContent:false});this.elements._treeListView.elements.container.addClassName("wux-controls-parameter-table-view");this.elements.body=new p.createElement("div",{"class":"wux-controls-parameter-body",html:[{tag:"div",styles:{position:"relative",height:"100%"},html:this.elements._treeListView}]});this.elements._treeListView.onNodeClick(function(){var I=arguments[0];if(!I.isHeader){if(I.columnID===1&&I.nodeModel.hasChildren()){if(!I.nodeModel.isExpanded()){I.nodeModel.expand()}else{I.nodeModel.collapse()}}}});this.elements.body.inject(this.elements.tableContainer);var E=this.elements._treeListView.getManager();E.onReady(function(){H._loadDocument();h&&h.destroy();h=new B({spreadsheet:H.elements._treeListView,allowEmptyValue:false,container:H.options.elements.filterContainer,searchDelay:500,columns:H.columns,show:{download:false,tablePreferences:false,subscription:false}})})},getSelectedNodeParameter:function(){var E=this._model.getSelectedNodes(),D=[];E.forEach(function(F){if(F&&F._options&&F._options.grid&&F._options.grid.parameter){D.push({parameter:F._options.grid.parameter,node:F})}});return D},getSelectedParameters:function(){var E=this._model.getSelectedNodes(),D=[];E.forEach(function(F){if(F&&F._options&&F._options.grid&&F._options.grid.parameter){D.push(F._options.grid.parameter)}});return D},getSelectedNodes:function(){var D=this._model.getSelectedNodes();return D},getNodesFromParameterTitles:function(F){var E=[];var D=this._model.getRoots();if(D&&D.length>0){F.forEach(function(G){D.forEach(function(H){if(H.options.grid.parameter&&H.options.grid.parameter.getName()===G){E.push({title:G,node:H})}})})}return E},getNodesFromParameterIds:function(F){var E=[];var D=this._model.getRoots();if(D&&D.length>0){F.forEach(function(G){D.forEach(function(H){if(H.options.grid.parameter.getId()===G){E.push({id:G,node:H})}})})}return E},getManager:function(){var D=null;D=this.elements&&this.elements._treeListView&&this.elements._treeListView.getManager();return D},getModelLength:function(){var D=0;if(this._model&&this._model.getRoots()){D=this._model.getRoots().length}return D},removeNodes:function(D){this._model.prepareUpdate();D.forEach(function(E){E.node.remove()});this._model.pushUpdate();this._fireSelectedNodesEvent()},clearTableNodes:function(){this._model.prepareUpdate();for(var D in this.nodeCache){this.nodeCache[D].remove();delete this.nodeCache[D]}this._model.pushUpdate()}});return u});