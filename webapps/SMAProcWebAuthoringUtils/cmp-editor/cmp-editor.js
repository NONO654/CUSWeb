require(["ace/ace","ace/range","ace/ext/modelist","ace/mode/text","ace/theme/monokai","ace/lib/event"],function(l,L,e,b,G,O){var a={ONTEXTSELECT:"textselect",CMPEDITORREADY:"cmpEditorReady"};var k=Object.freeze({number:1,word:2,string:3,multiline:4,invalid:5});var w=Object.freeze({single:1,column:2,invalid:3});function i(){var P=[];P=this._EditorInst.getSelection().getAllRanges();return P}function K(Q){var R=[];var S=this._EditorInst.getSession().getMarkers();for(var T in S){var P=S[T];if(P!==null&&P.clazz!==null&&P.clazz!==undefined&&P.range!==null&&P.range!==undefined){if(P.range.end.column=="Infinity"||P.range.start.column=="Infinity"){continue}if(P.clazz==S[Q].clazz&&P.range==S[Q].range){R.push(P.range)}}}return R}function B(S,P){var R=[];for(var Q=0;Q<S.length;Q++){var T=S[Q];this._EditorInst.getSession().on("changeFrontMarker",function(){});if(P==undefined||P==null){P="cmp-editor selectioncss"}var U=this._EditorInst.getSession().addMarker(T,P,"text",true);R.push(U)}return R}function y(P){this._EditorInst.getSession().removeMarker(P)}function v(Q){var P=this._EditorInst.getSession().getLine(Q);return P}function q(R,Q){var P;P=this._EditorInst.getSession().getLines(R,Q);return P}function p(P){var Q=this;require([P],function(R){if(Q._EditorInst!==null&&Q._EditorInst!==undefined){Q._EditorInst.getSession().setMode(P)}})}function h(){var P=this._EditorInst.getSession().getMode();return P}function g(){}function m(){var P=this._EditorInst.getCopyText();return P}function F(){return true}function j(){}function M(){}function x(){var P=this._EditorInst.getSelection().getCursor();return(P.row+","+P.column)}function d(Q,P){this._EditorInst.getSelection().clearSelection();this._EditorInst.getSelection().moveCursorTo(Q,P,false);return true}function H(R,Q){var P=this._EditorInst.getSelection().getWordRange(R,Q);this._EditorInst.getSelection().setSelectionRange(P,false)}function c(){return this._EditorInst.getSession().getLength()}function N(){}function J(P){return this._EditorInst.find(P,false,true,false,true,false)}function u(){}function o(P,R,Q){}function z(){}function D(){return true}function E(P){return this._EditorInst.getSession().setUseWrapMode(P)}function s(){return this._EditorInst.getSession().getUseWrapMode()}function r(){return this._EditorInst.getReadOnly()}function I(P){this._EditorInst.setReadOnly(P)}function A(){this._EditorInst.getSession().selection.on("changeSelection",function(){})}function t(){var P=k.invalid;var Q=this._EditorInst.getCopyText();if(!isNaN(Q)){P=k.number}else{if(this._EditorInst.getSelection().isMultiLine()){P=k.multiline}else{if(/\s/.test(Q)){P=k.string}else{P=k.word}}}return P}function f(){var P=w.invalid;var Q=i.call(this).length;if(Q==1){P=w.single}else{if(Q>1){P=w.column}}return P}function n(){}function C(){if(this._EditorInst.getCopyText().length>0){var Q=this._EditorInst.getSelection();var P=Q.getCursor();console.log("mouseup "+P.row+","+P.column);this.fire(a.ONTEXTSELECT)}else{console.log("mouseup on empty text")}}Polymer({is:"cmp-editor",properties:{_EditorInst:{type:Object,notify:true,value:function(){return{}}}},ready:function(){},attached:function(){var P=this;this.async(function(){P.fire(a.CMPEDITORREADY,P)})},getEditorSelection:function(){var Q=this;if(m.call(Q).length<1){return null}var P={textType:t.call(Q),text:m.call(Q),location:i.call(Q),locationID:null,selectionType:f.call(Q),cssClassStyle:Q.cssClassStyle};return P},setEditorSelection:function(P){if(P.textType){this.textType=P.textType}if(P.text){this.textType=P.text}if(P.location){this.location=P.location;this.locationID=B.call(this,this.location,P.cssClassStyle);P.locationID=this.locationID}if(P.selectionType){this.selectionType=P.selectionType}if(P.cssClassStyle){this.cssClassStyle=P.cssClassStyle}else{this.cssClassStyle="cmp-editor selectioncss"}},removeEditorSelection:function(R){var S=this;if(R.selectionType==w.column||R.selectionType==w.single){var Q=[];Q=R.locationID;for(var P=0;P<Q.length;P++){y.call(S,Q[P]);this._EditorInst.getSession().on("changeFrontMarker",function(){})}}R.textType=null;R.text=null;R.location=null;R.locationID=null;R.selectionType=null;R.cssClassStyle=null;return true},compareSelectionRange:function(Q,P){if(Q==undefined||P==undefined){return false}var S=false;var V;var U;var T;if(P.selectionType==w.single){if(Q.selectionType==w.single){V=P.location[0];U=Q.location[0];return V.containsRange(U)}else{if(Q.selectionType==w.column){V=P.location[0];for(T=0;T<Q.location.length;T++){U=Q.location[T];S=V.containsRange(U);if(S==true){return S}}}}}else{if(P.selectionType==w.column){if(Q.selectionType==w.single){U=Q.location[0];for(T=0;T<P.location.length;T++){V=P.location[T];S=V.containsRange(U);if(S==true){return S}}}else{if(Q.selectionType==w.column){for(T=0;T<Q.location.length;T++){U=Q.location[T];for(var R=0;R<P.location.length;R++){V=P.location[R];S=V.containsRange(U);if(S==true){return S}}}}}}}return S},editorInitialisation:function(P){if(P!==null){var Q=this.querySelector("#editordiv");var R=document.createElement("div");R.setAttribute("class","cmp-editor editorcss");R.setAttribute("id",P);Q.appendChild(R);this._EditorInst=l.edit(P);if(this._EditorInst!==null&&this._EditorInst!==undefined){this._EditorInst.setTheme("ace/theme/monokai");p.call(this,"ace/mode/text");return true}}return false},editorCustomInitialisation:function(T,P,R){if(T!==null&&P!==null&&R!==null){var Q=this.querySelector("#editordiv");var S=document.createElement("div");S.setAttribute("class","cmp-editor editorcss");S.setAttribute("style","height: '+ height + ';");S.setAttribute("id",T);Q.appendChild(S);this._EditorInst=l.edit(T);if(this._EditorInst!==null&&this._EditorInst!==undefined){this._EditorInst.setTheme("lib/ace/theme/monokai");p.call(this,"'+ mode + '");return true}}return false},editorRelease:function(){if(this._EditorInst!==null&&this._EditorInst!==undefined){var P=this._EditorInst.container;P.parentNode.removeChild(P);this._EditorInst.destroy()}},registerEvents:function(P){if(this._EditorInst!==null&&this._EditorInst!==undefined){switch(P){case"textselect":this._EditorInst.on("mouseup",C.bind(this));break;case"click":O.addListener(this._EditorInst.renderer.content,"click",n.bind(this));break}}},processFileWithMode:function(R,Q){var P=new FileReader();var S=this;P.onload=function(){var T=e.getModeForPath(Q).mode;p.call(S,T);S._EditorInst.setValue(P.result,-1)};P.readAsText(R)},processFile:function(Q){var P=new FileReader();P.onload=function(){if(this._EditorInst!==null&&this._EditorInst!==undefined){this._EditorInst.setValue(P.result,-1)}};P.readAsText(Q)},created:function(){}})});