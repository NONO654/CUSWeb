require(["DS/SMAProcADUI/ad-mdata-instance/ADMDataInstance"],function(d){var c="PLMCoreReference,PLMCoreRepReference,VPMReference,Physical Product,Physics Simulation,Documents,Simulation Document - Versioned,Simulation Document - NonVersioned",f="CAELauncherPreference_",g={SIMDOC_V:"Simulation Document - Versioned",SIM_FOLDER:"Simulation Folder",FILE:"file",FILE_VERSION:"fileversion",CAEPart:"PLMCoreReference,PLMCoreRepReference,VPMReference,Physical Product",SIMULATION:"Physics Simulation,DesignSight"},b={NOTINSTANCIATED:"SMAMpaCAEWidgetLauncher.CAESession.1"},e={basics:{showMask:"TRUE",readMask:"TRUE",type:"Simulation",fromconnectMask:"TRUE",fromdisconnectMask:"TRUE",modifyMask:"TRUE",locked:"FALSE",deleteMask:"TRUE"},connections:{SimulationCategory:{"Internal Data":"dummyId"}}},a=function(k,j,i){var h=new d.ADMDataInstance();if(g.SIMULATION.split(",").indexOf(i)>-1){h.type=d.ADMDataInstance.TYPES.simulation}else{if(g.CAEPart.split(",").indexOf(i)>-1){h.type=d.ADMDataInstance.TYPES.part}else{h.type=d.ADMDataInstance.TYPES.document}}h.mdType=d.ADMDataInstance.TYPES.part;h.modelID=k;h.name=j?j:"document";h.isReference=true;h.details.versioned=false;return h};window.DS.SMAMpaCAEWidgetLauncher=window.DS.SMAMpaCAEWidgetLauncher||{};window.DS.SMAMpaCAEWidgetLauncher.CAESession=window.Polymer({is:"cae-session",properties:{managedData:{type:Object,value:null},securityContext:{type:String,value:null},process:{type:Object,value:function(){return e},notify:true},processID:{type:String,value:"",}},ready:function(){var h=this.$.isDash.getMcsUri();this.$.mcsBaseURL.setValue(h);this.$.mcsWSBaseURL.setValue(h+"/resources/slmservices");this.$.inDash.setValue(true)},onCloud:function(){return this.$.session.onCloud},getCategoryID:function(){return this.$.session.getCategoryID.apply(this.$.session,arguments)},isItemBeingUploaded:function(){return this.$.session.isItemBeingUploaded.apply(this.$.session,arguments)},loadContentObject:function(i,k,h,j){if(this.queryProcessID===null){i.childInstances=i.childInstances?i.childInstances:[];i.loaded=true;if(h){h(i)}}else{this.$.session.loadContentObject.call(this.$.session,i,k,h,j)}},removeOwnedContent:function(){return this.$.session.removeOwnedContent.apply(this.$.session,arguments)},removeReferencedContent:function(i,j,h,k){if(this.queryProcessID===null){this.managedData.childInstances.splice(this.managedData.childInstances.indexOf(i),1);if(h){h()}this.fire(window.DS.SMAProcADUI.ADSession.EVENTS.mdataRemoved,{})}else{this.$.session.removeReferencedContent.call(this.$.session,i,j,h,k)}},uploadLocalFile:function(i,k,h,j){if(this.queryProcessID===null){this.fire(this.COMMON_EVENTS.ERROR,{errorCode:b.NOTINSTANCIATED,isFatal:false});if(j){j()}}else{this.$.session.uploadLocalFile.call(this.$.session,i,k,h,j)}},uploadExecutionData:function(){return this.$.session.uploadExecutionData.apply(this.$.session,arguments)},createFolder:function(i,k,h,j){if(this.queryProcessID===null){this.fire(this.COMMON_EVENTS.ERROR,{errorCode:b.NOTINSTANCIATED,isFatal:false});if(j){j()}}else{this.$.session.createFolder.call(this.$.session,i,k,h,j)}},getEditorPath:function(){return this.$.session.getEditorPath.apply(this.$.session,arguments)},editFile:function(){return this.$.session.editFile.apply(this.$.session,arguments)},setEditorPath:function(){return this.$.session.setEditorPath.apply(this.$.session,arguments)},editComment:function(){return this.$.session.editComment.apply(this.$.session,arguments)},downloadFile:function(){return this.$.session.downloadFile.apply(this.$.session,arguments)},addReferencedContent:function(i,j,h,k){if(this.queryProcessID===null){if(h){h()}}else{this.$.session.addReferencedContent.call(this.$.session,i,j,h,k)}},set3DXParameters:function(){return this.$.session.set3DXParameters.apply(this.$.session,arguments)},reset:function(){var h=this.getObjectFromCompass(c);this.managedData=new d.ADMDataInstance();this.managedData.type=d.ADMDataInstance.TYPES.category;if(h){this.managedData.childInstances.push(a(h.objectId,h.displayName,h.objectType))}this.managedData.modelID=this.getCategoryID(window.DS.SMAProcADUI.ADSession.CATEGORY_INTERNAL_DATA);this._initializing=false;this.process=e;this.queryProcessID=null;this.fire(window.DS.SMAProcADUI.ADSession.EVENTS.sessionLoaded,{})},setWidgetPreference:function(h,i){window.widget.setValue(h,i);this.$.storage.setItem(f+h,i);this.$.securityContext.value=i},getWidgetPreference:function(h){if(this.$.isDash.getSecurityContext()===null||this.$.isDash.getSecurityContext()===undefined){if(this.$.storage.getItem(f+h)===null||this.$.storage.getItem(f+h)===undefined){return undefined}else{window.widget.setValue(h,this.$.storage.getItem(f+h));return this.$.storage.getItem(f+h)}}else{this.$.storage.setItem(f+h,this.$.isDash.getSecurityContext());return this.$.isDash.getSecurityContext()}},getObjectFromCompass:function(l){try{var j=window.widget.getValue("X3DContentId");if(j!==null&&j!==undefined){j=JSON.parse(j);if(j.hasOwnProperty("data")&&j.data.hasOwnProperty("items")){for(var n in j.data.items){if(j.data.items.hasOwnProperty(n)){var i=j.data.items[n];var h=l.split(",");for(var k=0;k<h.length;k++){if(i.objectType.toLowerCase().trim()===h[k].toLowerCase().trim()){return i}}}}return undefined}}return undefined}catch(m){console.log("Unable to read "+l+" object Id from X3DContent");return undefined}},isCollaSpaceValid:function(j,h){for(var i=0;i<j.length;i++){if(j[i].trim()===h.toString().trim()){return true}}return false},queryProcessIDChanged:function(){this.$.session.queryProcessIDChanged.call(this.$.session)},behaviors:[window.DS.SMAProcSP.SPBase]});window.DS.SMAMpaCAEWidgetLauncher.CAESession.ERRORCODES=b});