(function(f){var a,e,d,c,h,b,g;c="SecurityContext";h="CAELauncherPreference_";a=function(j,i){e.call(this,function(l){var k={MCS_WEBSERVICE_BASE_URL:"/resources/slmservices/",MCS_JOB_XML_URL:"jobs",EED_COS_PUBKEY_URL:"/execution/pubkey",MCS_TICKET_URL:"ticket/get",MCS_EXCRYPT_URL:"data/getEncryptedCreds",EED_RUN_INFO_URL:"/execution/run/workflow",MCS_APPLET_JS_URL:"/simulationcentral/smaLocalOperations.jsp?objectAction=encryptCredentials&isPopUp=false",EED_HOST:""};k.MCS_BASE_URL=this._SPDashboard.getMcsUri();k.EED_BASE_URL=l.cos.trim();j.jobXMLURL=k.MCS_BASE_URL+k.MCS_WEBSERVICE_BASE_URL+k.MCS_JOB_XML_URL;j.cosPubkeyURL=k.EED_BASE_URL+k.EED_COS_PUBKEY_URL;j.mcsTicketURL=k.MCS_BASE_URL+k.MCS_TICKET_URL;j.encryptURL=k.MCS_BASE_URL+k.MCS_WEBSERVICE_BASE_URL+k.MCS_EXCRYPT_URL;j.appletJSPURL=k.MCS_BASE_URL+k.MCS_APPLET_JS_URL;j.runURL=k.EED_BASE_URL+k.EED_RUN_INFO_URL;j.mcsURL=k.MCS_BASE_URL;j.runInfo="<RunInfo logLevel='Debug' submissionHost='"+k.EED_HOST+"'></RunInfo>";j.timeout="90000";i()}.bind(this))};e=function(i){this.sendRequest({uri:"/resources/slmservices/cos/url",appendSecurityContext:false,responseType:"json",isE6WCall:false,headers:{},method:"GET",payload:{},onComplete:function(j){i({cos:JSON.parse(j.response).url})},onError:function(){console.log("Getting COS URL failed")}})};b=function(i){i.uri=this._SPDashboard.getMcsUri()+i.uri;if(i.isE6WCall&&i.verb.toLowerCase()==="post"){i.data="updateWidget="+encodeURIComponent(JSON.stringify(i.payload));i.headers={Accept:"application/json,application/ds-json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}this.$.webService.sendRequest(i)};d=function(){this._SPDashboard=document.createElement("sp-dashboard")};g=function(i){var j=new f.DS.SMAProcSP.SPRun();j.addEventListener("success",function(l){l.cancelBubble=true;l.stopPropagation();l.stopImmediatePropagation();try{i.onComplete.call(i,l.detail.result.MCSJobID)}catch(k){i.onComplete.call(i,l)}});j.addEventListener("error",function(l){l.cancelBubble=true;l.stopPropagation();l.stopImmediatePropagation();try{i.onError.call(i,l.detail.response)}catch(k){i.onError.call(i,l)}});a.call(this,j,function(){j.runSimulation(this,i.simulationId,undefined,true)})};f.Polymer({is:"cae-launcher-util",sendRequest:b,executeSimulation:g,ready:d,onError:function(i){if(i&&i.stopPropagation){i.stopPropagation()}},behaviors:[f.DS.SMAProcSP.SPBase]})}(this));