define("DS/SMAProcJobListingUI/Views/ContentPropertiesView",["UWA/Core","DS/UIKIT/Alert","DS/W3DXComponents/Views/Temp/TempItemView","DS/SMAProcJobListingUI/Views/ModelForm","DS/W3DXComponents/Views/Layout/ScrollView","DS/W3DXComponents/IdCard","css!DS/SMAProcJobListingUI/SMAProcJobListingUI"],function(d,h,f,c,g,b){var a="content-properties";var e=f.extend({name:a,tagName:"div",template:function(){return'<div class="'+this.getClassNames("-subcontainer")+'"></div>'},domEvents:{},init:function(i){["container","template","tagName","domEvents"].forEach(function(j){delete i[j]});this._parent.call(this,i)},setup:function(){this.container.addClassName(this.getClassNames("-container"));this._form=this._initForm()},_initForm:function(){var i={className:"vertical",fields:function(){var k=[{type:"text",name:"type",attributes:{"data-attr":"return 'Simulation Job'","data-editable":false},label:"Type"},{type:"textarea",name:"description",attributes:{"data-attr":"return this.get('description')","data-editable":false},rows:5,label:"Description",placeholder:""},{type:"date",name:"created",attributes:{"data-attr":"return new Date(this.get('startDate'))","data-editable":false},label:"Created"},{type:"date",name:"modified",attributes:{"data-attr":"return new Date(this.get('endDate')) == 'Invalid Date' ?'': new Date(this.get('endDate'))","data-editable":false},label:"Modified"},{type:"text",name:"owner",attributes:{"data-attr":"return this.get('owner')","data-editable":false},label:"Owner"},{type:"submit",value:"Save"},{type:"reset",value:"Cancel"}];return k}};var j=this.formProperties=new c(d.extend({model:this.model,events:{onSubmit:this._onFormSubmit.bind(this),onReset:this._onFormReset.bind(this)}},i));return j},setOptions:function(j){var i=j.idCard;if(i){this._setIdCard(i);delete j.idCard}return this._parent.apply(this,arguments)},_setIdCard:function(i){if(!(i instanceof b)){throw new Error("You try to set idCard option with no instance of idCard")}var j=this._idCard;j&&this.stopListening(j);this._idCard=i;this.listenTo(i,{onEditProperties:this.dispatchAsEventListener("onEdit"),onTitleChangeRequest:this._onTitleChange})},_resetIdCard:function(){this._idCard._refreshSection("title");this._idCard._refreshSection("date");return this._switchIdCardToViewMode()},_switchIdCardToEditMode:function(){var i=this._idCard;this.model.get("actions").indexOf("edit")!==-1&&(i._editableElements=["title"]);if(i){i.switchToEditMode()}return i},_switchIdCardToViewMode:function(){var i=this._idCard;this._idCard._refreshSection("date");if(i){i.switchToViewMode()}return i},reset:function(){var i=this._form;this._resetIdCard();i.reset();return this},onRender:function(){var i=this.getElement(".content-properties-subcontainer");this.formProperties.inject(i);i.render=function(){};i.container=i;var j=new g({view:i,useInfiniteScroll:false,usePullToRefresh:false});j.render().inject(this.container)},_onTitleChange:function(i){this.newtitle=i},_onFormSubmit:function(){this._switchIdCardToViewMode();this.dispatchEvent("onEndEdit")},_onFormReset:function(){this._resetIdCard();this.dispatchEvent("onEndEdit")},onEdit:function(){var i=this.formProperties;this._switchIdCardToEditMode();i.dispatchEvent("onEdit")},onEndEdit:function(){delete this.newtitle},onDestroy:function(){if(this.formProperties){this.formProperties.destroy();delete this.formProperties}}});return e});