define("DS/SMAProcJobListingUI/SkeletonUtils/ContentSkeletonOptions",["UWA/Core","UWA/Drivers/Alone","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Alert","DS/W3DXComponents/Skeleton","DS/W3DXComponents/Views/Layout/ChannelView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/ListView","DS/SMAProcJobListingUI/Views/Item/TileView","DS/SMAProcJobListingUI/Views/Item/ThumbnailView","DS/W3DXComponents/Collections/ActionsCollection","DS/W3DXComponents/Views/EmptyView","DS/SMAProcJobListingUI/Data","DS/SMAProcJobListingUI/Model/SimulationJob","DS/SMAProcJobListingUI/Views/TimeAgo","DS/SMAProcJobListingUI/Views/ContentLogsView","DS/SMAProcJobListingUI/Views/ContentParameterHistoryView","DS/SMAProcJobListingUI/Views/ContentPropertiesView","i18n!DS/SMAProcJobListingUI/assets/nls/JobListingWidget"],function(l,a,i,g,j,s,d,e,o,w,B,t,h,x,z,A,b,n,k){var v,c=function(){return window.widget};var u={JOB_STATUS_NOT_STARTED:"NotStarted",JOB_STATUS_RUNNING:"Running",JOB_STATUS_STARTED:"Started",JOB_STATUS_PAUSED:"Paused",JOB_STATUS_WAITING:"Waiting",JOB_STATUS_COMPLETED:"Completed",JOB_STATUS_ABORTED:"Aborted",JOB_STATUS_FAILED:"Failed",JOB_STATUS_INITIALIZING:"Initializing"};var r=[{id:"channel",view:s},{id:"tile",view:d,itemView:o},{id:"list",view:e}];function q(){return[{id:"tile",view:d,itemView:o,title:k.titleTileView,"default":c().getValue("currentViewId")==="tile"},{id:"thumbnail",view:d,itemView:w,title:k.titleThumbnailView,"default":c().getValue("currentViewId")==="thumbnail"},{id:"list",view:e,itemView:o,selectionMode:"oneToOne"}]}var p=new g({className:"csg-alert",closable:true,renderTo:document.body,visible:true,autoHide:false,messageClassName:"error"});function y(){var D,F,E,C;console.log("onItemViewDrag");D=arguments[arguments.length-2];F=arguments[arguments.length-1];if(D){E=D.model;var C={protocol:"3DXContent",version:"0.1",source:"SIMJDIS_AP",data:{items:[{envId:c().getValue("x3dPlatformId"),serviceId:"3DSpace",contextId:c().getValue("collab-space"),objectId:E.id,objectType:E.get("type"),simulationId:E.get("simulationId")}]}};F.dataTransfer.setData("text",JSON.stringify(C))}}function f(){var D=this,G=this.collection,E={};E.onComplete=function(){if(D.container.offsetParent){D.container.removeClassName("loading");Object.keys(D.contentsViews).map(function(H){D.contentsViews[H].scrollView.endLoading()})}};E.onFailure=function(){if(D.container.offsetParent){Object.keys(D.contentsViews).map(function(H){D.contentsViews[H].scrollView.endLoading();D.contentsViews[H].scrollView.useInfiniteScroll(false)})}};var F=(G.state.currentPage)*G.state.pageSize,C=G.idsCollection.length;if(F>=C){D.container.removeClassName("loading");Object.keys(this.contentsViews).forEach(function(H){D.contentsViews[H].scrollView.endLoading();D.contentsViews[H].scrollView.useInfiniteScroll(false)});D.dispatchEvent("infiniteScrollEnd")}else{G.fetch(E)}}function m(){var C=arguments[arguments.length-1];c().setValue("currentViewId",C)}v={getIdCardOptions:function(C){return{collapsed:C.minimizeIdCardView,attributesMapping:{ownerName:function(){return this.get("owner")},date:function(){var I=this.toJSON(),D=new Date(I.startDate),G=new Date(I.endDate),H,E,F;F=new window.Intl.DateTimeFormat(undefined,{month:"short",year:"numeric",day:"2-digit",weekday:"short",hour:"2-digit",minute:"2-digit"});if(G.toString()!=="Invalid Date"){G=F.format(G)}else{G="now"}if(D.toString()!=="Invalid Date"){D=F.format(D)}else{D="now"}switch(I.status){case u.JOB_STATUS_NOT_STARTED:H=l.createElement("span",{"class":"fonticon fonticon-infinity"});E=k.NotStartedJob;break;case u.JOB_STATUS_RUNNING:H=l.createElement("span",{"class":"fonticon fonticon-back-in-time"});E=k.replace(k.RunningJob,{tag1:D});break;case u.JOB_STATUS_PAUSED:H=l.createElement("span",{"class":"fonticon fonticon-hourglass"});E=k.replace(k.PausedJob,{tag1:D});break;case u.JOB_STATUS_WAITING:H=l.createElement("span",{"class":"fonticon fonticon-hourglass"});E=k.replace(k.WaitingJob,{tag1:D});break;case u.JOB_STATUS_COMPLETED:H=l.createElement("span",{"class":"fonticon fonticon-check"});E=k.replace(k.CompletedJob,{tag1:G});break;case u.JOB_STATUS_FAILED:H=l.createElement("span",{"class":"fonticon fonticon-cancel-circled"});E=k.replace(k.FailedJob,{tag1:G});break;case u.JOB_STATUS_ABORTED:H=l.createElement("span",{"class":"fonticon fonticon-minus-circled"});E=k.replace(k.AbortedJob,{tag1:G});break;default:}return H.outerHTML+E}},actions:function(){if(this._attributes.status===u.JOB_STATUS_RUNNING){return[{text:"Pause",icon:"pause",handler:function(){this.model.pause({onFailure:function(){p.add({message:k.errorPauseJob,clasName:"error"})}})}},{text:"Abort",icon:"stop",handler:function(){this.model.abort({onFailure:function(){p.add({message:k.errorAbortJob,clasName:"error"})}})}}]}else{if(this._attributes.status===u.JOB_STATUS_WAITING){return[{text:"Claim",icon:"user",handler:function(){this.model.showInteractive()}},{text:"Abort",icon:"stop",handler:function(){this.model.abort({onFailure:function(){p.add({message:k.errorAbortJob,clasName:"error"})}})}}]}else{if(this._attributes.status===u.JOB_STATUS_PAUSED){return[{text:"Resume",icon:"play",handler:function(){this.model.resume({onFailure:function(){p.add({message:k.errorResumeJob,clasName:"error"})}})}},{text:"Abort",icon:"stop",handler:function(){this.model.abort({onFailure:function(){p.add({message:k.errorAbortJob,clasName:"error"})}})}}]}}}},thumbnailUrl:function(){return i.getWebappsAssetUrl("SMAProcJobListingUI","images/SimulationJob.png")},facets:[{name:"properties",text:k.properties,icon:"doc-text",handler:j.getRendererHandler(n)},{name:"logs",text:"Log",icon:"view-list",handler:j.getRendererHandler(A)},{name:"parameter",text:"Parameters",icon:"navigation-history",handler:j.getRendererHandler(b)}]}},getListViewOptions:function(C){return{className:"loading",detail:{title:c().getValue("view-access")==="*"?k.all_label:k.owned_label},useInfiniteScroll:true,usePullToRefresh:false,contents:{views:l.is(C.processData)?r:q(),itemViewOptions:{lazyLoading:false,templateHelpers:function(){var E={},F=this.model.toJSON(),D;if(!(this.model instanceof x)){return F}E.content=F.description;E.image=i.getWebappsAssetUrl(C.moduleName,"images/SimulationJob.png");switch(F.status){case u.JOB_STATUS_NOT_STARTED:D=l.createElement("span",{"class":"fonticon fonticon-progress-0 text-muted"});break;case u.JOB_STATUS_STARTED:D=l.createElement("span",{"class":"fonticon fonticon-progress-1 text-info"});break;case u.JOB_STATUS_RUNNING:D=l.createElement("span",{"class":"fonticon fonticon-progress-2 text-info"});break;case u.JOB_STATUS_PAUSED:D=l.createElement("span",{"class":"fonticon fonticon-hourglass text-warning"});break;case u.JOB_STATUS_WAITING:D=l.createElement("span",{"class":"fonticon fonticon-hourglass text-warning"});break;case u.JOB_STATUS_COMPLETED:D=l.createElement("span",{"class":"fonticon fonticon-check text-success"});break;case u.JOB_STATUS_FAILED:D=l.createElement("span",{"class":"fonticon fonticon-cancel-circled text-error"});break;case u.JOB_STATUS_ABORTED:D=l.createElement("span",{"class":"fonticon fonticon-minus-circled text-error"});break;default:}E.subtitle=D.outerHTML;return E},icon:"attention",title:k.emptyTitle,events:{onBeforeRender:function(){if(this.timeAgo){this.timeAgo.destroy();this.timeAgo=null}},onItemRendered:function(){if(this instanceof o){var G;var I=this.model.toJSON();var F=new Date(I.createdDate);var E=new Date(I.startDate);var H=new Date(I.endDate);if(!(this.model instanceof x)){return I}switch(I.status){case u.JOB_STATUS_NOT_STARTED:G=F.toDateString()!=="Invalid Date"?new z({datetime:F.toISOString(),className:"text-muted"}):null;break;case u.JOB_STATUS_STARTED:G=E.toDateString()!=="Invalid Date"?new z({datetime:E.toISOString(),className:"text-info"}):null;break;case u.JOB_STATUS_RUNNING:G=E.toDateString()!=="Invalid Date"?new z({datetime:E.toISOString(),className:"text-info"}):null;break;case u.JOB_STATUS_PAUSED:G=E.toDateString()!=="Invalid Date"?new z({datetime:E.toISOString(),className:"text-warning"}):null;break;case u.JOB_STATUS_WAITING:G=E.toDateString()!=="Invalid Date"?new z({datetime:E.toISOString(),className:"text-warning"}):null;break;case u.JOB_STATUS_COMPLETED:G=H.toDateString()!=="Invalid Date"?new z({datetime:H.toISOString(),className:"text-success"}):null;break;case u.JOB_STATUS_FAILED:G=H.toDateString()!=="Invalid Date"?new z({datetime:H.toISOString(),className:"text-error"}):null;break;case u.JOB_STATUS_ABORTED:G=H.toDateString()!=="Invalid Date"?new z({datetime:H.toISOString(),className:"text-error"}):null;break;default:}var D=this.container.getElement(".tile-subtitle");if(D&&l.is(G)){this.timeAgo=G;D.addContent(this.timeAgo.getContent())}if(this.model.isAlive()){this.container.addClassName("ps-progress")}else{this.container.removeClassName("ps-progress")}}},onActionClick:function(){var D=arguments[arguments.length-2].model.get("id");switch(D){case"pause":this.model.pause({onFailure:function(){p.add({message:k.errorPauseJob,clasName:"error"})}});break;case"resume":this.model.resume({onFailure:function(){p.add({message:k.errorResumeJob,clasName:"error"})}});break;case"abort":this.model.abort({onFailure:function(){p.add({message:k.errorAbortJob,clasName:"error"})}});break;case"interactive":this.model.showInteractive();break;default:}}}},emptyView:t,events:{}},events:{onInfiniteScroll:f,onItemViewDrag:y,onSwitch:m}}}};return v});