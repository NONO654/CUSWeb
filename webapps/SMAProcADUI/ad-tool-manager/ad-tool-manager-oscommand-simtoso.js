/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(i){var h=i.DS;var c={genericCommand:"Command",predefinedCommand:"PredefinedCommand"};var p={standaloneOption:"Standalone",standaloneValue:"Standalone-Value",optionValue:"Option-Value"};var q="vm_os=",n="vm_cpus=";var r="odb";var a="resultsformat";var l=function(u){var t=[];if(u){if((typeof(u.attributes)!=="undefined")&&(typeof(u.attributes.definition)!=="undefined")&&(typeof(u.attributes.definition.flowItem)!=="undefined")&&(typeof(u.attributes.definition.flowItem.implementations)!=="undefined")&&(u.attributes.definition.flowItem.implementations.length>0)&&(typeof(u.attributes.definition.flowItem.implementations[0].children)!=="undefined")){t=u.attributes.definition.flowItem.implementations[0].children}}return t};var k=function(){var t,u,v=null;if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem.implementations)!=="undefined")&&(this._activity.attributes.definition.flowItem.implementations.length>0)&&(typeof(this._activity.attributes.definition.flowItem.implementations[0].children)!=="undefined")){t=this._activity.attributes.definition.flowItem.implementations[0].children;for(u=0;u<t.length;u++){if(t[u].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.osCommand){v=t[u];break}}}}return v};var f=function(){var t,u,v=null;if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem.implementations)!=="undefined")&&(this._activity.attributes.definition.flowItem.implementations.length>0)&&(typeof(this._activity.attributes.definition.flowItem.implementations[0].children)!=="undefined")){t=this._activity.attributes.definition.flowItem.implementations[0].children;for(u=0;u<t.length;u++){if(t[u].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.cae3dx){v=t[u];break}}}}return v};var d=function(){var t,u,v,w=null;if(this.toolManager&&(typeof(this._configurationProperties.PredefinedCommandOptions)!=="undefined")&&(typeof(this._configurationProperties.PredefinedCommandOptions.Application)!=="undefined")){t=this._configurationProperties.PredefinedCommandOptions.Application.appName;u=this._configurationProperties.PredefinedCommandOptions.Application.appVersion;v=this.toolManager.findToolConnectorDef(this._activity.id,t,u);if(v){w=v.options}}return w};var e=function(u,w){var v=null,t;if((typeof(u)!=="undefined")&&u){for(t=0;t<u.length;t++){if(u[t].id===w){v=u[t];break}}}return v};var s=function(){var v="",z,B,w,t,C,y,A,x,u;B=d.call(this);z=this._configurationProperties.PredefinedCommandOptions.Application.values;for(w=0;w<z.length;w++){u=null;t=z[w].name;C=z[w].value?z[w].value.trim():"";if(C.indexOf(" ")>=0){C='"'+C+'"'}y=e.call(this,B,z[w].id);if(y){A=y.optionType;x=y.separatorValue;if(A===p.standaloneOption){u=t}else{if(A===p.standaloneValue){u=C}else{if(A===p.optionValue){if((typeof(x)==="undefined")||!x||(x.length===0)){x=" "}if((C.length>0)||(y.required&&(y.required.toLowerCase()==="true"))){u=t+x+C}}}}}if(u){if(v.length>0){v+=" "}v+=u}}return v};var j=function(){var u,v,t=[];if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem.implementations)!=="undefined")&&(this._activity.attributes.definition.flowItem.implementations.length>0)&&(typeof(this._activity.attributes.definition.flowItem.implementations[0].children)!=="undefined")){u=this._activity.attributes.definition.flowItem.implementations[0].children;for(v=0;v<u.length;v++){if(u[v].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.v6Utility){t.push(u[v])}}}}return t};var m=function(u,x){var w=null,v=null,t;if(u&&(typeof(u.FlowItem.stepConfig.childConfigs)!=="undefined")&&u.FlowItem.stepConfig.childConfigs){w=u.FlowItem.stepConfig.childConfigs;for(t=0;t<w.length;t++){if(((typeof(w[t].pluginConfig)!=="undefined")&&w[t].pluginConfig)&&(typeof(w[t].pluginConfig.extensionName)!=="undefined")&&(w[t].pluginConfig.extensionName===x)){v=w[t].pluginConfig;break}}}return v};var b=function(x){var t=l.call(this,x),w=null,v=null,u;for(u=0;u<t.length;u++){if(t[u].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.v6Utility){w=m(t[u],h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.v6UtilityPISimImport);if(w){v=w;break}}}return v};var g=function(x){var t=l.call(this,x),w=null,v=null,u;for(u=0;u<t.length;u++){if(t[u].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.v6Utility){w=m(t[u],h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.v6UtilityPIResultsGen);if(w){v=w;break}}}return v};var o=function(){var t=j.call(this);for(var u=0;u<t.length;u++){if(t[u]&&(typeof(t[u].FlowItem.stepConfig)!=="undefined")&&(typeof(t[u].FlowItem.stepConfig["3DX_LANG"])==="undefined")){t[u].FlowItem.stepConfig["3DX_LANG"]=i.navigator.userLanguage||i.navigator.language}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI=h.SMAProcADUI||{};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy=function(){this._activity=null;this._updateObject=null;this._simFile=null;this._configurationProperties=[],this.simToSOEnabled=true};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.load=function(v,t){this._activity=v;this._updateObject=t;var u=null;if(this._activity){this._simFile=null;var w=k.call(this);if(w&&(typeof(w.FlowItem.stepConfig)!=="undefined")&&w.FlowItem.stepConfig&&(typeof(w.FlowItem.stepConfig.properties)!=="undefined")){this._configurationProperties=w.FlowItem.stepConfig.properties}u=b.call(this,this._activity);if(u&&(typeof(u.properties.PLMBatchArguments)!=="undefined")&&u.properties.PLMBatchArguments&&(typeof(u.properties.PLMBatchArguments.NewSimulation_Results)!=="undefined")){this._simFile=u.properties.PLMBatchArguments.NewSimulation_Results}}o.call(this)};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getConfigurationProperties=function(){return this._configurationProperties};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setConfigurationProperties=function(t){this._configurationProperties=t;if(this._activity){var u=k.call(this);if(u&&(typeof(u.FlowItem.stepConfig)!=="undefined")){u.FlowItem.stepConfig.properties=this._configurationProperties}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setSimToSOExecutable=function(v){var t=j.call(this);if(this._activity){for(var u=0;u<t.length;u++){if(t[u]&&(typeof(t[u].FlowItem.stepConfig)!=="undefined")){t[u].FlowItem.ExecutionConfig.isExecutable=v.toString()}}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.resultFormatSupportsSimToSo=function(){var v;v=this._configurationProperties.PredefinedCommandOptions.Application.values;var u=false;for(var t=0;t<v.length;t++){if(v[t].name===a){u=true;if(v[t].value===r){return false}else{return true}}}if(!u){return true}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getSimToSOExecutable=function(){var v=false;var t=j.call(this);if(this._activity){for(var u=0;u<t.length;u++){if(t[u]&&(typeof(t[u].FlowItem.stepConfig)!=="undefined")){if(t[u].FlowItem.ExecutionConfig.isExecutable===true||t[u].FlowItem.ExecutionConfig.isExecutable==="true"){v=true}else{v=false}}}}return v};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getCommandLine=function(){var t=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){if(this._configurationProperties.commandType===c.genericCommand){t=this._configurationProperties.command}else{if(this._configurationProperties.commandType===c.predefinedCommand){t=s.call(this)}}}if(t){t=t.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"').replace("&amp;","&")}return t};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getOverrideCommandLine=function(){var t=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){t=this._configurationProperties.command}if(t){t=t.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"').replace("&amp;","&")}return t};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getEnvSettingsProperty=function(){var t=null;if(this._configurationProperties&&(typeof(this._configurationProperties.oscmd_env_vars)!=="undefined")&&this._configurationProperties.oscmd_env_vars&&(typeof(this._configurationProperties.oscmd_env_vars.values)!=="undefined")){t=this._configurationProperties.oscmd_env_vars.values}return t};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setEnvSettingsProperty=function(t){if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){if(t!==null){this._configurationProperties.oscmd_env_vars={values:t}}else{this._configurationProperties.oscmd_env_vars=null}}if(this._updateObject){this._updateObject.update(true)}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setCommandLineforCloud=function(u){var t=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")&&u.CloudConfig){t=this.getCommandLine();this._configurationProperties.command=t+" "+q+u.CloudConfig.os+" "+n+u.CloudConfig.numprocs}if(this._updateObject){this._updateObject.update(true)}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setActivityConfig=function(t){if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")){this._activity.attributes.definition.flowItem.ActivityConfig={properties:{SXALicenseOptions:t}}}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.isInstanceOfTool=function(y){var w=false,u=l.call(this,y),v,t=false,A=false;for(v=0;v<u.length;v++){if(u[v].FlowItem.stepConfig.extensionName===h.SMAProcADUI.ADToolManager.EXTENSIONTYPES.osCommand){if(!t){t=true}else{t=false;break}}}var x=b.call(this,y);var z=g.call(this,y);if(x&&z){A=true}if(t&&A){w=true}return w};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.prepareToRun=function(){if(this._updateObject){this._updateObject.update(true)}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getSimFile=function(){return this._simFile};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setSimFile=function(u){var t=null;this._simFile=u+".sim";if(this._activity){t=b.call(this,this._activity);if(t&&(typeof(t.properties.PLMBatchArguments)!=="undefined")){t.properties.PLMBatchArguments.NewSimulation_Results=this._simFile;t.properties.PLMBatchArguments.Simulation_Title=u}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getResultsUnits=function(){var t=null,u;if(this._activity){t=b.call(this,this._activity);if(t.properties.ImportUnits!==null){u=t.properties.ImportUnits}}return u};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.setResultsUnits=function(u){var t=null;if(this._activity){t=b.call(this,this._activity);if(t&&(typeof(t.properties.PLMBatchArguments)!=="undefined")){t.properties.PLMBatchArguments.ImportUnits=u;t.properties.ImportUnits=u}}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.runsOnStation=function(u){var t=false;if(u){t=true}return t};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getExtensionName=function(){var u;var t=f.call(this);if(t&&(typeof(t.FlowItem.stepConfig)!=="undefined")&&t.FlowItem.stepConfig&&(typeof(t.FlowItem.stepConfig.properties)!=="undefined")){u=t.FlowItem.stepConfig.extensionName}return u};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.getAppName=function(){var u=k.call(this),t=null;if(u){if(typeof u.FlowItem!=="undefined"&&typeof u.FlowItem.stepConfig!=="undefined"&&typeof u.FlowItem.stepConfig.properties!=="undefined"&&typeof u.FlowItem.stepConfig.properties.PredefinedCommandOptions!=="undefined"&&typeof u.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application!=="undefined"){t=u.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.appName}}if(typeof t==="undefined"&&typeof u.FlowItem.name!=="undefined"){t=u.FlowItem.name}return t};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.prototype.resetCommand=function(){if(this._configurationProperties&&typeof(this._configurationProperties.commandType)!=="undefined"){this._configurationProperties.command=null}if(this._updateObject){this._updateObject.update()}};h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.OSCOMMANDTYPES=c;h.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.OPTIONTYPES=p})(this);