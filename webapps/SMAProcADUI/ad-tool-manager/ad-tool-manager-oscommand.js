/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(g){var j=g.DS;var l={genericCommand:"Command",predefinedCommand:"PredefinedCommand"};var e={standaloneOption:"Standalone",standaloneValue:"Standalone-Value",optionValue:"Option-Value"};var b="vm_os=",h="vm_cpus=";var c=function(n){var m=[];if(n){if((typeof(n.attributes)!=="undefined")&&(typeof(n.attributes.definition)!=="undefined")&&(typeof(n.attributes.definition.flowItem)!=="undefined")&&(typeof(n.attributes.definition.flowItem.implementations)!=="undefined")&&(n.attributes.definition.flowItem.implementations.length>0)&&(typeof(n.attributes.definition.flowItem.implementations[0].children)!=="undefined")){m=n.attributes.definition.flowItem.implementations[0].children}}return m};var i=function(){var m,n,o=null;if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem.implementations)!=="undefined")&&(this._activity.attributes.definition.flowItem.implementations.length>0)&&(typeof(this._activity.attributes.definition.flowItem.implementations[0].children)!=="undefined")){m=this._activity.attributes.definition.flowItem.implementations[0].children;for(n=0;n<m.length;n++){if(m[n].FlowItem.stepConfig.extensionName===j.SMAProcADUI.ADToolManager.EXTENSIONTYPES.osCommand){o=m[n];break}}}}return o};var d=function(){var m,n,o=null;if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem.implementations)!=="undefined")&&(this._activity.attributes.definition.flowItem.implementations.length>0)&&(typeof(this._activity.attributes.definition.flowItem.implementations[0].children)!=="undefined")){m=this._activity.attributes.definition.flowItem.implementations[0].children;for(n=0;n<m.length;n++){if(m[n].FlowItem.stepConfig.extensionName===j.SMAProcADUI.ADToolManager.EXTENSIONTYPES.cae3dx){o=m[n];break}}}}return o};var a=function(){var m,n,o,p=null;if(this.toolManager&&(typeof(this._configurationProperties.PredefinedCommandOptions)!=="undefined")&&(typeof(this._configurationProperties.PredefinedCommandOptions.Application)!=="undefined")){m=this._configurationProperties.PredefinedCommandOptions.Application.appName;n=this._configurationProperties.PredefinedCommandOptions.Application.appVersion;o=this.toolManager.findToolConnectorDef(this._activity.id,m,n);if(o){p=o.options}}return p};var f=function(n,p){var o=null,m;if((typeof(n)!=="undefined")&&n){for(m=0;m<n.length;m++){if(n[m].id===p){o=n[m];break}}}return o};var k=function(){var o="",s,u,p,m,v,r,t,q,n;u=a.call(this);s=this._configurationProperties.PredefinedCommandOptions.Application.values;for(p=0;p<s.length;p++){n=null;m=s[p].name;v=s[p].value?s[p].value.trim():"";if(v.indexOf(" ")>=0){v='"'+v+'"'}r=f.call(this,u,s[p].id);if(r){t=r.optionType;q=r.separatorValue;if(t===e.standaloneOption){n=m}else{if(t===e.standaloneValue){n=v}else{if(t===e.optionValue){if((typeof(q)==="undefined")||!q||(q.length===0)){q=" "}if((v.length>0)||(r.required&&(r.required.toLowerCase()==="true"))){n=m+q+v}}}}}if(n){if(o.length>0){o+=" "}o+=n}}return o};j.SMAProcADUI=j.SMAProcADUI||{};j.SMAProcADUI.ADToolManagerOSCommandStrategy=function(){this._activity=null;this._updateObject=null;this._configurationProperties=[]};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.load=function(n,m){this._activity=n;this._updateObject=m;if(this._activity){var o=i.call(this);if(o&&(typeof(o.FlowItem.stepConfig)!=="undefined")&&o.FlowItem.stepConfig&&(typeof(o.FlowItem.stepConfig.properties)!=="undefined")){this._configurationProperties=o.FlowItem.stepConfig.properties}}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.prepareToRun=function(){};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getConfigurationProperties=function(){return this._configurationProperties};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.setConfigurationProperties=function(m){this._configurationProperties=m;if(this._activity){var n=i.call(this);if(n&&(typeof(n.FlowItem.stepConfig)!=="undefined")){n.FlowItem.stepConfig.properties=this._configurationProperties}}if(this._updateObject){this._updateObject.update()}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getCommandLine=function(){var m=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){if(this._configurationProperties.commandType===l.genericCommand){m=this._configurationProperties.command}else{if(this._configurationProperties.commandType===l.predefinedCommand){m=k.call(this)}}}if(m){m=m.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"').replace("&amp;","&")}return m};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getOverrideCommandLine=function(){var m=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){m=this._configurationProperties.command}if(m){m=m.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"').replace("&amp;","&")}return m};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.runsOnStation=function(n){var m=false;if(n){m=true}return m};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.setCommandLineforCloud=function(n){var m=null;if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")&&n.CloudConfig){m=this.getCommandLine();this._configurationProperties.command=m+" "+b+n.CloudConfig.os+" "+h+n.CloudConfig.numprocs}if(this._updateObject){this._updateObject.update(true)}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getEnvSettingsProperty=function(){var m=null;if(this._configurationProperties&&(typeof(this._configurationProperties.oscmd_env_vars)!=="undefined")&&this._configurationProperties.oscmd_env_vars&&(typeof(this._configurationProperties.oscmd_env_vars.values)!=="undefined")){m=this._configurationProperties.oscmd_env_vars.values}return m};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.setEnvSettingsProperty=function(m){if(this._configurationProperties&&(typeof(this._configurationProperties.commandType)!=="undefined")){if(m!==null){this._configurationProperties.oscmd_env_vars={values:m}}else{this._configurationProperties.oscmd_env_vars=null}}if(this._updateObject){this._updateObject.update(true)}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.setActivityConfig=function(m){if(this._activity){if((typeof(this._activity.attributes)!=="undefined")&&(typeof(this._activity.attributes.definition)!=="undefined")&&(typeof(this._activity.attributes.definition.flowItem)!=="undefined")){this._activity.attributes.definition.flowItem.ActivityConfig={properties:{SXALicenseOptions:m}}}}if(this._updateObject){this._updateObject.update()}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.isInstanceOfTool=function(p){var o=false,m=c.call(this,p),n;for(n=0;n<m.length;n++){if(m[n].FlowItem.stepConfig.extensionName===j.SMAProcADUI.ADToolManager.EXTENSIONTYPES.osCommand){if(!o){o=true}else{o=false;break}}}return o};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getExtensionName=function(){var n;var m=d.call(this);if(m&&(typeof(m.FlowItem.stepConfig)!=="undefined")&&m.FlowItem.stepConfig&&(typeof(m.FlowItem.stepConfig.properties)!=="undefined")){n=m.FlowItem.stepConfig.extensionName}return n};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.getAppName=function(){var n=i.call(this),m=null;if(n){if(typeof n.FlowItem!=="undefined"&&typeof n.FlowItem.stepConfig!=="undefined"&&typeof n.FlowItem.stepConfig.properties!=="undefined"&&typeof n.FlowItem.stepConfig.properties.PredefinedCommandOptions!=="undefined"&&typeof n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application!=="undefined"){m=n.FlowItem.stepConfig.properties.PredefinedCommandOptions.Application.appName}}if(typeof m==="undefined"&&typeof n.FlowItem.name!=="undefined"){m=n.FlowItem.name}return m};j.SMAProcADUI.ADToolManagerOSCommandStrategy.prototype.resetCommand=function(){if(this._configurationProperties&&typeof(this._configurationProperties.commandType)!=="undefined"){this._configurationProperties.command=null}if(this._updateObject){this._updateObject.update()}};j.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES=l;j.SMAProcADUI.ADToolManagerOSCommandStrategy.OPTIONTYPES=e})(this);