/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(G){var I=G.Polymer,K=G.DS;var v=null,g=null,j=null,u=null,m=null,q=null,E=null,F=null,J=null,s=null,t=null,h=null,z=null,p=null,b=null,D=null,B=null,f=null,a=null,C=null,o=null,c=null,y=null,e=null,r=null,n=null,H=null,A=null,d="__option_Command__text",l="__option_checked_",w="__option_value_",L="__option_warning_",k='&nbsp;&nbsp;<span title="This option requires a value" class="fonticon fonticon-attention text-error"/>',i={disabled:"disabled"},x={propertyText:"property-text"};v=function(){if(this.tools&&this.tools.length===0){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).removeClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden");this.DOM(this.$.filterButton).addClass(i.disabled)}else{if(this.tools&&this.tools.length>1){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).removeClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden");this.DOM(this.$.filterButton).addClass(i.disabled)}else{if(this.tools){this.DOM(this.$.optionsSection).removeClass("hidden");this.DOM(this.$.previewSection).removeClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden");this.DOM(this.$.filterButton).removeClass(i.disabled);E.call(this)}}}};g=function(W,U){var S=this.tools[0],P,T,V,N,R,M,Q,O;P=this.tools[0].configurationProperties;V=s.call(this,this.tools[0]);R=z.call(this,V,W);T=P.PredefinedCommandOptions.Application.values;N=h.call(this,T,R.name,R.id);if(U){if(!N&&R){N={};N.id=R.id;N.name=R.name;N.optionType=R.optionType;N.separator=R.separatorValue;M=this.DOM(this.$.configurationTableBody).find("#"+w+R.id).elements();if(M&&M.length===1){N.value=M[0].value}P.PredefinedCommandOptions.Application.values.push(N);S.configurationProperties=P}}else{if(N){Q=P.PredefinedCommandOptions.Application.values.indexOf(N);if(Q>=0){P.PredefinedCommandOptions.Application.values.splice(Q,1);S.configurationProperties=P}}}q.call(this,W);O=S.configuration.getCommandLine();I.dom(this.$.previewText).textContent=this.$.previewEdit.value=O!==null?O:""};j=function(T,S){var Q=this.tools[0],O,U,P,R,N,M;M=this.DOM(this.$.configurationTableBody).find("#"+l+T).elements();if(M&&M.length===1){if(!M[0].disabled){U=S&&S!=="";M[0].checked=U;g.call(this,T,U)}}P=this.tools[0].configurationProperties;R=P.PredefinedCommandOptions.Application.values;N=t.call(this,R,T);if(N){N.value=S;Q.configurationProperties=P}O=Q.configuration.getCommandLine();I.dom(this.$.previewText).textContent=this.$.previewEdit.value=O!==null?O:"";q.call(this,T);if(O&&O.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}};u=function(P){var O=this.tools[0],N=O.configurationProperties,M;N.command=P;if(typeof N.commandType==="undefined"||!N.commandType){N.commandType=K.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.genericCommand}O.configurationProperties=N;M=O.configuration.getCommandLine();I.dom(this.$.previewText).textContent=this.$.previewEdit.value=M!==null?M:""};m=function(N){var Q=this.tools[0],P=Q.configurationProperties,M=Q.configuration.getCommandLine(),O=M;if(N.trim()===M){P.command=null;I.dom(this.$.previewText).textContent=this.$.previewEdit.value=M!==null?M:"";B.call(this,true);this.DOM(this.$.revertOverride).addClass("hidden")}else{if(!N||N.trim().length===0){M=" ";O=""}else{M=O=N.trim()}P.command=M;I.dom(this.$.previewText).textContent=this.$.previewEdit.value=O;B.call(this,false);this.DOM(this.$.revertOverride).removeClass("hidden")}if(O&&O.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}Q.configurationProperties=P};q=function(N){var M=false,P="",O;O=this.DOM(this.$.configurationTableBody).find("#"+l+N).elements();if(O&&O.length===1){M=O[0].checked}O=this.DOM(this.$.configurationTableBody).find("#"+w+N).elements();if(O&&O.length===1){P=O[0].value}O=this.DOM(this.$.configurationTableBody).find("#"+L+N).elements();if(O&&O.length===1){if(M&&P.length===0){O[0].style.visibility="visible"}else{O[0].style.visibility="hidden"}}};E=function(){var O,P,N,M="";O=this.tools[0];P=O.toolType;N=O.configuration?O.configurationProperties:null;if((P===K.SMAProcADUI.ADToolManager.TOOLTYPES.osCommand||K.SMAProcADUI.ADToolManager.TOOLTYPES.osCommandSimToSO)&&typeof N!=="undefined"&&N&&typeof N.commandType!=="undefined"){if(N.commandType===K.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.genericCommand){J.call(this,O)}else{if(N.commandType===K.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.predefinedCommand){F.call(this,O)}else{this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.optionsSection).addClass("hidden");I.dom(this.$.previewText).textContent=this.$.previewEdit.value=M!==null?M:"";if(M&&M.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}}}}};J=function(){var M="";this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.optionsSection).addClass("hidden");M=this.tools[0].configuration.getCommandLine();I.dom(this.$.previewText).textContent=this.$.previewEdit.value=M!==null?M:"";if(M&&M.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}};F=function(O){var N=function(){var U,R,T,S,Q="",P="";while(this.$.configurationTableBody.rows.length>0){this.$.configurationTableBody.deleteRow(0)}if(this._loadingSpinner){this._loadingSpinner.hide();this._loadingSpinner.stop()}this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.previewSection).removeClass("hidden");this.DOM(this.$.optionsSection).removeClass("hidden");this.DOM(this.$.loadingSection).addClass("hidden");S=s.call(this,O);if(S){U=O.configurationProperties.PredefinedCommandOptions.Application.values;for(R=0;R<S.length;R++){T=h.call(this,U,S[R].name,S[R].id);p.call(this,O,T,S[R])}}b.call(this);Q=this.tools[0].configuration.getCommandLine();P=this.tools[0].configuration.getOverrideCommandLine();if(P&&P.length>0){this.DOM(this.$.revertOverride).removeClass("hidden");B.call(this,false);Q=P.trim().length>0?P:""}else{this.DOM(this.$.revertOverride).addClass("hidden");B.call(this,true)}I.dom(this.$.previewText).textContent=this.$.previewEdit.value=Q!==null?Q:"";if(Q&&Q.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}}.bind(this);var M=function(){if(this._loadingSpinner){this._loadingSpinner.hide();this._loadingSpinner.stop()}this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.loadingSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).removeClass("hidden")}.bind(this);require(["DS/UIKIT/Spinner"],function(P){if(!this._loadingSpinner){this._loadingSpinner=new P({renderTo:this.$.loadingSection,visible:true})}this._loadingSpinner.spin();this._loadingSpinner.show()}.bind(this));this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.loadingSection).removeClass("hidden");this.$.toolManager.getConnectorDefs(O,{onComplete:N,onFailure:M})};s=function(Q){var M,N,O,P=null;if(typeof Q.configurationProperties.PredefinedCommandOptions!=="undefined"&&typeof Q.configurationProperties.PredefinedCommandOptions.Application!=="undefined"){M=Q.configurationProperties.PredefinedCommandOptions.Application.appName;N=Q.configurationProperties.PredefinedCommandOptions.Application.appVersion;O=this.$.toolManager.findToolConnectorDef(Q.modelID,M,N);if(O){P=O.options}}return P};t=function(P,O){var N=null,M;if(typeof P!=="undefined"&&P){for(M=0;M<P.length;M++){if(P[M].id===O){N=P[M];break}}}return N};h=function(Q,M,P){var O=null,N;if(typeof Q!=="undefined"&&Q){for(N=0;N<Q.length;N++){if(Q[N].name===M){O=Q[N];O.id=P;break}}}return O};z=function(N,P){var O=null,M;if(typeof N!=="undefined"&&N){for(M=0;M<N.length;M++){if(N[M].id===P){O=N[M];break}}}return O};p=function(ab,aa,Y){var S;var Q=this.$.configurationTableBody.insertRow(-1);I.dom(Q).setAttribute("class","style-scope ad-tool-config-how");var X=Q.insertCell(0);I.dom(X).setAttribute("class","style-scope ad-tool-config-how first");var W=Q.insertCell(1);I.dom(W).setAttribute("class","style-scope ad-tool-config-how");var T=Q.insertCell(2);I.dom(T).setAttribute("class","style-scope ad-tool-config-how");var Z,ad,U,M,R=false,O=false,P,V,ae,ac,N=false;if(Y.required&&Y.required.toLowerCase()==="true"){O=true;R=true}else{O=false;if(aa){R=true}}ad=document.createElement("div");I.dom(ad).setAttribute("class","style-scope ad-tool-config-how toggle");I.dom(X).appendChild(ad);U=document.createElement("input");I.dom(U).setAttribute("id",l+Y.id);I.dom(U).setAttribute("type","checkbox");if(R){I.dom(U).setAttribute("checked",R)}if(O){I.dom(U).setAttribute("disabled",O)}U.addEventListener("change",o.bind(this));I.dom(ad).appendChild(U);M=document.createElement("label");I.dom(M).setAttribute("class","style-scope ad-tool-config-how content-label");I.dom(M).setAttribute("for",l+Y.id);I.dom(M).setAttribute("style","display:inline;");I.dom(ad).appendChild(M);I.dom(W).textContent=Y.name;if(Y.optionType!==K.SMAProcADUI.ADToolManagerOSCommandStrategy.OPTIONTYPES.standaloneOption){if(typeof Y.Choices!=="undefined"&&Y.Choices){P=document.createElement("select");I.dom(P).setAttribute("id",w+Y.id);I.dom(P).setAttribute("class","style-scope ad-tool-config-how "+x.propertyText);for(Z=0;Z<Y.Choices.length;Z++){V=document.createElement("option");I.dom(V).setAttribute("value",Y.Choices[Z]);S=Y.Choices[Z];S=S.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"');I.dom(V).innerHTML=S;if(aa&&aa.value&&aa.value===Y.Choices[Z]){I.dom(V).setAttribute("selected","true");N=true}else{if(Y.defaultValue&&Y.defaultValue!==""&&Y.defaultValue===S&&!N){I.dom(V).setAttribute("selected","true")}}P.add(V)}P.addEventListener("change",c.bind(this));I.dom(T).appendChild(P)}else{ae=document.createElement("input");I.dom(ae).setAttribute("id",w+Y.id);I.dom(ae).setAttribute("class","style-scope ad-tool-config-how "+x.propertyText);I.dom(ae).setAttribute("type","text");S="";if(aa){if(aa.value){S=aa.value}}else{if(Y.defaultValue){S=Y.defaultValue}}S=S.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"');I.dom(ae).setAttribute("value",S);ae.addEventListener("keyup",c.bind(this));ae.addEventListener("change",c.bind(this));ae.addEventListener("input",c.bind(this));ae.addEventListener("drop",y.bind(this));I.dom(T).appendChild(ae);ac=document.createElement("span");I.dom(ac).setAttribute("id",L+Y.id);I.dom(ac).setAttribute("type","text");if(!R||S&&S.length>0){I.dom(ac).setAttribute("style","visibility:hidden")}else{I.dom(ac).setAttribute("style","visibility:visible")}I.dom(ac).innerHTML=k;I.dom(T).appendChild(ac)}}};b=function(){var O=this.$.configurationTableBody.rows,N,M,P;for(N=0;N<O.length;N++){M=O[N].cells[0];if(M){P=this.DOM(M).find("input").elements();if(P&&P.length===1){if(P[0].checked===true){O[N].style.display="table-row"}else{O[N].style.display="none"}}}}};D=function(){var N=this.$.configurationTableBody.rows,M;for(M=0;M<N.length;M++){N[M].style.display="table-row"}};B=function(M){if(M){this.DOM(this.$.optionsSection).removeClass("hidden")}else{this.DOM(this.$.optionsSection).addClass("hidden")}};f=function(M){M.stopPropagation();M.cancelBubble=true;this.$.filterMenu.visible=true;return true};a=function(){b.call(this)};C=function(){D.call(this)};o=function(O){var N,M;N=O.target.id.substr(l.length);M=O.target.checked;g.call(this,N,M)};c=function(N){var M,O;M=N.target.id.substr(w.length);O=N.target.value;j.call(this,M,O)};y=function(N){N.stopPropagation();N.cancelBubble=true;N.preventDefault();var M;M=N.target.id.substr(w.length);var O=this.DOM(this.$.configurationTableBody).find("#"+w+M).elements();O[0].value=N.dataTransfer.getData("Text");j.call(this,M,O[0].value)};e=function(M){var N=M.target.value;u.call(this,N)};r=function(){var M=function(){var O="",N=this.DOM(this.$.configurationTableBody).find("#"+d).elements();if(N&&N.length===1){O=N[0].value}u.call(this,O)}.bind(this);G.setTimeout(M,1)};n=function(){var O=this.tools[0],N=O.configurationProperties;if((O.toolType===K.SMAProcADUI.ADToolManager.TOOLTYPES.osCommand||O.toolType===K.SMAProcADUI.ADToolManager.TOOLTYPES.osCommandSimToSO)&&N&&typeof N.commandType!=="undefined"){var M=100;if(this.$.previewText.offsetWidth>M){M=this.$.previewText.offsetWidth}this.$.previewEdit.style.width=""+M+"px";this.DOM(this.$.previewPlaceholder).addClass("hidden");this.DOM(this.$.previewText).addClass("hidden");this.DOM(this.$.previewEdit).removeClass("hidden");this.$.previewEdit.focus()}};H=function(){var O=this.tools[0],N,M=this.$.previewEdit.value;if(M&&M!==""){this.DOM(this.$.previewText).removeClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}this.DOM(this.$.previewEdit).addClass("hidden");N=O.configurationProperties;if(typeof N!=="undefined"&&N&&typeof N.commandType!=="undefined"){if(N.commandType===K.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.genericCommand){u.call(this,M)}else{if(N.commandType===K.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.predefinedCommand){m.call(this,M)}else{u.call(this,M)}}}};A=function(){var O=this.tools[0],M=O.configuration.getCommandLine(),N=O.configurationProperties;if(N){N.command=M;m.call(this,M);this.DOM(this.$.previewText).removeClass("hidden")}};K.SMAProcADUI=K.SMAProcADUI||{};K.SMAProcADUI.ADToolConfigHow=I({is:"ad-tool-config-how",properties:{tools:{type:Array,value:function(){return[]},observer:"toolsChanged"}},onFilter:function(){return f.apply(this,arguments)},onFilterSelected:function(){return a.apply(this,arguments)},onFilterAll:function(){return C.apply(this,arguments)},onPredefinedOptionChecked:function(){return o.apply(this,arguments)},onPredefinedOptionValueChanged:function(){return c.apply(this,arguments)},onPredefinedOptionValueDrop:function(){return y.apply(this,arguments)},onGenericOptionValueChanged:function(){return e.apply(this,arguments)},onGenericOptionValueDrop:function(){return r.apply(this,arguments)},onPreviewEditStart:function(){return n.apply(this,arguments)},onPreviewEditFinish:function(){return H.apply(this,arguments)},onRevertOverride:function(){return A.apply(this,arguments)},toolsChanged:function(){v.call(this)},behaviors:[K.SMAProcSP.SPBase]})}(this));