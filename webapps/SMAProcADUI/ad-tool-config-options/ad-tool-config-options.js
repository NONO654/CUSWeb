/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
window.require(["DS/SMAProcADUI/ad-tool-instance/ADToolInstance"],function(g){var ak=window.Polymer,ao=window.DS;var P=null,i=null,m=null,M=null,p=null,D=null,A=null,ae=null,af=null,al=null,I=null,L=null,j=null,W=null,y=null,am=null,aj=null,b=null,ad=null,Z=null,Y=null,S=null,C=null,h=null,u=null,V=null,k=null,ag=null,f=null,a=null,ab=null,v=null,d=null,T=null,e=null,F=null,o=null,ah=null,X=null,z=null,H=null,w=null,G=null,B=null,K=null,ac=null,O=null,ai=null,R=null,Q=null,t=null,s=null,q=null,J=null,aa=null,c="__option_Command__text",n="__option_checked_",N="__option_value_",x="__alloptions_checked_",an='&nbsp;&nbsp;<span title="This option seems to have been modified from default. Please contact your administrator for help." class="fonticon fonticon-attention text-error"/>',E="Removing unsupported options (cpu, memory, user, queue) for On-Cloud execution",l={disabled:"disabled"},r={appMessage:"appmessage",hideMessage:"hidemessage",},U={python:"Abaqus/Python",viewer:"Abaqus/Viewer",cae:"Abaqus/CAE"};P=function(){if(this.tools.length===0){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).removeClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden")}else{if(this.tools.length>1){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).removeClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden")}else{this.DOM(this.$.optionsSection).removeClass("hidden");this.DOM(this.$.previewSection).removeClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).addClass("hidden");ae.call(this)}}};i=function(aA,ay){var aw=this.tools[0],at,ax,az,aq,av,ap,au,ar;at=this.tools[0].configurationProperties;az=I.call(this,this.tools[0])[0];av=W.call(this,az,aA);ax=at.PredefinedCommandOptions.Application.values;aq=j.call(this,ax,av.name);if(ay){if(!aq&&av){aq={};aq.id=av.id;aq.name=av.name;aq.optionType=av.optionType;aq.separator=av.separatorValue;ap=this.DOM(this.$.optionsForm).find("#"+N+av.id).elements();if(ap&&ap.length===1){aq.value=ap[0].value}at.PredefinedCommandOptions.Application.values.push(aq);aw.configurationProperties=at}}else{if(aq){au=at.PredefinedCommandOptions.Application.values.indexOf(aq);if(au>=0){at.PredefinedCommandOptions.Application.values.splice(au,1);aw.configurationProperties=at}}}if(aw.isOnCloud()){aw.setCommandLineforCloud()}D.call(this,aA,av.required.toLowerCase());ar=aw.configuration.getCommandLine();ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ar!==null?ar:""};m=function(az,ay){var av=this.tools[0],ar,aA,at,aw,aq,ap,ax,au;ap=this.DOM(this.$.optionsForm).find("#"+n+az).elements();if(ap&&ap.length===1){if(!ap[0].disabled){aA=ay&&ay!=="";ap[0].checked=aA;i.call(this,az,aA)}}at=this.tools[0].configurationProperties;aw=at.PredefinedCommandOptions.Application.values;aq=L.call(this,aw,az);ax=I.call(this,this.tools[0])[0];au=W.call(this,ax,az);if(au.name==="resultsformat"){if(ay==="odb"){av.configuration.setSimToSOExecutable(false)}}if(aq){aq.value=ay;av.configurationProperties=at}ar=av.configuration.getCommandLine();ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ar!==null?ar:"";if(az==="1"){if(av.toolType===ao.SMAProcADUI.ADToolManager.TOOLTYPES.osCommandSimToSO){av.configuration.setSimFile(ay)}av.name=ay;this.fire("updatetitle",{title:ay})}if(av.session.onCloud){av.setCommandLineforCloud()}D.call(this,az,au.required.toLowerCase());if(ar&&ar.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}};M=function(at){var ar=this.tools[0],aq=ar.configurationProperties,ap;aq.command=at;if(typeof aq.commandType==="undefined"||!aq.commandType){aq.commandType=ao.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.genericCommand}ar.configurationProperties=aq;ap=ar.configuration.getCommandLine();ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ap!==null?ap:""};p=function(aq){var au=this.tools[0],at=au.configurationProperties,ap=au.configuration.getCommandLine(),ar=ap;if(aq.trim()===ap){at.command=null;ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ap!==null?ap:"";Z.call(this,true)}else{if(!aq||aq.trim().length===0){ap=" ";ar=""}else{ap=ar=aq.trim()}at.command=ap;ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ar;Z.call(this,false)}if(ar&&ar.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}au.configurationProperties=at};D=function(aq,at){var ap=false,au="",ar;ar=this.DOM(this.$.optionsForm).find("#"+n+aq).elements();if(ar&&ar.length===1){ap=ar[0].checked}ar=this.DOM(this.$.optionsForm).find("#"+N+aq).elements();if(ar&&ar.length===1){au=ar[0].value;if(at==="true"){if(ap&&au.length===0){ar[0].classList.add("inputConfigWarn");ar[0].placeholder="Required value";this.fire("toggleRun",{disable:true})}else{ar[0].classList.remove("inputConfigWarn");ar[0].placeholder="";this.fire("toggleRun",{disable:false})}}}};A=function(at,av){var ar=this._CONNECTOR_VALUES;for(var aq=0;aq<ar.length;aq++){if(ar[aq].name===av){var au=ar[aq].values;for(var ap=0;ap<au.length;ap++){if(au[ap].name===at){return au[ap].props}}}}};ae=function(){var ar,at,aq,ap="";this._mainInputFiles=[];ar=this.tools[0];this.$.toolManager.session=ar.session;this.$.mdataView.session=ar.session;at=ar.toolType;aq=ar.configuration?ar.configurationProperties:null;if((at===ao.SMAProcADUI.ADToolManager.TOOLTYPES.osCommand||at===ao.SMAProcADUI.ADToolManager.TOOLTYPES.osCommandSimToSO)&&typeof aq!=="undefined"&&aq&&typeof aq.commandType!=="undefined"){if(aq.commandType===ao.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.OSCOMMANDTYPES.genericCommand){al.call(this,ar)}else{if(aq.commandType===ao.SMAProcADUI.ADToolManagerOSCommandSIMtoSOStrategy.OSCOMMANDTYPES.predefinedCommand){af.call(this,ar);if((g.ADToolInstance.OUTPUTOPTIONS.defaultFiles===ar.outputOption)&&(!ar.outputFileSpecs||(ar.outputFileSpecs.length===0))){C.call(this)}}else{this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.optionsSection).addClass("hidden");ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ap!==null?ap:"";if(ap&&ap.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}}}}};al=function(){var ap="";this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.optionsSection).addClass("hidden");ap=this.tools[0].configuration.getCommandLine();ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=ap!==null?ap:"";if(ap&&ap.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}};af=function(ar){var aq=function(){var ay,ax,au,az,aB,av="",aw="";var aC=I.call(this,ar);az=aC[0];aB=aC[1];var aA=function(){if(this._loadingSectionSpinner){this._loadingSectionSpinner.hide();this._loadingSectionSpinner.stop()}this.DOM(this.$.previewText).removeClass("hidden");this.DOM(this.$.previewSection).removeClass("hidden");this.DOM(this.$.optionsSection).removeClass("hidden");this.DOM(this.$.loadingSection).addClass("hidden");if(az){ay=ar.configurationProperties.PredefinedCommandOptions.Application.values;for(ax=0;ax<az.length;ax++){var aK=false,aE=A.call(this,az[ax].name,aB);au=j.call(this,ay,az[ax].name);am.call(this,ar,au,az[ax],aE);var aM=document.createElement("li");ak.dom(aM).setAttribute("class","optionsListElement");var aJ=document.createElement("label");ak.dom(aJ).setAttribute("for",x+az[ax].id);ak.dom(aJ).setAttribute("class","allOptionsLabel");ak.dom(aJ).textContent=az[ax].name;var aG=document.createElement("input");ak.dom(aG).setAttribute("type","checkbox");ak.dom(aG).setAttribute("id",x+az[ax].id);ak.dom(aG).setAttribute("class","allOptionsCheckbox");aG.addEventListener("change",H.bind(this));if(az[ax].required&&az[ax].required.toLowerCase()==="true"){aK=true}else{if(au){aK=true}}if(az[ax].name==="job"){aG.disabled=true}if(aK){aG.checked=aK}if(ar.isOnCloud()&&(az[ax].name==="cpus"||az[ax].name==="memory")){aG.disabled=true}ak.dom(aM).appendChild(aG);ak.dom(aM).appendChild(aJ);ak.dom(this.$.allOptionsList).appendChild(aM)}}var aI=document.createElement("div");ak.dom(aI).setAttribute("class","form-group optionsFormGroup");var aN=document.createElement("div");ak.dom(aN).setAttribute("class","toggle");ak.dom(aI).appendChild(aN);var aG=document.createElement("input");ak.dom(aG).setAttribute("type","checkbox");ak.dom(aG).setAttribute("class","optionsCheckbox");ak.dom(aN).appendChild(aG);var aL=document.createElement("label");ak.dom(aL).setAttribute("for","additionalFiles");ak.dom(aL).setAttribute("class","optionsLabel");ak.dom(aL).textContent="Additional Files";ak.dom(aI).appendChild(aL);var aD=new ao.SMAProcADUI.ADToolConfigAdditionalFiles();aD.mainInputFiles=this._mainInputFiles;aD.id="additionalFiles";aD.name="additionalFiles";aD.viewMode="list";aD.classList.add("inputConfig");aD.addEventListener("inputexists",B.bind(this));ak.dom(aI).appendChild(aD);aD.tools=this.tools;var aH=document.createElement("button");ak.dom(aH).classList.add("btn");ak.dom(aH).classList.add("btn-xs");ak.dom(aH).classList.add("btn-default");ak.dom(aH).classList.add("searchButton");aH.title="Browse content";var aF=document.createElement("span");ak.dom(aF).classList.add("fonticon");ak.dom(aF).classList.add("fonticon-dot-3");ak.dom(aH).appendChild(aF);aH.addEventListener("click",w.bind(this));ak.dom(aI).appendChild(aH);ak.dom(this.$.optionsForm).appendChild(aI);b.call(this);av=this.tools[0].configuration.getCommandLine();aw=this.tools[0].configuration.getOverrideCommandLine();Z.call(this,true);ak.dom(this.$.previewText).textContent=this.$.previewEdit.value=av!==null?av:"";if(av&&av.length>0){this.DOM(this.$.previewPlaceholder).addClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}if(ar.session.onCloud){if(ar.isOnCloud()||ar.getExecutionConfig().properties.drmMode===null){u.call(this,ar);V.call(this,ar);this.validateOptions()}}};var at=function(){if(this._loadingSectionSpinner){this._loadingSectionSpinner.hide();this._loadingSectionSpinner.stop()}this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.loadingSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).removeClass("hidden")};S.call(this,{onComplete:aA,onFailure:at})}.bind(this);var ap=function(){if(this._loadingSectionSpinner){this._loadingSectionSpinner.hide();this._loadingSectionSpinner.stop()}this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.loadingSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");this.DOM(this.$.configurationErrorOptions).removeClass("hidden")}.bind(this);require(["DS/UIKIT/Spinner"],function(at){if(!this._loadingSectionSpinner){this._loadingSectionSpinner=new at({renderTo:this.$.loadingSection,visible:true})}this._loadingSectionSpinner.spin();this._loadingSectionSpinner.show()}.bind(this));this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.previewSection).addClass("hidden");this.DOM(this.$.loadingSection).removeClass("hidden");this.$.toolManager.getConnectorDefs(ar,{onComplete:aq,onFailure:ap})};I=function(av){var ap,aq,ar,au=null,at=[],aw;if(typeof av.configurationProperties.PredefinedCommandOptions!=="undefined"&&typeof av.configurationProperties.PredefinedCommandOptions.Application!=="undefined"){ap=av.configurationProperties.PredefinedCommandOptions.Application.appName;aq=av.configurationProperties.PredefinedCommandOptions.Application.appVersion;ar=this.$.toolManager.findToolConnectorDef(av.modelID,ap,aq);if(ar){au=ar.options;at.push(au);aw=ar.name;at.push(aw)}}return at};L=function(at,ar){var aq=null,ap;if(typeof at!=="undefined"&&at){for(ap=0;ap<at.length;ap++){if(at[ap].id===ar){aq=at[ap];break}}}return aq};j=function(at,ap){var ar=null,aq;if(typeof at!=="undefined"&&at){for(aq=0;aq<at.length;aq++){if(at[aq].name===ap){ar=at[aq];break}}}return ar};W=function(aq,at){var ar=null,ap;if(typeof aq!=="undefined"&&aq){for(ap=0;ap<aq.length;ap++){if(aq[ap].id===at){ar=aq[ap];break}}}return ar};y=function(){};Y=function(){var ap=document.createElement("div");ak.dom(ap).setAttribute("class","form-group");return ap};aj=function(){window.require(["DS/UIKIT/Input/Number"],function(ap){var aq=new ap({className:"inputConfig"});return aq})};am=function(aG,aE,aB,ay){var au=Y(),aC,aH,az,av=false,aq=false,ar,aA,aJ,aI,at=this.tools[0].inputObjects,ax;if(aB.required&&aB.required.toLowerCase()==="true"){aq=true;av=true}else{aq=false;if(aE){av=true}}aH=document.createElement("div");ak.dom(aH).setAttribute("class","toggle");ak.dom(au).appendChild(aH);az=document.createElement("input");ak.dom(az).setAttribute("id",n+aB.id);ak.dom(az).setAttribute("type","checkbox");ak.dom(az).setAttribute("class","optionsCheckbox");if(av){ak.dom(az).setAttribute("checked",av);ak.dom(au).classList.add("optionsFormGroup")}else{ak.dom(au).classList.add("noShow")}if(aq){ak.dom(az).setAttribute("disabled",aq)}az.addEventListener("change",v.bind(this));ak.dom(aH).appendChild(az);var aw=document.createElement("label");ak.dom(aw).setAttribute("for",N+aB.id);ak.dom(aw).setAttribute("class","optionsLabel");aB.required.toLowerCase()==="true"?ak.dom(aw).textContent=aB.name+" *":ak.dom(aw).textContent=aB.name;ak.dom(au).appendChild(aw);if(aB.optionType!==ao.SMAProcADUI.ADToolManagerOSCommandStrategy.OPTIONTYPES.standaloneOption){if(ay&&aB.optionType!==ay.optionType){aJ=document.createElement("input");ak.dom(aJ).setAttribute("type","text");ak.dom(aJ).setAttribute("id",N+aB.id);ak.dom(aJ).setAttribute("class","form-control inputConfig hidden");ak.dom(au).appendChild(aJ);aI=document.createElement("span");aI.setAttribute("type","text");aI.innerHTML=an;ak.dom(au).appendChild(aI);aG.isRunnable=false}else{if(typeof aB.Choices!=="undefined"&&aB.Choices){ar=document.createElement("select");ak.dom(ar).setAttribute("id",N+aB.id);ak.dom(ar).setAttribute("class","form-control inputConfig");for(aC=0;aC<aB.Choices.length;aC++){aA=document.createElement("option");ak.dom(aA).setAttribute("value",aB.Choices[aC]);ax=aB.Choices[aC];ax=ax.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"');ak.dom(aA).innerHTML=ax;if(aE&&aE.value&&aE.value===aB.Choices[aC]){ak.dom(aA).setAttribute("selected","true")}else{if(aB.defaultValue&&aB.defaultValue!==""){ak.dom(aA).setAttribute("selected","true")}}ar.add(aA)}ar.addEventListener("change",d.bind(this));ak.dom(au).appendChild(ar)}else{ax="";if(aE){if(aE.value){ax=aE.value}}else{if(aB.defaultValue){ax=aB.defaultValue}}ax=ax.replace("&gt;",">").replace("&lt;","<").replace("&apos;","'").replace("&quot;",'"');aJ=document.createElement("input");if(ay&&ay.dataType==="integer"){ak.dom(aJ).setAttribute("type","number");if(ay.minimum){ak.dom(aJ).setAttribute("min",ay.minimum)}if(ay.maximum){ak.dom(aJ).setAttribute("max",ay.maximum)}if(ay.increments){ak.dom(aJ).setAttribute("step",ay.increments)}if(ax===""){ax=ay.minimum}}else{ak.dom(aJ).setAttribute("type","text")}ak.dom(aJ).setAttribute("id",N+aB.id);ak.dom(aJ).setAttribute("class","form-control inputConfig");ak.dom(aJ).setAttribute("value",ax);aJ.addEventListener("keyup",d.bind(this));aJ.addEventListener("change",d.bind(this));aJ.addEventListener("input",d.bind(this));aJ.addEventListener("drop",T.bind(this));ak.dom(au).appendChild(aJ);if(aB.name==="input"){aJ.readOnly=true;aJ.addEventListener("focus",function(){this.blur()})}if(aB.name==="job"){if(aG.toolType===ao.SMAProcADUI.ADToolManager.TOOLTYPES.osCommandSimToSO){aG.configuration.setSimFile(ax)}}if(aB.required.toLowerCase()==="true"){if(!av||ax&&ax.length>0){ak.dom(aJ).classList.remove("inputConfigWarn");aJ.placeholder="";this.fire("toggleRun",{disable:false})}else{ak.dom(aJ).classList.add("inputConfigWarn");aJ.placeholder="Required value";this.fire("toggleRun",{disable:true})}}}if(ay&&ay.dataType==="file"){var aF=document.createElement("button");ak.dom(aF).classList.add("btn");ak.dom(aF).classList.add("btn-xs");ak.dom(aF).classList.add("btn-default");ak.dom(aF).classList.add("searchButton");aF.title="Browse Content";var ap=document.createElement("span");ak.dom(ap).classList.add("fonticon");ak.dom(ap).classList.add("fonticon-dot-3");ak.dom(aF).appendChild(ap);aF.addEventListener("click",w.bind(this));ak.dom(au).appendChild(aF);for(aC=0;aC<at.length;aC++){if(at[aC].name===ax){this._mainInputFiles.push(at[aC]);if(at[aC].type==="fileversion"&&at[aC].details&&at[aC].details.version){aJ.value=ax+" (ver"+at[aC].details.version+")"}}}}}}else{var aD=document.createElement("span");ak.dom(aD).setAttribute("id",N+aB.id);ak.dom(aD).setAttribute("class","fonticon fonticon-check");ak.dom(au).appendChild(aD)}ak.dom(this.$.optionsForm).appendChild(au)};b=function(){};ad=function(){};Z=function(ap){if(ap){this.DOM(this.$.optionsSection).removeClass("hidden")}else{this.DOM(this.$.optionsSection).addClass("hidden")}};S=function(at){var ar=function(au){this._CONNECTOR_VALUES=JSON.parse(au.response);at.onComplete.call(this)}.bind(this);var aq=function(){this.DOM(this.$.previewHeader).addClass("hidden");at.onFailure.call(this)}.bind(this);var ap={verb:"GET",onComplete:ar,onError:aq};this.$.connectorOptionsCustom.sendRequest(ap)};u=function(ap){var aq=ap.getExecutionConfig();if(aq.properties.drmMode===null){ap.setCloudExecutionConfig("windows",1)}};V=function(aq){var at,ap,ar;if(window.widget){at=window.widget.getValue("tenantId");ap=window.widget.getValue("licenseURL")}if(!at||typeof at==="undefined"){this.fire(r.appMessage,{level:"error",category:"tenantIDMissingMessage",message:"You may not have all the required licenses assigned. Please contact your administrator."})}else{if(aq.toolType!==ao.SMAProcADUI.ADToolManager.TOOLTYPES.simToSO){ar=aq.getEnvSettingsProperty();if((typeof ar==="undefined")||!ar||(ar.length===0)||(ar[0][0]===null)){aq.setEnvSettingsProperty("credits",at,"4","1",ap)}}}};ag=function(){this.tools=[]};k=function(){};f=function(ap){ap.stopPropagation();ap.cancelBubble=true;this.$.filterMenu.visible=true;return true};a=function(){b.call(this)};ab=function(){ad.call(this)};v=function(ar){var aq,ap;aq=ar.target.id.substr(n.length);ap=ar.target.checked;i.call(this,aq,ap)};d=function(ar){var aq,at;aq=ar.target.id.substr(N.length);at=ar.target.value;if(this.$.access.write){m.call(this,aq,at)}else{ar.target.value=ar.target.defaultValue;if(document.createEvent&&this.dispatchEvent){var ap=document.createEvent("HTMLEvents");ap.initEvent("onNoWriteAccess",true,true);this.dispatchEvent(ap)}else{if(this.fireEvent){this.fireEvent("onNoWriteAccess")}}}};T=function(){};e=function(ap){var aq=ap.target.value;M.call(this,aq)};F=function(){var ap=function(){var ar="",aq=this.DOM(this.$.configurationTableBody).find("#"+c).elements();if(aq&&aq.length===1){ar=aq[0].value}M.call(this,ar)}.bind(this);window.setTimeout(ap,1)};o=function(){var aq=this.tools[0];if(aq.toolType===ao.SMAProcADUI.ADToolManager.TOOLTYPES.osCommand&&typeof aq.configurationProperties!=="undefined"&&aq.configurationProperties&&typeof aq.configurationProperties.commandType!=="undefined"){var ap=100;if(this.$.previewText.offsetWidth>ap){ap=this.$.previewText.offsetWidth}this.$.previewEdit.style.width=""+ap+"px";this.DOM(this.$.previewPlaceholder).addClass("hidden");this.DOM(this.$.previewText).addClass("hidden");this.DOM(this.$.previewEdit).removeClass("hidden");this.$.previewEdit.focus()}};ah=function(){var ar=this.tools[0],aq,ap=this.$.previewEdit.value;if(ap&&ap!==""){this.DOM(this.$.previewText).removeClass("hidden")}else{this.DOM(this.$.previewPlaceholder).removeClass("hidden")}this.DOM(this.$.previewEdit).addClass("hidden");aq=ar.configurationProperties;if(typeof aq!=="undefined"&&aq&&typeof aq.commandType!=="undefined"){if(aq.commandType===ao.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.genericCommand){M.call(this,ap)}else{if(aq.commandType===ao.SMAProcADUI.ADToolManagerOSCommandStrategy.OSCOMMANDTYPES.predefinedCommand){p.call(this,ap)}else{M.call(this,ap)}}}};X=function(){var ar=this.tools[0],ap=ar.configuration.getCommandLine(),aq=ar.configurationProperties;if(aq){aq.command=ap;p.call(this,ap);this.DOM(this.$.previewText).removeClass("hidden")}};z=function(at){at.stopPropagation();at.cancelBubble=true;var aq=this.$.allOptionsList.children;for(var ar=0;ar<aq.length;ar++){if(this.tools[0]&&this.tools[0].isOnCloud()&&(aq[ar].children[1].textContent==="cpus"||aq[ar].children[1].textContent==="memory"||aq[ar].children[1].textContent==="user"||aq[ar].children[1].textContent==="queue")){if(aq[ar].children[0].checked){aq[ar].children[0].checked=false;if(document.createEvent&&aq[ar].children[0].dispatchEvent){var ap=document.createEvent("HTMLEvents");ap.initEvent("change",true,true);aq[ar].children[0].dispatchEvent(ap)}else{if(aq[ar].children[0].fireEvent){aq[ar].children[0].fireEvent("onchange")}}this.fire(r.appMessage,{level:"info",category:"cpuMemoryMessage",message:E})}aq[ar].children[0].disabled=true}else{aq[ar].children[0].disabled=false}}this.showDialog();return false};H=function(aq){aq.stopPropagation();aq.cancelBubble=true;var ap;ap=aq.target.id.substr(x.length);var ar=this.DOM(this.$.optionsSection).find("#__option_value_"+ap).elements();var at=this.DOM(this.$.optionsSection).find("#__option_checked_"+ap).elements();at[0].click();if(ak.dom(ak.dom(ar[0]).parentNode).classList.contains("noShow")){ak.dom(ak.dom(ar[0]).parentNode).classList.remove("noShow");ak.dom(ak.dom(ar[0]).parentNode).classList.add("optionsFormGroup")}else{ak.dom(ak.dom(ar[0]).parentNode).classList.remove("optionsFormGroup");ak.dom(ak.dom(ar[0]).parentNode).classList.add("noShow")}if(ak.dom(ar[0]).classList.contains("hidden")){if(at[0].checked){this.fire(r.appMessage,{level:"error",category:"optionMismatchMsg",message:"This option seem to have been modified from default. Please contact administrator for help."})}}};w=function(aq){aq.stopPropagation();aq.cancelBubble=true;if(this.$.access.write){this.showDialog2()}else{if(document.createEvent&&this.dispatchEvent){var ap=document.createEvent("HTMLEvents");ap.initEvent("onNoWriteAccess",true,true);this.dispatchEvent(ap)}else{if(this.fireEvent){this.fireEvent("onNoWriteAccess")}}}this.currentSearchId=aq.currentTarget.parentNode.children[2].id;this.currentSearchText=aq.currentTarget.parentNode.children[1].textContent};G=function(){var ar=this.$.spSearch.getSelectedObjects(),at=[];var av=this.DOM(this.$.optionsSection).find("#"+this.currentSearchId).elements();if(ar.length>1&&this.currentSearchText==="input"){ar=ar.slice(1,1)}for(var au=0;au<ar.length;au++){this.$.toolManager.addReferencedContent(ar[au].objectId);var aq={id:ar[au].objectId,type:"document",mdType:"Simulation Document - Versioned",name:ar[au].displayName};this.tools[0].addInputObject(aq);at.push(ar[au].displayName)}av[0].value=at.join("\n");if(document.createEvent&&av[0].dispatchEvent){var ap=document.createEvent("HTMLEvents");ap.initEvent("change",true,true);av[0].dispatchEvent(ap)}else{if(av[0].fireEvent){av[0].fireEvent("onchange")}}};K=function(){this.DOM(this.$.myModal).toggleClass("in");this.DOM(this.$.myModal).addClass("show");this.DOM(this.$.myModal).removeClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden")};ac=function(){this.DOM(this.$.myModal).toggleClass("in");this.DOM(this.$.myModal).removeClass("show");this.DOM(this.$.myModal).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden")};J=function(ap){ap.stopPropagation();ap.cancelBubble=true;if(this.$.mdataView.getSelections().length>0){this.DOM(this.$.addOkButton).removeClass(l.disabled)}else{this.DOM(this.$.addOkButton).addClass(l.disabled)}};O=function(){this.DOM(this.$.myModal2).toggleClass("in");this.DOM(this.$.myModal2).addClass("show");this.DOM(this.$.myModal2).removeClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden");if(this.$.mdataView.getSelections().length===0){this.DOM(this.$.addOkButton).addClass(l.disabled)}};ai=function(){this.DOM(this.$.myModal2).toggleClass("in");this.DOM(this.$.myModal2).removeClass("show");this.DOM(this.$.myModal2).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden")};R=function(ap){ap.stopPropagation();ap.preventDefault();ap.cancelBubble=true;this.hideDialog()};Q=function(ap){ap.stopPropagation();ap.preventDefault();ap.cancelBubble=true;this.hideDialog()};t=function(aq){aq.stopPropagation();aq.preventDefault();aq.cancelBubble=true;this.hideDialog2();var az=/(?:\.([^.]+))?$/;var aA=this.$.mdataView.getSelections(),av=[];var ap=this.DOM(this.$.optionsSection).find("#"+this.currentSearchId).elements();var ar;if(aA.length>1&&this.currentSearchText==="input"){aA=aA.slice(1,1)}if(this.currentSearchText==="input"){ar=this.DOM(this.$.optionsSection).find("#__option_value_1").elements()}var aw=[];for(var au=0;au<aA.length;au++){var ay={type:aA[au].model.type,mdType:aA[au].model.mdType,name:aA[au].model.name};if(aA[au].model.mdType==="fileversion"&&aA[au].model.details){ay.details=aA[au].model.details;ay.id=aA[au].model.parentInstance?aA[au].model.parentInstance.modelID:aA[au].model.modelID}else{ay.id=aA[au].model.modelID}aw.push(ay);if(aA[au].model.mdType==="fileversion"&&aA[au].model.details&&this.currentSearchId==="additionalFiles"){av.push(aA[au].model.name+" (ver"+aA[au].model.details.version+")")}else{av.push(aA[au].model.name)}if(this.currentSearchId!=="additionalFiles"){this._mainInputFiles.push(aA[au].model)}}var at=document.getElementById("additionalFiles");at.mainInputFiles=this._mainInputFiles;if(this.currentSearchId==="additionalFiles"){at.addInputs(aw,false)}else{at.addInputs(aw,true)}if(ap[0].id!=="additionalFiles"){ap[0].value=av[0];if(ar&&(ar[0].value===""||ar[0].value===null)){if(az.exec(av[0]==="inp")){ar[0].value=av[0].replace(/\.[^/.]+$/,"")}}}if(document.createEvent&&ap[0].dispatchEvent){var ax=document.createEvent("HTMLEvents");ax.initEvent("change",true,true);ap[0].dispatchEvent(ax);if(ar){ar[0].dispatchEvent(ax)}}else{if(ap[0].fireEvent){ap[0].fireEvent("onchange");if(ar){ar[0].fireEvent("onchange")}}}if(this.currentSearchId!=="additionalFiles"){if(aA[0].model.type==="fileversion"&&aA[0].model.details&&aA[0].model.details.version){ap[0].value=aA[0].model.name+" (ver"+aA[0].model.details.version+")"}}};s=function(ap){ap.stopPropagation();ap.preventDefault();ap.cancelBubble=true;this.hideDialog2()};B=function(){this.fire(r.appMessage,{level:"error",category:"inputAlreadyExistsMsg",message:"Document with same name already set to be downloaded. Please select a different document or remove the existing document and reselect."})};q=function(ap){this.set("globals."+ap.detail.name,ap.detail.value)};C=function(){if(window.widget){if(window.widget.getValue("uploadFiles")==="appDefault"&&(this.tools[0].toolType!==ao.SMAProcADUI.ADToolManager.TOOLTYPES.simToSO&&this.tools[0].configuration.getAppName()!==U.viewer&&this.tools[0].configuration.getAppName()!==U.cae&&this.tools[0].configuration.getAppName()!==U.python)){this.fileSpecText="*.com, *.dat, *.msg, *.sta, *.odb, *.sim, *.log"}else{if(window.widget.getValue("uploadFiles")==="userCustom"){this.fileSpecText=window.widget.getValue("customFiles")}}h.call(this)}};h=function(){var aq,aw,au=-1,ap,at,av,ar=[];if(this.fileSpecText){aq=this.fileSpecText.trim().replace(/'/g,'"');do{aw=aq.indexOf('"');if(aw>=0){au=aq.indexOf('"',aw+1);if(au>=0){av=aq.slice(aw,au+1);aq=aq.substr(0,aw)+aq.substr(au+1);if(av.length>2){ar.push(av)}aw=au+1}}}while(aw>=0&&au>=0);ap=aq.split(/[;,\s]/);for(at=0;at<ap.length;at++){av=ap[at].trim();if(av.length>0){ar.push(av)}}this.tools[0].outputFileSpecs=ar}};aa=function(){var aq=this.$.allOptionsList.children;for(var ar=0;ar<aq.length;ar++){if(this.tools[0]&&this.tools[0].isOnCloud()&&(aq[ar].children[1].textContent==="cpus"||aq[ar].children[1].textContent==="memory"||aq[ar].children[1].textContent==="user"||aq[ar].children[1].textContent==="queue")){if(aq[ar].children[0].checked){aq[ar].children[0].checked=false;if(document.createEvent&&aq[ar].children[0].dispatchEvent){var ap=document.createEvent("HTMLEvents");ap.initEvent("change",true,true);aq[ar].children[0].dispatchEvent(ap)}else{if(aq[ar].children[0].fireEvent){aq[ar].children[0].fireEvent("onchange")}}this.fire(r.appMessage,{level:"info",category:"cpuMemoryMessage",message:E})}aq[ar].children[0].disabled=true}else{aq[ar].children[0].disabled=false}}};ao.SMAProcADUI=ao.SMAProcADUI||{};ao.SMAProcADUI.ADToolConfigOptions=ak({is:"ad-tool-config-options",properties:{tools:{type:Array,value:function(){return[]},observer:"toolsChanged"},_CONNECTOR_VALUES:{type:Array,value:[]},currentSearchId:{type:String},currentSearchText:{type:String}},_computeUri2:function(){return this.resolveUrl("../../SMAProcADUI/assets/connector_options_custom.json")},ready:function(){return k.apply(this,arguments)},onFilter:function(){return f.apply(this,arguments)},onFilterSelected:function(){return a.apply(this,arguments)},onFilterAll:function(){return ab.apply(this,arguments)},onPredefinedOptionChecked:function(){return v.apply(this,arguments)},onPredefinedOptionValueChanged:function(){return d.apply(this,arguments)},onPredefinedOptionValueDrop:function(){return T.apply(this,arguments)},onGenericOptionValueChanged:function(){return e.apply(this,arguments)},onGenericOptionValueDrop:function(){return F.apply(this,arguments)},onPreviewEditStart:function(){return o.apply(this,arguments)},onPreviewEditFinish:function(){return ah.apply(this,arguments)},onRevertOverride:function(){return X.apply(this,arguments)},onadditionalOptionsClick:function(){return z.apply(this,arguments)},onToggleOptions:function(){return H.apply(this,arguments)},onInputSearch:function(){return w.apply(this,arguments)},onChange:function(){return G.apply(this,arguments)},toolsChanged:function(){P.call(this)},showDialog:function(){return K.apply(this,arguments)},hideDialog:function(){return ac.apply(this,arguments)},showDialog2:function(){return O.apply(this,arguments)},hideDialog2:function(){return ai.apply(this,arguments)},onAccept:function(){return R.apply(this,arguments)},onCancel:function(){return Q.apply(this,arguments)},onAddContentAccept:function(){return t.apply(this,arguments)},onAddContentCancel:function(){return s.apply(this,arguments)},onVariableValueChange:function(){return q.apply(this,arguments)},onManagedDataSelect:function(){return J.apply(this,arguments)},onInputExists:function(){return B.apply(this,arguments)},validateOptions:function(){return aa.apply(this,arguments)},behaviors:[ao.SMAProcSP.SPBase]})});