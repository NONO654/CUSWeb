/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(B){var H=B.Polymer,I=B.DS;var d=null,a=null,c=null,l=null,s=null,m=null,f=null,j=null,D=null,n=null,E=null,b=null,A=null,y=null,i=null,F=null,o={maxChecks:"maxChecks"},t={},r={},w=100,k=0,C=null,v=1,h=0,g=null,G=null,z=null,p=null,q=null,J=null,x=null,u=null,e=null;d=function(){var K;a();K=l(k);if(K&&(K.length>0)){D.call(this,K)}C=B.setTimeout(d,w)};a=function(){var K,M,L=1;if(k>0){K=Date.now();M=K-h;L=M<=1000?1:Math.floor(M/1000);h=K}k+=L};c=function(){var L=[],N,M,K;N=Object.getOwnPropertyNames(t);for(K=0;K<N.length;K++){M=t[N[K]];if(M){Array.prototype.push.apply(L,M)}}return L};l=function(){var N=[],M=c.call(this),L,K;for(L=0;L<M.length;L++){K=M[L];if((k>=(K.lastCheckTick+K.checkInterval))&&!K.event.checking){N.push(K.event)}}return N};s=function(N){var O=[],K=t[N.definition.name],M,L;if(K){for(M=0;M<K.length;M++){L=K[M];if((L.event.key===N.key)||!L.event.key){O.push(L)}}}return O};m=function(L){var K,M;K=L.event.definition.name;M=t[K];if(!M){M=[];t[K]=M}if(M.indexOf(L)<0){M.push(L)}if(!C&&(L.checkInterval>0)){G.call(this)}};f=function(M){var K,N,L;K=M.event.definition.name;N=t[K];if(N){L=N.indexOf(M);if(L>=0){N.splice(L,1)}}N=c.call(this);if(N.length===0){z.call(this)}};j=function(N){var O=null,M=c.call(this),L,K;for(L=0;L<M.length;L++){K=M[L];if(K.id===N){O=K;break}}return O};D=function(N){var K,M,L;if(N){K=i.call(this,N);for(M=0;M<K.length;M++){L=K[M];n.call(this,L)}}};n=function(M){var K,L,N=M;K=function(O){N.checking=false;E.call(this,N,O)};L=function(O){N.checking=false;b.call(this,N,O)};N.checking=true;N.definition.callback(N.context,N.key,K,L)};E=function(N,K){var M=s.call(this,N),L;if(M){for(L=0;L<M.length;L++){A.call(this,M[L],N,K)}}};b=function(N,K){var M=s.call(this,N),L;if(M){for(L=0;L<M.length;L++){y.call(this,M[L],N,K)}}};A=function(M,L,K){M.numChecks++;M.lastCheckTick=k;if(K){M.successCallback(L.definition.name,L.context,L.key)}else{F.call(this,M)}if(K&&M.singleOccurrence){f.call(this,M)}else{if(M.maxChecks>0&&M.numChecks>M.maxChecks){if(M.errorCallback){M.errorCallback(L.definition.name,L.context,L.key,o.maxChecks)}f.call(this,M)}}};y=function(M,L,K){M.numChecks++;M.lastCheckTick=k;if(M.errorCallback){M.errorCallback(L.definition.name,L.context,L.key,K)}};i=function(O){var P={},L=[],M,K,N;for(N=0;N<O.length;N++){M=O[N];K=M.definition.name+"-"+M.key;if(typeof P[K]==="undefined"){P[K]=M;L.push(M)}}return L};F=function(){};g=function(K,L){if(K&&L){if((typeof r[K]==="undefined")||!r[K]){r[K]={name:K,callback:L}}}};G=function(){if(!C){C=B.setTimeout(d,0)}};z=function(){if(C){B.clearTimeout(C);C=null}};p=function(K,L){var N=r[K],M;if((typeof N!=="undefined")&&N){M={definition:N,key:L,checking:false};E.call(this,M,true)}};q=function(U,S,K,R,P,O,M,T){var Q=r[U],L,N,V=null;if(Q){L={definition:Q,context:S,key:K,checking:false};N={id:v++,checkInterval:P,singleOccurrence:R,successCallback:M,errorCallback:T,event:L,numChecks:0,maxChecks:O,lastCheckTick:0};m.call(this,N);V=N.id}return V};J=function(K){var L=j.call(this,K);if(L){f.call(this,L)}};x=function(){var L=c.call(this),K;for(K=0;K<L.length;K++){f.call(this,L[K])}};u=function(){this.stopListeningAll();r={}};e=function(){return r};I.SMAProcADUI=I.SMAProcADUI||{};I.SMAProcADUI.ADAppEventChecker=H({is:"ad-app-event-checker",addEventCheckDef:function(){return g.apply(this,arguments)},startChecking:function(){return G.apply(this,arguments)},stopChecking:function(){return z.apply(this,arguments)},fire:function(){return p.apply(this,arguments)},startListening:function(){return q.apply(this,arguments)},stopListening:function(){return J.apply(this,arguments)},stopListeningAll:function(){return x.apply(this,arguments)},resetAll:function(){return u.apply(this,arguments)},getEventDefinitions:function(){return e.apply(this,arguments)},behaviors:[I.SMAProcSP.SPBase]});I.SMAProcADUI.ADAppEventChecker.ERRORS=I.SMAProcADUI.ADAppEventChecker.ERRORS||o}(this));