/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
window.require(["DS/SMAProcADUI/ad-mdata-instance/ADMDataInstance","DS/SMAProcADUI/ad-station/ADStation","UWA/Utils/InterCom","UWA/Class/Promise","DS/SMAProcADUI/ad-execdir/ADExecDir"],function(u,q,aC,a2,l){var az=window.Polymer,af=window.DS;var aY=window.Promise||a2;var K=null,f=null,T=null,am=null,aT=null,ac=null,ak=null,I=null,av=null,Q=null,ah=null,L=null,al=null,k=null,ay=null,at=null,A=null,n=null,V=null,j=null,ad=null,c=null,aq=null,w=null,a=null,O=null,e=null,y=null,v=null,a0=null,aP=null,aS=null,X=null,aO=null,aL=null,d=null,z=null,aA=null,aI=null,i=null,o=null,H=null,aZ=null,aU=null,M=null,B=null,W=null,aH=null,p=null,b=null,x=null,aN=null,ai=null,aw=null,ao=null,h=null,U=null,aD=null,aJ=null,aW=null,S=null,F=null,P=null,ag=null,r="com.ds.compass",ar="ManagedData",aV="ExecDirs",aX=null,C=5000,aG="temporary_ID",au={variable:"sp-variable"},aQ={select:"select",open:"open",appMessage:"appmessage"},m={SIMDOC_V:"Simulation Document - Versioned",SIMDOC_NV:"Simulation Document - NonVersioned",ENODOC_V:"Document",SIM_FOLDER:"Simulation Folder",FILE:"file",DOCUMENT:"document",FILE_VERSION:"fileversion",CAE_PART:"PLMCoreReference,PLMCoreRepReference,VPMReference,Physical Product",SIMULATION:"Physics Simulation,DesignSight"},D={disabled:"disabled",contentDisabled:"contentDisabled"},ae="Couldn't load managed data: ",Y="Companion process not configured for content. Please contact administrator.",E="Failed uploading local file: ",aM="Failed uploading execution files: ",Z="Removed selections from Managed Data and from any Tools that used the selections as Input.",aK="Failed removing Managed Data: ",an="Failed adding referenced content: ",N="Failed removing referenced content: ",aj="Unspecified Web Service error",aR="Beginning Edit...",J="mdataRefreshError",a1="mdataRemoveOwnedSuccess",ab="mdataRemoveOwnedError",g="mdataRemoveRefError",s="mdataBadDocumentFiles",aE="Failed creating a new folder",R="Drag files or folders from your desktop or Execution Directories to this panel to add to your Managed Data",aB="Drag files or folders from your desktop or any On-Premise Execution Directory to this panel to add to your Managed Data",ax="This document contains a missing file.  The file may not have finished uploading yet, or the upload may have been interrupted before it was complete.",G="This document contains missing files.  The files may not have finished uploading yet, or the uploads may have been interrupted before they were complete.",ap=null,aa=null,t=null,aF=null;K=function(){var a3=R;if(this.session){f.call(this);this.session.addEventListener(af.SMAProcADUI.ADSession.EVENTS.jobsCompleted,e.bind(this));this.session.addEventListener(af.SMAProcADUI.ADSession.EVENTS.sessionLoaded,f.bind(this));if(this.session.onCloud){a3=aB}}this.emptyMessage=a3};f=function(){if(T.call(this)){this.$.managedDataChooser.rootItem=this.session.managedData;aT.call(this)}else{am.call(this);if(window.console){window.console.log("Failed retrieving internal data category")}}if(aX===null){aX=window.setTimeout(n.bind(this),1)}};T=function(){if(this.session.getCategoryID(af.SMAProcADUI.ADSession.CATEGORY_INTERNAL_DATA)){return true}else{return false}};am=function(){var a3=this.$.managedDataChooser.$.placeholderRow;if(!az.dom(a3).classList.contains(D.contentDisabled)){this.DOM(a3).addClass(D.contentDisabled)}this.DOM(this.$.addManagedDataButton).addClass(D.disabled);this.fire(aQ.appMessage,{level:"error",message:Y})};aT=function(){var a3=this.$.managedDataChooser.$.placeholderRow;if(az.dom(a3).classList.contains(D.contentDisabled)){this.DOM(a3).removeClass(D.contentDisabled)}if(az.dom(this.$.addManagedDataButton).classList.contains(D.disabled)){this.DOM(this.$.addManagedDataButton).removeClass(D.disabled)}};ac=function(a4){var a5=[],a8=null,a7=null,a3=0;if(a4.childInstances){for(var a6=0;a6<a4.childInstances.length;a6++){a8=a4.childInstances[a6];if(u.ADMDataInstance.TYPES.folder===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-folder")}else{if(u.ADMDataInstance.TYPES.simulation===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-simulation")}else{if(u.ADMDataInstance.TYPES.file===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-file");if(a8.accessDisabled){a3++}}else{if(u.ADMDataInstance.TYPES.fileversion===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-fileversion")}else{if(u.ADMDataInstance.TYPES.document===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-document")}else{if(u.ADMDataInstance.TYPES.part===a8.type){a7=this.$.managedDataChooser.createItem("ad-multiview-part")}}}}}}a7.model=a8;if((aG===a8.modelID)||this.session.isItemBeingUploaded(a8)){a7.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing}else{a7.viewState=a8.accessDisabled?af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.accessDisabled:af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.ready}a7.modelSource=ar;a5.push(a7)}if(a3){this.fire(aQ.appMessage,{level:"error",message:(a3>1)?G:ax,category:s})}}return a5};ak=function(a4,a7,a3){var a6=[],a5=a7;if(a4&&a3){if(a4.childInstances&&!a5){a6=ac.call(this,a4);a3(true,a4,a6)}else{I.call(this,a4,a3)}}};I=function(a4,a3){var a6=null,a5=null;a6=function(a7){var a9,ba,a8;if(a7.childInstances){for(a9=0;a9<a7.childInstances.length;a9++){ba=a7.childInstances[a9];if(u.ADMDataInstance.TYPES.file===ba.type){ba.modelID=a7.modelID}}}a7.autoRefreshEnabled=true;a8=ac.call(this,a7);a3(true,a4,a8);if(this.$.itemConfigView.isOpen()){V.call(this)}ay.call(this)}.bind(this);a5=function(a9,a8){if(u.ADMDataInstance.TYPES.file===a4.type){console.log("Managed Data file could not be reloaded, perhaps because last version was deleted.  Trying to refresh the parent document.");a3(true,a4,[]);this.$.managedDataChooser.back();this.$.managedDataChooser.refresh(true)}else{var a7=ae;if(a9===af.SMAProcADUI.ADSession.ERRORS.mdataLoadError&&(a8.response&&a8.response.length>0)){a7+=a8.response}else{a7+=aj}this.fire(aQ.appMessage,{level:"error",message:a7,category:J});a4.autoRefreshEnabled=false;a3(false,a4,null);this.$.managedDataChooser.back()}}.bind(this);this.session.loadContentObject(a4,aF,a6,a5)};av=function(a7,bb){var a8=false,a6=false,a3=[],a9=[],ba=false,a5=false;if(!localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"]){localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"]="false"}if(!localStorage["SMAProcAdhoc.preferences.hideRemoveMDataConfirm"]){localStorage["SMAProcAdhoc.preferences.hideRemoveMDataConfirm"]="false"}a6=localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"].toLowerCase()==="true";a8=localStorage["SMAProcAdhoc.preferences.hideRemoveMDataConfirm"].toLowerCase()==="true";for(var a4=0;a4<a7.length;a4++){if(a7[a4].type===u.ADMDataInstance.TYPES.simulation){if(a6){a3.push(a7[a4])}else{a9.push(a7[a4])}}else{if(a7[a4].isReference){a9.push(a7[a4])}else{a3.push(a7[a4])}}}if(a9.length>0&&a3.length>0){ba=true}if(a3.length===0&&a9.length>1){a5=true}if(!a8||ba||a5){if(!this._mdataRemoveDlg){this._mdataRemoveDlg=new af.SMAProcADUI.ADMDataRemoveDialog();az.dom(document.body).appendChild(this._mdataRemoveDlg)}this._mdataRemoveDlg.validateFunction=ah.bind(this,a7,bb);this._mdataRemoveDlg.cancelFunction=L.bind(this,bb);this._mdataRemoveDlg.deleteSimulations=a6;this._mdataRemoveDlg.hideConfirm=a8;this._mdataRemoveDlg.selectedMDataInstances=a7;this._mdataRemoveDlg.show()}else{ah.call(this,a7,bb)}};Q=function(a7,a4){var a8=(u.ADMDataInstance.TYPES.folder===a7.model.type),a6=(u.ADMDataInstance.TYPES.folder===a4.model.type),a5,a3;if(a8&&!a6){return -1}else{if(!a8&&a6){return 1}else{if((u.ADMDataInstance.TYPES.fileversion===a7.model.type)&&(u.ADMDataInstance.TYPES.fileversion===a4.model.type)){a5=parseInt(a7.model.details.version,10);a3=parseInt(a4.model.details.version,10);if((!isNaN(a5))&&(!isNaN(a3))){return a5-a3}else{if(a7.model.details.version&&a4.model.details.version){return a7.model.details.version.localeCompare(a4.model.details.version)}else{return a7.model.name.localeCompare(a4.model.name)}}}else{return a7.model.name.localeCompare(a4.model.name)}}}};ah=function(a8,bc){var bb,a4=[],a9=[],a5,ba=0,a7=0,a3=true,a6=false;if(this._mdataRemoveDlg){a6=this._mdataRemoveDlg.deleteSimulations;localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"]=(a6?"true":"false");localStorage["SMAProcAdhoc.preferences.hideRemoveMDataConfirm"]=this._mdataRemoveDlg.hideConfirm?"true":"false"}else{if(localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"]){a6=localStorage["SMAProcAdhoc.preferences.removeMDataDeleteSimulations"]}}bb=function(bd){if(!bd){a3=false}a7++;if(a7===ba){bc(true);if(a3){this.fire(aQ.appMessage,{level:"success",message:Z,category:a1})}}ay.call(this);at.call(this)}.bind(this);for(a5=0;a5<a8.length;a5++){if(a8[a5].type===u.ADMDataInstance.TYPES.simulation){if(a6){a4.push(a8[a5])}else{a9.push(a8[a5])}}else{if(a8[a5].isReference){a9.push(a8[a5])}else{a4.push(a8[a5])}}}if(a4.length>0){ba++;al.call(this,a4,bb)}if(a9.length>0){ba++;k.call(this,a9,bb)}};L=function(a3){if(a3){a3(false)}};al=function(a4,a3){var a6=function(a9){var a8=false;var a7="";Object.keys(a9).forEach(function(bb){var ba=a9[bb];if(!a8&&ba.indexOf("Failed")>-1){a8=true;if(a7.length>0){a7+="\r\n"}a7+=ba}});if(a8){this.fire(aQ.appMessage,{level:"error",message:a7,category:ab});if(window.console){window.console.log("FAILED DELETE JSON LOG: "+a9)}}if((a4.length===1)&&(a4[0].type===u.ADMDataInstance.TYPES.fileversion)){a4[0].parentInstance.details.revision=parseInt(a4[0].parentInstance.details.revision)-1}a3(!a8)}.bind(this);var a5=function(a8,a7){this.fire(aQ.appMessage,{level:"error",message:aK+a7,category:ab});a3(false)}.bind(this);if((a4.length===1)&&(a4[0].type===u.ADMDataInstance.TYPES.fileversion)){a4[0].parentInstance.parentInstance.childInstances=null}this.session.removeOwnedContent(a4,a6,a5)};k=function(a8,bc){var bb=a8.length,ba=0,a4=true;var a7=this.$.managedDataChooser.openItem,a3=null;if(a7){if(a7.type===u.ADMDataInstance.TYPES.folder){a3=a7.modelID}}var a9=function(){ba++;if(ba===bb){bc(a4)}}.bind(this);var a6=function(be,bd){a4=false;this.fire(aQ.appMessage,{level:"error",message:N+bd,category:g});ba++;if(ba===bb){bc(a4)}}.bind(this);for(var a5=0;a5<a8.length;a5++){this.session.removeReferencedContent(a8[a5],a3,a9,a6)}};ay=function(){try{var a3=this.$.managedDataChooser.$.contentPanel.selections.length,a4=this.$.managedDataChooser.openItem,a5;if(a3===0){this.DOM(this.$.managedDataChooser.$.remove).addClass(D.disabled);this.DOM(this.$.configureItem).addClass(D.disabled);this.DOM(this.$.player3D).addClass(D.disabled);this.DOM(this.$.editFileButton).addClass(D.disabled);this.DOM(this.$.modifyEditorButton).addClass(D.disabled);this.DOM(this.$.downloadFileButton).addClass(D.disabled);this.DOM(this.$.simToSO).addClass(D.disabled);this.DOM(this.$.managedDataChooser.$.remove).addClass(D.disabled)}else{if(this.$.managedDataChooser.$.contentPanel.selections[0].model.type!=="fileversion"||a3===1&&parseInt(this.$.managedDataChooser.$.contentPanel.selections[0].model.details.version)===parseInt(this.$.managedDataChooser.$.contentPanel.selections[0].model.parentInstance.details.revision)){this.DOM(this.$.managedDataChooser.$.remove).removeClass(D.disabled)}else{this.DOM(this.$.managedDataChooser.$.remove).addClass(D.disabled)}if(a3===1){this.DOM(this.$.configureItem).removeClass(D.disabled);if((this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.file)&&!this.$.managedDataChooser.$.contentPanel.selections[0].model.details.locked){this.DOM(this.$.editFileButton).removeClass(D.disabled);this.DOM(this.$.modifyEditorButton).removeClass(D.disabled)}else{if(this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.document){this.DOM(this.$.editFileButton).removeClass(D.disabled);this.DOM(this.$.modifyEditorButton).removeClass(D.disabled)}else{this.DOM(this.$.editFileButton).addClass(D.disabled);this.DOM(this.$.modifyEditorButton).addClass(D.disabled)}}if(this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.simulation){this.DOM(this.$.player3D).removeClass(D.disabled)}else{this.DOM(this.$.player3D).addClass(D.disabled)}if((this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.document)||(this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.file)||(this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.fileversion)){if(!this.simToSoOff){this.DOM(this.$.simToSO).removeClass(D.disabled)}this.DOM(this.$.downloadFileButton).removeClass(D.disabled)}else{this.DOM(this.$.simToSO).addClass(D.disabled);this.DOM(this.$.downloadFileButton).addClass(D.disabled)}}else{this.DOM(this.$.configureItem).addClass(D.disabled);this.DOM(this.$.player3D).addClass(D.disabled);this.DOM(this.$.editFileButton).addClass(D.disabled);this.DOM(this.$.modifyEditorButton).addClass(D.disabled);this.DOM(this.$.downloadFileButton).addClass(D.disabled)}}if(a4){if(a4.type===u.ADMDataInstance.TYPES.document||a4.type===u.ADMDataInstance.TYPES.file){a5=document.createAttribute("disabled");this.$.addManagedDataMenuAddRef.setAttributeNode(a5);a5=document.createAttribute("disabled");this.$.addManagedDataMenuAddFolder.setAttributeNode(a5)}else{az.dom(this.$.addManagedDataMenuAddRef).removeAttribute("disabled");az.dom(this.$.addManagedDataMenuAddFolder).removeAttribute("disabled")}}if(this.$.itemConfigView.isOpen()){this.$.configureItem.focus()}}catch(a6){if(window.console){window.console.log("Failed disabling command on selection")}}};at=function(){this.$.managedDataChooser.refreshViewState()};A=function(){var a4,a5,a3;if(this.session){a4=this.$.managedDataChooser.getItems();if(a4){for(a5=0;a5<a4.length;a5++){a3=a4[a5].model;if(a3){if((aG===a3.modelID)||this.session.isItemBeingUploaded(a3)){a4[a5].viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing}else{a4[a5].viewState=a3.accessDisabled?af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.accessDisabled:af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.ready}}}}}};n=function(){A.call(this);aX=window.setTimeout(n.bind(this),C)};V=function(){var a5=this.getSelections(),a4=null,a3=null;if(a5&&a5.length===1){a4=a5[0];a3=a4.model;if(a4.tagName.toLowerCase()==="ad-multiview-folder"){this.$.itemPropertiesPanel.showMDFolder(a3);this.$.itemConfigView.open()}else{if(a4.tagName.toLowerCase()==="ad-multiview-simulation"){this.$.itemPropertiesPanel.showSimulation(a3);this.$.itemConfigView.open()}else{if(a4.tagName.toLowerCase()==="ad-multiview-document"){this.$.itemPropertiesPanel.showDocument(a3);this.$.itemConfigView.open()}else{if(a4.tagName.toLowerCase()==="ad-multiview-file"){this.$.itemPropertiesPanel.showMDFile(a3);this.$.itemConfigView.open()}else{if(a4.tagName.toLowerCase()==="ad-multiview-fileversion"){this.$.itemPropertiesPanel.showMDFileVersion(a3);this.$.itemConfigView.open()}else{if(a4.tagName.toLowerCase()==="ad-multiview-part"){this.$.itemPropertiesPanel.showPart(a3);this.$.itemConfigView.open()}}}}}}}else{this.$.itemConfigView.close()}};j=function(){var a3=false;if(this._compassEventSocket){if(this.$.managedDataChooser.$.contentPanel.selections.length===1){if(this.$.managedDataChooser.$.contentPanel.selections[0].model.type===u.ADMDataInstance.TYPES.simulation){a3=true}}if(a3){this._compassEventSocket.dispatchEvent("onSetObject",{objectId:this.$.managedDataChooser.$.contentPanel.selections[0].model.modelID})}else{this._compassEventSocket.dispatchEvent("onResetObject",{})}}};ad=function(a4,a5){var a3=new aY(function(a8,a7){if((a4.size%4096===0)&&(a4.size<500000)){var a6=new FileReader();a6.onload=a8;a6.onerror=a7;try{a6.readAsText(a4)}catch(a9){a7()}}else{a8()}});a3.then(function(){var a7=new Date(),ba,a9,a6=this.$.managedDataChooser.openItem,a8;this.$.localFileForm.reset();if(a5){a9=a5;a6=a9.model;a8=true}else{ba=new u.ADMDataInstance();ba.modelID=aG;ba.name=a4.name;ba.lastModified=a7.toJSON();ba.parentInstance=a6;if(a6.type===u.ADMDataInstance.TYPES.category||a6.type===u.ADMDataInstance.TYPES.folder){ba.type=u.ADMDataInstance.TYPES.document;a9=this.$.managedDataChooser.createItem("ad-multiview-document")}else{if(u.ADMDataInstance.TYPES.document===a6.type){ba.type=u.ADMDataInstance.TYPES.file;a9=this.$.managedDataChooser.createItem("ad-multiview-file")}else{ba.type=u.ADMDataInstance.TYPES.fileversion;a9=this.$.managedDataChooser.createItem("ad-multiview-fileversion");a6.parentInstance.childInstances=null}}a9.model=ba;a8=a9.model.type===u.ADMDataInstance.TYPES.file;a9.modelSource=ar}a9.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing;this.$.managedDataChooser.$.contentPanel.addItem(a9,a8);at.call(this);this.session.uploadLocalFile(a6,a4,c.bind(this,a9),aq.bind(this,a9,a4.name))}.bind(this),function(){this.fire(aQ.appMessage,{level:"warning",message:"Dropping folders is not supported yet. The dropped folders will be ignored"})}.bind(this))};c=function(a4,a3){if(a4.model.parentInstance.details&&a4.model.parentInstance.details.hasOwnProperty("revision")){a4.model.parentInstance.details.revision=parseInt(a4.model.parentInstance.details.revision)+1}this.$.managedDataChooser.refresh(true);if(this.$.dashboard.isInDashboard()){var a5=this;window.setTimeout(function(){var a6=a5.$.managedDataChooser.getItems();if(a6[0].model.mdType==="fileversion"){a6[a6.length-1].click()}else{for(var a7=0;a7<a6.length;a7++){if((a6[a7].model.modelID===a3.id)&&!a5.multipleFileUpload){a6[a7].click()}}}},1000)}at.call(this)};aq=function(a5,a6,a4,a3){this.fire(aQ.appMessage,{level:"error",message:E+" "+a6+a3});this.$.managedDataChooser.refresh(false)};w=function(a9){var a8=[],a7=null;for(var a5=0;a5<a9.length;a5++){var a6=new u.ADMDataInstance(),a4=new Date();var a3=a9[a5];a6.modelID=a3.id;a6.name=a3.name;a6.lastModified=a4.toJSON();if(a3.type==="folder"){a6.type=u.ADMDataInstance.TYPES.folder;a7=this.$.managedDataChooser.createItem("ad-multiview-folder")}else{if((this.$.managedDataChooser.openItem.type===u.ADMDataInstance.TYPES.category)||(this.$.managedDataChooser.openItem.type===u.ADMDataInstance.TYPES.folder)){a6.type=u.ADMDataInstance.TYPES.document;a7=this.$.managedDataChooser.createItem("ad-multiview-document")}else{if(u.ADMDataInstance.TYPES.document===this.$.managedDataChooser.openItem.type){a6.type=u.ADMDataInstance.TYPES.file;a7=this.$.managedDataChooser.createItem("ad-multiview-file")}else{a6.type=u.ADMDataInstance.TYPES.fileversion;a7=this.$.managedDataChooser.createItem("ad-multiview-fileversion")}}}a7.model=a6;a7.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing;a7.modelSource=ar;a6.parentInstance=this.$.managedDataChooser.openItem;this.$.managedDataChooser.$.contentPanel.addItem(a7,a7.model.type==="file");a8.push(a6)}this.session.uploadExecutionData(a8[0],a9,this.$.managedDataChooser.openItem,a.bind(this,a7),O.bind(this,a7));at.call(this)};a=function(a3){if(a3.model.parentInstance.details.hasOwnProperty("revision")){a3.model.parentInstance.details.revision=parseInt(a3.model.parentInstance.details.revision)+1}this.$.managedDataChooser.refresh(true)};O=function(a5,a4,a3){this.fire(aQ.appMessage,{level:"error",message:aM+a3});this.$.managedDataChooser.refresh(false)};e=function(){this.$.managedDataChooser.rootItem.loaded=false;this.$.managedDataChooser.refresh(true)};y=function(a3){a3.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.ready;this.$.managedDataChooser.openItem.childInstances.push(a3.model);at.call(this);return true};v=function(a5,a4,a3){this.$.managedDataChooser.$.contentPanel.removeItem(a5);this.fire(aQ.appMessage,{level:"error",message:an+a3});return true};a0=function(a3){var a7,a6,a9,a4,ba=false,bb,bd=false,bc=false;var a8=(a3.item)?a3.item.model:this.$.managedDataChooser.openItem;if(a3.dataTransfer.files&&(a3.dataTransfer.files.length>0)||a3.dataTransfer.types&&a3.dataTransfer.types.contains&&a3.dataTransfer.types.contains("Files")||a3.dataTransfer.items&&a3.dataTransfer.items.length>0&&a3.dataTransfer.items[0].kind==="file"){ba=true}else{bb=this.$.currentDragObject.getValue();if(bb){bc=true;if(Array.isArray(bb)){ba=true;for(var a5=0;a5<bb.length;a5++){a7=bb[a5];a9=a7.modelSource;a4=a7.model;if((a9===aV)&&a4){if(a4.station&&a4.station.length>0){if(a4.type==="execdir"){ba=false;bd=true}else{if((a4.type==="folder")&&((a8.type==="document")||(a8.type==="file"))){ba=false}}}else{ba=false}}}}else{if(bb.length>0){a6=JSON.parse(bb);a9=a6.modelSource;a4=a6.model;if((a9===aV)&&a4){if(a4.station&&a4.station.length>0){if(a4.type==="execdir"){ba=false;bd=true}else{if((a4.type==="folder")&&((a8.type==="document")||(a8.type==="file"))){ba=false}else{ba=true}}}}}}}}if(!this.$.dashboard.isInDashboard()){a3.dataTransfer.dropEffect=ba?"copy":"none"}else{if(bd){a3.dataTransfer.dropEffect=ba?"copy":"none"}else{if(bc){a3.dataTransfer.dropEffect=ba?"copy":"none"}else{a3.dataTransfer.dropEffect="move"}}}};aP=function(a3){var bb,a9,bc,a5,a4,bd,ba=null,bg=null,be,a6=[];bd=a3.item?a3.item.model:this.$.managedDataChooser.openItem;var a7=a3.dataTransfer.getData("text");if(a7&&(typeof a7==="string")){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();try{ba=JSON.parse(a7)}catch(bf){console.log("Unexpected data format")}if(ba){bg=ba.data.items[0]}}if(Array.isArray(this.$.currentDragObject.getValue())){a4=((a3.dataTransfer.files)&&(a3.dataTransfer.files.length>0))?a3.dataTransfer.files[0].name:(this.$.currentDragObject.getValue()&&this.$.currentDragObject.getValue().length>0)?this.$.currentDragObject.getValue()[0].model.name:""}else{a4=((a3.dataTransfer.files)&&(a3.dataTransfer.files.length>0))?a3.dataTransfer.files[0].name:(this.$.currentDragObject.getValue()&&this.$.currentDragObject.getValue().length>0)?JSON.parse(this.$.currentDragObject.getValue()).model.name:""}if(bd.type==="file"&&bd.name!==a4){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();this.fire(aQ.appMessage,{level:"error",message:"Error, you can only add a file with the same name as a new version"})}else{if((a3.dataTransfer.files&&a3.dataTransfer.files.length>0)||(a3.dataTransfer.types&&a3.dataTransfer.types.contains&&a3.dataTransfer.types.contains("Files"))||(a3.dataTransfer.items&&a3.dataTransfer.items.length>0&&a3.dataTransfer.items[0].kind==="file")){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();if(a3.dataTransfer.files.length>1){this.multipleFileUpload=true}else{this.multipleFileUpload=false}for(var a8=0;a8<a3.dataTransfer.files.length;a8++){ad.call(this,a3.dataTransfer.files[a8],a3.item)}}else{if(bg&&(bg.objectType==="Simulation Process"||bg.objectType==="Simulation")){}else{if(bg&&((bg.objectType===m.SIMDOC_V)||(bg.objectType===m.SIMDOC_NV)||(bg.objectType===m.ENODOC_V)||(m.CAE_PART.indexOf(bg.objectType)>-1))){this.addReferencedContent(bg.objectId,bg.displayName,bg.objectType,bg.modified,bg.description)}else{a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();be=this.$.currentDragObject.getValue();if(be&&Array.isArray(be)){for(var a8=0;a8<be.length;a8++){bb=be[a8];bc=bb.modelSource;a5=bb.model;if((bc===aV)&&a5){a6.push(a5)}}w.call(this,a6)}else{if(be&&(be.length>0)){a9=JSON.parse(be);bc=a9.modelSource;a5=a9.model;a6.push(a5);if((bc===aV)&&a5){w.call(this,a6)}}}}}}}};d=function(){this._compassEventSocket=null;this._mdataRemoveDlg=null;var a4=document.getElementsByTagName("ad-mdata-remove-dialog");var a3=[];[].push.apply(a3,a4);a3.forEach(function(a5){a5.parentNode.removeChild(a5)})};z=function(){this.DOM(this).find(au.variable).forEach(function(a3){this.set("globals."+a3.name,a3.getValue())}.bind(this));this.$.managedDataChooser.populateFunction=ak.bind(this);this.$.managedDataChooser.removeFunction=av.bind(this);this.$.managedDataChooser.sortFunction=Q.bind(this);if(this.$.dashboard.isInDashboard()){this.DOM(this.$.player3D).addClass("hidden")}this.multipleFileUpload=false;ay.call(this)};aA=function(){var a5=localStorage["SMAProcAdhoc.preferences.mdataViewMode"],a4,a3;if(a5&&a5.length>0){this.viewMode=a5}if(window.widget){a4="com.ds."+window.widget.id;a3=window.parent}else{a4="compassEventSocket";a3=window.getTopWindow?window.getTopWindow():window}this._compassEventSocket=new aC.Socket(a4);this._compassEventSocket.subscribeServer(r,a3)};aI=function(a3){this.set("globals."+a3.detail.name,a3.detail.value)};i=function(a3){a3.stopPropagation();a3.cancelBubble=true;if(this.$.itemConfigView.isOpen()){V.call(this)}ay.call(this);j.call(this);this.fire(aQ.select,{items:a3.detail.items})};o=function(a4){a4.stopPropagation();a4.cancelBubble=true;if(a4.detail.item.type===u.ADMDataInstance.TYPES.file||a4.detail.item.type===u.ADMDataInstance.TYPES.fileversion){V.call(this)}else{if(a4.detail.item.type===u.ADMDataInstance.TYPES.simulation){this.$.itemConfigView.close();var a3={asset:{dtype:"DesignSight",physicalid:a4.detail.item.modelID,provider:"EV6",proxyurl:null,requiredAuth:null,server:this.globals.mcsBaseURL,serverurl:this.globals.mcsBaseURL},experience:{filename:"DS/3DPlayFullSimulation/3DPlayFullSimulation"}};if(!this.$.dashboard.isInDashboard()){this.$.player.open(a3)}}else{if(this.$.managedDataChooser.openItem===this.$.managedDataChooser.rootItem&&this.$.itemConfigView.isOpen()){this.$.itemConfigView.close()}}}this.fire(aQ.open,{item:a4.detail.item});ay.call(this)};aZ=function(a3){a3.stopPropagation();a3.cancelBubble=true;this.$.addManagedDataMenu.visible=true;return true};H=function(){this.$.spSearch.search()};aU=function(){this.$.getfolderName.value="";this.DOM(this.$.folderName).toggleClass("in");this.DOM(this.$.folderName).addClass("show");this.DOM(this.$.folderName).removeClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden");this.$.getfolderName.focus();this.$.folderSubmitButton.disabled=true};S=function(){this.DOM(this.$.folderName).toggleClass("in");this.DOM(this.$.folderName).removeClass("show");this.DOM(this.$.folderName).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden");if(this.$.getfolderName.value){var a6=new u.ADMDataInstance(),a4=new Date(),a3=this.$.managedDataChooser.openItem;a6.type=u.ADMDataInstance.TYPES.folder;a6.mdType=u.ADMDataInstance.PLMTYPES.folder;a6.modelID="someFolderID";a6.name=this.$.getfolderName.value;a6.lastModified=a4.toJSON();var a5=this.$.managedDataChooser.createItem("ad-multiview-folder");a5.model=a6;a5.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing;a5.modelSource=ar;this.$.managedDataChooser.$.contentPanel.addItem(a5);at.call(this);this.session.createFolder(a3,a6.name,aS.bind(this,a5),X.bind(this,a5))}};ao=function(a4){a4.stopPropagation();a4.cancelBubble=true;this.$.changeEditorMenu.visible=false;this.$.editorSetting.show();var a3=this.session.getEditorPath();if(a3){this.$.editorPath.value=a3}};U=function(a3){a3.stopPropagation();a3.cancelBubble=true;this.$.changeEditorMenu.visible=true};aS=function(a4,a3){a4.model.modelID=a3;this.$.managedDataChooser.openItem.childInstances.push(a4.model);a4.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.ready;a4.modelSource=ar;at.call(this)};X=function(a5,a4,a3){this.$.managedDataChooser.$.contentPanel.removeItem(a5);this.fire(aQ.appMessage,{level:"error",message:aE+a3});this.$.managedDataChooser.refresh(false);console.log("Folder create Failed")};F=function(){this.$.getfolderName.value="";this.DOM(this.$.folderName).toggleClass("in");this.DOM(this.$.folderName).removeClass("show");this.DOM(this.$.folderName).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden")};P=function(){if(this.$.getfolderName.value===""){this.$.folderSubmitButton.disabled=true}else{this.$.folderSubmitButton.disabled=false}};M=function(){this.$.localFileChooser.click()};B=function(){if(this.$.itemConfigView.isOpen()){this.$.itemConfigView.close()}else{V.call(this)}ay.call(this)};W=function(){ay.call(this)};b=function(){var a4=this.$.managedDataChooser.$.contentPanel.selections;if(a4.length!==1){return}var a5=a4[0].model.modelID;var a3={asset:{dtype:"DesignSight",physicalid:a5,provider:"EV6",proxyurl:null,requiredAuth:null,server:this.globals.mcsBaseURL,serverurl:this.globals.mcsBaseURL,title:a4[0].model.name},experience:{filename:"DS/3DPlayFullSimulation/3DPlayFullSimulation"}};if(!this.$.dashboard.isInDashboard()){this.$.player.open(a3)}};aL=function(a3,a4){var a5="Would you like to generate 3DEXPERIENCE results for {SimFileName}?";if(!this.$.simToSOConfig.session){this.$.simToSOConfig.session=this.session}this.$.simToSOConfig.tools=[a3];a3.removeAllInputObjects();a3.addInputObject(a4.model);a3.configuration.setSimFile(a4.model.name);a5=a5.replace("{SimFileName}",a4.model.name);this.$.onCloudSimToSODialog.textContent=a5;this.DOM(this.$.launchSimToSO).toggleClass("in");this.DOM(this.$.launchSimToSO).addClass("show");this.DOM(this.$.launchSimToSO).removeClass("hidden");if(this.session.onCloud){this.DOM(this.$.onPremiseSimToSODialog).addClass("hidden");this.DOM(this.$.onCloudSimToSODialog).addClass("show");this.DOM(this.$.onPremiseSimToSODialog).removeClass("show");this.DOM(this.$.onCloudSimToSODialog).removeClass("hidden");a3.setCloudExecutionConfig("windows",1);a3.server=this.$.stationManager.getDefaultServer().id}else{this.DOM(this.$.onPremiseSimToSODialog).addClass("show");this.DOM(this.$.onCloudSimToSODialog).addClass("hidden");this.DOM(this.$.onPremiseSimToSODialog).removeClass("hidden");this.DOM(this.$.onCloudSimToSODialog).removeClass("show")}this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden")};x=function(){var a4=null;var a3=this.$.managedDataChooser.$.contentPanel.selections;if(a3.length!==1){return}this.session.hiddenTools.forEach(function(a5){if(a5.name==="Hidden_ImportSimulationResultsFromManagedData"){a4=a5}});if(!a4){if(window.widget){window.widget.dispatchEvent("onToggleSpinner")}this.session.toolManager.getToolDefs(true,{onComplete:function(){var a5=this.session.toolManager.findToolDef(af.SMAProcADUI.ADToolManagerSimToSOStrategy.prototype.getAppName(),true);this.session.toolManager.createToolInstance(null,null,a5,"Hidden_ImportSimulationResultsFromManagedData",{onComplete:function(){var a6=null;a6=this.session.addEventListener(af.SMAProcADUI.ADSession.EVENTS.toolsLoaded,function(){this.session.hiddenTools.forEach(function(a7){if(a7.name==="Hidden_ImportSimulationResultsFromManagedData"){a4=a7;a7.server=this.$.stationManager.getInitialServer().id}if(window.widget){window.widget.dispatchEvent("onToggleSpinner")}aL.call(this,a4,a3[0]);this.session.removeEventListener(af.SMAProcADUI.ADSession.EVENTS.toolsLoaded,a6)}.bind(this))}.bind(this));this.session.loadTools()}.bind(this)})}.bind(this)})}else{aL.call(this,a4,a3[0])}};aN=function(a4){if(a4.target.files&&a4.target.files.length>0){if(this.$.managedDataChooser.openItem.type==="file"&&this.$.managedDataChooser.openItem.name!==a4.target.files[0].name){this.fire(aQ.appMessage,{level:"error",message:"Error, you can only add a file with the same name as a new version"})}else{if(a4.target.files.length>1){this.multipleFileUpload=true}else{this.multipleFileUpload=false}for(var a3=0;a3<a4.target.files.length;a3++){ad.call(this,a4.target.files[a3],this.$.managedDataChooser.openItem.type!=="file"&&this.$.managedDataChooser.selections.length===1?this.$.managedDataChooser.selections[0]:false)}}}};ai=function(){var a4=this.session.getEditorPath(),a9=null,a3=function(bb,ba){this.fire(aQ.appMessage,{level:"info",message:ba})}.bind(this),a6=function(bb,ba){this.fire(aQ.appMessage,{level:"info",message:ba});this.$.managedDataChooser.rootItem.loaded=false;this.$.managedDataChooser.refresh(true);if(this.$.itemConfigView.isOpen()){V.call(this)}}.bind(this),a5=function(bb,ba){this.fire(aQ.appMessage,{level:"error",message:ba})}.bind(this),a8=function(){if(undefined===a4||""===a4||" "===a4){this.$.editorSetting.show()}else{a9=this.$.stationManager.getLocalStation();if(a9&&(q.ADStation.STATUS.running===a9.status)){var ba=this.$.managedDataChooser,bg=ba.$.contentPanel.selections[0].model,bf,be=null;if(bg.type===u.ADMDataInstance.TYPES.document){bf=bg._mdObject}else{bf=ba.openItem._mdObject;be={name:bg.name,version:((bg.version!==undefined)?bg.version:0)}}var bb=this.$.stationManager.getServerForStation(q.ADStation.LOCALSTATIONNAME);var bc=bb?bb.id:null;var bd=null;this.session.editFile(bf,be,a4,bc,bd,a3,a6,a5);this.fire(aQ.appMessage,{level:"info",message:aR})}else{this.DOM(this.$.localStationError).toggleClass("in");this.DOM(this.$.localStationError).addClass("show");this.DOM(this.$.localStationError).removeClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).addClass("show");this.DOM(this.$.myModalOverlay).removeClass("hidden")}}},a7=function(){a8.call(this)}.bind(this);a9=this.$.stationManager.getLocalStation();if((!this.$.stationManager.hasRefreshed()||!a9||(q.ADStation.STATUS.running!==a9.status))&&this.session){this.$.stationManager.refresh({onComplete:a7,onFailure:a7,refreshServers:true})}else{a8.call(this)}};aw=function(){this.session.setEditorPath(this.$.editorPath.value);this.$.editorSetting.hide();this.onEditFile()};h=function(){this.DOM(this.$.localStationError).toggleClass("in");this.DOM(this.$.localStationError).removeClass("show");this.DOM(this.$.localStationError).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden")};aH=function(a3){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();a0.call(this,a3);return true};p=function(a4){if(this.$.access.write){aP.call(this,a4);return true}else{if(this.$.dashboard.isInDashboard()){if(document.createEvent&&this.dispatchEvent){var a3=document.createEvent("HTMLEvents");a3.initEvent("onNoWriteAccess",true,true);this.dispatchEvent(a3)}else{if(this.fireEvent){this.fireEvent("onNoWriteAccess")}}}return false}};ag=function(a3){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();this.session.editComment(this.$.managedDataChooser.selectedItems[0])};aO=function(a4){var a3,a5;a3=a4.split("~");a5=a3.shift();return a5};aD=function(a4){a4.stopPropagation();a4.cancelBubble=true;a4.preventDefault();var a5=this.$.managedDataChooser.selections;for(var a3=0;a3<a5.length;a3++){this.session.downloadFile(a5[a3].model)}};aW=function(a3){var ba=false;a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();if(window.widget){window.widget.dispatchEvent("onToggleSpinner")}var a6,a4=new Date(),a7,a9=this.$.simToSOConfig.tools[0];if(a9){if(a9.workDir&&a9.workDir.path&&a9.workDir.path.length>0){a6=a9.workDir;a6.lastModified=a4.toJSON()}else{a6=new l.ADExecDir();a6.name=a9.name+" "+a4.toLocaleString().replace(/\u200E/g,"").replace(/\u200F/g,"");a6.station=a9.station;a6.lastModified=a4.toJSON();a6.accessDisabled=true;a6.creating=true;a9.waitingForWorkDir=a6;this.$.stationManager.addExecDir(a6)}a6.removeAfterJob=a9.removeWorkDir;if(a6.removeAfterJob){for(a7=0;a7<this.session.tools.length;a7++){if(this.session.tools[a7].workDir===a6){this.session.tools[a7].workDir=null}}}var a5=function(){if(!ba){ba=true;if(window.widget){window.widget.dispatchEvent("onToggleSpinner")}this.$.toolRunner.runTool(a9,a6);this.DOM(this.$.launchSimToSO).toggleClass("in");this.DOM(this.$.launchSimToSO).removeClass("show");this.DOM(this.$.launchSimToSO).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden");this.fire(aQ.appMessage,{level:"info",message:"Starting new job for <strong>"+a9.name+"</strong>",category:"jobStart"})}}.bind(this);if(this.session.hasPendingUpdates()){var bb=function(bc,bd){if(bd){a5()}}.bind(this);var a8=function(){a5()}.bind(this);this.session.flushPendingUpdates(bb,a8)}else{a5()}}};aJ=function(a3){a3.stopPropagation();a3.cancelBubble=true;a3.preventDefault();this.DOM(this.$.launchSimToSO).toggleClass("in");this.DOM(this.$.launchSimToSO).removeClass("show");this.DOM(this.$.launchSimToSO).addClass("hidden");this.DOM(this.$.myModalOverlay).toggleClass("in");this.DOM(this.$.myModalOverlay).removeClass("show");this.DOM(this.$.myModalOverlay).addClass("hidden")};ap=function(){return this.$.managedDataChooser.openItem};aa=function(){return this.$.managedDataChooser.selections};aF=function(){this.$.managedDataChooser.refresh(true);ay.call(this)};t=function(ba,a9,a8,a7){var a4=this.$.managedDataChooser.openItem,a3=null;if(a4){if(a4.type===u.ADMDataInstance.TYPES.folder){a3=a4.modelID}}if(ba){var a6=new u.ADMDataInstance(),a5;if(m.SIMULATION.split(",").indexOf(a8)>-1){a6.type=u.ADMDataInstance.TYPES.simulation;a5=this.$.managedDataChooser.createItem("ad-multiview-simulation")}else{if(m.CAE_PART.split(",").indexOf(a8)>-1){a6.type=u.ADMDataInstance.TYPES.part;a5=this.$.managedDataChooser.createItem("ad-multiview-part")}else{a6.type=u.ADMDataInstance.TYPES.document;a5=this.$.managedDataChooser.createItem("ad-multiview-document")}}a6.mdType=a8;a6.modelID=ba;a6.name=a9?a9:"document";if(a7){a6.lastModified=a7}a6.isReference=true;a6.details.versioned=((a8===m.SIMDOC_V)||(a8===m.ENODOC_V));a5.viewState=af.SMAProcADUI.ADMultiviewItem.VIEWSTATE.initializing;a5.model=a6;a5.modelSource=ar;this.$.managedDataChooser.$.contentPanel.addItem(a5);this.session.addReferencedContent(a6,a3,y.bind(this,a5),v.bind(this,a5));at.call(this)}};af.SMAProcADUI=af.SMAProcADUI||{};af.SMAProcADUI.ADMDataView=az({is:"ad-mdata-view",properties:{globals:{type:Object,value:function(){return{}}},session:{type:Object,value:null,observer:"sessionChanged"},emptyMessage:{type:String,value:""},viewMode:{type:String,value:function(){return af.SMAProcADUI.ADMultiviewPanel.VIEWMODE.icon}},simToSoOff:{type:Boolean,value:false}},created:function(){return d.apply(this,arguments)},ready:function(){return z.apply(this,arguments)},attached:function(){return aA.apply(this,arguments)},onVariableValueChange:function(){return aI.apply(this,arguments)},onSelect:function(){return i.apply(this,arguments)},onOpen:function(){return o.apply(this,arguments)},onAddReferencedContent:function(){return H.apply(this,arguments)},onAddManagedData:function(){return aZ.apply(this,arguments)},onAddNewFolder:function(){return aU.apply(this,arguments)},onUploadLocalFiles:function(){return M.apply(this,arguments)},onConfigureItem:function(){return B.apply(this,arguments)},onConfigureItemClose:function(){return W.apply(this,arguments)},onDragOver:function(){return aH.apply(this,arguments)},onDrop:function(){return p.apply(this,arguments)},onView3DPlay:function(){return b.apply(this,arguments)},onSimToSO:function(){return x.apply(this,arguments)},onLocalFileSelect:function(){return aN.apply(this,arguments)},onEditFile:function(){return ai.apply(this,arguments)},onSetEditor:function(){return aw.apply(this,arguments)},onCloseLocalStationError:function(){return h.apply(this,arguments)},onDownloadFile:function(){return aD.apply(this,arguments)},onSimToSOCancel:function(){return aJ.apply(this,arguments)},onSimToSOAccept:function(){return aW.apply(this,arguments)},onConfirmAddNewFolder:function(){return S.apply(this,arguments)},onCloseFolderName:function(){return F.apply(this,arguments)},onFolderNameChange:function(){return P.apply(this,arguments)},onCommentUpdate:function(){return ag.apply(this,arguments)},onOpenEditorChange:function(){return U.apply(this,arguments)},onModifyEditor:function(){return ao.apply(this,arguments)},getOpenItem:function(){return ap.apply(this,arguments)},getSelections:function(){return aa.apply(this,arguments)},refresh:function(){return aF.apply(this,arguments)},addReferencedContent:function(){return t.apply(this,arguments)},onChange:function(a5){var a3=a5.detail.getSelectedObjects();if(a3&&a3[0]){var a4=a3[0];this.addReferencedContent(a4.objectId,a4.displayName,a4.objectType,a4.modified,a4.description)}},onJobStarted:function(a3){this.fire(aQ.appMessage,{level:"success",message:"Started new job for <strong>"+a3.detail.tool.name+"</strong>",category:"jobstart"});if(a3.detail.execDir){a3.detail.execDir.creating=false}},onJobError:function(a3){if(a3.detail.error===af.SMAProcADUI.ADRun.ERRORS.jobNotStarted){this.fire(aQ.appMessage,{level:"error",message:"Couldn't start a job for <strong>"+a3.detail.tool.name+"</strong>: "+a3.detail.message,category:"jobstart"})}else{if(a3.detail.error===af.SMAProcADUI.ADRun.ERRORS.execDirNotInitialized){this.fire(aQ.appMessage,{level:"success",message:"Started new job for <strong>"+a3.detail.tool.name+"</strong>",category:"jobstart"})}}},sessionChanged:function(){K.call(this)},behaviors:[af.SMAProcSP.SPBase,af.SMAProcADUI.FormatUtilities]})});