/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
(function(d){var a=d.Polymer,h=d.DS;var b=null,e=null,i=null,f=null,g=null,k=null,c=null,j=null,l={disabled:"disabled"};b=function(){if(this.tools.length===0){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).removeClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden")}else{if(this.tools.length>1){this.DOM(this.$.optionsSection).addClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).removeClass("hidden")}else{this.DOM(this.$.optionsSection).removeClass("hidden");this.DOM(this.$.configurationErrorNone).addClass("hidden");this.DOM(this.$.configurationErrorMultiple).addClass("hidden");e.call(this)}}};e=function(){if(this.tools[0]){this._initializing=true;this.$.simFileName.value=this.tools[0].configuration.getSimFile();this._initializing=false;this.$.searchButton.addEventListener("click",f.bind(this));this.$.mdataView.session=this.tools[0].session;if(this.tools[0].session.onCloud){if(this.tools[0].isOnCloud()||this.tools[0].getExecutionConfig().properties.drmMode===null){j.call(this,this.tools[0])}}}};j=function(m){var n=m.getExecutionConfig();if(n.properties.drmMode===null){m.setCloudExecutionConfig("windows",1)}};i=function(){this._initializing=false};f=function(n){n.stopPropagation();n.cancelBubble=true;if(this.$.access.write){this.$.searchContent.show()}else{if(document.createEvent&&this.dispatchEvent){var m=document.createEvent("HTMLEvents");m.initEvent("onNoWriteAccess",true,true);this.dispatchEvent(m)}else{if(this.fireEvent){this.fireEvent("onNoWriteAccess")}}}};k=function(p){p.stopPropagation();p.preventDefault();p.cancelBubble=true;this.$.searchContent.hide();var o;var n=this.$.mdataView.getSelections();var q=this.tools[0].inputObjects;if(n.length>0){for(o=0;o<q.length;o++){this.tools[0].removeInputObject(q[o])}}if(n.length>1&&this.currentSearchText==="input"){n=n.slice(1,1)}for(o=0;o<n.length;o++){var m={type:n[o].model.type,mdType:n[o].model.mdType,name:n[o].model.name};this.tools[0].configuration.setSimFile(n[o].model.name);if(n[o].model.mdType==="fileversion"&&n[o].model.details){m.details=n[o].model.details;m.id=n[o].model.parentInstance?n[o].model.parentInstance.modelID:n[o].model.modelID}else{m.id=n[o].model.modelID}this.tools[0].addInputObject(m);this.$.simFileName.value=m.name}};c=function(m){m.stopPropagation();m.preventDefault();m.cancelBubble=true;this.$.searchContent.hide()};g=function(m){m.stopPropagation();m.cancelBubble=true;if(this.$.mdataView.getSelections().length>0){this.DOM(this.$.addOkButton).removeClass(l.disabled)}else{this.DOM(this.$.addOkButton).addClass(l.disabled)}};h.SMAProcADUI=h.SMAProcADUI||{};h.SMAProcADUI.ADToolConfigSimToSOAS=a({is:"ad-tool-config-simtoso-as",properties:{tools:{type:Object,value:function(){return[]},observer:"toolsChanged"}},ready:function(){return i.apply(this,arguments)},toolsChanged:function(){b.call(this)},onSimFileSelect:function(){return g.apply(this,arguments)},onAddSimAccept:function(){return k.apply(this,arguments)},onAddSimCancel:function(){return c.apply(this,arguments)},behaviors:[h.SMAProcSP.SPBase]})}(this));