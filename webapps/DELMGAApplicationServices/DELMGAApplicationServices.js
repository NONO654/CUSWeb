define("DS/DELMGAApplicationServices/LayoutConfig",[],function(){var a={MANUFACTURING:{row:0,col:0,command:"LeftBlock"},RESOURCE:{row:0,col:1,command:"RightBlock"},ROUTINGS:{row:1,col:0,command:"BottomBlock"}};return a});define("DS/DELMGAApplicationServices/Commands/CommandsService",["UWA/Core","DS/Core/Events","DS/DELPPWServices/CommandsService/CommandsService","DS/DELPPWModelServices/ModelUtils"],function(e,d,a,c){var b=function b(x){var g=[],k=[],w,h=false,s="CommandsService",i=function(z,y){w.notifyApp(z,y)},t=function(z,y){w.toggleModule(z,y)},j=function j(){w.initState()},o=function l(){var B,z,C,A,E,y,D=x.getPlugins("SelectionPlugin");if(!D){x.getLogger().debug(s,"Selection Plugin is not available.");return}B=D.instance.getSelections("CMDS");z=B[0]||[];C=B[1]||[];E=B[2]||[];y=B[3]||[];A=[];w.manageCommandsAvailability(C,A,E,z,y)},m=function p(){if(h===true){h=false;widget.setValue("forceDBModePreferences","false")}else{h=true;widget.setValue("forceDBModePreferences","true")}x.getMediator().notify("refreshAll")},u=function u(){w.manageDocCmdAvailability()},r=function r(y){w.toggleCmdCheckHeaderState(y)},f=function f(){o()};w=new a(x);e.extend(w,{manageConfigurationCommands:function q(z,E,C,B){var D=(E>0),A=(B>0),y;y=(!D&&A);w.setCommandState("DefineFilter",(z&&y));w.setCommandState("EditConfigurationContext",y);w.setEffectivityCmdState("EditVariant",(!z&&y));w.setEffectivityCmdState("EditEvolution",(!z&&y))}});return{onStart:function v(y){g.push(x.addExternalListener("select",f));g.push(x.addExternalListener("toggleCmdCheckHeaderState",r));g.push(x.addExternalListener("actionBarReady",j));g.push(x.addExternalListener("manageDocCmdAvailability",u));k.push(d.subscribe({event:"DELPPWCommands/Edit"},function(){m()}));k.push(d.subscribe({event:"DELPPWCommands/Hide"},function(z){i("Hide",z)}));k.push(d.subscribe({event:"DELPPWCommands/HideAll"},function(z){i("HideAll",z)}));k.push(d.subscribe({event:"DELPPWCommands/Relations"},function(z){t("LINKS",z)}));k.push(d.subscribe({event:"DELPPWCommands/ShowLogPanel"},function(z){i("ShowLogPanel",z)}));k.push(d.subscribe({event:"DELPPWCommands/CreateLink"},function(z){i("CreateLink",z)}));k.push(d.subscribe({event:"DELPPWCommands/CreateInstance"},function(z){i("CreateInstance",z)}));k.push(d.subscribe({event:"DELPPWCommands/CreateLinkOrInstance"},function(z){i("CreateLinkOrInstance",z)}));k.push(d.subscribe({event:"DELPPWCommands/InsertCmd"},function(z){i("InsertCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/DuplicateAdv"},function(z){i("DuplicateAdvCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/Delete"},function(z){i("Delete",z)}));k.push(d.subscribe({event:"DELPPWCommands/DetachInstance"},function(z){i("DetachInstance",z)}));k.push(d.subscribe({event:"DELPPWCommands/SearchAndAddInstanceCommand"},function(z){i("searchAndAddInstance",z)}));k.push(d.subscribe({event:"DELPPWCommands/ShowGraphView"},function(z){t("EGRAPHMOD",z)}));k.push(d.subscribe({event:"DELPPWCommands/ProductFlowCmd"},function(z){t("PRODUCTFLOWMOD",z)}));k.push(d.subscribe({event:"DELPPWCommands/ToggleAuxiliaryView"},function(z){i("toggleAuxPanel",z)}));k.push(d.subscribe({event:"DELPPWCommands/LeftBlock"},function(z){i("LeftBlock",z)}));k.push(d.subscribe({event:"DELPPWCommands/RightBlock"},function(z){i("RightBlock",z)}));k.push(d.subscribe({event:"DELPPWCommands/BottomBlock"},function(z){i("BottomBlock",z)}));k.push(d.subscribe({event:"DELPPWCommands/AttachDocument"},function(z){i("AttachDocumentCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/SearchDocument"},function(z){i("SearchDocumentCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/ManageDocuments"},function(z){i("ManageDocumentsCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/EditViewPreferences"},function(z){i("EditViewPreferencesCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/LayoutPreferences"},function(z){i("LayoutPreferences",z)}));k.push(d.subscribe({event:"DELPPWCommands/ExportCSV"},function(z){i("ExportCSVCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/ExpandAll"},function(z){i("expandAll",z)}));k.push(d.subscribe({event:"DELPPWCommands/RelationalExplorerCmd"},function(z){i("RelationalExplorerCmd",z)}));k.push(d.subscribe({event:"DELPPWCommands/Refresh"},function(z){i("RefreshCmd",z)}));w.onStart(y)},onStop:function n(){var z,y;for(z=0,y=g.length;z<y;z++){x.removeExternalListener(g[z])}g=[];for(z=0,y=k.length;z<y;z++){d.unsubscribe(k[z])}k=[]}}};return b});define("DS/DELMGAApplicationServices/Services",["UWA/Class"],function(b){var a="DS/DELMGAApplicationServices/",d={CommandsService:a+"Commands/CommandsService",LayoutService:a+"LayoutService"};var c=b.singleton({getMap:function e(){return d}});return c});define("DS/DELMGAApplicationServices/LayoutService",["UWA/Core","DS/DELPPWServices/LayoutService/LayoutService","DS/DELMGAApplicationServices/LayoutConfig","DS/UIKIT/Mask"],function(e,d,b,c){var a=function(i){var j=new d(i),g=[],k,m,r,f,h;var q,o;q=function q(){var v,u;if(j.isLayoutBuilt()){return}j.buildView({rows:[{columns:2},{columns:1}],actionBarReady:function t(){if(e.is(u,"array")){u.forEach(function(w){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:w.commandName,cmdState:w.state})})}j.showLayout();c.unmask(widget.body)}});j.removeDockingElement(WUXDockAreaEnum.TopDockArea);j.removeDockingElement(WUXDockAreaEnum.BottomDockArea);v=widget.getViewportDimensions();j.setDockingElement(WUXDockAreaEnum.LeftDockArea,{dockingZoneSize:(v.width)/4,collapseDockingZoneFlag:true});j.setDockingElement(WUXDockAreaEnum.RightDockArea,{dockingZoneSize:(v.width)/4,collapseDockingZoneFlag:true,resizableFlag:true,visibleDockingZoneFlag:false});m=j.buildTreeListAuthoringDom(true);r=j.buildTreeListAuthoringDom(false);f=j.buildTreeListAuthoringDom(false);h=j.buildAuxiliaryViewDom();j.setBlocLayoutContent(b.MANUFACTURING.row,b.MANUFACTURING.col,r);j.setBlocLayoutContent(b.RESOURCE.row,b.RESOURCE.col,f);j.setBlocLayoutContent(b.ROUTINGS.row,b.ROUTINGS.col,m);u=j.setPreferredLayoutOnStartup(b)};o=function o(){g.push(i.addExternalListener(b.MANUFACTURING.command,function u(w){var v=j.isViewShown(b.MANUFACTURING.row,b.MANUFACTURING.col);if((v&&w.state===true)||(!v&&w.state===false)){return}j.toggleView(b.MANUFACTURING.row,b.MANUFACTURING.col,w.state)}));g.push(i.addExternalListener(b.RESOURCE.command,function u(w){var v=j.isViewShown(b.RESOURCE.row,b.RESOURCE.col);if((v&&w.state===true)||(!v&&w.state===false)){return}j.toggleView(b.RESOURCE.row,b.RESOURCE.col,w.state)}));g.push(i.addExternalListener(b.ROUTINGS.command,function u(w){var v=j.isViewShown(b.ROUTINGS.row,b.ROUTINGS.col);if((v&&w.state===true)||(!v&&w.state===false)){return}j.toggleView(b.ROUTINGS.row,b.ROUTINGS.col,w.state)}));g.push(i.addExternalListener("widgetLayoutChanged",function t(){var w,y,v,x;y=k.getPreference("widgetLayoutValues");if(e.is(y)){w=e.Json.decode(y);x=j.setPreferredLayout(w,b);v=x.deferredPromise;v.promise.then(function(){x.columns.forEach(function(z){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:z.commandName,cmdState:z.state})})})}}))};return e.extend(j,{getContainer:function n(t){switch(t){case"layoutContainer":return j.getUIContainer();case"manufacturing":return r;case"resource":return f;case"routings":return m;case"auxiliary":return h;case"alerts":return j.getAlertContainer();case"progressIndicator":return j.getProgressIndContainer();case"none":return e.createElement("div",{"class":"empty-container"});default:i.getLogger().debug("MGA_LayoutService","Invalid side choice: %s",t)}},getLayoutConfig:function p(){return e.clone(b)},onStart:function s(t){k=i.getService("ConfigService");q();o();t()},onStop:function l(){var u,t;for(u=0,t=g.length;u<t;u++){i.removeExternalListener(g[u])}g=[]}})};return a});