define("DS/SMAProcSPSupportTools/SimulationRunner",["DS/WAFData/WAFData"],function(j){var g="x3dPlatformId",a="DS/PlatformAPI/PlatformAPI",h="DS/UWPClientCode/PublicAPI",c="app.urls.myapps",d="/resources/AppsMngt/environment/list";var i=function(n,m){var l=new Error("failed authenticatedFetch");return new Promise(function(q,p){var o=m||{};o.onComplete=function(r,s){q(r)};o.onFailure=function(r){l.originalError=r;p(l)};j.authenticatedRequest(n,o)})};var k=function(){var l=new Error("failed to fetchMyappsUri");return new Promise(function(o,n){var m=null;if(window.ODTServerEnv&&window.ODTServerEnv.url){m=window.ODTServerEnv.url}else{try{m=window.top.myAppsURL}catch(p){m=null}}if(m){o(m)}else{if(window.dscef&&window.dscef.getMyAppsURL){return window.dscef.getMyAppsURL().then(function(q){return q.replace(/\/resources\/AppsMngt$/,"")})}else{require([a,h],function(q){o(q.getApplicationConfiguration(c))},function(q){l.originalError=q;n(l)})}}})};var b=function(){var l=window&&window.widget&&window.widget.getValue&&window.widget.getValue(g)||"OnPremise";f("Selected platform: "+l,l);return k().then(function(m){f("Got myAppUri: "+m,m);return i(m+d,{type:"json"})}).then(function(m){f("Got platforms: "+JSON.stringify(m,null,2),m);var n=m.environments[0].cstorage;return n}).then(function(m){f("Got selected3DSpaceUri: "+m,m);return i(m+"/resources/bps/cspaces?tenant="+l,{type:"json"})}).then(function(m){f("Got collabspaces: "+JSON.stringify(m,null,2),m)})};var f=function(l){if(e.onLog){e.onLog(l)}console.info.apply(console,arguments)};var e={start:b,fetchMyAppUri:k,log:f};return e});define("DS/SMAProcSPSupportTools/SMAProcSPSupportTools",[],function(){return{}});