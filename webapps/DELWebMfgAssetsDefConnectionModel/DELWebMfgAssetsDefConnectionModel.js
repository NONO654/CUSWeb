define("DS/DELWebMfgAssetsDefConnectionModel/ConnectionModel",["UWA/Core","DS/Logger/Logger","DS/DELWebMfgAssetsDefModelServices/AbstractIRPCModel","DS/DELWebMfgAssetsDefReferenceModel/ReferenceModel","DS/DELWebMfgAssetsDefInstanceModel/InstanceModel","DS/DELWebMfgAssetsDefModelServices/ModelUtils","DS/DELWebMfgAssetsDefModelServices/RelObjAttributesUtils"],function(h,c,d,i,g,b,j){var k=d.extend({name:"ConnectionModel",_logger:null,defaults:{},_modelEvents:{onRemove:function(m,q){var s=m.get("from"),r=m.get("to"),n=q.referenceCollection.get(s),o=q.referenceCollection.get(r),p;if(!h.is(n)&&!h.is(o)){if(h.is(s,"array")){s=s[s.length-1]}if(h.is(r,"array")){r=r[r.length-1]}n=q.instanceCollection.get(s);o=q.instanceCollection.get(r)}p=function(u){var t,v,w;v=m.get("PID");w=h.clone(u.getDisplayModelAttr("connectionModelInfo"));if(h.is(w,"array")){for(t=0;t<w.length;++t){if(w[t].connectionID===v){w.splice(t,1);u.setDisplayModel({connectionModelInfo:w});break}}}};if(h.is(n)){p(n)}if(h.is(o)){p(o)}}},urlRoot:function a(){var m=b.getWebServicesURL();if(this._isER){m+="/erconnection"}else{m+="/connection"}return m},setup:function e(m,n){this.listenTo(this,this._modelEvents);if(h.is(b.connectionModelSetup)){b.connectionModelSetup(this,n)}},parse:function f(n,o){var m,p;if(c&&!this._logger){this._logger=c.getLogger(k)}if(h.is(b.connectionModelSetup)){return n}if(h.is(o)&&h.is(o.request)){if(h.is(o.request.method,"string")){p=o.request.method}else{if(h.is(o.request.options)&&h.is(o.request.options.method,"string")){p=o.request.options.method}}if(p==="GET"){n=j._CollectionUtils.parseConnection(n)}else{if(p==="POST"){n=j._CollectionUtils.parseAuthoringConnectionResponse(n,o)}}}else{n=this._parent.apply(this,arguments)}if(h.is(n)&&h.is(n.PID)&&h.is(this.collection)){if(!this.collection.get(n.PID)){if((-1!==n.PID.indexOf("ProductImplementLinkOcc|"))||(-1!==n.PID.indexOf("ProductImplementLink|"))){m=this.collection.findWhere({from:n.from,type:n.type});if(m){this.collection.remove(m)}}}}return n},destroy:function l(){var n,m;if(arguments[0],"object"&&!h.is(b.connectionModelSetup)){m=arguments[0]["onComplete"];n=function n(p,o){j._CollectionUtils.parseAuthoringConnectionResponse(o);if(h.is(m)){m.apply(this,arguments)}};arguments[0]=h.merge({onComplete:n},arguments[0])}return this._parent.apply(this,arguments)},});return k});define("DS/DELWebMfgAssetsDefConnectionModel/ConnectionCollection",["UWA/Core","DS/Logger/Logger","DS/DELWebMfgAssetsDefConnectionModel/ConnectionModel","DS/DELWebMfgAssetsDefModelServices/ModelUtils","DS/DELWebMfgAssetsDefModelServices/AbstractIRPCCollection"],function(f,b,e,c,a){var d=a.extend({name:"ConnectionCollection",_logger:null,_isER:false,model:e,url:function(){var g=c.getWebServicesURL();if(this._isER){g+="/erconnection"}else{g+="/connection"}return g},setup:function(g){var h;if(f.is(b)){this._logger=b.getLogger(d)}if(f.is(g)){h=g.isER;if(f.is(h,"boolean")){this._isER=h}}},useERObjects:function(g){if(f.is(g,"boolean")){this._isER=g}},isER:function(){return this._isER}});return d});